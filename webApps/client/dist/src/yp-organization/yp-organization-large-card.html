<link rel="import"href="../../bower_components/polymer/polymer.html"><link rel="import"href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html"><link rel="import"href="../../bower_components/iron-image/iron-image.html"><link rel="import"href="../../bower_components/iron-media-query/iron-media-query.html"><link rel="import"href="../../bower_components/lite-signal/lite-signal.html"><link rel="import"href="../../bower_components/paper-menu-button/paper-menu-button.html"><link rel="import"href="../../bower_components/paper-listbox/paper-listbox.html"><link rel="import"href="../../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import"href="../../bower_components/paper-material/paper-material.html"><link rel="import"href="../yp-app-globals/yp-app-icons.html"><link rel="import"href="../yp-behaviors/yp-language-behavior.html"><link rel="import"href="../yp-behaviors/access-helpers.html"><link rel="import"href="../yp-behaviors/yp-large-card-behaviors.html"><link rel="import"href="../yp-behaviors/yp-goto-behavior.html"><link rel="import"href="yp-organization-behaviors.html"><link rel="import"href="../yp-behaviors/yp-truncate-behavior.html"><link rel="import"href="../yp-behaviors/yp-media-formats-behavior.html"><body><dom-module id="yp-community-large-card"><template><style include="iron-flex iron-flex-alignment">:host{display:block;@apply --layout-vertical;width:864px;}.communityAccess{padding-bottom:8px;}.description{padding:16px !important;line-height:var(--description-line-height, 1.3);}.stats{@apply --layout-self-center;position:absolute;bottom:0;right:16px;}yp-community-stats{color :#fff;}.community-name{padding:0;padding-bottom:4px;padding-right:1px;margin:0;}iron-image{width:432px;height:243px;}.large-card{background-color:var(--primary-color, #000);color:#fff;height:243px;width:864px;margin-top:16px;margin-bottom:16px;}.description-and-stats{max-width:432px;}.edit{color:#FFF;position:absolute;top:0;right:0;padding-right:0;margin-right:0;}.contentContainer{@apply --layout-horizontal;}.description-and-stats{padding-bottom:32px;}@media (max-width: 900px){:host{width:432px;}.large-card{width:432px;height:486px;}}@media (max-width: 480px){:host{width:306px;}.large-card{width:306px;height:486px;}iron-image{width:216px;height:122px;}}[hidden]{display:none !important;}</style><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><iron-media-query query="(max-width: 480px)"query-matches="{{phoneSize}}"></iron-media-query><template is="dom-if"if="[[community]]"><paper-material id="card"elevation="5"animated=""class="large-card"><div class="contentContainer layout horizontal wrap"><template is="dom-if"if="[[phoneSize]]"><div><iron-image class="image"sizing="cover"src$="[[communityLogoImagePath]]"></iron-image></div></template><template is="dom-if"if="[[!phoneSize]]"><iron-image class="image"sizing="contain"src$="[[communityLogoImagePath]]"></iron-image></template><div class="layout vertical description-and-stats"><div class="description"><h2 class="community-name">[[communityNameFull]]</h2><div class="communityAccess">[[_communityAccessText(community.access)]]</div><div>[[communityDescriptionFull]]</div></div></div><yp-community-stats class="stats"community="[[community]]"></yp-community-stats><paper-menu-button class="edit"hidden$="[[!checkCommunityAccess(community)]]"><paper-icon-button aria-label$="[[t('openOrganizationMenu')]]"icon="more-vert"slot="dropdown-trigger"></paper-icon-button><paper-listbox slot="dropdown-content"on-iron-select="_menuSelection"><paper-item id="editMenuItem">[[t('community.edit')]]</paper-item><paper-item id="deleteMenuItem">[[t('community.delete')]]</paper-item></paper-listbox></paper-menu-button></div></paper-material></template></template><script>Polymer({is:"yp-community-large-card",properties:{phoneSize:{type:Boolean},community:{type:Object}},behaviors:[Polymer.ypLanguageBehavior,Polymer.CommunityBehaviors,Polymer.LargeCardBehaviors,Polymer.AccessHelpers,Polymer.ypGotoBehavior,Polymer.ypTruncateBehavior,Polymer.ypMediaFormatsBehavior],_communityAccessText:function(e){switch(e){case 0:return this.t("community.public");case 1:return this.t("community.closed");case 2:return this.t("community.secret")}},_menuSelection:function(e,t){"editMenuItem"==t.item.id?this._openEdit():"deleteMenuItem"==t.item.id&&this._openDelete(),this.$$("paper-listbox").select(null)},_openDelete:function(){Polymer.dom(document).querySelector("yp-app").getDialogAsync("apiActionDialog",function(e){e.setup("/api/communities/"+this.community.id,this.t("community.deleteConfirmation"),this._onDeleted.bind(this)),e.open()}.bind(this))},_openEdit:function(){Polymer.dom(document).querySelector("yp-app").getDialogAsync("communityEdit",function(e){e.setup(this.community,!1,this._refresh.bind(this)),e.open("edit",{communityId:this.community.id})}.bind(this))},_onDeleted:function(){this.redirectTo("/domain/"+this.community.domain_id)},_refresh:function(e){e&&this.set("community",e),this.fire("update-community")}})</script></dom-module>