<link rel="import"href="../../../bower_components/polymer/polymer.html"><link rel="import"href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html"><body><dom-module id="yp-ziggeo-record-dialog"><template></template><script>Polymer({is:"yp-ziggeo-record-dialog",properties:{recorder:{type:Object},callbackElement:{type:Object},timelimit:{type:Number,value:void 0}},_createRecorder:function(){this.recorder||ziggeoApp.on("ready",function(){var e=this._videoWidth(),i=this._videoHeight(),t=Math.min(window.innerWidth,1280),r=Math.min(window.innerHeight-64,780),n=window.innerHeight<window.innerWidth?"landscape":"portrait";this.recorder=new ZiggeoApi.V2.PopupRecorder({element:this.$.ziggeoRecorder,attrs:{recordingwidth:e,recordingheight:i,height:r,width:t,theme:"modern",themecolor:"red",orientation:n,timelimit:this.timelimit,allowcancel:!0}}),this.recorder.on("processed",this._recordingFinished.bind(this)),this.recorder.activate()}.bind(this))},_videoHeight:function(){return window.innerHeight<window.innerWidth?720:1280},_videoWidth:function(){return window.innerHeight<window.innerWidth?1280:720},_recordingFinished:function(){this.callbackElement.fire("success",{videoId:this.recorder.get("video")}),this.async(function(){this.recorder=void 0}),this.recorder.destroy()},open:function(e){this.set("callbackElement",e.callbackElement),e.timelimit&&this.set("timelimit",parseInt(e.timelimit)),this._createRecorder()}})</script></dom-module>