import{n as t,t as e,g as i,x as o,T as a,Y as s}from"./Bc2DVV41.js";var r=function(t,e,i,o){for(var a,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o,n=t.length-1;n>=0;n--)(a=t[n])&&(r=(s<3?a(r):s>3?a(e,i,r):a(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};let n=class extends i{constructor(){super(...arguments),this.new=!1,this.action="/images"}updated(t){super.updated(t),t.has("image")&&this._imageChanged(),t.has("post")&&this._postChanged()}render(){return o`
      <yp-edit-dialog
        doubleWidth
        id="editDialog"
        icon="photo_camera"
        .action="${this.action}"
        .title="${this.editHeaderText}"
        .method="${this.method}"
        .saveText="${this.saveText}"
        .nextActionText="${this.t("next")}"
        .toastText="${this.snackbarText}"
        .params="${this.params}">
        ${this.image?o`
              <div class="layout vertical center-center">
                <yp-file-upload
                  id="imageFileUpload"
                  raised
                  .buttonText="${this.t("image.upload")}"
                  buttonIcon="photo_camera"
                  method="POST"
                  @success="${this._imageUploaded}">
                </yp-file-upload>
              </div>

              <md-outlined-text-field
                id="photographerName"
                name="photographerName"
                type="text"
                .label="${this.t("post.photographerName")}"
                .value="${this.image.photographer_name||""}"
                maxlength="60"
                char-counter="">
              </-outlined-text-field>

              <md-outlined-text-field
              type="textarea"
                id="description"
                required
                minlength="1"
                name="description"
                .value="${this.image.description||""}"
                .label="${this.t("post.description")}"
                charCounter
                rows="2"
                maxrows="5"
                maxlength="200">
              </md-outlined-text-field>

              <input
                type="hidden"
                name="uploadedPostUserImageId"
                .value="${this.uploadedPostUserImageId}" />

              <input
                type="hidden"
                name="oldUploadedPostUserImageId"
                .value="${this.oldUploadedPostUserImageId}" />
            `:a}
      </yp-edit-dialog>
    `}_postChanged(){this.post&&(this.$$("#imageFileUpload").target="/api/images?itemType=post-user-image&postId="+this.post.id)}connectedCallback(){super.connectedCallback(),this.addListener("yp-form-invalid",this._formInvalid)}disconnectedCallback(){super.disconnectedCallback(),this.removeListener("yp-form-invalid",this._formInvalid)}_imageChanged(){this.image&&(this.oldUploadedPostUserImageId=this.image.id)}_formInvalid(){}_imageUploaded(t){const e=JSON.parse(t.detail.xhr.response);this.uploadedPostUserImageId=e.id}clear(){this.uploadedPostUserImageId=void 0,this.$$("#imageFileUpload").clear()}setup(t,e,i,o){this.image=e||{description:"",photographerName:""},this.post=t||void 0,this.new=i,this.refreshFunction=o,this.setupTranslation()}setupTranslation(){this.new?(this.editHeaderText=this.t("post.newPhoto"),this.snackbarText=this.t("post.photo.toast.added")):(this.editHeaderText=this.t("post.photoUpdate"),this.snackbarText=this.t("post.photo.toast.updated"))}};r([t({type:Object})],n.prototype,"image",void 0),r([t({type:Object})],n.prototype,"post",void 0),r([t({type:Boolean})],n.prototype,"new",void 0),r([t({type:String})],n.prototype,"action",void 0),r([t({type:Number})],n.prototype,"uploadedPostUserImageId",void 0),r([t({type:Number})],n.prototype,"oldUploadedPostUserImageId",void 0),n=r([e("yp-post-user-image-edit")],n);const l=(t,e,i)=>{null==i?t.removeAttribute(e):t.setAttribute(e,i)},h=(t,e,i)=>{i?t.setAttribute(e,""):t.removeAttribute(e)};var d;const c=t=>t.nodeType===Node.ELEMENT_NODE&&t.nodeName.startsWith("SHARE-TARGET-")&&!t.nodeName.startsWith("SHARE-TARGET-PRESET-"),p=t=>t.nodeType===Node.ELEMENT_NODE&&t.nodeName.startsWith("SHARE-TARGET-PRESET-"),u=t=>{const e=t;return"string"==typeof e.displayName&&"string"==typeof e.color&&"string"==typeof e.icon&&"function"==typeof e.share};class g extends HTMLElement{get opened(){return this.hasAttribute("opened")}set opened(t){h(this,"opened",t)}get dialogTitle(){return this.getAttribute("dialog-title")}set dialogTitle(t){l(this,"dialog-title",t)}get copyHint(){return this.getAttribute("copy-hint")}set copyHint(t){l(this,"copy-hint",t)}get text(){return this.getAttribute("text")}set text(t){l(this,"text",t)}get title(){return this.getAttribute("title")}set title(t){l(this,"title",t)}get url(){return this.getAttribute("url")}set url(t){l(this,"url",t)}get image(){return this.getAttribute("image")}set image(t){l(this,"image",t)}get noBackdrop(){return this.hasAttribute("no-backdrop")}set noBackdrop(t){h(this,"opened",t)}get handle(){return this.getAttribute("handle")}set handle(t){l(this,"handle",t)}get targets(){return this.t}constructor(){super(),this.t=[],this.i=Promise.resolve(void 0),this.o="#dialog,#handle{background:var(--sm-background-color,#ece6f0)}:host{font-family:'Google Sans',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';position:fixed;top:0;left:0;width:100%;height:100%;max-height:100%;z-index:-1;will-change:z-index;transition:z-index .3s step-end;overflow-y:auto;display:none}:host([opened]){z-index:9999;transition:z-index .3s step-start}*{box-sizing:border-box}#backdrop{position:fixed;top:0;left:0;width:100%;height:100%;opacity:0;background:var(--sm-backdrop-color,#000);will-change:opacity;transition:opacity .3s cubic-bezier(.4,0,1,1);cursor:pointer;z-index:-1}#dialog,.target{will-change:transform}:host([opened]) #backdrop{opacity:.6;transition:opacity .3s cubic-bezier(0,0,.2,1)}:host([no-backdrop]) #backdrop{display:none}#dialog{margin:100vh auto 0;width:100%;max-width:640px;transform:translateY(100vh);transition:transform .3s cubic-bezier(.4,0,1,1);border-radius:16px 16px 0 0}:host([opened]) #dialog{transform:translateY(0);transition:transform .3s cubic-bezier(0,0,.2,1)}#handle{position:sticky;top:0;margin:0 auto -20px;padding:8px 16px;width:96px;border-radius:0 0 8px 8px;z-index:1}:host([handle=never]) #handle{display:none}@media (pointer:fine){:host([handle=auto]) #handle{display:none}}#handle::after{content:'';display:block;width:64px;height:4px;border-radius:2px;background:var(--sm-handle-color,#79747e);margin:auto}hr{margin:0 16px;border:1px solid var(--sm-divider-color,#c4c7c5)}#title{color:var(--sm-title-color,#1c1b1f);font-weight:500;font-size:18px;margin:0;padding:16px 16px 0}#clipboard-container{display:flex;min-height:72px;max-height:192px;align-items:center;margin:16px;padding:12px 8px;border-radius:16px;gap:8px;background:var(--sm-clipboard-background-color,#e6e0e9)}#clipboard-container>img{flex:0;width:100%;height:100%;max-width:192px;max-height:144px}#clipboard-container>pre{flex:1;font-family:inherit;color:var(--sm-preview-color,#49454e);margin:0;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}:host:not([image]) #clipboard-container>img,:host:not([title]):not([text]):not([url]) #clipboard-container>pre{display:none}#clipboard-container>button{flex:0;padding:0}#targets-container{display:flex;flex-wrap:wrap;justify-content:center;padding:12px}.target{padding:12px;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;appearance:none;cursor:pointer;border:none;outline:0;background:0 0;font-family:inherit;transition:transform .3s}.target:hover{transform:scale(1.05)}.clipboard-icon,.icon{position:relative;border-radius:50%}.icon{width:42px;height:42px;padding:12px;fill:#fff}.clipboard-icon{width:36px;height:36px;padding:8px;fill:var(--sm-preview-color,#49454e)}.clipboard-icon::after,.clipboard-icon::before,.icon::after,.icon::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;background:var(--sm-ripple-color,#fff);opacity:.3;will-change:transform;transition:transform .3s;transform:scale(0)}.clipboard-icon::after,.icon::after{opacity:.4}.target:active .clipboard-icon::after,.target:active .icon::after,.target:focus .clipboard-icon::before,.target:focus .icon::before{transform:scale(1)}.hint,.label{width:72px;font-weight:400;text-align:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.label{padding-top:10px;color:var(--sm-labels-color,#1c1b1f);font-size:14px}.hint{padding-top:4px;color:var(--sm-hint-color,#49454e);font-size:12px}slot{display:none}",this.h=document.createElement("template"),this.h.innerHTML=(g.l?"":`<style>${this.o}</style>`)+'<div id="backdrop"part="backdrop"tabindex="-1"></div><div id="dialog"part="dialog"aria-labelledby="title"role="dialog"><div id="handle"></div><h2 id="title"part="title"></h2><div id="clipboard-container"><img id="clipboard-image-preview"><pre id="clipboard-preview"></pre><button aria-label="Copy"class="target"id="clipboard"><div class="clipboard-icon"><svg viewBox="0 0 256 256"><path d="M180 233H41V70H17v164a23 23 0 0024 22h139zm36-24a23 23 0 0023-23V23v-1a23 23 0 00-24-22H87a23 23 0 00-23 23v163a23 23 0 0023 23h128zm-1-23H87V23h128z"/></svg></div></button></div><hr><div id="targets-container"></div></div><slot></slot>',this.shadowRoot||(this.attachShadow({mode:"open"}),g.l&&(g.stylesheet=new CSSStyleSheet,this.shadowRoot.adoptedStyleSheets=[g.stylesheet]),this.shadowRoot.appendChild(this.h.content.cloneNode(!0)))}async share({text:t=this.text,title:e=this.title,url:i=this.url,image:o=this.image}={}){if(this.text=t,this.title=e,this.url=i,this.image=o,!navigator.share)return this.p();try{const t=await this.i;await navigator.share({text:this.text||void 0,title:this.title||void 0,url:this.url||void 0,files:t?[t]:void 0}),this.opened=!1,["share","close"].forEach((t=>this.u(t,{origin:"native"})))}catch(t){if("AbortError"!==t.name)return this.p();this.u("close",{origin:"native"})}}connectedCallback(){var t,e;g.l&&g.stylesheet&&0===g.stylesheet.cssRules.length&&g.stylesheet.replace(this.o),null===this.text&&(this.text=(null===(t=document.querySelector("meta[name=description]"))||void 0===t?void 0:t.content)||""),null===this.title&&(this.title=document.title||""),null===this.url&&(this.url=(null===(e=document.querySelector("link[rel=canonical]"))||void 0===e?void 0:e.href)||window.location.href),this.dialogTitle||(this.dialogTitle="Share"),this.copyHint||(this.copyHint="Copy"),this.handle||(this.handle="auto"),this.m=this.shadowRoot.querySelector("#backdrop"),this.v=this.shadowRoot.querySelector("#dialog"),this.k=this.shadowRoot.querySelector("#title"),this.k.textContent=this.dialogTitle,this.S=this.shadowRoot.querySelector("#targets-container"),this.$=this.shadowRoot.querySelector("#clipboard-image-preview"),this.T=this.shadowRoot.querySelector("#clipboard-preview"),this.C=this.shadowRoot.querySelector(".target#clipboard");const i=[...this.title?[this.title]:[],...this.text?[this.text]:[],...this.url?[this.url]:[]];if(this.T.textContent=i.join("\n"),navigator.clipboard){const t=this.shadowRoot.querySelector("#clipboard");t.addEventListener("click",(async()=>{const t=i.join("\n\n");try{const e=await this.i;await this.j(t,e),this.u("share",{target:"clipboard",origin:"fallback"})}catch(t){this.dispatchEvent(new ErrorEvent("error",{message:"Unable to copy to clipboard",error:t}))}this.H()})),this.R=t}else{const t=this.shadowRoot.querySelector("#clipboard-container");t.parentNode.removeChild(t)}const o=this.shadowRoot.querySelector("slot");o.addEventListener("slotchange",(async()=>{const t=o.assignedNodes({flatten:!0}),e=[...t.filter(c),...t.filter(p).flatMap((t=>Array.from(t.children)))].filter(u);await Promise.all(e.map((t=>customElements.whenDefined(t.nodeName.toLowerCase())))),this.t=e,this._()}))}attributeChangedCallback(t,e,i){if(e!==i)switch(t){case"dialog-title":this.k&&(this.k.textContent=i);break;case"copy-hint":this.C&&this.C.setAttribute("aria-label",i);break;case"opened":null===i?this.H():this.share();break;case"text":case"title":case"url":this.T&&(this.T.textContent=[...this.title?[this.title]:[],...this.text?[this.text]:[],...this.url?[this.url]:[]].join("\n"));break;case"image":try{const t=new URL(i,window.location.href);this.$&&(this.$.src=t.href),this.i=this.A(t).catch((()=>{}))}catch(t){this.$&&(this.$.src=""),this.i=Promise.resolve(void 0)}}}j(t,e){return navigator.clipboard.write?navigator.clipboard.write([new ClipboardItem(Object.assign(Object.assign({},t&&{"text/plain":new Blob([t],{type:"text/plain"})}),e&&{[e.type]:e}))]):navigator.clipboard.writeText(t)}async A(t){const e=await fetch(t),i=await e.blob();return new File([i],t.pathname.split("/").pop(),{type:i.type})}_(){this.S&&(this.S.innerHTML="",this.t.forEach(((t,e)=>{const{nodeName:i,color:o,outline:a,icon:s,displayName:r,hint:n}=t,l=this.P(a||o),h=i.slice(13).toLowerCase(),d=document.createElement("button");d.className="target",d.id=h,d.title=`${r}${n?` ${n}`:""}`,d.setAttribute("part","target-button"),d.addEventListener("click",(()=>{t.share(this),this.u("share",{target:h,origin:"fallback"}),this.H()}));const c=document.createElement("div");c.className="icon",c.innerHTML=`<svg viewBox="0 0 256 256" fill="#${l}" ${a?`stroke="#${a}" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"`:""}><path d="${s}"/></svg>`,c.style.background=`#${o}`,c.setAttribute("part","target-icon"),d.appendChild(c);const p=document.createElement("div");if(p.className="label",p.textContent=r,p.setAttribute("part","target-label"),d.appendChild(p),n){const t=document.createElement("div");t.className="hint",t.textContent=n,d.appendChild(t)}this.S.appendChild(d),navigator.clipboard||0!==e||(this.R=d),e===this.t.length-1&&(this.U=d)})))}openWindow(t,e={},i){const o=Object.entries(e);return window.open(`${t}${o.length>0?`?${new URLSearchParams(o.reduce(((t,[e,i])=>Object.assign(Object.assign({},t),void 0!==i&&{[e]:`${i}`})),{})).toString()}`:""}`,i?"_self":"_blank",`width=${screen.width/2},height=${screen.height/2},left=${screen.width/4},top=${screen.height/4},menubar=0,status=0,titlebar=0,toolbar=0`)}P(t){const e=3===t.length?t.repeat(2):t,[i,o,a]=e.match(/.{2}/g).map((t=>parseInt(t,16)));return.299*i+.587*o+.114*a<=186?"fff":"000"}u(t,e){return this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0,detail:e}))}p(){return new Promise(((t,e)=>{var i;this.B=document.activeElement,this.style.display="block",null===(i=this.R)||void 0===i||i.focus(),this.scrollTop=Math.max(window.innerHeight/2,window.innerHeight-this.v.offsetHeight),this.opened=!0,this.m.addEventListener("click",this.H.bind(this)),this.addEventListener("scroll",this.O.bind(this)),this.addEventListener("keydown",this.F.bind(this)),this.addEventListener("share",(()=>t()),{once:!0}),this.addEventListener("error",(()=>e()),{once:!0})}))}H(){this.m.removeEventListener("click",this.H),this.removeEventListener("scroll",this.O),this.opened=!1,this.scroll({behavior:"smooth",top:0}),this.B&&(this.B.focus(),this.B=null),setTimeout((()=>{this.style.display="none",this.u("close",{origin:"fallback"})}),300)}O(){this.scrollTop<80&&this.H()}F(t){switch(t.key){case"Escape":this.H();break;case"Tab":if(this.t.length<2){t.preventDefault();break}const e=this.shadowRoot.activeElement||document.activeElement;t.shiftKey&&e===this.R?(t.preventDefault(),this.U.focus()):t.shiftKey||e!==this.U||(t.preventDefault(),this.R.focus())}}}g.observedAttributes=["dialog-title","copy-hint","opened","text","title","url","image","no-backdrop","handle"],g.l="function"==typeof(null===(d=globalThis.CSSStyleSheet)||void 0===d?void 0:d.prototype.replace),customElements.define("share-menu",g);let m=class extends HTMLElement{constructor(){super(...arguments),this.displayName="Facebook",this.color="3b5998",this.icon="M94 50v35H68v43h26v128h53V128h36l5-43h-41V55c0-4 6-10 12-10h29V0h-40C93 0 94 43 94 50z"}get appId(){return this.getAttribute("app-id")}set appId(t){l(this,"app-id",t)}get redirectUri(){return this.getAttribute("redirect-uri")}set redirectUri(t){l(this,"redirect-uri",t)}share(t){window.FB?window.FB.ui({method:"share",href:t.url,quote:`${t.title}\n${t.text}`}):this.appId?t.openWindow("https://www.facebook.com/dialog/share",{app_id:this.appId,display:"popup",href:t.url,quote:`${t.title}\n${t.text}`,redirect_uri:this.redirectUri||void 0}):t.openWindow("https://www.facebook.com/sharer.php",{u:t.url})}};customElements.define("share-target-facebook",m);class b extends HTMLElement{constructor(){super(...arguments),this.displayName="Email",this.color="ffa930",this.icon="M230 26H26A26 26 0 0 0 0 51v154a26 26 0 0 0 26 25h204a26 26 0 0 0 26-25V51a26 26 0 0 0-26-25zm0 51l-102 64L26 77V51l102 64 102-64z"}share(t){t.openWindow("mailto:",{subject:t.title,body:`${t.text}\n\n${t.url}`},!0)}}customElements.define("share-target-email",b);let v=class extends HTMLElement{constructor(){super(...arguments),this.displayName="WhatsApp",this.color="25d366",this.icon="M256 125c0 69-56 124-126 124a126 126 0 0 1-60-15L0 256l23-67a123 123 0 0 1-18-64 125 125 0 0 1 251 0zM130 20C72 20 25 67 25 125a104 104 0 0 0 20 61l-13 39 40-13a106 106 0 0 0 58 18c59 0 106-47 106-105S189 20 130 20zm64 133l-6-3-21-10c-3-1-5-2-7 1l-10 12c-2 2-3 3-6 1s-13-5-25-15a92 92 0 0 1-17-21c-2-3-1-5 1-6l5-6a20 20 0 0 0 3-5 6 6 0 0 0-1-5l-9-23c-2-6-5-5-7-5h-6a11 11 0 0 0-8 4c-3 3-11 10-11 25s11 30 13 32 21 34 52 46 32 8 37 7 18-7 21-14 3-13 2-15z"}share(t){t.openWindow("https://api.whatsapp.com/send",{text:`*${t.title}*\n\n${t.text}\n\n${t.url}`})}};customElements.define("share-target-whatsapp",v);class f extends HTMLElement{constructor(){super(...arguments),this.displayName="LinkedIn",this.color="0077b5",this.icon="M256 156v94h-55v-88c0-22-8-37-28-37-15 0-24 10-28 20l-2 13v92H88V85h55v24c8-12 21-28 50-28 36 0 63 24 63 75zM31 6C12 6 0 18 0 34s12 29 30 29h1c19 0 31-13 31-29C61 18 50 6 31 6zM3 250h55V85H3z"}share(t){t.openWindow("https://www.linkedin.com/sharing/share-offsite",{url:t.url})}}customElements.define("share-target-linkedin",f);var y=function(t,e,i,o){for(var a,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o,n=t.length-1;n>=0;n--)(a=t[n])&&(r=(s<3?a(r):s>3?a(e,i,r):a(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};let x=class extends s{render(){return o`
      <share-menu
        class="shareIcon"
        id="shareButton"
        @close="${this.haveSharedContentCallback}"
        .title="${this.label||""}"
        .url="${this.url||""}"
        .image="${this.image||""}"
      >
        <share-target-email></share-target-email>
        <share-target-facebook></share-target-facebook>
        <share-target-twitter></share-target-twitter>
        <share-target-whatsapp></share-target-whatsapp>
        <share-target-linkedin></share-target-linkedin>
      </share-menu>
    `}async open(t,e,i,o){this.url=t,this.label=e,this.haveSharedContentCallback=o,this.image=i,this.requestUpdate(),await this.updateComplete,this.$$("#shareButton").share()}};y([t({type:Object})],x.prototype,"haveSharedContentCallback",void 0),y([t({type:String})],x.prototype,"url",void 0),y([t({type:String})],x.prototype,"image",void 0),y([t({type:String})],x.prototype,"label",void 0),x=y([e("yp-share-dialog")],x);
