{"version":3,"file":"yp-organization-edit.js","sourceRoot":"","sources":["../../src/admin/yp-organization-edit.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, LitElement, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\n\nimport \"@material/web/textfield/outlined-text-field.js\";\n\nimport \"../yp-file-upload/yp-file-upload.js\";\nimport \"../yp-edit-dialog/yp-edit-dialog.js\";\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\nimport { YpFileUpload } from \"../yp-file-upload/yp-file-upload.js\";\nimport { YpEditBase } from \"../common/yp-edit-base.js\";\n\n@customElement(\"yp-organization-edit\")\nexport class YpOrganizationEdit extends YpEditBase {\n  @property({ type: Object })\n  organization: YpOrganizationData | undefined;\n\n  @property({ type: String })\n  organizationAccess: string = \"public\";\n\n  @property({ type: Number })\n  domainId: number | undefined;\n\n  @property({ type: String })\n  action: string = \"/organizations\";\n\n  @property({ type: Number })\n  override uploadedLogoImageId: number | undefined;\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          display: block;\n        }\n\n        .additionalSettings {\n          padding-top: 16px;\n        }\n\n        md-outlined-text-field {\n          margin-bottom: 16px;\n        }\n\n        .half {\n          width: 50%;\n        }\n      `,\n    ];\n  }\n\n  override connectedCallback(): void {\n    super.connectedCallback();\n    this.action = `/organizations/${this.domainId}`;\n  }\n\n  override render() {\n    return html`\n      <yp-edit-dialog\n        id=\"editDialog\"\n        .title=\"${this.editHeaderText!}\"\n        icon=\"business-center\"\n        .action=\"${this.action}\"\n        method=\"${this.method}\"\n        .saveText=\"${this.saveText}\"\n        .snackbarText=\"${this.snackbarText}\"\n      >\n        <h2 slot=\"h2\">${this.editHeaderText}</h2>\n\n        <div class=\"layout vertical\">\n          <md-outlined-text-field\n            id=\"name\"\n            name=\"name\"\n            type=\"text\"\n            label=\"${this.t(\"name\")}\"\n            .value=\"${this.organization?.name || \"\"}\"\n            maxlength=\"60\"\n            charCounter\n            class=\"mainInput\"\n          ></md-outlined-text-field>\n\n          <md-outlined-text-field\n            type=\"textarea\"\n            id=\"description\"\n            name=\"description\"\n            .value=\"${this.organization?.description || \"\"}\"\n            label=\"${this.t(\"description\")}\"\n            charCounter\n            rows=\"2\"\n            max-rows=\"5\"\n            maxlength=\"300\"\n            class=\"mainInput\"\n          ></md-outlined-text-field>\n\n          <md-outlined-text-field\n            id=\"website\"\n            name=\"website\"\n            type=\"text\"\n            label=\"${this.t(\"website\")}\"\n            .value=\"${this.organization?.website || \"\"}\"\n            maxlength=\"256\"\n            charCounter\n            class=\"mainInput\"\n          ></md-outlined-text-field>\n        </div>\n\n        <div class=\"layout horizontal center-center\">\n          <div class=\"layout vertical additionalSettings half\">\n            <yp-file-upload\n              id=\"logoImageUpload\"\n              raised\n              buttonIcon=\"photo_camera\"\n              .buttonText=\"${this.t(\"image.logo.upload\")}\"\n              target=\"/api/images?itemType=organization-logo\"\n              method=\"POST\"\n              @success=\"${this._logoImageUploaded}\"\n            >\n            </yp-file-upload>\n          </div>\n        </div>\n\n        ${this.uploadedLogoImageId\n          ? html` <input\n              type=\"hidden\"\n              name=\"uploadedLogoImageId\"\n              .value=\"${this.uploadedLogoImageId}\"\n            />`\n          : nothing}\n      </yp-edit-dialog>\n    `;\n  }\n\n  clear() {\n    this.organization = { id: -1, name: \"\", description: \"\", website: \"\" };\n    this.uploadedLogoImageId = undefined;\n    (this.$$(\"#logoImageUpload\") as YpFileUpload).clear();\n  }\n\n  setup(\n    organization: YpOrganizationData | undefined,\n    newNotEdit: boolean,\n    refreshFunction: Function\n  ) {\n    this.clear();\n    if (!organization) {\n      this.organization = { id: -1, name: \"\", description: \"\" };\n      this.action = `/organizations/${this.domainId}`;\n    } else {\n      this.organization = organization;\n      this.action = `/organizations/${this.organization!.id}`;\n    }\n    this.new = newNotEdit;\n    this.refreshFunction = refreshFunction;\n    this.setupTranslation();\n  }\n\n  setupTranslation() {\n    if (this.new) {\n      this.editHeaderText = this.t(\"organization.new\");\n      this.snackbarText = this.t(\"organization.toast.created\");\n      this.saveText = this.t(\"create\");\n    } else {\n      this.editHeaderText = this.t(\"Update organization info\");\n      this.snackbarText = this.t(\"organization.toast.updated\");\n      this.saveText = this.t(\"update\");\n    }\n  }\n}\n"]}