{"version":3,"file":"aoi-earl-ideas-editor.js","sourceRoot":"","sources":["../../../src/admin/allOurIdeas/aoi-earl-ideas-editor.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, PropertyValueMap, css, html, nothing } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators.js\";\nimport { YpStreamingLlmBase } from \"../../yp-llms/yp-streaming-llm-base.js\";\nimport { MdFilledTextField } from \"@material/web/textfield/filled-text-field.js\";\nimport { AoiAdminServerApi } from \"./AoiAdminServerApi.js\";\n\nimport \"@material/web/list/list.js\";\nimport \"@material/web/list/list-item.js\";\nimport \"@material/web/iconbutton/outlined-icon-button.js\";\nimport \"@material/web/button/filled-button.js\";\nimport \"@material/web/button/filled-tonal-button.js\";\nimport \"@material/web/chips/filter-chip.js\";\nimport \"@material/web/chips/chip-set.js\";\nimport \"@material/web/textfield/filled-text-field.js\";\nimport { AoiGenerateAiLogos } from \"./aoiGenerateAiLogos.js\";\nimport { image } from \"d3\";\nimport { ifDefined } from \"lit/directives/if-defined.js\";\nimport { MdOutlinedTextField } from \"@material/web/textfield/outlined-text-field.js\";\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\";\n\ninterface IconGenerationResult {\n  imageUrl?: string;\n  error?: string;\n}\n\n@customElement(\"aoi-earl-ideas-editor\")\nexport class AoiEarlIdeasEditor extends YpStreamingLlmBase {\n  @property({ type: Number })\n  groupId!: number;\n\n  @property({ type: Number })\n  communityId: number | undefined;\n\n  @property({ type: Boolean })\n  openForAnswers = false;\n\n  @property({ type: Number })\n  domainId: number | undefined;\n\n  @property({ type: Object })\n  configuration!: AoiConfigurationData;\n\n  @property({ type: Boolean })\n  isCreatingIdeas!: boolean;\n\n  @property({ type: Array })\n  choices: AoiChoiceData[] | undefined;\n\n  @property({ type: Boolean })\n  isGeneratingWithAi = false;\n\n  @property({ type: Boolean })\n  isSubmittingIdeas = false;\n\n  @property({ type: Number })\n  isTogglingIdeaActive: number | undefined;\n\n  @property({ type: Boolean })\n  isFetchingChoices = false;\n\n  @property({ type: Object })\n  group!: YpGroupData;\n\n  @query(\"#aiStyleInput\")\n  aiStyleInputElement: MdOutlinedTextField | undefined;\n\n  @property({ type: String })\n  currentIdeasFilter: \"latest\" | \"highestScore\" | \"activeDeactive\" = \"latest\";\n\n  @query(\"#answers\")\n  answersElement!: MdFilledTextField;\n\n  override scrollElementSelector = \"#answers\";\n\n  serverApi: AoiAdminServerApi;\n  imageGenerator!: AoiGenerateAiLogos;\n  shouldContinueGenerating: boolean;\n  currentGeneratingIndex: number | undefined;\n\n  constructor() {\n    super();\n    this.serverApi = new AoiAdminServerApi();\n    this.shouldContinueGenerating = true;\n    this.currentGeneratingIndex = undefined;\n  }\n\n  override connectedCallback(): void {\n    this.createGroupObserver();\n    this.setupBootListener();\n    this.imageGenerator = new AoiGenerateAiLogos(this.themeColor);\n    if (this.configuration.earl && this.configuration.earl.question_id) {\n      this.disableWebsockets = true;\n      this.isCreatingIdeas = false;\n      this.getChoices();\n    } else {\n      this.isCreatingIdeas = true;\n    }\n    super.connectedCallback();\n    this.addEventListener(\"yp-ws-closed\", this.socketClosed);\n    this.addEventListener(\"yp-ws-error\", this.socketError);\n    this.addGlobalListener(\n      \"yp-theme-configuration-updated\",\n      this.themeUpdated.bind(this)\n    );\n  }\n\n  override disconnectedCallback(): void {\n    this.removeEventListener(\"yp-ws-closed\", this.socketClosed);\n    this.removeEventListener(\"yp-ws-error\", this.socketError);\n    this.removeGlobalListener(\n      \"yp-theme-configuration-updated\",\n      this.themeUpdated.bind(this)\n    );\n    super.disconnectedCallback();\n  }\n\n  themeUpdated(event: CustomEvent) {\n    this.imageGenerator = new AoiGenerateAiLogos(\n      event.detail.oneDynamicColor ||\n        event.detail.primaryColor ||\n        this.themeColor\n    );\n    this.requestUpdate();\n  }\n\n  socketClosed() {\n    this.isGeneratingWithAi = false;\n  }\n\n  socketError() {\n    this.isGeneratingWithAi = false;\n  }\n\n  async getChoices() {\n    this.choices = await this.serverApi.getChoices(\n      this.domainId,\n      this.communityId,\n      this.configuration.earl!.question_id!\n    );\n  }\n\n  createGroupObserver() {\n    const handler = {\n      set: (target: any, property: any, value: any, receiver: any) => {\n        // Perform your logic here whenever a property is set\n        console.error(`Property ${String(property)} set to`, value);\n\n        // Trigger a custom event or call a method to handle the change\n        this.handleGroupChange();\n\n        return Reflect.set(target, property, value, receiver);\n      },\n    };\n\n    this.group = new Proxy(this.group, handler);\n  }\n\n  handleGroupChange() {\n    // Handle the change here\n    console.error(\"Group changed\", this.group);\n  }\n\n  async addChatBotElement(wsMessage: PsAiChatWsMessage): Promise<void> {\n    switch (wsMessage.type) {\n      case \"start\":\n        break;\n      case \"moderation_error\":\n        //TODO\n        break;\n      case \"error\":\n        //TODO\n        this.isGeneratingWithAi = false;\n        break;\n      case \"end\":\n        this.isGeneratingWithAi = false;\n        this.answersElement.value += \"\\n\";\n        break;\n      case \"stream\":\n        if (wsMessage.message && wsMessage.message != \"undefined\") {\n          this.answersElement.value += wsMessage.message;\n          this.answersElement.value = this.answersElement.value.replace(\n            /\\n\\n/g,\n            \"\\n\"\n          );\n          break;\n        } else {\n          console.warn(\"stream message is undefined\");\n          break;\n        }\n    }\n    this.scrollDown();\n  }\n\n  get answers() {\n    return (this.$$(\"#answers\") as MdFilledTextField)?.value\n      .split(\"\\n\")\n      .map((answer: string) =>\n        answer\n          .replace(/\\\\/g, \"\\\\\\\\\")\n          .replace(/\"/g, '\\\\\"')\n          .replace(/\\n/g, \"\\\\n\")\n          .replace(/\\r/g, \"\\\\r\")\n          .replace(/\\t/g, \"\\\\t\")\n      )\n      .filter((answer: string) => answer.length > 0); // Keep filtering out empty answers\n  }\n\n  hasMoreThanOneIdea() {\n    return;\n  }\n\n  openMenuFor(answer: AoiChoiceData) {\n    console.log(\"openMenuFor\", answer);\n  }\n\n  generateIdeas() {\n    this.isGeneratingWithAi = true;\n    try {\n      this.serverApi.startGenerateIdeas(\n        this.configuration.earl!.question!.name,\n        this.domainId,\n        this.communityId,\n        this.wsClientId,\n        this.answers\n      );\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  async submitIdeasForCreation() {\n    this.isSubmittingIdeas = true;\n    try {\n      const { question_id } = await this.serverApi.submitIdeasForCreation(\n        this.domainId,\n        this.communityId,\n        this.answers,\n        this.configuration.earl!.question!.name\n      );\n\n      this.configuration.earl!.question_id = question_id;\n      this.configuration.earl!.active = true;\n\n      if (!this.configuration.earl!.configuration) {\n        this.configuration.earl!.configuration = {} as any;\n      }\n\n      if (!this.configuration.earl!.question) {\n        this.configuration.earl!.question = {} as any;\n      }\n\n      this.configuration.earl!.question!.id = question_id!;\n\n      this.fire(\"configuration-changed\", this.configuration);\n      this.requestUpdate();\n      this.getChoices();\n    } catch (e) {\n      console.error(e);\n    } finally {\n      this.isSubmittingIdeas = false;\n    }\n  }\n\n  toggleIdeaActivity(answer: AoiChoiceData) {\n    return async () => {\n      this.isTogglingIdeaActive = answer.id;\n      try {\n        answer.active = !answer.active;\n        await this.serverApi.updateActive(\n          this.domainId,\n          this.communityId!,\n          this.configuration.earl!.question_id!,\n          answer.id,\n          answer.active\n        );\n      } catch (e) {\n        console.error(e);\n      } finally {\n        this.isTogglingIdeaActive = undefined;\n      }\n      this.requestUpdate();\n    };\n  }\n\n  applyFilter(filterType: string) {\n    this.currentIdeasFilter = filterType as any;\n  }\n\n  get sortedChoices() {\n    if (this.choices) {\n      switch (this.currentIdeasFilter) {\n        case \"latest\":\n          return this.choices.sort((a, b) => b.id - a.id);\n        case \"highestScore\":\n          return this.choices.sort((a, b) => b.score - a.score);\n        case \"activeDeactive\":\n          return this.choices.sort((a, b) => {\n            if (b.active < a.active) {\n              return -1;\n            }\n            if (b.active > a.active) {\n              return 1;\n            }\n            return 0;\n          });\n      }\n    } else {\n      return undefined;\n    }\n  }\n\n  override updated(\n    changedProperties: Map<string | number | symbol, unknown>\n  ): void {\n    super.updated(changedProperties);\n  }\n\n  async generateAiIcons() {\n    const numberOfIconsToGenerateInParallel = 5;\n\n    this.isGeneratingWithAi = true;\n    this.shouldContinueGenerating = true;\n\n    for (\n      let i = 0;\n      i < this.choices!.length;\n      i += numberOfIconsToGenerateInParallel\n    ) {\n      if (!this.shouldContinueGenerating) {\n        break;\n      }\n\n      const generationPromises = [];\n      for (\n        let j = i;\n        j < i + numberOfIconsToGenerateInParallel && j < this.choices!.length;\n        j++\n      ) {\n        const choice = this.choices![j];\n\n        if (choice.data?.imageUrl) {\n          continue;\n        }\n\n        const imageGenerator = new AoiGenerateAiLogos(this.themeColor);\n\n        if (this.communityId) {\n          imageGenerator.collectionType = \"community\";\n          imageGenerator.collectionId = this.communityId!;\n        } else if (this.domainId) {\n          imageGenerator.collectionType = \"domain\";\n          imageGenerator.collectionId = this.domainId!;\n        }\n\n        choice.data.isGeneratingImage = true;\n        this.requestUpdate();\n        const generationPromise = imageGenerator\n          .generateIcon(\n            choice.data.content,\n            (this.$$(\"#aiStyleInput\") as MdOutlinedTextField).value\n          )\n          .then((result: IconGenerationResult) => {\n            // Use the interface here\n            choice.data.isGeneratingImage = undefined;\n            if (result.error) {\n              console.error(result.error);\n              return;\n            }\n\n            if (!this.shouldContinueGenerating) {\n              return;\n            }\n\n            if (result.imageUrl) {\n              return this.serverApi\n                .updateChoice(\n                  this.domainId!,\n                  this.communityId!,\n                  this.configuration.earl!.question_id!,\n                  choice.id,\n                  {\n                    content: choice.data.content,\n                    imageUrl: result.imageUrl,\n                    choiceId: choice.id,\n                  }\n                )\n                .then(() => {\n                  choice.data.imageUrl = result.imageUrl;\n                  this.requestUpdate();\n                });\n            } else {\n              return;\n            }\n          })\n          .catch((e) => {\n            choice.data.isGeneratingImage = false;\n            console.error(e);\n          });\n\n        generationPromises.push(generationPromise);\n      }\n\n      await Promise.all(generationPromises);\n    }\n\n    this.isGeneratingWithAi = false;\n    this.currentGeneratingIndex = undefined;\n  }\n\n  async generateAiIconsOld() {\n    this.imageGenerator.collectionType = \"community\";\n    this.imageGenerator.collectionId = this.communityId!;\n\n    this.isGeneratingWithAi = true;\n    this.shouldContinueGenerating = true;\n\n    for (let i = 0; i < this.choices!.length; i++) {\n      if (!this.shouldContinueGenerating) {\n        break;\n      }\n\n      const choice = this.choices![i];\n\n      if (choice.data?.imageUrl) {\n        continue;\n      }\n\n      this.currentGeneratingIndex = i;\n\n      try {\n        choice.data.isGeneratingImage = true;\n        const { imageUrl, error } = (await this.imageGenerator.generateIcon(\n          choice.data.content,\n          (this.$$(\"#aiStyleInput\") as MdOutlinedTextField).value\n        )) as unknown as { imageUrl: string; error: string };\n\n        choice.data.isGeneratingImage = undefined;\n\n        if (error) {\n          console.error(error);\n          continue;\n        }\n\n        if (!this.shouldContinueGenerating) {\n          break;\n        }\n\n        await this.serverApi.updateChoice(\n          this.domainId,\n          this.communityId,\n          this.configuration.earl!.question_id!,\n          choice.id,\n          {\n            content: choice.data.content,\n            imageUrl,\n            choiceId: choice.id,\n          }\n        );\n\n        choice.data.imageUrl = imageUrl;\n\n        console.error(\"imageUrl\", imageUrl, \"error\", error);\n        this.requestUpdate();\n      } catch (e) {\n        choice.data.isGeneratingImage = false;\n        console.error(e);\n      }\n    }\n\n    this.isGeneratingWithAi = false;\n    this.currentGeneratingIndex = undefined;\n  }\n\n  stopGenerating() {\n    this.shouldContinueGenerating = false;\n    this.isGeneratingWithAi = false;\n    if (this.choices && this.currentGeneratingIndex !== undefined) {\n      this.choices[this.currentGeneratingIndex].data.isGeneratingImage = false;\n      this.requestUpdate();\n    }\n  }\n\n  get allChoicesHaveIcons() {\n    return this.choices?.every((choice) => choice.data.imageUrl);\n  }\n\n  async deleteImageUrl(choice: AoiChoiceData) {\n    choice.data.imageUrl = undefined;\n\n    await this.serverApi.updateChoice(\n      this.domainId,\n      this.communityId,\n      this.configuration.earl!.question_id!,\n      choice.id,\n      {\n        content: choice.data.content,\n        imageUrl: undefined,\n        choiceId: choice.id,\n      }\n    );\n    this.requestUpdate();\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          --md-elevated-button-container-color: var(\n            --md-sys-color-surface-container-higher\n          );\n          --md-elevated-button-label-text-color: var(--md-sys-color-on-surface);\n        }\n\n        .activeCheckboxText {\n          margin-left: 16px;\n        }\n\n        .activeCheckbox {\n          margin-top: 2px;\n        }\n\n        yp-magic-text {\n          min-width: 262px;\n        }\n\n        .headerPadding {\n          width: 414px;\n        }\n\n        .genIconSpinner {\n          width: 100px;\n          height: 100px;\n          margin-left: 0;\n          margin-right: -8px;\n        }\n\n        .iconImage,\n        .iconImageRight {\n          width: 100px;\n          height: 100px;\n          margin-left: 0;\n          margin-right: -8px;\n          border-radius: 70px;\n        }\n\n        .iconImageRight {\n        }\n\n        .closeIcon {\n        }\n\n        .deleteIcon {\n          position: absolute;\n          right: 6px;\n          bottom: 16px;\n          height: 28px;\n          width: 28px;\n        }\n\n        .iconContainer md-elevated-button {\n          margin: 8px;\n          width: 400px;\n          max-width: 400px;\n          max-height: 120px;\n          height: 120px;\n          white-space: normal;\n          font-size: 16px;\n          --md-elevated-button-container-height: 120px !important;\n          --md-elevated-button-hover-label-text-color: var(\n            --md-sys-color-on-primary-container\n          );\n        }\n\n        @supports (white-space: collapse balance) {\n          .iconContainer md-elevated-button {\n            white-space: collapse balance;\n          }\n        }\n\n        #aiStyleInput {\n          margin-bottom: 16px;\n        }\n\n        .generateIconButton {\n          max-width: 250px;\n        }\n\n        .iconGenerationBottomSpinner {\n          margin-top: 16px;\n          width: 200px;\n        }\n\n        .ideasList {\n          padding: 16px;\n          max-width: 900px;\n          width: 900px;\n          padding-left: 0;\n        }\n\n        .ideaContainer {\n          padding: 8px;\n          margin: 0;\n          border-radius: 8px;\n          align-items: center;\n        }\n\n        .answer {\n          padding: 16px;\n          padding-top: 16px;\n          padding-bottom: 16px;\n          border-radius: 16px;\n          background-color: var(--md-sys-color-surface);\n          color: var(--md-sys-color-on-surface);\n          flex-grow: 1;\n        }\n\n        .wins,\n        .losses,\n        .score {\n          padding: 5px;\n          text-align: center;\n          min-width: 50px;\n        }\n\n        .origin {\n          min-width: 70px;\n          text-align: center;\n        }\n\n        .generateAnswersInfo {\n          margin-top: -16px;\n          margin-bottom: 24px;\n          font-size: 14px;\n          font-style: italic;\n        }\n\n        .buttons {\n          padding: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: space-around;\n          width: 140px;\n          min-width: 140px;\n          position: relative;\n        }\n\n        .toggleActiveProgress {\n          position: absolute;\n          bottom: -4px;\n        }\n\n        .generateIconsProgress {\n          margin-top: 8px;\n        }\n\n        md-filled-text-field {\n          width: 100%;\n          margin-bottom: 32px;\n        }\n\n        .iconContainer {\n          position: relative;\n        }\n\n        .button {\n          margin-left: 16px;\n          margin-right: 16px;\n        }\n\n        .generationProgress {\n          width: 100%;\n          margin-bottom: 24px;\n          margin-top: -24px;\n        }\n\n        md-filled-text-field {\n          --md-filled-field-container-color: var(\n            --md-sys-color-surface\n          ) !important;\n        }\n      `,\n    ];\n  }\n\n  answersChanged() {\n    this.requestUpdate();\n  }\n\n  renderCreateIdeas() {\n    return html`\n      <div class=\"layout vertical center-center generateAnswersInfo\">\n        <div style=\"max-width: 650px\">\n          ${unsafeHTML(this.t(\"generateAnswersInfo\"))}\n        </div>\n      </div>\n      <div class=\"layout vertical center-center\">\n        <md-filled-text-field\n          type=\"textarea\"\n          id=\"answers\"\n          ?disabled=\"${!this.openForAnswers}\"\n          rows=\"14\"\n          @input=\"${this.answersChanged}\"\n          .label=\"${this.t(\"answersToVoteOn\")}\"\n        >\n        </md-filled-text-field>\n        <md-linear-progress\n          class=\"generationProgress\"\n          ?hidden=\"${!this.isGeneratingWithAi}\"\n          indeterminate\n        ></md-linear-progress>\n        <div class=\"layout horizontal\">\n          ${this.isGeneratingWithAi\n            ? html`\n                <div\n                  class=\"layout vertical center-center\"\n                  ?hidden=\"${!this.hasLlm}\"\n                >\n                  <md-outlined-button class=\"button\" @click=\"${this.reset}\"\n                    >${this.t(\"stopGenerating\")}\n                    <md-icon slot=\"icon\">stop_circle</md-icon>\n                  </md-outlined-button>\n                </div>\n              `\n            : html`\n                <md-text-button\n                  class=\"button\"\n                  @click=\"${this.generateIdeas}\"\n                  ?hidden=\"${!this.hasLlm}\"\n                  ?disabled=\"${this.isGeneratingWithAi || !this.openForAnswers}\"\n                  >${this.answers?.length > 1\n                    ? this.t(\"generateMoreIdeasWithAi\")\n                    : this.t(\"generateIdeasWithAi\")}\n                  <md-icon slot=\"icon\">smart_toy</md-icon>\n                </md-text-button>\n              `}\n          <md-filled-button\n            class=\"button\"\n            @click=\"${this.submitIdeasForCreation}\"\n            ?disabled=\"${this.isSubmittingIdeas ||\n            this.answers?.length < 6 ||\n            !this.configuration ||\n            this.isGeneratingWithAi}\"\n            >${this.t(\"submitAnswersForCreation\")}</md-filled-button\n          >\n        </div>\n      </div>\n    `;\n  }\n\n  renderIdeasSortingChips() {\n    return html`\n      <div class=\"layout horizontal center-center\">\n        <md-chip-set class=\"ideaFilters layout horizontal wrap\" type=\"filter\">\n          <md-filter-chip\n            class=\"layout horizontal center-center\"\n            label=\"${this.t(\"latest\")}\"\n            .selected=\"${this.currentIdeasFilter == \"latest\"}\"\n            @click=\"${() => this.applyFilter(\"latest\")}\"\n          ></md-filter-chip>\n          <md-filter-chip\n            class=\"layout horizontal center-center\"\n            label=\"${this.t(\"higestScore\")}\"\n            .selected=\"${this.currentIdeasFilter == \"highestScore\"}\"\n            @click=\"${() => this.applyFilter(\"highestScore\")}\"\n          ></md-filter-chip>\n          <md-filter-chip\n            class=\"layout horizontal center-center\"\n            label=\"${this.t(\"active\")}\"\n            .selected=\"${this.currentIdeasFilter == \"activeDeactive\"}\"\n            @click=\"${() => this.applyFilter(\"activeDeactive\")}\"\n          ></md-filter-chip>\n        </md-chip-set>\n      </div>\n    `;\n  }\n\n  renderIcon(choice: AoiChoiceData) {\n    if (choice.data.isGeneratingImage) {\n      return html`\n        <md-circular-progress\n          class=\"genIconSpinner\"\n          slot=\"icon\"\n          indeterminate\n        ></md-circular-progress>\n      `;\n    } else if (choice.data.imageUrl) {\n      return html` <img\n        class=\"iconImage\"\n        src=\"${choice.data.imageUrl}\"\n        alt=\"icon\"\n        slot=\"icon\"\n        ?hidden=\"${!choice.data.imageUrl}\"\n      />`;\n    } else {\n      return nothing;\n    }\n  }\n\n  aiStyleChanged() {\n    if (!this.group.configuration.theme) {\n      this.group.configuration.theme = {};\n    }\n    this.fire(\"theme-config-changed\", {\n      iconPrompt: this.aiStyleInputElement?.value,\n    });\n  }\n\n  renderAnswerData(answer: AoiChoiceData) {\n    return html`\n      <div class=\"iconContainer\">\n        <md-elevated-button\n          id=\"leftAnswerButton\"\n          class=\"leftAnswer\"\n          trailing-icon\n        >\n          ${this.renderIcon(answer)}\n          <yp-magic-text\n            id=\"answerText\"\n            .contentId=\"${this.groupId}\"\n            .extraId=\"${answer.data.choiceId}\"\n            textOnly\n            truncate=\"140\"\n            .content=\"${answer.data.content}\"\n            .contentLanguage=\"${this.group.language}\"\n            textType=\"aoiChoiceContent\"\n          ></yp-magic-text>\n        </md-elevated-button>\n        <md-filled-tonal-icon-button\n          ?hidden=\"${!answer.data.imageUrl}\"\n          @click=\"${() => this.deleteImageUrl(answer)}\"\n          class=\"deleteIcon\"\n          ><md-icon class=\"closeIcon\"\n            >close</md-icon\n          ></md-filled-tonal-icon-button\n        >\n      </div>\n    `;\n  }\n\n  renderEditIdeas() {\n    return html`\n      <div class=\"layout vertical\">\n        ${this.renderIdeasSortingChips()}\n        <div class=\"ideasList\">\n          <md-linear-progress\n            indeterminate\n            ?hidden=\"${!this.isFetchingChoices}\"\n          ></md-linear-progress>\n          <div class=\"layout horizontal ideaContainer\">\n            <div class=\"headerPadding\">&nbsp;</div>\n            <div class=\"origin\">${this.t(\"origin\")}</div>\n            <div class=\"wins\">${this.t(\"wins\")}</div>\n            <div class=\"losses\">${this.t(\"losses\")}</div>\n            <div class=\"score\">${this.t(\"score\")}</div>\n            <div class=\"buttons\">${this.t(\"choiceStatus\")}</div>\n          </div>\n\n          ${this.sortedChoices?.map((answer: AoiChoiceData, index: number) => {\n            return html`<div class=\"layout horizontal ideaContainer\">\n              <div>${this.renderAnswerData(answer)}</div>\n              <div class=\"origin\">\n                ${answer.user_created ? this.t(\"User\") : this.t(\"Seed\")}\n              </div>\n              <div class=\"wins\">${answer.wins}</div>\n              <div class=\"losses\">${answer.losses}</div>\n              <div class=\"score\">${Math.round(answer.score)}</div>\n              <div class=\"buttons layout vertical center-center\">\n                <label>\n                  <md-checkbox\n                    class=\"activeCheckbox\"\n                    .checked=\"${answer.active}\"\n                    @click=\"${this.toggleIdeaActivity(answer)}\"\n                  ></md-checkbox>\n                  <span class=\"activeCheckboxText\">${this.t(\"active\")}</span>\n                </label>\n\n                <md-linear-progress\n                  class=\"toggleActiveProgress\"\n                  indeterminate\n                  ?hidden=\"${this.isTogglingIdeaActive !== answer.id}\"\n                ></md-linear-progress>\n              </div>\n            </div>`;\n          })}\n        </div>\n        <div class=\"layout vertical center-center\"></div>\n          <md-outlined-text-field\n            id=\"aiStyleInput\"\n            .label=\"${this.t(\"styleForAiIconGeneration\")}\"\n            type=\"textarea\"\n            @change=\"${this.aiStyleChanged}\"\n            rows=\"5\"\n            .value=\"${\n              this.group.configuration.theme?.iconPrompt ||\n              this.imageGenerator.promptDraft\n            }\"\n            ?hidden=\"${this.allChoicesHaveIcons || !this.hasLlm}\"\n            ?disabled=\"${this.isGeneratingWithAi || this.allChoicesHaveIcons}\"\n          ></md-outlined-text-field>\n          <div class=\"layout vertical center-center\" ?hidden=\"${!this.hasLlm}\">\n            <md-outlined-button\n              class=\"generateIconButton\"\n              @click=\"${this.stopGenerating}\"\n              ?hidden=\"${!this.isGeneratingWithAi}\"\n            >\n              ${this.t(\"stopGenerating\")}\n              <md-icon slot=\"icon\">stop_circle</md-icon>\n            </md-outlined-button>\n            <md-linear-progress class=\"iconGenerationBottomSpinner\" ?hidden=\"${!this\n              .isGeneratingWithAi}\" indeterminate></md-linear-progress>\n\n            <md-outlined-button\n              class=\"generateIconButton\"\n              @click=\"${this.generateAiIcons}\"\n              ?disabled=\"${this.allChoicesHaveIcons}\"\n              ?hidden=\"${this.isGeneratingWithAi}\"\n            >\n              ${\n                this.allChoicesHaveIcons\n                  ? this.t(\"allIconsHaveBeenGenerated\")\n                  : this.t(\"generateIconsWithAi\")\n              }\n              <md-icon slot=\"icon\">smart_toy</md-icon>\n            </md-outlined-button\n          >\n        </div>\n      </div>\n    </div>\n    `;\n  }\n\n  override render() {\n    if (!this.choices) {\n      return this.renderCreateIdeas();\n    } else {\n      return this.renderEditIdeas();\n    }\n  }\n}\n"]}