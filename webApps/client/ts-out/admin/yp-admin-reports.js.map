{"version":3,"file":"yp-admin-reports.js","sourceRoot":"","sources":["../../src/admin/yp-admin-reports.ts"],"names":[],"mappings":"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","sourcesContent":["//import 'chart.js';\nimport { LitElement, PropertyValueMap, css, html, nothing } from \"lit\";\nimport { property, customElement, state } from \"lit/decorators.js\";\nimport \"@material/web/textfield/outlined-text-field.js\";\nimport \"@material/web/button/filled-button.js\";\nimport \"@material/web/select/outlined-select.js\";\nimport \"@material/web/select/select-option.js\";\nimport \"@material/web/progress/linear-progress.js\";\nimport \"@material/web/tabs/tabs.js\";\nimport \"@material/web/tabs/secondary-tab.js\";\n\nimport { YpAdminPage } from \"./yp-admin-page.js\";\nimport { MdTabs } from \"@material/web/tabs/tabs.js\";\n\n@customElement(\"yp-admin-reports\")\nexport class YpAdminReports extends YpAdminPage {\n  @property({ type: String })\n  action = \"/api/communities\";\n\n  @property({ type: String })\n  type: \"fraudAuditReport\" | \"docx\" | \"xls\" | \"usersxls\" | undefined;\n\n  @property({ type: Number })\n  progress: number | undefined;\n\n  @property({ type: Number })\n  selectedTab = 0;\n\n  @property({ type: String })\n  error: string | undefined;\n\n  @property({ type: Number })\n  jobId: number | undefined;\n\n  @property({ type: String })\n  reportUrl: string | undefined;\n\n  @property({ type: String })\n  reportGenerationUrl: string | undefined;\n\n  @property({ type: Boolean })\n  downloadDisabled = false;\n\n  @property({ type: Number })\n  allOurIdeasQuestionId: number | undefined;\n\n  @property({ type: String })\n  toastText: string | undefined;\n\n  @property({ type: Boolean })\n  autoTranslateActive = false;\n\n  @property({ type: Number })\n  selectedFraudAuditId: number | undefined;\n\n  @state() fraudAuditSelectionActive = false;\n\n  @property({ type: Array })\n  fraudAuditsAvailable: YpFraudAuditData[] | undefined;\n\n  @property({ type: Boolean })\n  waitingOnFraudAudits = false;\n\n  @property({ type: String })\n  reportCreationProgressUrl: string | undefined;\n\n  refresh() {\n    this.reportUrl = undefined;\n    this.reportGenerationUrl = undefined;\n    this.error = undefined;\n    this.progress = undefined;\n    this.selectedFraudAuditId = undefined;\n    this.fraudAuditsAvailable = undefined;\n    this.waitingOnFraudAudits = false;\n    this.fraudAuditSelectionActive = false;\n    this._tabChanged();\n  }\n\n  override connectedCallback(): void {\n    super.connectedCallback();\n    if (\n      this.collectionType == \"group\" &&\n      this.collection &&\n      (this.collection as YpGroupData).configuration.allOurIdeas\n    ) {\n      this.allOurIdeasQuestionId = (\n        this.collection as YpGroupData\n      ).configuration.allOurIdeas?.earl?.question_id;\n    } else {\n      this.allOurIdeasQuestionId = undefined;\n    }\n\n    this.addGlobalListener(\"yp-refresh-admin-content\", this.refresh.bind(this));\n  }\n\n  override disconnectedCallback(): void {\n    this.removeGlobalListener(\n      \"yp-refresh-admin-content\",\n      this.refresh.bind(this)\n    );\n    super.disconnectedCallback();\n  }\n\n  fraudItemSelection(event: CustomEvent) {\n    this.selectedFraudAuditId = parseInt(\n      (event.target as HTMLElement).getAttribute(\"data-args\")!\n    );\n    this.startReportCreation();\n  }\n\n  startReportCreation() {\n    let url = this.action; // Adjust the URL as needed\n\n    const body = {\n      selectedFraudAuditId: this.selectedFraudAuditId,\n    };\n    this.progress = 0;\n    fetch(url, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(body),\n    })\n      .then((response) => response.json())\n      .then((data) => this.startReportCreationResponse(data))\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        this.progress = undefined;\n      });\n  }\n\n  startReportCreationResponse(data: YpReportData) {\n    this.jobId = data.jobId;\n    this.progress = 5;\n    let baseUrl =\n      this.collectionType == \"group\"\n        ? `/api/groups/${this.collectionId}`\n        : `/api/communities/${this.collectionId}`;\n    if (this.allOurIdeasQuestionId) {\n      baseUrl = `/api/allOurIdeas/${this.collectionId}`;\n      this.reportCreationProgressUrl = `${baseUrl}/${this.jobId}/report_creation_progress?questionId=${this.allOurIdeasQuestionId}`;\n    } else {\n      this.reportCreationProgressUrl = `${baseUrl}/${this.jobId}/report_creation_progress`;\n    }\n\n    this.pollLaterForProgress();\n  }\n\n  pollLaterForProgress() {\n    setTimeout(() => {\n      this.reportCreationProgress();\n    }, 1000);\n  }\n\n  reportCreationProgress() {\n    fetch(this.reportCreationProgressUrl!)\n      .then((response) => response.json())\n      .then((data) => this.reportCreationProgressResponse(data))\n      .catch((error) => console.error(\"Error:\", error));\n  }\n\n  formatAuditReportDates(data: YpFraudAuditData[]) {\n    return data.map((item) => {\n      if (item.date) {\n        // Use date-fns or another library if you need date formatting\n        // item.date = format(new Date(item.date), \"dd/MM/yyyy HH:mm:ss\");\n        item.date = new Date(item.date).toLocaleString();\n      }\n      return item;\n    });\n  }\n\n  fraudAuditsAjaxResponse(event: CustomEvent) {\n    this.waitingOnFraudAudits = false;\n    this.fraudAuditsAvailable = this.formatAuditReportDates(\n      event.detail.response\n    );\n  }\n\n  reportCreationProgressResponse(response: YpReportData) {\n    if (\n      !response.error &&\n      response.progress != null &&\n      response.progress < 100\n    ) {\n      this.pollLaterForProgress();\n    }\n\n    this.progress = response.progress!;\n    if (response.error) {\n      this.error = this.t(response.error); // Assuming `this.t` is a translation method you have\n    }\n    if (response.data) {\n      this.reportUrl = response.data.reportUrl;\n      setTimeout(() => {\n        this.downloadDisabled = true;\n      }, 59 * 60 * 1000); // 59 minutes\n    }\n  }\n\n  // Use updated property instead of a method for fraudAuditSelectionActive\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    if (\n      changedProperties.has(\"type\") ||\n      changedProperties.has(\"selectedFraudAuditId\")\n    ) {\n      this.fraudAuditSelectionActive =\n        this.type === \"fraudAuditReport\" && !this.selectedFraudAuditId;\n    }\n  }\n\n  startGeneration() {\n    if (this.type == \"fraudAuditReport\") {\n      this.waitingOnFraudAudits = true;\n      this.progress = 0;\n      const response = window.adminServerApi.adminMethod(\n        this.reportGenerationUrl!,\n        \"GET\"\n      ) as unknown as YpFraudAuditData[];\n      this.waitingOnFraudAudits = false;\n      this.progress = undefined;\n      this.fraudAuditsAvailable = this.formatAuditReportDates(response);\n    } else {\n      this.startReportCreationAjax(this.reportGenerationUrl!);\n    }\n  }\n\n  startReportCreationAjax(url: string) {\n    this.progress = 0;\n    fetch(url, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({}), // Adjust body as needed\n    })\n      .then((response) => response.json())\n      .then((data) => this.startReportCreationResponse(data))\n      .catch((error) => console.error(\"Error:\", error));\n  }\n\n  getFraudAuditsAjax(url: string) {\n    fetch(url)\n      .then((response) => response.json())\n      .then((data) =>\n        this.fraudAuditsAjaxResponse({ detail: { response: data } } as any)\n      )\n      .catch((error) => console.error(\"Error:\", error));\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        md-filled-button {\n          margin-top: 32px;\n          margin-bottom: 16px;\n        }\n\n        md-outlined-button {\n          margin-top: 32px;\n          margin-bottom: 16px;\n        }\n\n        md-linear-progress {\n          width: 320px;\n          margin-top: 8px;\n        }\n\n        md-tabs {\n          max-width: 650px;\n          width: 605px;\n        }\n        @media (max-width: 650px) {\n          md-tabs {\n            width: 100%;\n          }\n        }\n      `,\n    ];\n  }\n\n  protected override firstUpdated(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    setTimeout(() => {\n      this._tabChanged();\n    });\n  }\n\n  _tabChanged() {\n    const tabs = this.$$(\"#tabs\") as MdTabs;\n    this.selectedTab = tabs.activeTabIndex;\n    this.reportGenerationUrl = undefined;\n    this.reportUrl = undefined;\n    if (this.collectionType == \"group\") {\n      if (tabs.activeTabIndex === 0) {\n        this.type = \"xls\";\n        this.toastText = this.t(\"haveCreatedXLsReport\");\n      } else if (tabs.activeTabIndex === 1) {\n        this.type = \"docx\";\n        this.toastText = this.t(\"haveCreatedDocxReport\");\n      }\n      this.reportGenerationUrl = `/api/groups/${this.collectionId}/${this.type}/start_report_creation`;\n      if (this.allOurIdeasQuestionId) {\n        this.reportGenerationUrl = `/api/allOurIdeas/${this.collectionId}/${this.type}/start_report_creation?questionId=${this.allOurIdeasQuestionId}`;\n      }\n    } else if (this.collectionType == \"community\") {\n      if (tabs.activeTabIndex === 0) {\n        this.type = \"usersxls\";\n        this.reportGenerationUrl = `/api/communities/${this.collectionId}/${this.type}/start_report_creation`;\n        this.toastText = this.t(\"haveCreatedXLsReport\");\n      } else if (tabs.activeTabIndex === 1) {\n        this.type = \"fraudAuditReport\";\n        this.reportGenerationUrl = `/api/communities/${this.collectionId}/getFraudAudits`;\n        this.toastText = this.t(\"haveCreatedFraudAuditReport\");\n      }\n    }\n\n    if (window.autoTranslate) {\n      this.reportGenerationUrl += `?translateLanguage=${this.language}`;\n    }\n  }\n\n  renderStart() {\n    return html`\n      <div class=\"layout vertical center-center startButton\">\n        <md-outlined-button @click=\"${this.startGeneration}\">\n          ${this.t(\"startReportCreation\")}\n        </md-outlined-button>\n        ${this.progress !== undefined\n          ? html`<md-linear-progress\n              .value=\"${this.progress / 100}\"\n            ></md-linear-progress> `\n          : nothing}\n      </div>\n    `;\n  }\n\n  renderDownload() {\n    return html`\n      ${this.fraudAuditSelectionActive\n        ? html`\n            ${this.waitingOnFraudAudits\n              ? html`<md-linear-progress indeterminate></md-linear-progress>`\n              : html`\n                  <div class=\"auditContainer layout vertical center-center\">\n                    ${this.fraudAuditsAvailable?.map(\n                      (fraudItem) => html`\n                        <md-text-button\n                          raised\n                          class=\"layout horizontal fraudItemSelection\"\n                          data-args=\"${fraudItem.logId}\"\n                          @click=\"${this.fraudItemSelection}\"\n                        >\n                          ${fraudItem.date}<br />${fraudItem.userName}\n                        </md-text-button>\n                      `\n                    )}\n                  </div>\n                `}\n          `\n        : html`\n            <div class=\"error\" ?hidden=\"${!this.error}\">${this.error}</div>\n            ${this.reportUrl\n              ? html`\n                  <a\n                    href=\"${this.reportUrl}\"\n                    target=\"_blank\"\n                    ?hidden=\"${this.downloadDisabled}\"\n                  >\n                    <md-filled-button\n                      id=\"downloadReportButton\"\n                      ?disabled=\"${this.downloadDisabled}\"\n                      raised\n                    >\n                      ${this.t(\"downloadReport\")}\n                    </md-filled-button>\n                  </a>\n                  <div class=\"infoText reportText\">\n                    ${this.t(\"reportLinkInfo\")}\n                  </div>\n                  <div\n                    class=\"infoText expiredText\"\n                    ?hidden=\"${!this.downloadDisabled}\"\n                  >\n                    ${this.t(\"downloadHasExpired\")}\n                  </div>\n                `\n              : nothing}\n          `}\n    `;\n  }\n\n  override render() {\n    return html`\n      <div class=\"layout vertical center-center\">\n        <md-tabs\n          id=\"tabs\"\n          @change=\"${this._tabChanged}\"\n          .activeTabIndex=\"${this.selectedTab}\"\n          id=\"paperTabs\"\n        >\n          ${this.collectionType == \"group\"\n            ? html`\n                <md-secondary-tab\n                  >${this.t(\"createXlsReport\")}<md-icon\n                    >lightbulb_outline</md-icon\n                  ></md-secondary-tab\n                >\n                <md-secondary-tab\n                  ?hidden=\"${this.allOurIdeasQuestionId != undefined}\"\n                  >${this.t(\"createDocxReport\")}<md-icon\n                    >lightbulb_outline</md-icon\n                  ></md-secondary-tab\n                >\n              `\n            : nothing}\n          ${this.collectionType == \"community\"\n            ? html`\n                <md-secondary-tab\n                  >${this.t(\"createXlsUsersReport\")}<md-icon\n                    >lightbulb_outline</md-icon\n                  ></md-secondary-tab\n                >\n                <md-secondary-tab\n                  ?hidden=\"${!(this.collection as YpCommunityData).configuration\n                    .enableFraudDetection}\"\n                  >${this.t(\"downloadFraudAuditReport\")}<md-icon\n                    >lightbulb_outline</md-icon\n                  ></md-secondary-tab\n                >\n              `\n            : nothing}\n        </md-tabs>\n      </div>\n      <div class=\"layout vertical center-center\">\n        ${this.reportGenerationUrl &&\n        !this.reportUrl &&\n        !this.fraudAuditsAvailable\n          ? this.renderStart()\n          : this.renderDownload()}\n      </div>\n    `;\n  }\n}\n"]}