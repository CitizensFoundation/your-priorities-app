{"version":3,"file":"yp-point-news-story.js","sourceRoot":"","sources":["../../src/yp-point/yp-point-news-story.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\n\nimport '@material/web/iconbutton/icon-button.js';\nimport './yp-point-comment-list.js';\nimport './yp-point-news-story-embed.js';\nimport './yp-point-actions.js';\nimport { YpPointCommentList } from './yp-point-comment-list.js';\n\n@customElement('yp-point-news-story')\nexport class YpPointNewsStory extends YpBaseElement {\n  @property({ type: Object })\n  point!: YpPointData;\n\n  @property({ type: Object })\n  user: YpUserData | undefined;\n\n  @property({ type: Boolean })\n  withComments = false;\n\n  @property({ type: Boolean })\n  open = false;\n\n  @property({ type: Boolean })\n  hideUser = false;\n\n  @property({ type: Number })\n  commentsCount = 0;\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>): void {\n    super.updated(changedProperties);\n\n    if (changedProperties.has('point')) {\n      this._pointChanged();\n    }\n    if (changedProperties.has('open')) {\n      this._openChanged();\n    }\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          width: 100%;\n          margin-top: 8px;\n        }\n\n        .userName {\n        }\n\n        .userName {\n          padding-bottom: 4px;\n        }\n\n        .story {\n          padding-bottom: 12px;\n          margin-bottom: 8px;\n          padding-top: 8px;\n          border-bottom: solid #ddd;\n          border-bottom-width: 1px;\n          font-size: 19px;\n        }\n\n        yp-point-actions {\n          padding-top: 8px;\n        }\n\n        .container {\n        }\n\n        #commentCount {\n          font-size: 14px;\n        }\n\n        md-icon-button.openCloseButton {\n          width: 56px;\n          height: 56px;\n          padding-left: 0;\n          margin-left: 0;\n        }\n\n        .commentText {\n          font-size: 14px;\n          text-transform: lowercase;\n          padding-right: 6px;\n        }\n\n        .withPointer {\n          cursor: pointer;\n        }\n\n        .newsContainer {\n          width: auto;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      `,\n    ];\n  }\n\n  override render() {\n    return html`\n      <div class=\"layout vertical newsContainer\">\n        <yp-magic-text\n          id=\"content\"\n          class=\"story\"\n          textType=\"pointContent\"\n          simpleFormat\n          truncate=\"10000\"\n          .contentLanguage=\"${this.point.language}\"\n          .content=\"${this.point.latestContent}\"\n          .contentId=\"${this.point.id}\">\n        </yp-magic-text>\n\n        <yp-point-news-story-embed\n          .embedData=\"${this.point.embed_data}\"></yp-point-news-story-embed>\n        <div class=\"layout horizontal\">\n          <yp-point-actions\n            .point=\"${this.point}\"\n            hideSharing></yp-point-actions>\n          <div class=\"layout horizontal start-justified\">\n            <div\n              class=\"layout horizontal center-center withPointer\"\n              ?hidden=\"${!this.commentsCount}\"\n              @click=\"${this._setOpenToValue}\">\n              <div class=\"commentText\">${this.t('point.comments')}</div>\n              <div id=\"commentCount\">${this.commentsCount}</div>\n            </div>\n            <div\n              class=\"layout horizontal center-center withPointer\"\n              @click=\"${this._setOpenToValue}\"\n              ?hidden=\"${this.noComments}\">\n              <div class=\"commentText\">${this.t('noComments')}</div>\n            </div>\n            <div class=\"layout horizontal\">\n              <md-icon-button\n                .label=\"${this.t('toggleOpenClose')}\"\n                class=\"openCloseButton\"\n                icon=\"keyboard_arrow_right\"\n                @click=\"${this._setOpen}\"\n                ?hidden=\"${this.open}\">\n              </md-icon-button>\n              <md-icon-button\n                .label=\"${this.t('toggleOpenClose')}\"\n                class=\"openCloseButton\"\n                icon=\"keyboard_arrow_down\"\n                @click=\"${this._setClosed}\"\n                ?hidden=\"${!this.open}\">\n              </md-icon-button>\n            </div>\n          </div>\n        </div>\n        <yp-point-comment-list\n          id=\"commentsList\"\n          @yp-set-comments-count=\"${this._setCommentsCount}\"\n          disableOpenClose\n          .point=\"${this.point}\"\n          ?hidden=\"${!this.withComments}\"></yp-point-comment-list>\n      </div>\n    `;\n  }\n\n  _setOpenToValue() {\n    if (this.open) {\n      this._setClosed();\n    } else {\n      this._setOpen();\n    }\n  }\n\n  _openChanged() {\n    if (this.open) {\n      (this.$$('#commentsList') as YpPointCommentList).refresh();\n    }\n  }\n\n  get noComments() {\n    return !(this.commentsCount == 0);\n  }\n\n  _setOpen() {\n    this.open = true;\n    (this.$$('#commentsList') as YpPointCommentList).setOpen();\n  }\n\n  _setClosed() {\n    this.open = false;\n    (this.$$('#commentsList') as YpPointCommentList).setClosed();\n  }\n\n  _setCommentsCount(event: CustomEvent) {\n    this.commentsCount = event.detail.count;\n  }\n\n  _pointChanged() {\n    if (this.point && this.point.PointRevisions) {\n      this.user = this.point.PointRevisions[0].User;\n    } else {\n      this.user = undefined;\n    }\n\n    this.open = false;\n  }\n\n  loginName() {\n    return this.point.PointRevisions![0].User.name;\n  }\n}\n"]}