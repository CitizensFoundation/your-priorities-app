{"version":3,"file":"yp-point-actions.js","sourceRoot":"","sources":["../../src/yp-point/yp-point-actions.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport \"@material/web/iconbutton/outlined-icon-button.js\";\n\nimport { removeClass } from \"../common/RemoveClass.js\";\n\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\n\n@customElement(\"yp-point-actions\")\nexport class YpPointActions extends YpBaseElement {\n  @property({ type: Object })\n  point: YpPointData | undefined;\n\n  @property({ type: Boolean })\n  hideNotHelpful = false;\n\n  @property({ type: Boolean })\n  isUpVoted = false;\n\n  @property({ type: Boolean })\n  allDisabled = false;\n\n  @property({ type: Boolean })\n  hideSharing = false;\n\n  @property({ type: Object })\n  configuration: YpGroupConfiguration | undefined;\n\n  @property({ type: Number })\n  pointQualityValue: number | undefined;\n\n  @property({ type: String })\n  pointUrl: string | undefined;\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          min-width: 125px;\n        }\n\n        .action-text {\n          font-size: 12px;\n          padding-top: 12px;\n          padding-left: 6px;\n        }\n\n        .action-up {\n        }\n\n        .action-down {\n        }\n\n        .up-selected {\n        }\n\n        .down-selected {\n        }\n\n        .middle {\n        }\n\n        .all-actions {\n          padding-right: 8px;\n          margin-top: 8px;\n        }\n\n        yp-ajax {\n          min-width: 32px;\n        }\n\n        .myButton {\n          --md-outlined-icon-button {\n            width: 10px;\n            height: 10px;\n          }\n        }\n\n        .shareIcon {\n          text-align: right;\n        }\n\n        .shareIcon[up-voted] {\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        .point-down-vote-icon {\n          margin-left: 16px;\n        }\n      `,\n    ];\n  }\n\n  override render() {\n    return this.point\n      ? html`\n          <div\n            class=\"all-actions layout horizontal center-center\"\n            ?hidden=\"${this.hideNotHelpful}\"\n          >\n            <div id=\"actionUp\" class=\"actionUp layout horizontal\">\n              <md-icon-button\n                toggle\n                ?selected=\"${this.pointQualityValue\n                  ? this.pointQualityValue > 0\n                  : false}\"\n                .label=\"${this.t(\"point.helpful\")}\"\n                ?disabled=\"${this.allDisabled}\"\n                icon=\"arrow_upward\"\n                class=\"point-up-vote-icon myButton\"\n                @click=\"${this.pointHelpful}\"\n                ><md-icon>arrow_upward</md-icon></md-icon-button\n              >\n              <div class=\"action-text action-up layouthorizontal \">\n                ${this.point.counter_quality_up}\n              </div>\n            </div>\n            <div id=\"actionDown\" class=\"actionDown layout horizontal\">\n              <md-icon-button\n                toggle\n                ?selected=\"${this.pointQualityValue\n                  ? this.pointQualityValue < 0\n                  : false}\"\n                .label=\"${this.t(\"point.not_helpful\")}\"\n                ?disabled=\"${this.allDisabled}\"\n                icon=\"arrow_downward\"\n                class=\"point-down-vote-icon myButton\"\n                @click=\"${this.pointNotHelpful}\"\n                ><md-icon>arrow_downward</md-icon></md-icon-button\n              >\n              <div class=\"action-text\">${this.point.counter_quality_down}</div>\n            </div>\n            <md-icon-button\n              icon=\"share\"\n              ?hidden=\"${true || this.masterHideSharing}\"\n              class=\"shareIcon\"\n              .label=\"${this.t(\"sharePoint\")}\"\n              up-voted=\"${this.isUpVoted}\"\n              @click=\"${this._shareTap}\"\n            ></md-icon-button>\n          </div>\n        `\n      : nothing;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.addGlobalListener(\n      \"yp-got-endorsements-and-qualities\",\n      this._updateQualitiesFromSignal.bind(this)\n    );\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeGlobalListener(\n      \"yp-got-endorsements-and-qualities\",\n      this._updateQualitiesFromSignal.bind(this)\n    );\n  }\n\n  get masterHideSharing() {\n    return (\n      this.hideSharing || (this.configuration && this.configuration.hideSharing)\n    );\n  }\n\n  _sharedContent(event: CustomEvent) {\n    const shareData = event.detail;\n    window.appGlobals.activity(\n      \"pointShared\",\n      shareData.social,\n      this.point ? this.point.id : -1\n    );\n  }\n\n  _shareTap(event: CustomEvent) {\n    const detail = event.detail;\n    window.appGlobals.activity(\n      \"pointShareHeaderOpen\",\n      detail.brand,\n      this.point ? this.point.id : -1\n    );\n\n    window.appDialogs.getDialogAsync(\n      \"shareDialog\",\n      (dialog: YpShareDialogData) => {\n        dialog.open(\n          this.pointUrl || \"\",\n          this.t(\"sharePoint\"),\n          this._sharedContent\n        );\n      }\n    );\n  }\n\n  _onPointChanged() {\n    if (this.point) {\n      this._updateQualities();\n    } else {\n      this.isUpVoted = false;\n    }\n  }\n\n  _updateQualitiesFromSignal() {\n    this._updateQualities();\n  }\n\n  _updateQualities() {\n    if (\n      this.point &&\n      window.appUser &&\n      window.appUser.loggedIn() &&\n      window.appUser.user &&\n      window.appUser.user.PointQualities\n    ) {\n      const thisPointQuality =\n        window.appUser.pointQualitiesIndex[this.point.id];\n      if (thisPointQuality) {\n        this._setPointQuality(thisPointQuality.value);\n        if (thisPointQuality.value > 0) {\n          this.isUpVoted = true;\n        }\n      } else {\n        this.isUpVoted = false;\n        this._setPointQuality(undefined);\n      }\n    } else {\n      this.isUpVoted = false;\n      this._setPointQuality(undefined);\n    }\n  }\n\n  _qualityChanged() {\n    // TODO: Fix where you can't vote up a newstory just after posting\n    //this._resetClasses();\n    //this.isUpVoted = false;\n  }\n\n  _resetClasses() {\n    if (this.pointQualityValue && this.pointQualityValue > 0) {\n      (this.$$(\"#actionUp\") as HTMLElement).className += \" \" + \"up-selected\";\n      removeClass(this.$$(\"#actionDown\") as HTMLElement, \"down-selected\");\n    } else if (this.pointQualityValue && this.pointQualityValue < 0) {\n      (this.$$(\"#actionDown\") as HTMLElement).className +=\n        \" \" + \"down-selected\";\n      removeClass(this.$$(\"#actionUp\") as HTMLElement, \"up-selected\");\n    } else {\n      removeClass(this.$$(\"#actionUp\") as HTMLElement, \"up-selected\");\n      removeClass(this.$$(\"#actionDown\") as HTMLElement, \"down-selected\");\n    }\n  }\n\n  _setPointQuality(value: number | undefined) {\n    this.pointQualityValue = value;\n    this._resetClasses();\n  }\n\n  async generatePointQuality(value: number) {\n    if (this.point && window.appUser.loggedIn() === true) {\n      let method;\n      if (this.pointQualityValue === value) {\n        method = \"DELETE\";\n      } else {\n        method = \"POST\";\n      }\n      const pointQuality = (await window.serverApi.setPointQuality(\n        this.point.id,\n        method,\n        {\n          point_id: this.point.id,\n          value: value,\n        }\n      )) as YpPointQualityResponse;\n      this._pointQualityResponse(pointQuality);\n    } else {\n      this.allDisabled = false;\n      window.appUser.loginForPointQuality(this, { value: value });\n    }\n  }\n\n  _pointQualityResponse(pointQualityResponse: YpPointQualityResponse) {\n    this.allDisabled = false;\n    const pointQuality = pointQualityResponse.pointQuality;\n    const oldPointQualityValue = pointQualityResponse.oldPointQualityValue;\n    this._setPointQuality(pointQuality.value);\n    window.appUser.updatePointQualityForPost(this.point!.id, pointQuality);\n\n    if (this.point!.counter_quality_up === undefined)\n      this.point!.counter_quality_up = 0;\n\n    if (this.point!.counter_quality_down === undefined)\n      this.point!.counter_quality_down = 0;\n\n    if (oldPointQualityValue) {\n      if (oldPointQualityValue > 0)\n        this.point!.counter_quality_up = Math.max(\n          0,\n          this.point!.counter_quality_up - 1\n        );\n      else if (oldPointQualityValue < 0)\n        this.point!.counter_quality_down = Math.max(\n          this.point!.counter_quality_down - 1\n        );\n    }\n    if (pointQuality.value > 0)\n      this.point!.counter_quality_up = this.point!.counter_quality_up + 1;\n    else if (pointQuality.value < 0)\n      this.point!.counter_quality_down = this.point!.counter_quality_down + 1;\n\n    this.requestUpdate();\n  }\n\n  generatePointQualityFromLogin(value: number) {\n    if (this.point && !window.appUser.pointQualitiesIndex[this.point.id]) {\n      this.generatePointQuality(value);\n    }\n  }\n\n  pointHelpful() {\n    this.allDisabled = true;\n    this.generatePointQuality(1);\n    this.isUpVoted = true;\n    this.requestUpdate;\n    window.appGlobals.activity(\"clicked\", \"pointHelpful\", this.point!.id);\n  }\n\n  pointNotHelpful() {\n    this.allDisabled = true;\n    window.appGlobals.activity(\"clicked\", \"pointNotHelpful\", this.point!.id);\n    this.generatePointQuality(-1);\n    this.requestUpdate;\n  }\n}\n"]}