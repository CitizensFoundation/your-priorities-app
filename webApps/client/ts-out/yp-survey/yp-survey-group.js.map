{"version":3,"file":"yp-survey-group.js","sourceRoot":"","sources":["../../src/yp-survey/yp-survey-group.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\nimport * as linkify from 'linkifyjs';\n\nimport '@material/web/button/text-button.js';\nimport '@material/mwc-snackbar';\n\nimport { YpCollection } from '../yp-collection/yp-collection.js';\nimport { YpStructuredQuestionEdit } from './yp-structured-question-edit.js';\nimport { YpAccessHelpers } from '../common/YpAccessHelpers.js';\n\n@customElement('yp-survey-group')\nexport class YpSurveyGroup extends YpBaseElement {\n  @property({ type: Number })\n  surveyGroupId: number | undefined;\n\n  @property({ type: String })\n  surveySubmitError: string | undefined;\n\n  @property({ type: Boolean })\n  surveyCompleted = false;\n\n  @property({ type: Boolean })\n  submitHidden = false;\n\n  @property({ type: Object })\n  surveyGroup: YpGroupData | undefined;\n\n  @property({ type: Array })\n  structuredQuestions: Array<YpStructuredQuestionData> | undefined;\n\n  @property({ type: Array })\n  structuredAnswers: Array<YpStructuredAnswer> | undefined;\n\n  @property({ type: Array })\n  initiallyLoadedAnswers: Array<YpStructuredAnswer> | undefined;\n\n  liveQuestionIds: Array<number> = [];\n\n  uniqueIdsToElementIndexes: Record<string, number> = {};\n\n  liveUniqueIds: Array<string> = [];\n\n  liveUniqueIdsAll: Array<{ uniqueId: string; atIndex: number }> = [];\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>): void {\n    super.updated(changedProperties);\n\n    if (changedProperties.has('surveyGroupId')) {\n      this._surveyGroupIdChanged();\n    }\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          display: block;\n          width: 100%;\n        }\n\n        #submitButton {\n          margin-top: 8px;\n          margin-bottom: 128px;\n          font-size: 18px;\n          padding: 16px;\n        }\n\n        .submitSpinnerContainer {\n          height: 90px;\n        }\n\n        .surveyContainer {\n          margin-left: 32px;\n          margin-right: 32px;\n          max-width: 800px;\n          width: 800px;\n        }\n\n        @media (max-width: 800px) {\n          yp-structured-question-edit {\n            margin-left: 16px;\n            padding-left: 0;\n            padding-right: 0;\n            margin-right: 16px;\n          }\n\n          .surveyContainer {\n            margin-left: 0;\n            margin-right: 0;\n            max-width: 100%;\n            width: 100%;\n          }\n\n          :host {\n            width: 100vw;\n          }\n        }\n\n        .surveyCompleted {\n          font-size: 28px;\n          margin: 128px;\n        }\n      `,\n    ];\n  }\n\n  override render() {\n    return this.surveyGroup\n      ? html`\n          ${!this.surveyCompleted\n            ? html`\n                ${this.structuredQuestions\n                  ? html`\n                      <div class=\"layout vertical center-center\">\n                        <div class=\"surveyContainer\">\n                          <div id=\"surveyContainer\">\n                            ${this.structuredQuestions.map(\n                              (question, index) => html`\n                                <yp-structured-question-edit\n                                  index=\"${index}\"\n                                  id=\"structuredQuestionContainer_${index}\"\n                                  .structuredAnswers=\"${this\n                                    .initiallyLoadedAnswers}\"\n                                  @changed=\"${this._saveState}\"\n                                  .question=\"${question}\"\n                                  is-last-rating=\"${this._isLastRating(index)}\"\n                                  is-first-rating=\"${this._isFirstRating(\n                                    index\n                                  )}\">\n                                </yp-structured-question-edit>\n                              `\n                            )}\n                          </div>\n                          <div\n                            class=\"layout horizontal center-center submitSpinnerContainer\"></div>\n                          <div\n                            class=\"layout horizontal center-center\"\n                            ?hidden=\"${this.submitHidden}\">\n                            <md-text-button\n                              id=\"submitButton\"\n                              raised\n                              .label=\"${this.t('submitSurvey')}\"\n                              @click=\"${this._submit}\"></md-text-button>\n                          </div>\n                        </div>\n                      </div>\n                    `\n                  : html``}\n              `\n            : html`\n                <div class=\"surveyCompleted layout vertical center-center\">\n                  ${this.surveyGroup.configuration.customThankYouTextNewPosts\n                    ? html`\n                        <yp-magic-text\n                          id=\"customThankYouTextNewPostsId\"\n                          hidden\n                          contentId=\"${this.surveyGroup.id}\"\n                          textOnly\n                          content=\"${this.surveyGroup.configuration\n                            .customThankYouTextNewPosts}\"\n                          .contentLanguage=\"${this.surveyGroup.language}\"\n                          textType=\"customThankYouTextNewPosts\"></yp-magic-text>\n                      `\n                    : html` ${this.t('thankYouForCompletingTheSurvey')} `}\n                </div>\n              `}\n        `\n      : nothing;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.addListener('yp-skip-to-unique-id', this._skipToId);\n    this.addListener('yp-open-to-unique-id', this._openToId);\n    this.addListener('yp-goto-next-index', this._goToNextIndex);\n    this.addListener('yp-answer-content-changed-debounced', this._saveState);\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeListener('yp-skip-to-unique-id', this._skipToId);\n    this.removeListener('yp-open-to-unique-id', this._openToId);\n    this.removeListener('yp-goto-next-index', this._goToNextIndex);\n    this.removeListener('yp-answer-content-changed-debounced', this._saveState);\n  }\n\n  _isLastRating(index: number) {\n    return (\n      this.structuredQuestions![index].subType === 'rating' &&\n      index + 2 < this.structuredQuestions!.length &&\n      this.structuredQuestions![index + 1].subType !== 'rating'\n    );\n  }\n\n  _isFirstRating(index: number) {\n    return (\n      this.structuredQuestions![index].subType === 'rating' &&\n      this.structuredQuestions![index - 1] &&\n      this.structuredQuestions![index - 1].subType !== 'rating'\n    );\n  }\n\n  _openToId(event: CustomEvent) {\n    this._skipToId(event, true);\n  }\n\n  _skipToId(event: CustomEvent, showItems: boolean) {\n    let foundFirst = false;\n    const children = (this.$$('#surveyContainer')!\n      .children as unknown) as Array<YpStructuredQuestionEdit>;\n    for (let i = 0; i < children.length; i++) {\n      const toId = event.detail.toId.replace(/]/g, '');\n      const fromId = event.detail.fromId.replace(/]/g, '');\n      if (\n        children[i + 1] &&\n        children[i + 1].question &&\n        children[i + 1].question.uniqueId &&\n        children[i + 1].question.uniqueId!.substring(\n          children[i + 1].question.uniqueId!.length - 1\n        ) === 'a'\n      ) {\n        children[i].question.uniqueId = children[\n          i + 1\n        ].question.uniqueId!.substring(\n          0,\n          children[i + 1].question.uniqueId!.length - 1\n        );\n      }\n      if (\n        children[i].question &&\n        event.detail.fromId &&\n        children[i].question.uniqueId === fromId\n      ) {\n        foundFirst = true;\n      } else if (\n        children[i].question &&\n        event.detail.toId &&\n        (children[i].question.uniqueId === toId ||\n          children[i].question.uniqueId === toId + 'a')\n      ) {\n        break;\n      } else {\n        if (foundFirst) {\n          if (showItems) {\n            children[i].hidden = false;\n          } else {\n            children[i].hidden = true;\n          }\n        }\n      }\n    }\n  }\n\n  //TODO: Get working on Safari\n  _goToNextIndex(event: CustomEvent) {\n    if (false && !this.isSafari) {\n      const currentPos = this.liveQuestionIds.indexOf(event.detail.currentIndex);\n      if (currentPos < this.liveQuestionIds.length - 1) {\n        const item = this.$$(\n          '#structuredQuestionContainer_' + this.liveQuestionIds[currentPos + 1]\n        ) as HTMLInputElement;\n        item.scrollIntoView({\n          block: 'center',\n          inline: 'center',\n          behavior: 'smooth',\n        });\n        item.focus();\n      }\n    } else {\n      console.warn(\"_goToNextIndex not working on Safari\")\n    }\n  }\n\n  _serializeAnswers() {\n    const answers: Array<YpStructuredAnswer> = [];\n    this.liveQuestionIds.forEach(liveIndex => {\n      const questionElement = this.$$(\n        '#structuredQuestionContainer_' + liveIndex\n      ) as YpStructuredQuestionEdit;\n      if (questionElement) {\n        const answer = questionElement.getAnswer();\n        if (answer) answers.push(answer);\n      }\n    });\n    this.structuredAnswers = answers;\n  }\n\n  async _submit() {\n    if (this.surveyGroupId) {\n      this._serializeAnswers();\n      const response = (await window.serverApi.postSurvey(\n        this.surveyGroup!.id,\n        {\n          structuredAnswers: this.structuredAnswers,\n        }\n      )) as YpSurveyPostResponse;\n\n      if (response) {\n        if (response.error) {\n          this.surveySubmitError = response.error;\n        } else {\n          this.surveyCompleted = true;\n        }\n      }\n    } else {\n      console.error('No survey id to post to');\n    }\n  }\n\n  _saveState(event: CustomEvent) {\n    const detail = event.detail;\n    if (detail && detail.value && (detail.value !== '' || detail.value > 1)) {\n      this.submitHidden = false;\n      this._serializeAnswers();\n      localStorage.setItem(\n        'yp-survey-response-for-' + this.surveyGroup!.id,\n        JSON.stringify(this.structuredAnswers)\n      );\n    }\n  }\n\n  _clearState() {\n    localStorage.setItem('yp-survey-response-for-' + this.surveyGroup!.id, '');\n  }\n\n  _checkAndLoadState() {\n    const answers = localStorage.getItem(\n      'yp-survey-response-for-' + this.surveyGroup!.id\n    );\n    if (answers) {\n      this.structuredAnswers = JSON.parse(answers);\n      this.initiallyLoadedAnswers = JSON.parse(answers);\n    }\n  }\n\n  _isIpad() {\n    return /iPad/.test(navigator.userAgent) && !window.MSStream;\n  }\n\n  _surveyGroupIdChanged() {\n    if (this.surveyGroupId) {\n      this.surveyGroup = undefined;\n      this._getSurveyGroup();\n    }\n  }\n\n  async _getSurveyGroup() {\n    const surveyGroup = (await window.serverApi.getSurveyGroup(\n      this.surveyGroupId!\n    )) as YpGroupData | void;\n    if (surveyGroup) {\n      this.surveyGroup = surveyGroup;\n      this.structuredQuestions = this.surveyGroup.configuration.structuredQuestionsJson;\n      this.surveyGroup.configuration = window.appGlobals.overrideGroupConfigIfNeeded(\n        this.surveyGroup.id,\n        this.surveyGroup.configuration\n      );\n\n      this.refresh();\n      setTimeout(() => {\n        this.liveQuestionIds = [];\n        this.liveUniqueIds = [];\n        this.liveUniqueIdsAll = [];\n        this.uniqueIdsToElementIndexes = {};\n        if (this.structuredQuestions) {\n          this.structuredQuestions.forEach((question, index) => {\n            if (\n              question.type &&\n              question.uniqueId &&\n              (question.type.toLowerCase() === 'textfield' ||\n                question.type.toLowerCase() === 'textfieldlong' ||\n                question.type.toLowerCase() === 'textarea' ||\n                question.type.toLowerCase() === 'textarealong' ||\n                question.type.toLowerCase() === 'numberfield' ||\n                question.type.toLowerCase() === 'checkboxes' ||\n                question.type.toLowerCase() === 'radios' ||\n                question.type.toLowerCase() === 'dropdown')\n            ) {\n              this.liveQuestionIds.push(index);\n              this.uniqueIdsToElementIndexes[question.uniqueId!] = index;\n              this.liveUniqueIds.push(question.uniqueId!);\n              this.liveUniqueIdsAll.push({\n                uniqueId: question.uniqueId!,\n                atIndex: index,\n              });\n            }\n          });\n        }\n        this._checkAndLoadState();\n      });\n    }\n  }\n\n  refresh() {\n    if (this.surveyGroup) {\n      if (this.surveyGroup.configuration.defaultLocale != null) {\n        window.appGlobals.changeLocaleIfNeeded(\n          this.surveyGroup.configuration.defaultLocale\n        );\n      }\n\n      window.appGlobals.analytics.setCommunityAnalyticsTracker(\n        this.surveyGroup.Community?.google_analytics_code\n      );\n\n      if (\n        this.surveyGroup.theme_id != null ||\n        (this.surveyGroup.configuration &&\n          this.surveyGroup.configuration.themeOverrideColorPrimary != null)\n      ) {\n        window.appGlobals.theme.setTheme(\n          this.surveyGroup.theme_id,\n          this.surveyGroup.configuration\n        );\n      } else if (\n        this.surveyGroup.Community &&\n        (this.surveyGroup.Community.theme_id != null ||\n          (this.surveyGroup.Community.configuration &&\n            this.surveyGroup.Community.configuration.themeOverrideColorPrimary))\n      ) {\n        window.appGlobals.theme.setTheme(\n          this.surveyGroup.Community.theme_id,\n          this.surveyGroup.Community.configuration\n        );\n      } else if (\n        this.surveyGroup.Community &&\n        this.surveyGroup.Community.Domain &&\n        this.surveyGroup.Community.Domain.theme_id != null\n      ) {\n        window.appGlobals.theme.setTheme(\n          this.surveyGroup.Community.Domain.theme_id\n        );\n      } else {\n        window.appGlobals.theme.setTheme(1);\n      }\n\n      window.appGlobals.setAnonymousGroupStatus(this.surveyGroup);\n      window.appGlobals.setRegistrationQuestionGroup(this.surveyGroup);\n\n      if (\n        this.surveyGroup.configuration &&\n        this.surveyGroup.configuration.disableFacebookLoginForGroup === true\n      ) {\n        window.appGlobals.disableFacebookLoginForGroup = true;\n      } else {\n        window.appGlobals.disableFacebookLoginForGroup = false;\n      }\n\n      if (\n        this.surveyGroup.configuration &&\n        this.surveyGroup.configuration.externalGoalTriggerUrl\n      ) {\n        window.appGlobals.externalGoalTriggerGroupId = this.surveyGroup.id;\n      } else {\n        window.appGlobals.externalGoalTriggerGroupId = undefined;\n      }\n\n      if (\n        this.surveyGroup.Community &&\n        this.surveyGroup.Community.configuration &&\n        this.surveyGroup.Community.configuration.signupTermsPageId &&\n        this.surveyGroup.Community.configuration.signupTermsPageId != -1\n      ) {\n        window.appGlobals.signupTermsPageId = this.surveyGroup.Community.configuration.signupTermsPageId;\n      } else {\n        window.appGlobals.signupTermsPageId = undefined;\n      }\n\n      if (\n        this.surveyGroup.Community &&\n        this.surveyGroup.Community.configuration &&\n        this.surveyGroup.Community.configuration.customSamlDeniedMessage\n      ) {\n        window.appGlobals.currentSamlDeniedMessage = this.surveyGroup.Community.configuration.customSamlDeniedMessage;\n      } else {\n        window.appGlobals.currentSamlDeniedMessage = undefined;\n      }\n\n      if (\n        this.surveyGroup.Community &&\n        this.surveyGroup.Community.configuration &&\n        this.surveyGroup.Community.configuration.customSamlLoginMessage\n      ) {\n        window.appGlobals.currentSamlLoginMessage = this.surveyGroup.Community.configuration.customSamlLoginMessage;\n      } else {\n        window.appGlobals.currentSamlLoginMessage = undefined;\n      }\n\n      window.appGlobals.currentGroup = this.surveyGroup;\n\n      if (\n        (this.surveyGroup.configuration &&\n          this.surveyGroup.configuration.forceSecureSamlLogin &&\n          !YpAccessHelpers.checkGroupAccess(this.surveyGroup)) ||\n        (this.surveyGroup.Community &&\n          this.surveyGroup.Community.configuration &&\n          this.surveyGroup.Community.configuration.forceSecureSamlLogin &&\n          !YpAccessHelpers.checkCommunityAccess(this.surveyGroup.Community))\n      ) {\n        window.appGlobals.currentForceSaml = true;\n      } else {\n        window.appGlobals.currentForceSaml = false;\n      }\n    }\n  }\n}\n"]}