{"version":3,"file":"PsAppGlobals.js","sourceRoot":"","sources":["../../src/policySynth/PsAppGlobals.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AAGzD,MAAM,OAAO,YAAa,SAAQ,YAAY;IAY5C,YAAY,SAAsB;QAChC,KAAK,CAAC,SAAgB,EAAE,IAAI,CAAC,CAAC;QAXhC,8BAAyB,GAAG,IAAI,CAAC;QAGjC,2BAAsB,GAAmC,IAAI,GAAG,EAAE,CAAC;QACnE,+BAA0B,GACxB,IAAI,GAAG,EAAE,CAAC;QAGZ,0BAAqB,GAAU,EAAE,CAAC;QA+BlC,wBAAmB,GAAG,CAAC,KAAwB,EAAQ,EAAE;YACvD,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QACnD,CAAC,CAAC;QAEF,4BAAuB,GAAG,CAAC,SAAqC,EAAQ,EAAE;YACxE,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;QAC/D,CAAC,CAAC;QAjCA,IAAI,CAAC,qBAAqB,GAAG,SAAS,CAAC;QACvC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,qCAAqC;QACrC,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC,QAAQ,CAAC;IAC5C,CAAC;IAED,wBAAwB,CAAC,EAAsB;QAC7C,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,2BAA2B,EAAE,CAAC;IACrC,CAAC;IAED,uBAAuB,CAAC,QAAkB;QACxC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC5C,CAAC;IAED,0BAA0B,CAAC,QAAkB;QAC3C,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAC5D,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,KAAK,QAAQ,CACpC,CAAC;IACJ,CAAC;IAED,2BAA2B;QACzB,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE,CAC9C,QAAQ,CAAC,IAAI,CAAC,qBAAqB,CAAC,CACrC,CAAC;IACJ,CAAC;IAUD,gBAAgB,CAAC,OAAe;QAC9B,OAAO,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IAClD,CAAC;IAED,oBAAoB,CAClB,WAAmB;QAEnB,OAAO,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAC1D,CAAC;CACF","sourcesContent":["import { YpAppGlobals } from \"../yp-app/YpAppGlobals.js\";\nimport { PsServerApi } from \"./PsServerApi.js\";\n\nexport class PsAppGlobals extends YpAppGlobals {\n  originalReferrer: string;\n  disableParentConstruction = true;\n  exernalGoalParamsWhiteList: string | undefined;\n\n  agentsInstanceRegistry: Map<number, PsAgentAttributes> = new Map();\n  connectorsInstanceRegistry: Map<number, PsAgentConnectorAttributes> =\n    new Map();\n\n  currentRunningAgentId: number | undefined;\n  currentAgentListeners: any[] = [];\n\n  constructor(serverApi: PsServerApi) {\n    super(serverApi as any, true);\n    this.currentRunningAgentId = undefined;\n    this.parseQueryString();\n    //this.earlName = this.getEarlName();\n    this.originalReferrer = document.referrer;\n  }\n\n  setCurrentRunningAgentId(id: number | undefined) {\n    this.currentRunningAgentId = id;\n    this.notifyCurrentAgentListeners();\n  }\n\n  addCurrentAgentListener(callback: Function) {\n    this.currentAgentListeners.push(callback);\n  }\n\n  removeCurrentAgentListener(callback: Function) {\n    this.currentAgentListeners = this.currentAgentListeners.filter(\n      (listener) => listener !== callback\n    );\n  }\n\n  notifyCurrentAgentListeners() {\n    this.currentAgentListeners.forEach((listener) =>\n      listener(this.currentRunningAgentId)\n    );\n  }\n\n  addToAgentsRegistry = (agent: PsAgentAttributes): void => {\n    this.agentsInstanceRegistry.set(agent.id, agent);\n  };\n\n  addToConnectorsRegistry = (connector: PsAgentConnectorAttributes): void => {\n    this.connectorsInstanceRegistry.set(connector.id, connector);\n  };\n\n  getAgentInstance(agentId: number): PsAgentAttributes | undefined {\n    return this.agentsInstanceRegistry.get(agentId);\n  }\n\n  getConnectorInstance(\n    connectorId: number\n  ): PsAgentConnectorAttributes | undefined {\n    return this.connectorsInstanceRegistry.get(connectorId);\n  }\n}\n"]}