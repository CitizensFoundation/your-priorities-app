{"version":3,"file":"yp-domain.js","sourceRoot":"","sources":["../../src/yp-collection/yp-domain.ts"],"names":[],"mappings":"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","sourcesContent":["import { YpAccessHelpers } from \"../common/YpAccessHelpers.js\";\nimport { YpMediaHelpers } from \"../common/YpMediaHelpers.js\";\n\nimport { YpCollection, CollectionTabTypes } from \"./yp-collection.js\";\nimport { YpCollectionItemsGrid } from \"./yp-collection-items-grid.js\";\nimport { customElement } from \"lit/decorators.js\";\nimport { AcActivities } from \"../ac-activities/ac-activities.js\";\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\";\nimport { html } from \"lit\";\n\n@customElement(\"yp-domain\")\nexport class YpDomain extends YpCollection {\n  constructor() {\n    super(\"domain\", \"community\", \"edit\", \"community.add\");\n  }\n\n  override refresh() {\n    super.refresh();\n\n    const domain = this.collection as YpDomainData;\n\n    if (domain) {\n      window.appGlobals.domain = domain;\n      window.appGlobals.analytics.setupGoogleAnalytics(domain);\n      this.collectionItems = domain.Communities;\n      this.setFabIconIfAccess(\n        domain.only_admins_can_create_communities,\n        YpAccessHelpers.checkDomainAccess(domain)\n      );\n\n      if (domain.DomainHeaderImages && domain.DomainHeaderImages.length > 0) {\n        YpMediaHelpers.setupTopHeaderImage(\n          this,\n          domain.DomainHeaderImages as Array<YpImageData>\n        );\n      } else {\n        YpMediaHelpers.setupTopHeaderImage(this, null);\n      }\n\n      window.appGlobals.theme.setTheme(domain.theme_id, domain.configuration);\n    }\n\n    window.appGlobals.setAnonymousGroupStatus(undefined);\n    window.appGlobals.setRegistrationQuestionGroup(undefined);\n    window.appGlobals.disableFacebookLoginForGroup = false;\n    window.appGlobals.externalGoalTriggerGroupId = undefined;\n    window.appGlobals.currentForceSaml = false;\n    window.appGlobals.currentSamlDeniedMessage = undefined;\n    window.appGlobals.currentSamlLoginMessage = undefined;\n    window.appGlobals.currentGroup = undefined;\n    window.appGlobals.signupTermsPageId = undefined;\n    window.appGlobals.setHighlightedLanguages(undefined);\n  }\n\n  scrollToCommunityItem() {\n    if (\n      this.selectedTab === CollectionTabTypes.Newsfeed &&\n      window.appGlobals.cache.cachedActivityItem\n    ) {\n      const list = this.$$(\"#collectionActivities\") as AcActivities;\n      if (list) {\n        list.scrollToItem(window.appGlobals.cache.cachedActivityItem);\n        window.appGlobals.cache.cachedActivityItem = undefined;\n      } else {\n        console.warn(\"No domain activities for scroll to item\");\n      }\n    } else if (\n      this.selectedTab === CollectionTabTypes.Collection &&\n      this.collection\n    ) {\n      if (\n        window.appGlobals.cache.backToDomainCommunityItems &&\n        window.appGlobals.cache.backToDomainCommunityItems[this.collection.id]\n      ) {\n        (this.$$(\"#collectionItems\") as YpCollectionItemsGrid).scrollToItem(\n          window.appGlobals.cache.backToDomainCommunityItems[this.collection.id]\n        );\n        window.appGlobals.cache.backToDomainCommunityItems[this.collection.id] =\n          undefined;\n      }\n    }\n  }\n\n  scrollToCollectionItemSubClass() {\n    if (\n      this.collection &&\n      window.appGlobals.cache.backToDomainCommunityItems &&\n      window.appGlobals.cache.backToDomainCommunityItems[this.collection.id]\n    ) {\n      (this.$$(\"#collectionItems\") as YpCollectionItemsGrid).scrollToItem(\n        window.appGlobals.cache.backToDomainCommunityItems[this.collection.id]\n      );\n      window.appGlobals.cache.backToDomainCommunityItems[this.collection.id] =\n        undefined;\n    }\n  }\n\n  override render() {\n    if (\n      !this.loggedInUser &&\n      this.collection &&\n      (this.collection.configuration as YpDomainConfiguration)\n        .welcomeHTMLforNotLoggedInUsers\n    ) {\n      return html`${unsafeHTML(\n        (this.collection.configuration as YpDomainConfiguration)\n          .welcomeHTMLforNotLoggedInUsers\n      )}`;\n    } else {\n      return super.render();\n    }\n  }\n}\n"]}