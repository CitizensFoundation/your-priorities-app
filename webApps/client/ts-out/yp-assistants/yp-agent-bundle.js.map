{"version":3,"file":"yp-agent-bundle.js","sourceRoot":"","sources":["../../src/yp-assistants/yp-agent-bundle.ts"],"names":[],"mappings":"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","sourcesContent":["import { customElement, property } from \"lit/decorators.js\";\nimport { YpAssistantBase } from \"./yp-assistant-base.js\";\nimport { YpLanguages } from \"../common/languages/ypLanguages.js\";\nimport { YpAssistantServerApi } from \"./AssistantServerApi.js\";\nimport { css, html } from \"lit\";\nimport { YpCollection } from \"../yp-collection/yp-collection.js\";\nimport { YpBaseElementWithLogin } from \"../common/yp-base-element-with-login.js\";\n\n@customElement(\"yp-agent-bundle\")\nexport class YpAgentBundle extends YpBaseElementWithLogin {\n  @property({ type: Number })\n  domainId!: number;\n\n  @property({ type: String })\n  subRoute?: string;\n\n  @property({ type: Boolean })\n  loggedInChecked = false;\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        .container {\n          background-color: var(--md-sys-color-surface-container-lowest);\n          height: 100vh;\n        }\n\n        .selfStart {\n          align-self: start;\n        }\n\n        .fixed {\n          position: fixed;\n          top: 156px;\n          left: 48px;\n        }\n\n        yp-assistant,\n        .assistantPlaceholder {\n          width: 820px;\n          max-width: 820px;\n          height: 100vh;\n        }\n\n        .agentBundleLogo {\n          width: 125px;\n          height: 39px;\n          margin-right: 64px;\n          z-index: 1;\n        }\n\n        .logoContainer {\n          padding: 16px;\n          z-index: 1;\n        }\n      `,\n    ];\n  }\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"subRoute\") && this.subRoute) {\n      const splitSubRoute = this.subRoute.split(\"/\");\n      this.domainId = parseInt(splitSubRoute[1]);\n    }\n  }\n\n  //TODO: Remove when a better db driven solution is implemented\n  temporaryAccessIds = [\n    \"d155616b-e657-47a3-bb8b-14924cdd78b8\",\n    \"6a1e8403-8fc9-4cb5-87aa-bd768200cff3\",\n    \"63d76e5e-33c7-477f-9dd2-c6a86a63da22\",\n    \"b9171d79-2913-4de1-91d6-aa75c0e0e705\",\n    \"c99f00a1-a6ea-45fa-b10e-aafb07bcebc1\",\n    \"74bd6d20-2d4a-4964-96be-6a1c55805ac3\",\n    \"adbca2e3-8c68-40b2-a006-fe6d6486c84b\",\n    \"32dcf7e1-ae0b-4296-9a60-1dfd753cd4f4\",\n    \"61ca9032-977c-48d6-b6a2-0f7d855868c9\",\n    \"ce6bbc2c-cff7-494f-b265-99ffc1da2bd3\",\n    \"b64adda3-f6c3-4237-82b9-28119d5cd167\",\n    \"2fd9c777-9d3d-462e-933d-7c94ab476bbe\",\n    \"68dc391e-959a-4c58-90de-227b567cd772\",\n    \"9be7cf35-49ac-4cb6-99dd-0447e99a10f4\",\n    \"9c7693f2-99e7-4957-a932-3365aab71896\",\n    \"42c05569-2e94-443e-99d2-e7bfb039d219\",\n    \"ebec3299-ae13-45f1-835f-c90d6052dce2\",\n    \"67c38917-2019-414a-a642-4791701b8272\",\n    \"56afea8c-e4bc-4ab0-bf01-1a88aba49019\",\n    \"a229cca1-1eab-4f21-a486-ebe26a234930\",\n    \"44c53fb7-71d8-433c-992d-f96245f6f218\",\n    \"1f486fcc-e999-44f0-ab3a-7a17a08f632e\",\n    \"fffd7871-d723-4a58-ba58-525a822959fa\",\n    \"099db19a-ba91-4d31-8b05-6d2d91a8d990\",\n    \"735b0a4e-c97d-4036-bdb2-5d7bc43f1345\",\n    \"560ff99f-6389-4a1c-ac9b-5c9cf3cb4308\",\n    \"956e7f74-6fc6-4e01-81b4-098c193e6450\",\n    \"c657637d-10fc-4648-ae7c-1e0bc623aa01\",\n    \"c5e02b14-dee7-49d2-bb27-465470ff32d9\",\n    \"8f308d80-8d96-4a55-9ba8-6b10717746ef\",\n    \"2e3595f2-3fbb-4b55-bc94-ee47a727a635\",\n    \"1dec37ea-6b1f-43e6-976e-60f0a9273038\",\n    \"0a4b2b6c-1d7b-4eb2-981c-472fc2937bda\",\n    \"71995556-72f5-4cd4-b8e2-d5018c1bced0\",\n    \"9b97460c-65ce-49fd-b119-e7fc49da1174\",\n    \"ae8298b3-ea9e-4501-92ee-ca0a8cb01d9f\",\n    \"3bc12cdd-f1a8-47f4-8bf3-fdbb422b4002\",\n    \"5e6e30a6-467d-4fe2-a155-613084b09bba\",\n    \"294b979a-a1df-4c82-ae93-ab7c31712ba4\",\n    \"0ec5961b-ac18-47c6-bb18-b1ebe67df559\",\n    \"869793b5-8e31-4576-a332-91c215fde9bc\",\n    \"d5270856-cb59-4f2e-bda4-faee97650e89\",\n    \"a211fb6a-b3a1-48b1-9576-d33e849558ec\",\n    \"b6d19287-92e7-4a23-9374-731e23c29e23\",\n    \"504ed57e-1b2e-4b71-96da-86025c69dd4c\",\n    \"3d627ea9-4b58-47dd-b32b-ae296a17dbd8\",\n    \"3bee89e1-7bec-4531-b532-a30a2b4dba6f\",\n    \"cfad5e3c-6415-41d0-8e38-5725abd29b30\",\n    \"73527e19-8ec5-411f-968d-5b327ecd468d\",\n    \"3e5946d5-f242-4f8d-a28b-fbad186a79be\",\n    \"635fe079-b9f8-4b0e-b4e5-c8767e472f51\",\n    \"2b4ab1d3-b048-4a97-9da4-f720f5339cf3\",\n    \"bcbc10a3-786f-45cb-9d71-6e60d7a17ca8\",\n    \"4d0624b3-ffe9-4024-a719-127781221d37\",\n    \"0d511f49-bf91-43a9-9334-dce07b51a2c7\",\n    \"3bee89e1-7bec-4531-b532-a30a2b4dba6f\",\n    \"cfad5e3c-6415-41d0-8e38-5725abd29b30\",\n    \"73527e19-8ec5-411f-968d-5b327ecd468d\",\n    \"3e5946d5-f242-4f8d-a28b-fbad186a79be\",\n    \"635fe079-b9f8-4b0e-b4e5-c8767e472f51\",\n    \"2b4ab1d3-b048-4a97-9da4-f720f5339cf3\",\n    \"bcbc10a3-786f-45cb-9d71-6e60d7a17ca8\",\n    \"4d0624b3-ffe9-4024-a719-127781221d37\",\n    \"0d511f49-bf91-43a9-9334-dce07b51a2c7\",\n    \"77b4bbcf-fdf7-431c-94de-cc5c4bfc39dc\",\n    \"5d981c3c-de92-4680-a441-6372262a4220\",\n    \"8d5c70f1-6795-4bf9-9c71-109314fc62a4\",\n    \"55a5bf0c-50db-4a65-adb2-522bd35f7c78\",\n    \"e8a61dac-894c-43d9-8467-b3c5c13585c5\",\n    \"ed034349-458c-4418-bdb1-2ce3e3e7a6c7\",\n    \"fac4488a-61c0-4fa9-adb4-746ff94e9791\",\n    \"9069838c-03d7-4841-8ad1-a6596e759cd7\",\n    \"fd00acf1-7d1f-464e-b49f-ca3ec9e758ca\",\n    \"d02a91cd-6b1b-4a02-9c96-bb5d8c3ffc90\",\n    \"0f5ea708-3078-4b92-a766-855bdbdc9577\",\n    \"ba7018c8-3747-4e85-849b-8355e1d0b4e2\",\n    \"77b53017-7a08-445b-8e3a-e739482f0578\",\n    \"0092bd8d-3816-4021-a142-44b1fbd396cb\",\n    \"baa3495c-dfa0-4926-bf14-0b82d548e64e\",\n    \"619e2530-ebbb-4cef-b4f1-8a74919dbc54\",\n    \"68ca3252-f91c-488b-be88-a5e3857db44c\",\n    \"eef2e946-2266-4865-9911-c52d8dbdd3d4\",\n    \"982cdf7f-2081-4fd2-b267-3cfb72f7ea96\",\n    \"11fbeb2c-0e8e-4d7b-948b-90356539090b\",\n  ];\n\n  override _loggedIn(event: CustomEvent) {\n    this.loggedInUser = event.detail;\n\n    if (\n      !this.loggedInChecked &&\n      !this.loggedInUser &&\n      !localStorage.getItem(\"temporaryAmpliferAlphaAccessId\")\n    ) {\n      this.loggedInChecked = true;\n      if (window.appGlobals.originalQueryParameters.accessToken) {\n        if (\n          !this.temporaryAccessIds.includes(\n            window.appGlobals.originalQueryParameters.accessToken as string\n          )\n        ) {\n          window.location.href = \"https://evoly.ai/en/amplifier/\";\n        } else {\n          localStorage.setItem(\n            \"temporaryAmpliferAlphaAccessId\",\n            window.appGlobals.originalQueryParameters.accessToken as string\n          );\n        }\n      } else {\n        window.location.href = \"https://evoly.ai/en/amplifier/\";\n      }\n    }\n    this.requestUpdate();\n  }\n\n  renderLogo() {\n    return html`<div class=\"logoContainer\">\n      ${this.themeDarkMode\n        ? html`\n            <img\n              class=\"agentBundleLogo\"\n              src=\"https://yrpri-eu-direct-assets.s3.eu-west-1.amazonaws.com/amplifierLogo.png\"\n            />\n          `\n        : html`\n            <img\n              class=\"agentBundleLogo\"\n              src=\"https://yrpri-eu-direct-assets.s3.eu-west-1.amazonaws.com/amplifierLogo.png\"\n            />\n          `}\n    </div> `;\n  }\n\n  override render() {\n    return html`\n      <div class=\"layout horizontal center-center container\">\n        <div class=\"selfStart fixed\" hidden></div>\n        ${this.domainId\n          ? html` <yp-assistant\n              id=\"assistant\"\n              .domainId=\"${this.domainId!}\"\n              class=\"selfStart\"\n            ></yp-assistant>`\n          : html`<div class=\"assistantPlaceholder\"></div>`}\n\n        <div hidden class=\"selfStart agentBundleLogo\"></div>\n      </div>\n    `;\n  }\n}\n"]}