{"version":3,"file":"yp-app.js","sourceRoot":"","sources":["../../src/yp-app/yp-app.ts"],"names":[],"mappings":"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","sourcesContent":["/*\nimport './yp-app-nav-drawer.js';\nimport '../yp-dialog-container/yp-dialog-container.js';\nimport '../yp-user/yp-user-image.js';\nimport '../yp-app-globals/yp-sw-update-toast.js';\n*/\n\nimport \"../ac-notifications/ac-notification-list.js\";\n\nimport { html, LitElement, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators.js\";\n\nimport { cache } from \"lit/directives/cache.js\";\n\n//TODO: Fix moment\n//import moment from 'moment';\n\nimport \"./yp-snackbar.js\";\nimport \"./yp-drawer.js\";\n\n//import { Drawer } from '@material/yp-drawer';\n//import '@material/yp-drawer';\n\nimport \"@material/web/button/text-button.js\";\nimport \"@material/web/labs/badge/badge.js\";\nimport \"@material/web/iconbutton/icon-button.js\";\n\nimport \"@material/web/iconbutton/icon-button.js\";\n\nimport \"@material/web/progress/circular-progress.js\";\nimport \"@material/web/menu/menu.js\";\nimport \"@material/web/fab/fab.js\";\nimport \"@material/web/menu/menu-item.js\";\nimport \"@material/web/button/text-button.js\";\n\nimport \"./yp-top-app-bar.js\";\n\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\nimport { YpAppStyles } from \"./YpAppStyles.js\";\nimport { YpAppGlobals } from \"./YpAppGlobals.js\";\nimport { YpAppUser } from \"./YpAppUser.js\";\nimport { YpServerApi } from \"../common/YpServerApi.js\";\nimport { YpNavHelpers } from \"../common/YpNavHelpers.js\";\nimport { YpAppDialogs } from \"../yp-dialog-container/yp-app-dialogs.js\";\n\nimport \"../yp-dialog-container/yp-app-dialogs.js\";\n\nimport \"../yp-collection/yp-domain.js\";\nimport \"../yp-collection/yp-community.js\";\nimport \"../yp-collection/yp-group.js\";\n\nimport \"./yp-app-nav-drawer.js\";\n\nimport { YpDomain } from \"../yp-collection/yp-domain.js\";\nimport { YpCommunity } from \"../yp-collection/yp-community.js\";\nimport { YpGroup } from \"../yp-collection/yp-group.js\";\nimport \"../yp-post/yp-post.js\";\nimport { YpCollection } from \"../yp-collection/yp-collection.js\";\nimport { YpPageDialog } from \"../yp-page/yp-page-dialog.js\";\nimport { YpAppNavDrawer } from \"./yp-app-nav-drawer.js\";\nimport { Dialog } from \"@material/web/dialog/internal/dialog.js\";\nimport { Corner, Menu } from \"@material/web/menu/menu.js\";\nimport { YpServerApiAdmin } from \"../common/YpServerApiAdmin.js\";\nimport { MdDialog } from \"@material/web/dialog/dialog.js\";\nimport { YpDrawer } from \"./yp-drawer.js\";\nimport { YpSnackbar } from \"./yp-snackbar.js\";\nimport { PsAppGlobals } from \"../policySynth/PsAppGlobals.js\";\nimport { PsServerApi } from \"../policySynth/PsServerApi.js\";\nimport { YpTopAppBar } from \"./yp-top-app-bar.js\";\n\ndeclare global {\n  interface Window {\n    appGlobals: YpAppGlobals;\n    psAppGlobals: PsAppGlobals;\n    psServerApi: PsServerApi;\n    appUser: YpAppUser;\n    appDialogs: YpAppDialogs;\n    serverApi: YpServerApi;\n    adminServerApi: YpServerApiAdmin;\n    app: YpApp;\n    locale: string;\n    autoTranslate: boolean;\n    MSStream: any;\n    PasswordCredential?: any;\n    FederatedCredential?: any;\n  }\n}\n\ntype YpAppModes = \"main\" | \"admin\" | \"promotion\" | \"analytics\";\n\n@customElement(\"yp-app\")\nexport class YpApp extends YpBaseElement {\n  @property({ type: Object })\n  homeLink: YpHomeLinkData | undefined;\n\n  @property({ type: String })\n  page: string | undefined;\n\n  @property({ type: String })\n  appMode = \"main\" as YpAppModes;\n\n  @property({ type: Object })\n  user: YpUserData | undefined;\n\n  @property({ type: String })\n  backPath: string | undefined;\n\n  @property({ type: Boolean })\n  showSearch = false;\n\n  @property({ type: Boolean })\n  showBack = false;\n\n  @property({ type: Boolean })\n  loadingAppSpinner = false;\n\n  @property({ type: String })\n  forwardToPostId: string | undefined;\n\n  @property({ type: String })\n  headerTitle: string | undefined;\n\n  @property({ type: String })\n  numberOfUnViewedNotifications: string | undefined;\n\n  @property({ type: Boolean })\n  hideHelpIcon = false;\n\n  @property({ type: Boolean })\n  autoTranslate = false;\n\n  @property({ type: String })\n  languageName: string | undefined;\n\n  @property({ type: Number })\n  goForwardToPostId: number | undefined;\n\n  @property({ type: Boolean })\n  showBackToPost = false;\n\n  @property({ type: String })\n  goForwardPostName: string | undefined;\n\n  @property({ type: Array })\n  pages: Array<YpHelpPageData> = [];\n\n  @property({ type: String })\n  headerDescription: string | undefined;\n\n  @property({ type: String })\n  notifyDialogHeading: string | undefined;\n\n  @property({ type: String })\n  notifyDialogText: string | undefined;\n\n  @property({ type: String })\n  route = \"\";\n\n  @property({ type: String })\n  subRoute: string | undefined;\n\n  @property({ type: Object })\n  routeData: Record<string, string> = {};\n\n  @property({ type: Boolean })\n  userDrawerOpened = false;\n\n  @property({ type: Boolean })\n  navDrawerOpened = false;\n\n  @property({ type: Boolean })\n  languageLoaded = false;\n\n  //TODO: Refactor this\n  @property({ type: String })\n  keepOpenForPost: string | undefined;\n\n  //TODO: Refactor this\n  @property({ type: String })\n  keepOpenForGroup: string | undefined;\n\n  @property({ type: Array })\n  breadcrumbs: Array<{ name: string; url: string }> = [];\n\n  anchor: HTMLElement | null = null;\n\n  previousSearches: Array<string> = [];\n\n  storedBackPath: string | undefined;\n\n  storedLastDocumentTitle: string | undefined;\n\n  useHardBack = false;\n\n  _scrollPositionMap = {};\n\n  goBackToPostId: number | undefined;\n\n  currentPostId: number | undefined;\n\n  goForwardCount = 0;\n\n  firstLoad = true;\n\n  communityBackOverride: Record<string, Record<string, string>> | undefined;\n\n  touchXDown: number | undefined;\n  touchYDown: number | undefined;\n  touchXUp: number | undefined;\n  touchYUp: number | undefined;\n\n  userDrawerOpenedDelayed = false;\n  navDrawOpenedDelayed = false;\n  haveLoadedAdminApp = false;\n  haveLoadedPromotionApp = false;\n\n  constructor() {\n    super();\n    window.app = this;\n    window.serverApi = new YpServerApi();\n    window.adminServerApi = new YpServerApiAdmin();\n    window.appGlobals = new YpAppGlobals(window.serverApi);\n    window.appUser = new YpAppUser(window.serverApi);\n    window.appGlobals.setupTranslationSystem();\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    console.log(\"App Starting __VERSION__\");\n    this._setupEventListeners();\n    this._setupSamlCallback();\n    this.updateLocation();\n    document.addEventListener(\"keydown\", this._handleKeyDown.bind(this));\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this._removeEventListeners();\n    document.removeEventListener(\"keydown\", this._handleKeyDown.bind(this));\n  }\n\n  override async updated(\n    changedProperties: Map<string | number | symbol, unknown>\n  ): Promise<void> {\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"appMode\")) {\n      if (!this.haveLoadedAdminApp && this.appMode == \"admin\") {\n        this.loadingAppSpinner = true;\n        await this.updateComplete;\n        await import(\"../admin/yp-admin-app.js\");\n        this.haveLoadedAdminApp = true;\n        this.loadingAppSpinner = false;\n      }\n\n      if (\n        !this.haveLoadedPromotionApp &&\n        (this.appMode == \"analytics\" || this.appMode == \"promotion\")\n      ) {\n        console.log(\"Loading promotion app\");\n        this.loadingAppSpinner = true;\n        await this.updateComplete;\n        await import(\"../analytics-and-promotion/yp-promotion-app.js\");\n        this.haveLoadedPromotionApp = true;\n        this.loadingAppSpinner = false;\n      }\n    }\n  }\n\n  _navDrawOpened(event: CustomEvent) {\n    setTimeout(() => {\n      this.navDrawOpenedDelayed = event.detail;\n    }, 500);\n  }\n\n  _languageLoaded() {\n    this.languageLoaded = true;\n  }\n\n  _ypError(event: CustomEvent) {\n    const text = event.detail;\n    if (text) {\n      this.notifyDialogText = text;\n      (this.$$(\"#dialog\") as Dialog).open = true;\n    }\n  }\n\n  _netWorkError(event: CustomEvent) {\n    const detail = event.detail;\n    let errorText = this.t(\"generalError\")\n      ? this.t(\"generalError\")\n      : \"Can't connect to server, try again later\";\n    let statusCode = -1;\n\n    if (detail.response && detail.response.status === 404)\n      errorText = this.t(\"errorNotFound\");\n    else if (detail.response && detail.response.status === 401)\n      errorText = this.t(\"errorNotAuthorized\");\n    else if (\n      detail.response &&\n      detail.response.status === 500 &&\n      detail.response.message == \"SequelizeUniqueConstraintError\"\n    )\n      errorText = this.t(\"user.alreadyRegisterred\");\n    else if (detail.errorText) errorText = detail.errorText;\n\n    if (detail.response && detail.response.status)\n      statusCode = detail.response.status;\n\n    if (detail.showUserError) {\n      this.notifyDialogText = errorText;\n      (this.$$(\"#dialog\") as Dialog).open = true;\n    }\n\n    console.error(`Can't connect to server. ${statusCode} ${detail.jsonError}`);\n  }\n\n  _setupEventListeners() {\n    this.addGlobalListener(\n      \"yp-auto-translate\",\n      this._autoTranslateEvent.bind(this)\n    );\n    this.addGlobalListener(\n      \"yp-theme-configuration-updated\",\n      this._themeUpdated\n    );\n    this.addGlobalListener(\"yp-change-header\", this._onChangeHeader.bind(this));\n    this.addGlobalListener(\"yp-logged-in\", this._onUserChanged.bind(this));\n    this.addGlobalListener(\"yp-network-error\", this._netWorkError.bind(this));\n    this.addGlobalListener(\"yp-error\", this._ypError.bind(this));\n    this.addListener(\n      \"yp-add-back-community-override\",\n      this._addBackCommunityOverride,\n      this\n    );\n    this.addListener(\n      \"yp-reset-keep-open-for-page\",\n      this._resetKeepOpenForPage,\n      this\n    );\n    this.addListener(\"yp-open-login\", this._login, this);\n    this.addListener(\"yp-open-page\", this._openPageFromEvent, this);\n    this.addGlobalListener(\"yp-open-toast\", this._openToast.bind(this));\n    this.addListener(\"yp-open-notify-dialog\", this._openNotifyDialog, this);\n    this.addListener(\"yp-dialog-closed\", this._dialogClosed, this);\n    this.addListener(\"yp-language-name\", this._setLanguageName, this);\n\n    this.addGlobalListener(\n      \"yp-language-loaded\",\n      this._languageLoaded.bind(this)\n    );\n\n    this.addGlobalListener(\"yp-refresh-domain\", this._refreshDomain.bind(this));\n    this.addGlobalListener(\n      \"yp-refresh-community\",\n      this._refreshCommunity.bind(this)\n    );\n    this.addGlobalListener(\"yp-refresh-group\", this._refreshGroup.bind(this));\n\n    this.addListener(\"yp-close-right-drawer\", this._closeRightDrawer, this);\n    this.addListener(\n      \"yp-set-number-of-un-viewed-notifications\",\n      this._setNumberOfUnViewedNotifications,\n      this\n    );\n    this.addListener(\"yp-redirect-to\", this._redirectTo, this);\n    this.addListener(\"yp-set-home-link\", this._setHomeLink, this);\n    this.addListener(\"yp-set-next-post\", this._setNextPost, this);\n    this.addListener(\"yp-set-pages\", this._setPages, this);\n\n    this.addListener(\n      \"yp-clipboard-copy-notification\",\n      this._haveCopiedNotification,\n      this\n    );\n\n    window.addEventListener(\"locationchange\", this.updateLocation.bind(this));\n    window.addEventListener(\"location-changed\", this.updateLocation.bind(this));\n    window.addEventListener(\"popstate\", this.updateLocation.bind(this));\n    this.addGlobalListener(\n      \"yp-app-dialogs-ready\",\n      this._appDialogsReady.bind(this)\n    );\n    this._setupTouchEvents();\n  }\n\n  _themeUpdated(event: CustomEvent) {\n    window.appGlobals.theme.updateLiveFromConfiguration(event.detail);\n  }\n\n  _removeEventListeners() {\n    this.removeGlobalListener(\"yp-auto-translate\", this._autoTranslateEvent);\n    this.removeGlobalListener(\"yp-change-header\", this._onChangeHeader);\n    this.removeGlobalListener(\"yp-logged-in\", this._onUserChanged);\n    this.removeGlobalListener(\"yp-network-error\", this._netWorkError);\n    this.removeGlobalListener(\"yp-error\", this._ypError);\n    this.removeGlobalListener(\n      \"yp-theme-configuration-updated\",\n      this._themeUpdated\n    );\n    this.removeGlobalListener(\n      \"yp-language-loaded\",\n      this._languageLoaded.bind(this)\n    );\n\n    this.removeListener(\n      \"yp-add-back-community-override\",\n      this._addBackCommunityOverride,\n      this\n    );\n    this.removeListener(\n      \"yp-reset-keep-open-for-page\",\n      this._resetKeepOpenForPage,\n      this\n    );\n    this.removeListener(\"yp-open-login\", this._login, this);\n    this.removeListener(\"yp-open-page\", this._openPageFromEvent, this);\n    this.removeGlobalListener(\"yp-open-toast\", this._openToast.bind(this));\n    this.removeListener(\"yp-open-notify-dialog\", this._openNotifyDialog, this);\n    this.removeListener(\"yp-dialog-closed\", this._dialogClosed, this);\n    this.removeListener(\"yp-language-name\", this._setLanguageName, this);\n    this.removeGlobalListener(\"yp-refresh-domain\", this._refreshDomain);\n    this.removeGlobalListener(\"yp-refresh-community\", this._refreshCommunity);\n    this.removeGlobalListener(\"yp-refresh-group\", this._refreshGroup);\n    this.removeListener(\"yp-close-right-drawer\", this._closeRightDrawer, this);\n    this.removeListener(\n      \"yp-set-number-of-un-viewed-notifications\",\n      this._setNumberOfUnViewedNotifications,\n      this\n    );\n    this.removeListener(\"yp-redirect-to\", this._redirectTo, this);\n    this.removeListener(\"yp-set-home-link\", this._setHomeLink, this);\n    this.removeListener(\"yp-set-next-post\", this._setNextPost, this);\n    this.removeListener(\"yp-set-pages\", this._setPages, this);\n    this.removeListener(\n      \"yp-clipboard-copy-notification\",\n      this._haveCopiedNotification,\n      this\n    );\n\n    window.removeEventListener(\"locationchange\", this.updateLocation);\n    window.removeEventListener(\"location-changed\", this.updateLocation);\n    window.removeEventListener(\"popstate\", this.updateLocation);\n    this.removeGlobalListener(\n      \"yp-app-dialogs-ready\",\n      this._appDialogsReady.bind(this)\n    );\n    this._removeTouchEvents();\n  }\n\n  static override get styles() {\n    return [super.styles, YpAppStyles];\n  }\n\n  _haveCopiedNotification() {\n    this.notifyDialogText = this.t(\"copiedToClipboard\");\n    (this.$$(\"#dialog\") as Dialog).open = true;\n  }\n\n  _appDialogsReady(event: CustomEvent) {\n    if (event.detail) {\n      window.appDialogs = event.detail;\n    }\n  }\n\n  updateLocation() {\n    let path = window.location.pathname;\n\n    if (path.includes(\"/admin\")) {\n      this.appMode = \"admin\";\n      path = path.replace(\"/admin\", \"\");\n    } else if (path.includes(\"/promotion\")) {\n      this.appMode = \"promotion\";\n      path = path.replace(\"/promotion\", \"\");\n    } else if (path.includes(\"/analytics\")) {\n      this.appMode = \"analytics\";\n      path = path.replace(\"/analytics\", \"\");\n    } else {\n      this.appMode = \"main\";\n    }\n\n    const pattern = \"/:page\";\n\n    const remainingPieces = path.split(\"/\");\n    const patternPieces = pattern.split(\"/\");\n\n    const matched = [];\n    const namedMatches: Record<string, string> = {};\n\n    const oldRouteData = { ...this.routeData };\n\n    for (let i = 0; i < patternPieces.length; i++) {\n      const patternPiece = patternPieces[i];\n      if (!patternPiece && patternPiece !== \"\") {\n        break;\n      }\n      const pathPiece = remainingPieces.shift();\n\n      // We don't match this path.\n      if (!pathPiece && pathPiece !== \"\") {\n        return;\n      }\n      matched.push(pathPiece);\n\n      if (patternPiece.charAt(0) == \":\") {\n        namedMatches[patternPiece.slice(1)] = pathPiece;\n      } else if (patternPiece !== pathPiece) {\n        return;\n      }\n    }\n\n    let tailPath = remainingPieces.join(\"/\");\n    if (remainingPieces.length > 0) {\n      tailPath = \"/\" + tailPath;\n    }\n\n    this.subRoute = tailPath;\n    this.route = path;\n\n    this.routeData = namedMatches;\n\n    this._routeChanged();\n    this._routePageChanged(oldRouteData);\n  }\n\n  //TODO: Use someth8ing like https://boguz.github.io/burgton-button-docs/\n  renderNavigationIcon() {\n    let icons = html``;\n\n    if (this.closePostHeader) {\n      icons = html`<md-icon-button\n        title=\"${this.t(\"close\")}\"\n        @click=\"${this._closePost}\"\n        ><md-icon>close</md-icon></md-icon-button\n      >`;\n    } else if (this.keepOpenForGroup) {\n      icons = html`<md-icon-button\n        title=\"${this.t(\"close\")}\"\n        @click=\"${this._closeForGroup}\"\n        ><md-icon>close</md-icon></md-icon-button\n      >`;\n    } else if (this.showBack) {\n      icons = html`<md-icon-button\n        title=\"${this.t(\"goBack\")}\"\n        slot=\"actionItems\"\n        ?hidden=\"${!this.backPath}\"\n        @click=\"${this.goBack}\"\n        ><md-icon>arrow_upward</md-icon>\n      </md-icon-button>`;\n    }\n\n    return html`${icons}\n    ${this.goForwardToPostId\n      ? html`\n          <md-icon-button\n            title=\"${this.t(\"forwardToPost\")}\"\n            @click=\"${this._goToNextPost}\"\n            ><md-icon>fast_forward</md-icon></md-icon-button\n          >\n        `\n      : nothing}`;\n  }\n\n  _openHelpMenu() {\n    (this.$$(\"#helpMenu\") as Menu).open = true;\n  }\n\n  renderActionItems() {\n    return html`\n      <md-icon-button\n        id=\"translationButton\"\n        slot=\"actionItems\"\n        class=\"topActionItem\"\n        ?hidden=\"${!this.autoTranslate}\"\n        @click=\"${window.appGlobals.stopTranslation}\"\n        .label=\"${this.t(\"stopAutoTranslate\")}\"\n        ><md-icon>translate</md-icon>\n      </md-icon-button>\n\n      <md-icon-button\n        id=\"helpIconButton\"\n        slot=\"actionItems\"\n        class=\"topActionItem\"\n        @click=\"${this._openNavDrawer}\"\n        title=\"${this.t(\"menu.help\")}\"\n        ><md-icon>explore</md-icon></md-icon-button\n      >\n\n      <div\n        style=\"position: relative;\"\n        ?hidden=\"${this.hideHelpIcon}\"\n        slot=\"actionItems\"\n      >\n        <span style=\"position: relative\">\n          <md-icon-button\n            id=\"helpIconButton\"\n            class=\"topActionItem\"\n            @click=\"${this._openHelpMenu}\"\n            title=\"${this.t(\"menu.help\")}\"\n            ><md-icon>help_outline</md-icon>\n          </md-icon-button>\n          <md-menu\n            id=\"helpMenu\"\n            positioning=\"popover\"\n            .menuCorner=\"${Corner.START_START}\"\n            anchor=\"helpIconButton\"\n          >\n            ${this.translatedPages(this.pages).map(\n              (page: YpHelpPageData, index) => html`\n                <md-menu-item\n                  data-args=\"${index}\"\n                  @click=\"${this._openPageFromMenu}\"\n                >\n                  <div slot=\"headline\">${this._getLocalizePageTitle(page)}</div>\n                </md-menu-item>\n              `\n            )}\n          </md-menu>\n        </span>\n      </div>\n\n      ${this.user\n        ? html`\n            <md-icon-button\n              class=\"userImageNotificationContainer layout horizontal\"\n              @click=\"${this._openUserDrawer}\"\n              slot=\"actionItems\"\n            >\n              <yp-user-image id=\"userImage\" small .user=\"${this.user}\">\n              </yp-user-image>\n              <md-badge\n                id=\"notificationBadge\"\n                class=\"activeBadge\"\n                .value=\"${this.numberOfUnViewedNotifications}\"\n                ?hidden=\"${!this.numberOfUnViewedNotifications}\"\n              >\n              </md-badge>\n            </md-icon-button>\n          `\n        : html`\n            <md-icon-button\n              slot=\"actionItems\"\n              class=\"topActionItem userImageNotificationContainer\"\n              @click=\"${this._login}\"\n              title=\"${this.t(\"user.login\")}\"\n              ><md-icon>person</md-icon>\n            </md-icon-button>\n          `}\n    `;\n  }\n\n  renderMainApp() {\n    let titleString =\n      this.goForwardToPostId && this.goForwardPostName\n        ? this.goForwardPostName\n        : (this.showBack ? this.headerTitle : \"\") || \"\";\n\n    //TODO: Refactor this logic\n    if (this.keepOpenForGroup || this.closePostHeader) {\n      titleString = \"\";\n    }\n\n    return html`\n      <yp-top-app-bar\n        role=\"navigation\"\n        .titleString=\"${titleString}\"\n        aria-label=\"top navigation\"\n        ?hideBreadcrumbs=\"${!titleString || titleString==\"\"}\"\n        ?hidden=\"${this.appMode !== \"main\" ||\n        window.appGlobals.domain?.configuration.hideAppBarIfWelcomeHtml}\"\n      >\n        <div slot=\"navigation\">${this.renderNavigationIcon()}</div>\n        <div slot=\"title\"></div>\n        <div slot=\"action\">${this.renderActionItems()}</div>\n      </yp-top-app-bar>\n      <div class=\"mainPage\" ?hidden=\"${this.appMode !== \"main\"}\">\n        ${this.renderPage()}\n      </div>\n    `;\n  }\n\n  renderGroupPage() {\n    return html`\n      <yp-group id=\"groupPage\" .subRoute=\"${this.subRoute}\"></yp-group>\n    `;\n  }\n\n  renderPage() {\n    let pageHtml;\n    if (this.page) {\n      switch (this.page) {\n        case \"domain\":\n          pageHtml = cache(html`\n            <yp-domain id=\"domainPage\" .subRoute=\"${this.subRoute}\"></yp-domain>\n          `);\n          break;\n        case \"community\":\n          pageHtml = cache(html`\n            <yp-community id=\"communityPage\" .subRoute=\"${this.subRoute}\">\n            </yp-community>\n          `);\n          break;\n        case \"community_folder\":\n          pageHtml = cache(html`\n            <yp-community-folder\n              id=\"communityFolderPage\"\n              .subRoute=\"${this.subRoute}\"\n            >\n            </yp-community-folder>\n          `);\n          break;\n        case \"group\":\n          pageHtml = cache(this.renderGroupPage());\n          break;\n        case \"group_data_viz\":\n          pageHtml = cache(html`\n            <yp-group-data-viz\n              id=\"dataVizGroupPage\"\n              name=\"group_data_viz\"\n              .subRoute=\"${this.subRoute}\"\n            ></yp-group-data-viz>\n          `);\n          break;\n        case \"post\":\n          pageHtml = cache(html`\n            <yp-post\n              id=\"postPage\"\n              .currentPage=\"${this.page}\"\n              .subRoute=\"${this.subRoute}\"\n            ></yp-post>\n          `);\n          break;\n        default:\n          pageHtml = cache(html` <yp-view-404 name=\"view-404\"></yp-view-404> `);\n          break;\n      }\n    } else {\n      pageHtml = nothing;\n    }\n\n    return pageHtml;\n  }\n\n  renderTopBar() {\n    return html`\n      <yp-drawer id=\"leftDrawer\" position=\"right\" @closed=\"${this._closeNavDrawer}\">\n        <yp-app-nav-drawer\n          id=\"ypNavDrawer\"\n          .homeLink=\"${this.homeLink}\"\n          .opened=\"${this.navDrawOpenedDelayed}\"\n          @yp-toggle-nav-drawer=\"${this._openNavDrawer}\"\n          .user=\"${this.user}\"\n          .route=\"${this.route}\"\n        ></yp-app-nav-drawer>\n      </yp-drawer>\n\n      <yp-drawer\n        id=\"rightDrawer\"\n        position=\"right\"\n        @closed=\"${this._closeUserDrawer}\"\n      >\n        ${this.userDrawerOpened\n          ? html`\n              <ac-notification-list\n                @yp-close-notification-list=\"${this._closeUserDrawer}\"\n                id=\"acNotificationsList\"\n                .user=\"${this.user}\"\n                opened=\"${this.userDrawerOpened}\"\n                .route=\"${this.route}\"\n              ></ac-notification-list>\n            `\n          : nothing}\n      </yp-drawer>\n    `;\n  }\n\n  renderFooter() {\n    return html`\n      <yp-sw-update-toast\n        .buttonLabel=\"${this.t(\"reload\")}\"\n        .message=\"${this.t(\"newVersionAvailable\")}\"\n      >\n      </yp-sw-update-toast>\n\n      <md-dialog id=\"dialog\">\n        <div slot=\"content\">\n          <div class=\"errorText\">${this.notifyDialogText}</div>\n        </div>\n        <div slot=\"actions\" class=\"layout vertical center-center\">\n          <md-filled-button\n            id=\"errorCloseButton\"\n            @click=\"${this._resetNotifyDialogText}\"\n          >\n            ${this.t(\"close\")}\n          </md-filled-button>\n        </div>\n      </md-dialog>\n\n      <yp-snackbar id=\"toast\">\n        <md-icon-button icon=\"close\" slot=\"dismiss\"></md-icon-button>\n      </yp-snackbar>\n    `;\n  }\n\n  renderAdminApp() {\n    if (this.appMode == \"main\") {\n      return nothing;\n    } else {\n      const isActive = this.appMode === \"admin\";\n      const showSpinner = this.loadingAppSpinner;\n\n      return html`\n        <div class=\"loadingAppSpinnerPage ${showSpinner ? \"\" : \"hidden\"}\">\n          <md-circular-progress indeterminate></md-circular-progress>\n        </div>\n        <yp-admin-app\n          ?active=\"${isActive}\"\n          class=\"${isActive ? \"active\" : \"\"}\"\n          ?hidden=\"${showSpinner}\"\n        ></yp-admin-app>\n      `;\n    }\n  }\n\n  renderPromotionApp() {\n    if (this.appMode == \"main\") {\n      return nothing;\n    } else {\n      const isActive =\n        this.appMode === \"analytics\" || this.appMode === \"promotion\";\n      const showSpinner = this.loadingAppSpinner;\n\n      return html`\n        <div class=\"loadingAppSpinnerPage ${showSpinner ? \"\" : \"hidden\"}\">\n          <md-circular-progress indeterminate></md-circular-progress>\n        </div>\n        <yp-promotion-app\n          ?active=\"${isActive}\"\n          class=\"${isActive ? \"active\" : \"\"}\"\n          ?hidden=\"${showSpinner}\"\n        ></yp-promotion-app>\n      `;\n    }\n  }\n\n  override render() {\n    return html`\n      ${this.renderTopBar()} ${this.renderMainApp()}\n      <yp-app-dialogs id=\"dialogContainer\"></yp-app-dialogs>\n      ${this.renderAdminApp()} ${this.renderPromotionApp()}\n      ${this.renderFooter()}\n    `;\n  }\n\n  _openNotifyDialog(event: CustomEvent) {\n    this.notifyDialogText = event.detail;\n    (this.$$(\"#dialog\") as Dialog).open = true;\n  }\n\n  _openToast(event: CustomEvent) {\n    (this.$$(\"#toast\") as YpSnackbar).labelText = event.detail.text;\n    (this.$$(\"#toast\") as YpSnackbar).open = true;\n  }\n\n  _resetNotifyDialogText() {\n    this.notifyDialogText = undefined;\n    (this.$$(\"#dialog\") as MdDialog).close();\n  }\n\n  // Translated Pages\n  translatedPages(pages: Array<YpHelpPageData>): Array<YpHelpPageData> {\n    if (pages) {\n      return JSON.parse(JSON.stringify(pages)) as Array<YpHelpPageData>;\n    } else {\n      return [] as Array<YpHelpPageData>;\n    }\n  }\n\n  openPageFromId(pageId: number) {\n    if (this.pages) {\n      this.pages.forEach((page) => {\n        if (page.id == pageId) {\n          this._openPage(page);\n        }\n      });\n    } else {\n      console.warn(\"Trying to open a page when not loaded\");\n    }\n  }\n\n  _openPageFromMenu(event: Event) {\n    const element = event.currentTarget as HTMLInputElement;\n    const value = element.getAttribute(\"data-args\");\n    if (value) {\n      const index = JSON.parse(value);\n      const page = this.pages[index];\n      this._openPage(page);\n      //TODO: Make sure to reset menu here\n      //this.$$(\"paper-listbox\")?.select(null);\n    }\n  }\n\n  _openPage(page: YpHelpPageData) {\n    window.appGlobals.activity(\"open\", \"pages\", page.id);\n    window.appDialogs.getDialogAsync(\"pageDialog\", (dialog: YpPageDialog) => {\n      const pageLocale = this._getPageLocale(page);\n      dialog.open(page, pageLocale);\n    });\n  }\n\n  _getPageLocale(page: YpHelpPageData) {\n    let pageLocale = \"en\";\n    if (page.title[window.locale]) {\n      pageLocale = window.locale;\n    } else if (page.title[\"en\"]) {\n      pageLocale = \"en\";\n    } else {\n      const key = Object.keys(page.title)[0];\n      if (key) {\n        pageLocale = key;\n      }\n    }\n\n    return pageLocale;\n  }\n\n  _getLocalizePageTitle(page: YpHelpPageData) {\n    const pageLocale = this._getPageLocale(page);\n    return page.title[pageLocale];\n  }\n\n  _setPages(event: CustomEvent) {\n    this.pages = event.detail;\n  }\n\n  _addBackCommunityOverride(event: CustomEvent) {\n    const detail = event.detail;\n\n    if (!this.communityBackOverride) {\n      this.communityBackOverride = {};\n    }\n\n    this.communityBackOverride[detail.fromCommunityId] = {\n      backPath: detail.backPath,\n      backName: detail.backName,\n    };\n  }\n\n  _goToNextPost() {\n    if (this.currentPostId) {\n      this.goBackToPostId = this.currentPostId;\n    } else {\n      console.error(\"No currentPostId on next\");\n    }\n\n    if (this.goForwardToPostId) {\n      YpNavHelpers.goToPost(\n        this.goForwardToPostId,\n        undefined,\n        undefined,\n        undefined,\n        true\n      );\n      window.appGlobals.activity(\n        \"recommendations\",\n        \"goForward\",\n        this.goForwardToPostId\n      );\n      this.goForwardCount += 1;\n      this.showBackToPost = true;\n    } else {\n      console.error(\"No goForwardToPostId\");\n    }\n  }\n\n  _goToPreviousPost() {\n    if (this.goForwardCount > 0) {\n      window.history.back();\n      window.appGlobals.activity(\"recommendations\", \"goBack\");\n    } else {\n      this.showBackToPost = false;\n    }\n    this.goForwardCount -= 1;\n  }\n\n  _setNextPost(event: CustomEvent) {\n    const detail = event.detail;\n    if (detail.goForwardToPostId) {\n      this.goForwardToPostId = detail.goForwardToPostId;\n      this.goForwardPostName = detail.goForwardPostName;\n    } else {\n      this._clearNextPost();\n    }\n    this.currentPostId = detail.currentPostId;\n  }\n\n  _clearNextPost() {\n    this.goForwardToPostId = undefined;\n    this.goForwardPostName = undefined;\n    this.goForwardCount = 0;\n    this.showBackToPost = false;\n  }\n\n  _setupSamlCallback() {\n    window.addEventListener(\n      \"message\",\n      (e) => {\n        if (e.data == \"samlLogin\" && window.appUser) {\n          window.appUser.loginFromSaml();\n        }\n      },\n      false\n    );\n  }\n\n  _openPageFromEvent(event: CustomEvent) {\n    if (event.detail.pageId) {\n      this.openPageFromId(event.detail.pageId);\n    }\n  }\n\n  openUserInfoPage(pageId: number) {\n    if (this.pages && this.pages.length > 0) {\n      this._openPage(this.pages[pageId]);\n    } else {\n      setTimeout(() => {\n        if (this.pages && this.pages.length > 0) {\n          this._openPage(this.pages[pageId]);\n        } else {\n          setTimeout(() => {\n            if (this.pages && this.pages.length > 0) {\n              this._openPage(this.pages[pageId]);\n            } else {\n              setTimeout(() => {\n                if (this.pages && this.pages.length > 0) {\n                  this._openPage(this.pages[pageId]);\n                }\n              }, 1250);\n            }\n          }, 1250);\n        }\n      }, 1250);\n    }\n  }\n\n  _setLanguageName(event: CustomEvent) {\n    this.languageName = event.detail;\n  }\n\n  _autoTranslateEvent(event: CustomEvent) {\n    this.autoTranslate = event.detail;\n  }\n\n  async _refreshGroup() {\n    await this.updateComplete;\n    this._refreshByName(\"#groupPage\");\n  }\n\n  async _refreshCommunity() {\n    await this.updateComplete;\n    this._refreshByName(\"#communityPage\");\n  }\n\n  _refreshDomain() {\n    this._refreshByName(\"#domainPage\");\n  }\n\n  async _refreshByName(id: string) {\n    const el = this.$$(id) as YpCollection;\n    if (el) {\n      await el.getCollection();\n      el.refresh();\n    } else {\n      console.warn(\"Can't find element to refresh\", id);\n    }\n  }\n\n  _closeRightDrawer() {\n    setTimeout(() => {\n      // TODO: Fix\n      // this.$$(\"#drawer\")?.close();\n    }, 100);\n  }\n\n  _setNumberOfUnViewedNotifications(event: CustomEvent) {\n    if (event.detail.count) {\n      if (event.detail.count < 10) {\n        this.numberOfUnViewedNotifications = event.detail.count;\n      } else {\n        this.numberOfUnViewedNotifications = \"9+\";\n      }\n    } else {\n      this.numberOfUnViewedNotifications = \"\";\n    }\n  }\n\n  _redirectTo(event: CustomEvent) {\n    if (event.detail.path) {\n      YpNavHelpers.redirectTo(event.detail.path);\n    }\n  }\n\n  async _routeChanged() {\n    const route = this.route;\n    // Support older pre version 6.1 links\n    if (window.location.href.indexOf(\"/#!/\") > -1) {\n      window.location.href = window.location.href.replace(\"/#!/\", \"/\");\n    }\n\n    /*setTimeout(() => {\n      if (route.indexOf('domain') > -1) {\n        (this.$$('#domainPage') as YpCollection).refresh();\n      } else if (route.indexOf('community_folder') > -1) {\n        (this.$$('#communityFolderPage') as YpCollection).refresh();\n      } else if (route.indexOf('community') > -1) {\n        (this.$$('#communityPage') as YpCollection).refresh();\n      } else if (route.indexOf('group') > -1) {\n        (this.$$('#groupPage') as YpCollection).refresh();\n      } else if (route.indexOf('post') > -1) {\n        (this.$$('#postPage') as YpCollection).refresh();\n      } else if (route.indexOf('user') > -1) {\n        (this.$$('#userPage') as YpCollection).refresh();\n      }\n    });*/\n  }\n\n  _routePageChanged(oldRouteData: Record<string, string>) {\n    if (this.routeData) {\n      let params = this.route.split(\"/\");\n      params = params.filter((el) => {\n        return el != \"\";\n      });\n      if (\n        this.route.indexOf(\"/user/reset_password\") > -1 ||\n        this.route.indexOf(\"/user/open_notification_settings\") > -1 ||\n        this.route.indexOf(\"/user/accept/invite\") > -1 ||\n        this.route.indexOf(\"/user/info_page\") > -1\n      ) {\n        if (this.route.indexOf(\"/user/reset_password\") > -1) {\n          this.openResetPasswordDialog(params[params.length - 1]);\n        } else if (\n          this.routeData &&\n          this.routeData.page === \"user\" &&\n          this.route.indexOf(\"/user/accept/invite\") > -1\n        ) {\n          this.openAcceptInvitationDialog(params[params.length - 1]);\n        } else if (\n          this.route.indexOf(\"/user/open_notification_settings\") > -1\n        ) {\n          this.openUserNotificationsDialog();\n        } else if (this.route.indexOf(\"/user/info_page\") > -1) {\n          this.openUserInfoPage(parseInt(params[params.length - 1]));\n          window.history.pushState({}, \"\", \"/\");\n          window.dispatchEvent(new CustomEvent(\"location-changed\"));\n        }\n      } else {\n        const map: Record<string, number> = this._scrollPositionMap;\n\n        if (oldRouteData && oldRouteData.page != undefined) {\n          map[oldRouteData.page] = window.pageYOffset;\n        }\n\n        let delayUntilScrollToPost = 0;\n\n        if (this.wide) {\n          delayUntilScrollToPost = 2;\n        }\n        setTimeout(() => {\n          let skipMasterScroll = false;\n\n          if (oldRouteData && oldRouteData.page && this.routeData) {\n            // Post -> Group\n\n            // Group -> Community\n            if (\n              (oldRouteData.page === \"group\" || oldRouteData.page === \"post\") &&\n              this.routeData.page === \"community\"\n            ) {\n              if (this.$$(\"#communityPage\")) {\n                (this.$$(\"#communityPage\") as YpCommunity).scrollToGroupItem();\n                skipMasterScroll = true;\n              } else {\n                console.warn(\n                  \"Can't find scroll communityPage for goToPostOrNewsItem, trying again\"\n                );\n                setTimeout(() => {\n                  if (this.$$(\"#communityPage\")) {\n                    (\n                      this.$$(\"#communityPage\") as YpCommunity\n                    ).scrollToGroupItem();\n                  } else {\n                    console.error(\n                      \"Can't find scroll communityPage for goToPostOrNewsItem\"\n                    );\n                  }\n                }, 200);\n              }\n            }\n\n            // Community/CommunityFolder -> Domain\n            else if (\n              (oldRouteData.page === \"community_folder\" ||\n                oldRouteData.page === \"community\" ||\n                oldRouteData.page === \"post\") &&\n              this.routeData.page === \"domain\"\n            ) {\n              if (this.$$(\"#domainPage\")) {\n                (this.$$(\"#domainPage\") as YpDomain).scrollToCommunityItem();\n                skipMasterScroll = true;\n              } else {\n                console.warn(\n                  \"Can't find scroll domainPage for scrollToCommunityItem, trying again\"\n                );\n                setTimeout(() => {\n                  if (this.$$(\"#domainPage\")) {\n                    (\n                      this.$$(\"#domainPage\") as YpDomain\n                    ).scrollToCommunityItem();\n                  } else {\n                    console.error(\n                      \"Can't find scroll domainPage for scrollToCommunityItem\"\n                    );\n                  }\n                }, 200);\n              }\n            }\n\n            // Community/CommunityFolder  -> Community\n            else if (\n              (oldRouteData.page === \"community\" ||\n                oldRouteData.page === \"community_folder\") &&\n              this.routeData.page === \"community_folder\"\n            ) {\n              if (this.$$(\"#communityFolderPage\")) {\n                (\n                  this.$$(\"#communityFolderPage\") as YpCommunity\n                ).scrollToGroupItem();\n                skipMasterScroll = true;\n              } else {\n                console.warn(\n                  \"Can't find scroll communityFolderPage for goToPostOrNewsItem, trying again\"\n                );\n                setTimeout(() => {\n                  if (this.$$(\"#communityFolderPage\")) {\n                    (\n                      this.$$(\"#communityFolderPage\") as YpCommunity\n                    ).scrollToGroupItem();\n                  } else {\n                    console.error(\n                      \"Can't find scroll communityFolderPage for goToPostOrNewsItem\"\n                    );\n                  }\n                }, 200);\n              }\n            }\n          }\n\n          if (this.routeData.page !== \"post\") {\n            this._clearNextPost();\n          }\n\n          if (\n            oldRouteData &&\n            this.subRoute &&\n            this.routeData &&\n            oldRouteData.page === this.routeData.page\n          ) {\n            let testRoute = this.subRoute;\n            testRoute = testRoute.replace(\"/\", \"\");\n            if (isNaN(parseInt(testRoute))) {\n              skipMasterScroll = true;\n            }\n          }\n\n          if (\n            map[this.routeData.page] != null &&\n            this.routeData.page !== \"post\" &&\n            !(\n              oldRouteData &&\n              oldRouteData.page === \"community\" &&\n              this.routeData.page === \"group\"\n            )\n          ) {\n            if (!skipMasterScroll) {\n              window.scrollTo(0, map[this.routeData.page]);\n              console.info(\n                \"Main window scroll \" +\n                  this.routeData.page +\n                  \" to \" +\n                  map[this.routeData.page]\n              );\n            } else {\n              console.info(\n                \"Skipping master scroller for \" + this.routeData.page\n              );\n            }\n          } else if (!skipMasterScroll) {\n            console.info(\"AppLayout scroll to top\");\n            setTimeout(() => {\n              window.scrollTo(0, 0);\n            });\n          }\n        }, delayUntilScrollToPost);\n\n        if (this.routeData) {\n          this.page = this.routeData.page;\n          this._pageChanged();\n        } else {\n          console.error(\"No page data, current page: \" + this.page);\n        }\n      }\n    }\n  }\n\n  loadDataViz() {\n    window.appDialogs.loadDataViz();\n  }\n\n  _pageChanged() {\n    const page = this.page;\n\n    if (page && page === \"group_data_viz\") {\n      this.loadDataViz();\n    }\n\n    //TODO: Get bundling working\n    /*if (page) {\n      let resolvedPageUrl;\n      if (page==\"view-404\") {\n        resolvedPageUrl = this.resolveUrl(\"yp-view-404.html\");\n      } else if (page==='community_folder') {\n        resolvedPageUrl = this.resolveUrl('../yp-community/yp-community-folder.js?v=@version@');\n      } else {\n        resolvedPageUrl = this.resolveUrl('/src/yp-' + page + '/' + 'yp-' + page + \".js?v=@version@\");\n      }\n      console.log(\"Trying to load \"+resolvedPageUrl);\n      import(resolvedPageUrl).then(null, this._showPage404.bind(this));\n    }*/\n\n    if (page) {\n      window.appGlobals.analytics.sendToAnalyticsTrackers(\n        \"send\",\n        \"pageview\",\n        location.pathname\n      );\n    }\n  }\n\n  openResetPasswordDialog(resetPasswordToken: string) {\n    // TODO: Remove any\n    this.getDialogAsync(\"resetPassword\", async (dialog: any) => {\n      dialog.open(resetPasswordToken);\n    });\n  }\n\n  openUserNotificationsDialog() {\n    if (window.appUser && window.appUser.loggedIn() === true) {\n      window.appUser.openNotificationSettings();\n    } else {\n      window.appUser.loginForNotificationSettings();\n    }\n  }\n\n  openAcceptInvitationDialog(inviteToken: string) {\n    // TODO: Remove any\n    this.getDialogAsync(\"acceptInvite\", (dialog: any) => {\n      dialog.open(inviteToken);\n    });\n  }\n\n  _showPage404() {\n    this.page = \"view-404\";\n  }\n\n  _setHomeLink(event: CustomEvent) {\n    if (!this.homeLink) {\n      this.homeLink = event.detail;\n    }\n  }\n\n  setKeepOpenForPostsOn(goBackToPage: string) {\n    this.keepOpenForPost = goBackToPage;\n    this.storedBackPath = this.backPath;\n    this.storedLastDocumentTitle = document.title;\n  }\n\n  _resetKeepOpenForPage() {\n    this.keepOpenForPost = undefined;\n    this.storedBackPath = undefined;\n    this.storedLastDocumentTitle = undefined;\n  }\n\n  _closeForGroup() {\n    if (this.keepOpenForGroup) {\n      YpNavHelpers.redirectTo(this.keepOpenForGroup);\n    } else {\n      console.error(\"No keepOpenForGroup\");\n    }\n    this.keepOpenForGroup = undefined;\n  }\n\n  _closePost() {\n    if (this.keepOpenForPost) YpNavHelpers.redirectTo(this.keepOpenForPost);\n\n    if (this.storedBackPath) this.backPath = this.storedBackPath;\n\n    if (this.storedLastDocumentTitle) {\n      document.title = this.storedLastDocumentTitle;\n      this.storedLastDocumentTitle = undefined;\n    }\n\n    this.keepOpenForPost = undefined;\n    document.dispatchEvent(\n      new CustomEvent(\"lite-signal\", {\n        bubbles: true,\n        detail: { name: \"yp-pause-media-playback\", data: {} },\n      })\n    );\n  }\n\n  // Computed\n\n  get closePostHeader() {\n    if (this.page == \"post\" && this.keepOpenForPost) return true;\n    else return false;\n  }\n\n  _isGroupOpen(\n    params: { groupId?: number; postId?: number },\n    keepOpenForPost = false\n  ) {\n    if (params.groupId || (params.postId && keepOpenForPost)) return true;\n    else return false;\n  }\n\n  _isCommunityOpen(\n    params: { communityId?: number; postId?: number },\n    keepOpenForPost = false\n  ) {\n    if (params.communityId || (params.postId && keepOpenForPost)) return true;\n    else return false;\n  }\n\n  _isDomainOpen(\n    params: { domainId?: number; postId?: number },\n    keepOpenForPost = false\n  ) {\n    if (params.domainId || (params.postId && keepOpenForPost)) return true;\n    else return false;\n  }\n\n  async _openNavDrawer() {\n    this.navDrawerOpened = true;\n    (this.$$(\"#leftDrawer\") as any).open = true;\n    await this.updateComplete;\n    (this.$$(\"#ypNavDrawer\") as YpAppNavDrawer).opened = true;\n  }\n\n  async _closeNavDrawer() {\n    (this.$$(\"#leftDrawer\") as any).open = false;\n    (this.$$(\"#ypNavDrawer\") as YpAppNavDrawer).opened = false;\n    await new Promise((resolve) => setTimeout(resolve, 300));\n    this.navDrawerOpened = false;\n  }\n\n  async getDialogAsync(idName: string, callback: Function) {\n    await this.updateComplete;\n    (this.$$(\"#dialogContainer\") as YpAppDialogs).getDialogAsync(\n      idName,\n      callback\n    );\n  }\n\n  closeDialog(idName: string) {\n    (this.$$(\"#dialogContainer\") as YpAppDialogs).closeDialog(idName);\n  }\n\n  _dialogClosed(event: CustomEvent) {\n    // TODO: Get working\n    (this.$$(\"#dialogContainer\") as YpAppDialogs).dialogClosed(event.detail);\n  }\n\n  scrollPageToTop() {\n    const mainArea = document.getElementById(\"#mainArea\");\n    if (mainArea) {\n      mainArea.scrollTop = 0;\n    }\n  }\n\n  async _openUserDrawer() {\n    this.userDrawerOpened = true;\n    (this.$$(\"#rightDrawer\") as YpDrawer).open = true;\n  }\n\n  async _closeUserDrawer() {\n    (this.$$(\"#rightDrawer\") as YpDrawer).open = false;\n    await new Promise((resolve) => setTimeout(resolve, 300));\n    this.userDrawerOpened = false;\n  }\n\n  _login() {\n    if (window.appUser) {\n      window.appUser.openUserlogin();\n    }\n  }\n\n  _onChangeHeader(event: CustomEvent) {\n    const header = event.detail;\n    this.headerTitle = document.title = header.headerTitle;\n\n    setTimeout(() => {\n      const headerTitle = this.$$(\"#headerTitle\") as HTMLElement | void;\n      if (headerTitle) {\n        const length = headerTitle.innerHTML.length;\n        if (this.wide) {\n          headerTitle.style.fontSize = \"20px\";\n        } else {\n          if (length < 20) {\n            headerTitle.style.fontSize = \"17px\";\n          } else if (length < 25) {\n            headerTitle.style.fontSize = \"14px\";\n          } else if (length < 30) {\n            headerTitle.style.fontSize = \"13px\";\n          } else {\n            headerTitle.style.fontSize = \"12px\";\n          }\n        }\n      }\n    });\n\n    if (header.documentTitle) {\n      document.title = header.documentTitle;\n    }\n    this.headerDescription = header.headerDescription;\n\n    //if (header.headerIcon)\n    //app.headerIcon = header.headerIcon;\n    if (header.enableSearch) this.showSearch = true;\n    else this.showSearch = false;\n\n    if (header.useHardBack === true) {\n      this.useHardBack = true;\n    } else {\n      this.useHardBack = false;\n    }\n\n    if (header.backPath) {\n      this.showBack = true;\n      this.backPath = header.backPath;\n    } else {\n      this.showBack = false;\n      this.backPath = undefined;\n    }\n\n    if (header.hideHelpIcon) {\n      this.hideHelpIcon = true;\n    } else {\n      this.hideHelpIcon = false;\n    }\n\n    if (header.keepOpenForGroup) {\n      this.keepOpenForGroup = header.keepOpenForGroup;\n    }\n\n    if (\n      this.communityBackOverride &&\n      this.backPath &&\n      window.location.pathname.indexOf(\"/community/\") > -1\n    ) {\n      const communityId = window.location.pathname.split(\n        \"/community/\"\n      )[1] as unknown as number;\n      if (communityId && this.communityBackOverride[communityId]) {\n        this.backPath = this.communityBackOverride[communityId].backPath;\n        this.headerTitle = this.communityBackOverride[communityId].backName;\n        this.useHardBack = false;\n      }\n    }\n\n    if (this.showBack && header.disableCollectionUpLink === true) {\n      this.showBack = false;\n      this.headerTitle = \"\";\n    }\n\n    if (header.headerTitle && header.backPath) {\n      this.updateBreadcrumbs({\n        name: header.headerTitle || '',\n        url: header.backPath || ''\n      });\n    }\n  }\n\n  updateBreadcrumbs(newBreadcrumb: {name: string, url: string}) {\n    const existingIndex = this.breadcrumbs.findIndex(b => b.url === newBreadcrumb.url);\n    if (existingIndex !== -1) {\n      // If the breadcrumb already exists, trim the array to this point\n      this.breadcrumbs = this.breadcrumbs.slice(0, existingIndex + 1);\n    } else {\n      // Otherwise, add the new breadcrumb\n      this.breadcrumbs = [...this.breadcrumbs, newBreadcrumb];\n    }\n    (this.$$(\"yp-top-app-bar\") as YpTopAppBar).breadcrumbs = this.breadcrumbs;\n  }\n\n  goBack() {\n    if (this.backPath) {\n      if (this.useHardBack) {\n        this.fireGlobal(\"yp-pause-media-playback\", {});\n        window.location.href = this.backPath;\n      } else {\n        YpNavHelpers.redirectTo(this.backPath);\n      }\n    }\n  }\n\n  _onSearch(e: CustomEvent) {\n    this.toggleSearch();\n    this.previousSearches.unshift(e.detail.value);\n    const postsFilter = document.querySelector(\"#postsFilter\") as LitElement;\n    if (postsFilter) {\n      //TODO: When we have postFilter live\n      //postsFilter.searchFor(e.detail.value);\n    }\n  }\n\n  _onUserChanged(event: CustomEvent) {\n    if (event.detail && event.detail.id) {\n      this.user = event.detail;\n    } else {\n      this.user = undefined;\n    }\n  }\n\n  toggleSearch() {\n    //TODO: When we have postFilter live\n    //this.$$(\"#search\")?.toggle();\n  }\n\n  _handleKeyDown(event: KeyboardEvent) {\n    if (event.key === \"Escape\") {\n      if (this.closePostHeader) {\n        this._closePost();\n      } else if (this.keepOpenForGroup) {\n        this._closeForGroup();\n      } else if (!this.showBack) {\n        // If there's no back arrow, we don't want to do anything on ESC\n        event.preventDefault();\n      }\n    }\n  }\n\n  _setupTouchEvents() {\n    document.addEventListener(\"touchstart\", this._handleTouchStart.bind(this), {\n      passive: true,\n    });\n    document.addEventListener(\"touchmove\", this._handleTouchMove.bind(this), {\n      passive: true,\n    });\n    document.addEventListener(\"touchend\", this._handleTouchEnd.bind(this), {\n      passive: true,\n    });\n  }\n\n  _removeTouchEvents() {\n    document.removeEventListener(\n      \"touchstart\",\n      this._handleTouchStart.bind(this)\n    );\n    document.removeEventListener(\"touchmove\", this._handleTouchMove.bind(this));\n    document.removeEventListener(\"touchend\", this._handleTouchEnd.bind(this));\n  }\n\n  _handleTouchStart(event: any) {\n    if (this.page === \"post\" && this.goForwardToPostId) {\n      const touches = event.touches || event.originalEvent.touches;\n      const firstTouch = touches[0];\n\n      if (\n        firstTouch.clientX > 32 &&\n        firstTouch.clientX < window.innerWidth - 32\n      ) {\n        this.touchXDown = firstTouch.clientX;\n        this.touchYDown = firstTouch.clientY;\n        this.touchXUp = undefined;\n        this.touchYUp = undefined;\n      }\n    }\n  }\n\n  _handleTouchMove(event: any) {\n    if (this.page === \"post\" && this.touchXDown && this.goForwardToPostId) {\n      const touches = event.touches || event.originalEvent.touches;\n      this.touchXUp = touches[0].clientX;\n      this.touchYUp = touches[0].clientY;\n    }\n  }\n\n  _handleTouchEnd() {\n    if (\n      this.page === \"post\" &&\n      this.touchXDown &&\n      this.touchYDown &&\n      this.touchYUp &&\n      this.touchXUp &&\n      this.goForwardToPostId\n    ) {\n      const xDiff = this.touchXDown - this.touchXUp;\n      const yDiff = this.touchYDown - this.touchYUp;\n      //console.error(\"xDiff: \"+xDiff+\" yDiff: \"+yDiff);\n\n      if (Math.abs(xDiff) > Math.abs(yDiff) && Math.abs(yDiff) < 120) {\n        let factor = 3;\n\n        if (window.innerWidth > 500) factor = 4;\n\n        if (window.innerWidth > 1023) factor = 5;\n\n        if (window.innerWidth > 1400) factor = 6;\n\n        const minScrollFactorPx = Math.round(window.innerWidth / factor);\n\n        if (!this.userDrawerOpenedDelayed && !this.navDrawOpenedDelayed) {\n          if (xDiff > 0 && xDiff > minScrollFactorPx) {\n            window.scrollTo(0, 0);\n            window.appGlobals.activity(\"swipe\", \"postForward\");\n            this.$$(\"#goPostForward\")?.dispatchEvent(new Event(\"tap\"));\n          } else if (xDiff < 0 && xDiff < -Math.abs(minScrollFactorPx)) {\n            if (this.showBackToPost === true) {\n              window.scrollTo(0, 0);\n              this._goToPreviousPost();\n              window.appGlobals.activity(\"swipe\", \"postBackward\");\n            }\n          }\n        } else {\n          console.log(\"Recommendation swipe not active with open drawers\");\n        }\n\n        this.touchXDown = undefined;\n        this.touchXUp = undefined;\n        this.touchYDown = undefined;\n        this.touchYUp = undefined;\n      }\n    }\n  }\n}\n"]}