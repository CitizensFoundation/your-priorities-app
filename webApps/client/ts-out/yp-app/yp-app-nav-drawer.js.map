{"version":3,"file":"yp-app-nav-drawer.js","sourceRoot":"","sources":["../../src/yp-app/yp-app-nav-drawer.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\n\nimport \"@material/web/button/outlined-button.js\";\nimport \"@material/web/icon/icon.js\";\n\nimport \"@material/web/iconbutton/outlined-icon-button.js\";\n\nimport \"@material/web/progress/linear-progress.js\";\n\nimport \"../common/languages/yp-language-selector.js\";\n\nimport { YpNavHelpers } from \"../common/YpNavHelpers.js\";\n\n@customElement(\"yp-app-nav-drawer\")\nexport class YpAppNavDrawer extends YpBaseElement {\n  @property({ type: Object })\n  homeLink: YpHomeLinkData | undefined;\n\n  @property({ type: Object })\n  user: YpUserData | undefined;\n\n  @property({ type: Boolean })\n  opened = false;\n\n  @property({ type: Boolean })\n  spinner = false;\n\n  @property({ type: String })\n  route: string | undefined;\n\n  @property({ type: Array })\n  myAdminGroups: YpGroupData[] | undefined;\n\n  @property({ type: Array })\n  myAdminCommunities: YpCommunityData[] | undefined;\n\n  @property({ type: Array })\n  myGroups: YpGroupData[] | undefined;\n\n  @property({ type: Array })\n  myCommunities: YpCommunityData[] | undefined;\n\n  @property({ type: Array })\n  myDomains: YpDomainData[] | undefined;\n\n  @property({ type: Object })\n  adminRights: YpAdminRights | undefined;\n\n  @property({ type: Object })\n  memberships: YpMemberships | undefined;\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"user\")) {\n      this._userChanged();\n    }\n\n    if (changedProperties.has(\"opened\")) {\n      this._openChanged();\n    }\n  }\n\n  override connectedCallback(): void {\n    super.connectedCallback();\n  }\n\n  async _openChanged() {\n    if (this.opened === true) {\n      this.spinner = true;\n      this.adminRights = await window.serverApi.getAdminRightsWithNames();\n      this.memberships = await window.serverApi.getMembershipsWithNames();\n      this.spinner = false;\n      this._reset();\n    }\n  }\n\n  _selectedLocale() {\n    return this.language;\n  }\n\n  _goBack() {\n    if (this.homeLink) {\n      YpNavHelpers.redirectTo(\n        \"/\" + this.homeLink.type + \"/\" + this.homeLink.id\n      );\n      this.fire(\"yp-toggle-nav-drawer\");\n    }\n  }\n\n  _goToGroup(event: CustomEvent) {\n    YpNavHelpers.redirectTo(\n      \"/group/\" + (event.target as HTMLElement).getAttribute(\"data-args\")\n    );\n    this.fire(\"yp-toggle-nav-drawer\");\n  }\n\n  _goToCommunity(event: CustomEvent) {\n    YpNavHelpers.redirectTo(\n      \"/community/\" + (event.target as HTMLElement).getAttribute(\"data-args\")\n    );\n    this.fire(\"yp-toggle-nav-drawer\");\n  }\n\n  _goToDomain(event: CustomEvent) {\n    YpNavHelpers.redirectTo(\n      \"/domain/\" + (event.target as HTMLElement).getAttribute(\"data-args\")\n    );\n    this.fire(\"yp-toggle-nav-drawer\");\n  }\n\n  _userChanged() {\n    if (this.user) {\n      this._reset();\n    }\n  }\n\n  _reset() {\n    if (this.memberships) {\n      const groupUsers = this.memberships.GroupUsers.filter((item) => {\n        return item.name != \"hidden_public_group_for_domain_level_points\";\n      });\n      this.myGroups = groupUsers.slice(0, 1000) as YpGroupData[];\n      this.myCommunities = this.memberships.CommunityUsers.slice(\n        0,\n        500\n      ) as YpCommunityData[];\n      this.myDomains = this.memberships.DomainUsers.slice(\n        0,\n        3\n      ) as YpDomainData[];\n    } else {\n      this.myGroups = undefined;\n      this.myCommunities = undefined;\n      this.myDomains = undefined;\n    }\n\n    if (\n      this.adminRights &&\n      this.adminRights.CommunityAdmins &&\n      this.adminRights.CommunityAdmins.length > 0\n    ) {\n      this.myAdminCommunities = this.adminRights\n        .CommunityAdmins as YpCommunityData[];\n    } else {\n      this.myAdminCommunities = undefined;\n    }\n\n    if (\n      this.adminRights &&\n      this.adminRights.GroupAdmins &&\n      this.adminRights.GroupAdmins.length > 0\n    ) {\n      const groupAdmins = this.adminRights.GroupAdmins.filter((item) => {\n        return item.name != \"hidden_public_group_for_domain_level_points\";\n      });\n      this.myAdminGroups = groupAdmins as YpGroupData[];\n    } else {\n      this.myAdminGroups = undefined;\n    }\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        .header {\n          padding-top: 16px;\n          font-weight: bold;\n          padding-bottom: 8px;\n          font-size: 18px;\n          padding-left: 8px;\n        }\n\n        md-linear-progress {\n          max-width: 200px;\n          width: 100%;\n        }\n\n        .themeSelection {\n          margin-bottom: 8px;\n        }\n\n        .thumbNail {\n          width: 42px;\n          height: 24px;\n          padding-top: 24px;\n          margin-left: 12px;\n        }\n\n        :host {\n          height: 100%;\n        }\n\n        .lightDarkContainer {\n          padding-left: 8px;\n          padding-right: 8px;\n          font-size: 14px;\n          margin-bottom: 16px;\n        }\n\n        .darkModeButton {\n          margin: 16px;\n        }\n\n        .material {\n          background-color: var(--md-sys-color-surface-container);\n          color: var(--md-sys-color-on-surface);\n        }\n\n        .item {\n          cursor: pointer;\n          padding: 8px;\n        }\n\n        md-icon {\n        }\n\n        .languageSelector {\n          margin-left: 8px;\n          margin-right: 8px;\n          margin-top: 8px;\n        }\n\n        yp-language-selector {\n          padding-top: 0;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      `,\n    ];\n  }\n\n  override render() {\n    return html`\n      <div class=\"material\">\n        ${this.homeLink\n          ? html`\n              <div hidden class=\"header layout vertical center-center\">\n                <md-icon icon=\"home\" @click=\"${this._goBack}\"></md-icon>\n                <div role=\"button\" @click=\"${this._goBack}\">\n                  ${this.homeLink.name}\n                </div>\n              </div>\n            `\n          : nothing}\n        <div hidden class=\"languageSelector layout vertical self-start\">\n          <yp-language-selector class=\"languageSelector\"></yp-language-selector>\n        </div>\n\n        <div hidden class=\"layout horizontal center-center themeSelection\">\n          ${this.renderThemeToggle()}\n        </div>\n\n        ${this.spinner\n          ? html`<div class=\"layout horizontal center-center\">\n              <md-linear-progress indeterminate></md-linear-progress>\n            </div>`\n          : nothing}\n\n        <div\n          class=\"layout vertical\"\n          role=\"navigation\"\n          aria-label=\"Community & Group navigation\"\n        >\n          ${this.myAdminCommunities\n            ? html`\n                <div class=\"header\">${this.t(\"myAdminCommunities\")}</div>\n                ${this.myAdminCommunities.map(\n                  (community) => html`\n                    <div class=\"layout horizontal\">\n                      <div\n                        role=\"button\"\n                        class=\"item\"\n                        data-args=\"${community.id}\"\n                        @click=\"${this._goToCommunity}\"\n                      >\n                        ${community.name}\n                      </div>\n                    </div>\n                  `\n                )}\n              `\n            : nothing}\n          ${this.myAdminGroups\n            ? html`\n                <div class=\"header\">${this.t(\"myAdminGroups\")}</div>\n                ${this.myAdminGroups.map(\n                  (group) => html`\n                    <div class=\"layout horizontal\">\n                      <div\n                        role=\"button\"\n                        class=\"item\"\n                        data-args=\"${group.id}\"\n                        @click=\"${this._goToGroup}\"\n                      >\n                        ${group.name}\n                      </div>\n                    </div>\n                  `\n                )}\n              `\n            : nothing}\n          ${this.myCommunities\n            ? html`\n                <div class=\"header\">${this.t(\"myCommunities\")}</div>\n                ${this.myCommunities.map(\n                  (community) => html`\n                    <div class=\"layout horizontal\">\n                      <div\n                        role=\"button\"\n                        class=\"item\"\n                        data-args=\"${community.id}\"\n                        @click=\"${this._goToCommunity}\"\n                      >\n                        ${community.name}\n                      </div>\n                    </div>\n                  `\n                )}\n              `\n            : nothing}\n          ${this.myGroups\n            ? html`\n                <div class=\"header\">${this.t(\"myGroups\")}</div>\n                ${this.myGroups.map(\n                  (group) => html`\n                    <div class=\"layout horizontal\">\n                      <div\n                        role=\"button\"\n                        class=\"item\"\n                        data-args=\"${group.id}\"\n                        @click=\"${this._goToGroup}\"\n                      >\n                        ${group.name}\n                      </div>\n                    </div>\n                  `\n                )}\n              `\n            : nothing}\n        </div>\n      </div>\n    `;\n  }\n}\n"]}