{"version":3,"file":"yp-agent-bundle-top-bar.js","sourceRoot":"","sources":["../../src/yp-app/yp-agent-bundle-top-bar.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  LitElement,\n  html,\n  css,\n  CSSResult,\n  TemplateResult,\n  PropertyValues,\n  nothing,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\n\nimport \"@material/web/iconbutton/icon-button.js\";\nimport \"@material/web/icon/icon.js\";\nimport \"@material/web/menu/menu.js\";\nimport \"@material/web/menu/menu-item.js\";\n\nimport { YpBaseElement } from \"../common/yp-base-element\";\nimport { Corner } from \"@material/web/menu/menu.js\";\nimport { YpNavHelpers } from \"../common/YpNavHelpers\";\nimport { YpBaseElementWithLogin } from \"../common/yp-base-element-with-login\";\n\n@customElement(\"yp-agent-bundle-top-bar\")\nexport class YpAgentBundleTopBar extends YpBaseElementWithLogin {\n  @state()\n  private domain: YpDomainData | undefined;\n\n  @property({ type: String })\n  numberOfUnViewedNotifications: string | undefined;\n\n  @property({ type: String })\n  page: string | undefined;\n\n  @property({ type: Boolean })\n  hasStaticBadgeTheme = false;\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        .topBar {\n          width: 1185px;\n          position: fixed;\n          top: 0;\n          left: 50%;\n          padding-top: 12px;\n          transform: translateX(-50%);\n        }\n\n        .topBar[for-agent-bundle] {\n          z-index: 100;\n          background: var(--md-sys-color-surface-container-lowest);\n          padding-bottom: 12px;\n        }\n\n        .loginOrUserButton {\n          margin-top: 12px;\n        }\n\n        .agentBundleLogo {\n          width: 125px;\n          height: 39px;\n          z-index: 25;\n        }\n\n        .logoContainer {\n          padding: 16px;\n          z-index: 15;\n        }\n\n        md-filled-button[has-static-theme] {\n          --md-filled-button-container-color: var(\n            --md-sys-color-primary-container\n          );\n          --md-sys-color-on-primary: var(--md-sys-color-on-primary-container);\n        }\n      `,\n    ];\n  }\n\n  constructor() {\n    super();\n  }\n\n  get inForAgentBundle() {\n    return (\n      window.appGlobals.originalQueryParameters.forAgentBundle &&\n      this.page !== \"agent_bundle\"\n    );\n  }\n\n  override updated(changedProperties: PropertyValues) {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"titleString\")) {\n    }\n  }\n\n  override connectedCallback(): void {\n    super.connectedCallback();\n    this.addGlobalListener(\n      \"yp-domain-changed\",\n      this._onDomainChanged.bind(this)\n    );\n  }\n\n  renderLogo() {\n    return html`<div class=\"logoContainer\">\n      ${this.themeDarkMode\n        ? html`\n            <img\n              class=\"agentBundleLogo\"\n              src=\"https://yrpri-eu-direct-assets.s3.eu-west-1.amazonaws.com/amplifierLogo.png\"\n            />\n          `\n        : html`\n            <img\n              class=\"agentBundleLogo\"\n              src=\"https://yrpri-eu-direct-assets.s3.eu-west-1.amazonaws.com/amplifierLogo.png\"\n            />\n          `}\n    </div> `;\n  }\n\n  override disconnectedCallback(): void {\n    this.removeGlobalListener(\n      \"yp-domain-changed\",\n      this._onDomainChanged.bind(this)\n    );\n\n    super.disconnectedCallback();\n  }\n\n  private _onDomainChanged(event: CustomEvent) {\n    if (\n      event.detail &&\n      event.detail.domain &&\n      event.detail.domain.id &&\n      event.detail.domain.id !== this.domain?.id\n    ) {\n      this.domain = event.detail.domain;\n    }\n  }\n\n  _login() {\n    if (\n      window.appGlobals.domain &&\n      window.appGlobals.domain.configuration?.useLoginOnDomainIfNotLoggedIn\n    ) {\n      YpNavHelpers.redirectTo(`/organization/${window.appGlobals.domain.id}`);\n    } else if (window.appUser) {\n      window.appUser.openUserlogin();\n    }\n  }\n\n  renderUser() {\n    if (!this.languageLoaded) {\n      return nothing;\n    }\n\n    return html` ${this.loggedInUser\n      ? html`\n          <div style=\"position: relative;\" hidden>\n            <md-filled-tonal-icon-button\n              class=\"layout horizontal\"\n              @click=\"${() => this.fire(\"open-notification-drawer\")}\"\n              slot=\"actionItems\"\n            >\n              <md-icon>notifications</md-icon>\n            </md-filled-tonal-icon-button>\n            <md-badge\n              id=\"notificationBadge\"\n              class=\"activeBadge\"\n              ?has-static-theme=\"${this.hasStaticBadgeTheme}\"\n              .value=\"${this.numberOfUnViewedNotifications}\"\n              ?hidden=\"${!this.numberOfUnViewedNotifications}\"\n            >\n            </md-badge>\n          </div>\n          <md-icon-button\n            class=\"layout horizontal loginOrUserButton\"\n            @click=\"${() => this.fire(\"open-user-drawer\")}\"\n            slot=\"actionItems\"\n          >\n            <yp-user-image id=\"userImage\" small .user=\"${this.loggedInUser}\">\n            </yp-user-image>\n          </md-icon-button>\n        `\n      : html`\n          <md-filled-button\n            ?has-static-theme=\"${this.hasStaticTheme}\"\n            slot=\"actionItems\"\n            class=\"loginOrUserButton\"\n            @click=\"${this._login}\"\n            title=\"${this.t(\"user.login\")}\"\n            >${this.t(\"user.login\")}\n          </md-filled-button>\n        `}`;\n  }\n\n  override render(): TemplateResult {\n    return html`<div class=\"layout vertical center-center\">\n      <div\n        class=\"topBar layout horizontal\"\n        ?for-agent-bundle=\"${this.inForAgentBundle}\"\n      >\n        <div class=\"agentBundleLogo\">${this.renderLogo()}</div>\n        <div class=\"flex\"></div>\n        ${this.renderUser()}\n      </div>\n    </div>`;\n  }\n}\n"]}