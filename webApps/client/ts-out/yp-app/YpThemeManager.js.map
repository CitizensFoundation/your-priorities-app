{"version":3,"file":"YpThemeManager.js","sourceRoot":"","sources":["../../src/yp-app/YpThemeManager.ts"],"names":[],"mappings":"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","sourcesContent":["//TODO: User facing automatic, dark mode or high contrast themes selection\n\nimport {\n  applyTheme,\n  argbFromHex,\n  themeFromSourceColor,\n} from \"@material/material-color-utilities\";\nimport {\n  applyThemeWithContrast,\n  themeFromSourceColorWithContrast,\n} from \"../common/YpMaterialThemeHelper\";\nimport { YpBaseElement } from \"../common/yp-base-element\";\n\n//type MaterialColorScheme = 'tonal'|'vibrant'|'expressive'|'content'|'neutral'|'monochrome'|'fidelity'|'dynamic';\n//type MaterialDynamicVariants = \"monochrome\" | \"neutral\" | \"tonalSpot\" | \"vibrant\" | \"expressive\" | \"fidelity\" | \"content\" | \"rainbow\" | \"fruitSalad\";\n\nexport class YpThemeManager {\n  themes: Array<Record<string, boolean | string | Record<string, string>>> = [];\n  selectedTheme: number | undefined;\n  selectedFont: string | undefined;\n  themeColor: string | undefined = \"#0327f8\";\n  themeDarkMode = false;\n  themeHighContrast = false;\n  themePrimaryColor: string | undefined;\n  themeSecondaryColor: string | undefined;\n  themeTertiaryColor: string | undefined;\n  themeNeutralColor: string | undefined;\n  themeNeutralVariantColor: string | undefined;\n  themeVariant: MaterialDynamicVariants | undefined;\n\n  static themeScemesOptionsWithName = [\n    { name: \"Tonal\", value: \"tonal\" },\n    { name: \"Vibrant\", value: \"vibrant\" },\n    { name: \"Expressive\", value: \"expressive\" },\n    { name: \"Content\", value: \"content\" },\n    { name: \"Neutral\", value: \"neutral\" },\n    { name: \"Monochrome\", value: \"monochrome\" },\n    { name: \"Fidelity\", value: \"fidelity\" },\n  ];\n\n  static themeVariantsOptionsWithName = [\n    { name: \"Monochrome\", value: \"monochrome\" },\n    { name: \"Neutral\", value: \"neutral\" },\n    { name: \"Tonal Spot\", value: \"tonalSpot\" },\n    { name: \"Vibrant\", value: \"vibrant\" },\n    { name: \"Expressive\", value: \"expressive\" },\n    { name: \"Fidelity\", value: \"fidelity\" },\n    { name: \"Content\", value: \"content\" },\n    { name: \"Rainbow\", value: \"rainbow\" },\n    { name: \"Fruit Salad\", value: \"fruitSalad\" },\n  ];\n\n  isAppleDevice = false;\n  themeScheme: MaterialColorScheme = \"tonal\";\n  //channel = new BroadcastChannel(\"hex_color\");\n\n  constructor() {\n    const savedDarkMode = localStorage.getItem(\n      YpBaseElement.darkModeLocalStorageKey\n    );\n    if (savedDarkMode) {\n      this.themeDarkMode = true;\n    } else {\n      this.themeDarkMode = false;\n    }\n\n    const savedHighContrastMode = localStorage.getItem(\n      YpBaseElement.highContrastLocalStorageKey\n    );\n\n    if (savedHighContrastMode) {\n      this.themeHighContrast = true;\n    } else {\n      this.themeHighContrast = false;\n    }\n\n    this.setupOldThemes();\n    this.themeChanged();\n\n    /*this.channel.onmessage = (event: any) => {\n      this.themeColor = event.data;\n      this.themeChanged();\n    };*/\n  }\n\n  setupOldThemes() {\n    this.themes.push({\n      name: \"Reykjavík\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#103458\",\n      \"--mdc-theme-secondary\": \"#ff6500\",\n    });\n\n    this.themes.push({\n      name: \"Basalt Gray\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#37474f\",\n      \"--mdc-theme-secondary\": \"#ff6500\",\n    });\n\n    this.themes.push({\n      name: \"Green Moss\",\n      \"--mdc-theme-background\": \"#dcedc8\",\n      \"--mdc-theme-primary\": \"#558b2f\",\n      \"--mdc-theme-secondary\": \"#c51162\",\n    });\n\n    this.themes.push({\n      name: \"Google Blue\",\n      \"--mdc-theme-background\": \"#e3f2fd\",\n      \"--mdc-theme-primary\": \"#1565c0\",\n      \"--mdc-theme-secondary\": \"#ff3d00\",\n    });\n\n    this.themes.push({\n      name: \"Red Rhubarb\",\n      \"--mdc-theme-background\": \"#f1f8e9\",\n      \"--mdc-theme-primary\": \"#c62828\",\n      \"--mdc-theme-secondary\": \"#ffd600\",\n    });\n\n    this.themes.push({\n      name: \"Mountain Roses\",\n      \"--mdc-theme-background\": \"#f1f8e9\",\n      \"--mdc-theme-primary\": \"#2e7d32\",\n      \"--mdc-theme-secondary\": \"#d50000\",\n    });\n\n    this.themes.push({\n      name: \"Purple Wizards\",\n      \"--mdc-theme-background\": \"#ede7f6\",\n      \"--mdc-theme-primary\": \"#4527a0\",\n      \"--mdc-theme-secondary\": \"#d50000\",\n    });\n\n    this.themes.push({\n      name: \"Kópavogur\",\n      \"--mdc-theme-background\": \"#F0F0F0\",\n      \"--mdc-theme-primary\": \"#004E24\",\n      \"--mdc-theme-secondary\": \"#ff6500\",\n    });\n\n    this.themes.push({\n      name: \"Forbrukerrådet\",\n      \"--mdc-theme-background\": \"#f5f5f5\",\n      \"--mdc-theme-primary\": \"#4b7179\",\n      \"--mdc-theme-secondary\": \"#d0672f\",\n    });\n\n    this.themes.push({\n      name: \"Forbrukerrådet Fonts\",\n      \"--mdc-theme-background\": \"#f5f5f5\",\n      \"--mdc-theme-primary\": \"#4b7179\",\n      \"--mdc-theme-secondary\": \"#d0672f\",\n      fonts: {\n        htmlImport: \"/styles/fonts/forbrukerradet-font.html\",\n        fontName: \"FFClanWebBook\",\n      },\n    });\n\n    this.themes.push({\n      name: \"I choose Malta\",\n      \"--mdc-theme-background\": \"#cfd8dc\",\n      \"--mdc-theme-primary\": \"#001a4b\",\n      \"--mdc-theme-secondary\": \"#d71920\",\n    });\n\n    this.themes.push({\n      name: \"Reykjavík Blue\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#084F71\",\n      \"--mdc-theme-secondary\": \"#ff6500\",\n    });\n\n    this.themes.push({\n      name: \"Unicorn 1\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#aa3319\",\n      \"--mdc-theme-secondary\": \"#112e4c\",\n    });\n\n    this.themes.push({\n      name: \"Unicorn 2\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#282828\",\n      \"--mdc-theme-secondary\": \"#aa3319\",\n    });\n\n    this.themes.push({\n      name: \"Mount Air\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#0d3c55\",\n      \"--mdc-theme-secondary\": \"#f16c20\",\n    });\n\n    this.themes.push({\n      name: \"Snjallborg\",\n      \"--mdc-theme-background\": \"#cfd8dc\",\n      \"--mdc-theme-primary\": \"#1e9ac8\",\n      \"--mdc-theme-secondary\": \"#ee7aa2\",\n    });\n\n    this.themes.push({\n      name: \"Black\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#282828\",\n      \"--mdc-theme-secondary\": \"#ff6500\",\n    });\n\n    this.themes.push({\n      name: \"Nesið Okkar\",\n      \"--mdc-theme-background\": \"#cfd8dc\",\n      \"--mdc-theme-primary\": \"#525254\",\n      \"--mdc-theme-secondary\": \"#e0701e\",\n    });\n\n    this.themes.push({\n      disabled: true,\n      name: \"Snjallborg\",\n      \"--mdc-theme-background\": \"#cfd8dc\",\n      \"--mdc-theme-primary\": \"#1e9ac8\",\n      \"--mdc-theme-secondary\": \"#ee7aa2\",\n    });\n\n    this.themes.push({\n      disabled: true,\n      name: \"Black\",\n      \"--mdc-theme-background\": \"#cfd8dc\",\n      \"--mdc-theme-primary\": \"#282828\",\n      \"--mdc-theme-secondary\": \"#ff6500\",\n    });\n\n    this.themes.push({\n      disabled: true,\n      name: \"Nesið Okkar\",\n      \"--mdc-theme-background\": \"#cfd8dc\",\n      \"--mdc-theme-primary\": \"#525254\",\n      \"--mdc-theme-secondary\": \"#e0701e\",\n    });\n\n    this.themes.push({\n      name: \"Iceland\",\n      \"--mdc-theme-background\": \"#cfd8dc\",\n      \"--mdc-theme-primary\": \"#282828\",\n      \"--mdc-theme-secondary\": \"#dc1e35\",\n    });\n\n    this.themes.push({\n      name: \"The Westbourne\",\n      \"--mdc-theme-background\": \"#f1f8e9\",\n      \"--mdc-theme-primary\": \"#c62828\",\n      \"--mdc-theme-secondary\": \"#fbba00\",\n    });\n\n    this.themes.push({\n      name: \"Amsterdam\",\n      \"--mdc-theme-background\": \"#cfd8dc\",\n      \"--mdc-theme-primary\": \"#164995\",\n      \"--mdc-theme-secondary\": \"#ed1b24\",\n    });\n\n    this.themes.push({\n      name: \"AS Roma\",\n      \"--mdc-theme-background\": \"#DDDBDA\",\n      \"--mdc-theme-primary\": \"#970a2c\",\n      \"--mdc-theme-secondary\": \"#fbba00\",\n    });\n\n    this.themes.push({\n      name: \"AS Roma Inverted\",\n      \"--mdc-theme-background\": \"#DDDBDA\",\n      \"--mdc-theme-primary\": \"#970a2c\",\n      \"--mdc-theme-secondary\": \"#1D1D1B\",\n    });\n\n    this.themes.push({\n      name: \"New Jersey\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#56920C\",\n      \"--mdc-theme-secondary\": \"#1880c7\",\n    });\n\n    this.themes.push({\n      name: \"New Jersey Inverted\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#1880c7\",\n      \"--mdc-theme-secondary\": \"#56920C\",\n    });\n\n    this.themes.push({\n      name: \"Scottish Parliament\",\n      \"--mdc-theme-background\": \"#f7f7f7\",\n      \"--mdc-theme-primary\": \"#500778\",\n      \"--mdc-theme-secondary\": \"#E87722\",\n    });\n\n    this.themes.push({\n      name: \"RoStartup\",\n      \"--mdc-theme-background\": \"#F7F7F7\",\n      \"--mdc-theme-primary\": \"#154164\",\n      \"--mdc-theme-secondary\": \"#1f52a5\",\n      \"--app-header-font-weight\": \"500\",\n      \"--app-tags-text-color\": \"#1f52a5\",\n      \"--app-tags-font-weight\": \"500\",\n      fonts: {\n        htmlImport: \"/styles/fonts/rostartup-font.html\",\n        fontName: \"Montserrat\",\n      },\n    });\n\n    this.themes.push({\n      name: \"wienExtra\",\n      \"--mdc-theme-background\": \"#F7F7F7\",\n      \"--mdc-theme-primary\": \"#292929\",\n      \"--mdc-theme-secondary\": \"#ff0000\",\n      fonts: {\n        htmlImport: \"/styles/fonts/junges-wien-font.html\",\n        fontName: \"WienerMelange\",\n      },\n    });\n\n    this.themes.push({\n      name: \"Frumbjörg\",\n      \"--mdc-theme-background\": \"#fefefe\",\n      \"--mdc-theme-primary\": \"#17263e\",\n      \"--mdc-theme-secondary\": \"#1f5d04\",\n      fonts: {\n        htmlImport: \"/styles/fonts/frumbjorg-font.html\",\n        fontName: \"Merriweather\",\n      },\n    });\n  }\n\n  updateStyles(properties: Record<string, string>) {\n    for (const property in properties) {\n      if (Object.prototype.hasOwnProperty.call(properties, property)) {\n        if (window.app)\n          window.app.style.setProperty(property, properties[property]);\n      }\n    }\n  }\n\n  setThemeFromOldConfiguration(\n    number: number | undefined,\n    configuration: YpCollectionConfiguration | undefined = undefined\n  ) {\n    if (\n      configuration &&\n      configuration.themeOverrideColorPrimary &&\n      configuration.themeOverrideColorPrimary.length > 5 &&\n      configuration.themeOverrideColorAccent &&\n      configuration.themeOverrideColorAccent.length > 5\n    ) {\n      if (configuration.themeOverrideColorPrimary.length === 6) {\n        configuration.themeOverrideColorPrimary =\n          \"#\" + configuration.themeOverrideColorPrimary;\n      }\n      if (configuration.themeOverrideColorAccent.length === 6) {\n        configuration.themeOverrideColorAccent =\n          \"#\" + configuration.themeOverrideColorAccent;\n      }\n      if (\n        configuration.themeOverrideBackgroundColor &&\n        configuration.themeOverrideBackgroundColor.length === 6\n      ) {\n        configuration.themeOverrideBackgroundColor =\n          \"#\" + configuration.themeOverrideBackgroundColor;\n      }\n\n      this.themeColor = configuration.themeOverrideColorPrimary;\n      this.themeChanged();\n    } else if (number !== undefined) {\n      if (this.themes[number]) {\n        this.themeColor = this.themes[number][\"--mdc-theme-primary\"] as string;\n        this.themeChanged();\n      }\n    }\n\n    if (\n      number &&\n      this.themes[number] &&\n      (this.themes[number].originalName === \"wienExtra\" ||\n        this.themes[number].originalName === \"RoStartup\" ||\n        this.themes[number].originalName === \"Frumbjörg\")\n    ) {\n      const event = new CustomEvent(\"yp-large-font\", {\n        detail: true,\n        bubbles: true,\n        composed: true,\n      });\n      document.dispatchEvent(event);\n    } else if (number && this.themes[number]) {\n      const event = new CustomEvent(\"yp-large-font\", {\n        detail: false,\n        bubbles: true,\n        composed: true,\n      });\n      document.dispatchEvent(event);\n    }\n  }\n\n  sanitizeFontStyles(fontStyles: string) {\n    const allowedProps = [\"body\", \"font-family\", \"font-weight\", \"font-size\"];\n    const propValueRegex = /([a-zA-Z\\-]+)\\s*:\\s*([^;]+);?/g;\n\n    let sanitizedStyles = \"\";\n    let match;\n\n    while ((match = propValueRegex.exec(fontStyles)) !== null) {\n      if (allowedProps.includes(match[1])) {\n        sanitizedStyles += `${match[1]}: ${match[2]}; `;\n      }\n    }\n\n    return sanitizedStyles;\n  }\n\n  sanitizeFontImports(fontImports: string[]) {\n    const allowedDomains = [\n      \"fonts.googleapis.com\",\n      \"use.typekit.net\", // Adobe Fonts\n      \"fonts.fontsquirrel.com\", // Font Squirrel\n      \"fast.fonts.net\", // Fonts.com\n      \"myfonts.com\", // MyFonts\n      \"foundry.typenetwork.com\", // Type Network\n      \"fonts.fontspring.com\", // Fontspring\n      \"creativemarket.com\", // Creative Market\n      \"fonts.linotype.com\", // Linotype\n      \"fonts.monotype.com\", // Monotype\n      \"fontshop.com\", // FontShop\n      \"typography.com\", // Hoefler&Co.\n    ];\n    return fontImports.filter((url) => {\n      try {\n        const parsedUrl = new URL(url);\n        return (\n          parsedUrl.protocol === \"https:\" &&\n          allowedDomains.some(\n            (domain) =>\n              parsedUrl.hostname.endsWith(domain) ||\n              parsedUrl.hostname.includes(domain)\n          )\n        );\n      } catch (e) {\n        return false; // Invalid URL\n      }\n    });\n  }\n\n  applyFontStyles(fontStyles: string | null) {\n    let styleElement = document.getElementById(\"custom-font-styles\");\n    if (fontStyles) {\n      if (!styleElement) {\n        styleElement = document.createElement(\"style\");\n        styleElement.id = \"custom-font-styles\";\n        document.head.appendChild(styleElement);\n      }\n      styleElement.textContent = fontStyles;\n    } else if (styleElement) {\n      styleElement.textContent = \"\";\n    }\n  }\n\n  importFonts(fontImportsString: string | null) {\n    document\n      .querySelectorAll(\"link[data-font-import]\")\n      .forEach((element) => element.remove());\n\n    if (fontImportsString) {\n      const fontImports = this.sanitizeFontImports(\n        fontImportsString.split(\"\\n\")\n      );\n      fontImports.forEach((url) => {\n        const linkElement = document.createElement(\"link\");\n        linkElement.rel = \"stylesheet\";\n        linkElement.href = url;\n        linkElement.setAttribute(\"data-font-import\", \"true\");\n        document.head.appendChild(linkElement);\n      });\n    }\n  }\n\n  setTheme(\n    number: number | undefined,\n    configuration: YpCollectionConfiguration | undefined = undefined\n  ) {\n    if (!configuration) {\n      console.warn(\"No configuration found\");\n      return;\n    }\n\n    if (!configuration.theme) {\n      this.setThemeFromOldConfiguration(number, configuration);\n    } else {\n      if (configuration.theme.oneDynamicColor) {\n        this.themeColor = configuration.theme.oneDynamicColor;\n        this.themeScheme = configuration.theme.oneColorScheme!;\n      } else if (configuration.theme.primaryColor) {\n        this.themeColor = undefined;\n        this.themePrimaryColor = configuration.theme.primaryColor;\n        this.themeSecondaryColor = configuration.theme.secondaryColor;\n        this.themeTertiaryColor = configuration.theme.tertiaryColor;\n        this.themeNeutralColor = configuration.theme.neutralColor;\n        this.themeNeutralVariantColor = configuration.theme.neutralVariantColor;\n        //this.themeVariant = configuration.theme.variant;\n      }\n\n      if (configuration.theme.fontStyles) {\n        this.applyFontStyles(configuration.theme.fontStyles);\n      } else {\n        this.applyFontStyles(null);\n      }\n      if (configuration.theme.fontImports) {\n        this.importFonts(configuration.theme.fontImports);\n      } else {\n        this.importFonts(null);\n      }\n\n      this.themeChanged();\n\n      this.updateBrowserThemeColor();\n    }\n  }\n\n  updateBrowserThemeColor() {\n    let metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\n    let newThemeColor = this.themeColor || this.themePrimaryColor || \"#000000\";\n    if (newThemeColor && !newThemeColor.startsWith(\"#\")) {\n      newThemeColor = `#${newThemeColor}`;\n    }\n\n    if (!metaThemeColor && newThemeColor) {\n      metaThemeColor = document.createElement(\"meta\");\n      metaThemeColor.setAttribute(\"name\", \"theme-color\");\n      document.getElementsByTagName(\"head\")[0].appendChild(metaThemeColor);\n    }\n\n    if (metaThemeColor && newThemeColor) {\n      metaThemeColor.setAttribute(\"content\", newThemeColor);\n    }\n  }\n\n  updateLiveFromConfiguration(theme: YpThemeConfiguration) {\n    if (theme) {\n      if (theme.oneDynamicColor) {\n        this.themeColor = theme.oneDynamicColor;\n        this.themeScheme = theme.oneColorScheme!;\n      } else {\n        this.themeColor = undefined;\n        this.themePrimaryColor = theme.primaryColor;\n        this.themeSecondaryColor = theme.secondaryColor;\n        this.themeTertiaryColor = theme.tertiaryColor;\n        this.themeNeutralColor = theme.neutralColor;\n        this.themeNeutralVariantColor = theme.neutralVariantColor;\n        this.themeVariant = theme.variant || \"fidelity\";\n      }\n      this.themeChanged();\n    }\n  }\n\n  themeChanged(target: HTMLElement | undefined = undefined) {\n    let themeCss = {} as any;\n\n    const isDark =\n      this.themeDarkMode === undefined\n        ? window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n        : this.themeDarkMode;\n\n    if (false && this.isAppleDevice) {\n      const theme = themeFromSourceColor(\n        argbFromHex(this.themeColor || \"#000000\"),\n        [\n          {\n            name: \"up-vote\",\n            value: argbFromHex(\"#0F0\"),\n            blend: true,\n          },\n          {\n            name: \"down-vote\",\n            value: argbFromHex(\"#F00\"),\n            blend: true,\n          },\n        ]\n      );\n\n      applyTheme(theme, { target: document.body, dark: isDark });\n    } else {\n      if (this.themeColor) {\n        themeCss = themeFromSourceColorWithContrast(\n          this.getHexColor(this.themeColor),\n          this.themeVariant,\n          isDark,\n          this.themeScheme,\n          this.themeHighContrast ? 2.0 : 0.0\n        );\n      } else {\n        themeCss = themeFromSourceColorWithContrast(\n          {\n            primary: this.getHexColor(this.themePrimaryColor || \"#000000\"),\n            secondary: this.getHexColor(this.themeSecondaryColor || \"#000000\"),\n            tertiary: this.getHexColor(this.themeTertiaryColor || \"#000000\"),\n            neutral: this.getHexColor(this.themeNeutralColor || \"#000000\"),\n            neutralVariant: this.getHexColor(\n              this.themeNeutralVariantColor || \"#000000\"\n            ),\n          },\n          this.themeVariant,\n          isDark,\n          \"dynamic\",\n          this.themeHighContrast ? 2.0 : 0.0\n        );\n      }\n\n      applyThemeWithContrast(document, themeCss);\n    }\n  }\n\n  getHexColor(color: string | undefined): string {\n    if (color) {\n      // Replace all # with nothing\n      color = color.replace(/#/g, \"\");\n      if (color.length === 6) {\n        return `#${color}`;\n      } else {\n        return \"#000000\";\n      }\n    } else {\n      return \"#000000\";\n    }\n  }\n}\n"]}