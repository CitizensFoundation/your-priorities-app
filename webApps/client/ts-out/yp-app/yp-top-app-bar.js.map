{"version":3,"file":"yp-top-app-bar.js","sourceRoot":"","sources":["../../src/yp-app/yp-top-app-bar.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  LitElement,\n  html,\n  css,\n  CSSResult,\n  TemplateResult,\n  PropertyValues,\n  nothing,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\n\nimport \"@material/web/iconbutton/icon-button.js\";\nimport \"@material/web/icon/icon.js\";\nimport \"@material/web/menu/menu.js\";\nimport \"@material/web/menu/menu-item.js\";\n\nimport { YpBaseElement } from \"../common/yp-base-element\";\nimport { Corner } from \"@material/web/menu/menu.js\";\n\n@customElement(\"yp-top-app-bar\")\nexport class YpTopAppBar extends YpBaseElement {\n  @state()\n  private isTitleLong: boolean = false;\n\n  @state()\n  private isMenuOpen: boolean = false;\n\n  @property({ type: Boolean })\n  hideBreadcrumbs = false;\n\n  @property({ type: String })\n  titleString: string = \"\";\n\n  @property({ type: Array })\n  breadcrumbs: Array<{ name: string; url: string }> = [];\n\n  renderBreadcrumbsDropdown() {\n    if (this.breadcrumbs.length > 1 && !this.hideBreadcrumbs) {\n      return html`\n        <md-icon-button id=\"breadCrumbTrigger\" @click=\"${this._toggleMenu}\">\n          <md-icon>stat_minus_1</md-icon>\n        </md-icon-button>\n        <md-menu\n          id=\"breadcrumbMenu\"\n          anchor=\"breadCrumbTrigger\"\n          positioning=\"popover\"\n          .open=\"${this.isMenuOpen}\"\n          @closed=\"${this._onMenuClosed}\"\n          .menuCorner=\"${Corner.START_END}\"\n        >\n          ${this.breadcrumbs.map(\n            (crumb, index) => html`\n              <md-menu-item @click=${() => this.navigateTo(crumb.url)}>\n                ${crumb.name}\n              </md-menu-item>\n              ${index < this.breadcrumbs.length - 1\n                ? html`<md-divider></md-divider>`\n                : \"\"}\n            `\n          )}\n        </md-menu>\n      `;\n    } else {\n      return nothing;\n    }\n  }\n\n  navigateTo(url: string) {\n    window.history.pushState({}, \"\", url);\n    window.dispatchEvent(new CustomEvent(\"location-changed\"));\n    this.isMenuOpen = false;\n  }\n\n  private _toggleMenu(e: Event) {\n    e.stopPropagation();\n    this.isMenuOpen = !this.isMenuOpen;\n  }\n\n  private _onMenuClosed() {\n    this.isMenuOpen = false;\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          --top-app-bar-height: 48px;\n          --top-app-bar-expanded-height: 80px;\n        }\n        .top-app-bar {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          height: var(--top-app-bar-height);\n          padding: 0 16px;\n          background-color: var(--md-sys-color-surface);\n          color: var(--md-sys-color-on-surface);\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          transition: top 0.3s;\n          z-index: 1;\n        }\n\n        .title {\n          flex-grow: 1;\n          text-align: left;\n          margin-left: 6px;\n          margin-bottom: 1px;\n          transform: translateY(-15%);\n        }\n\n        .title md-icon-button {\n          transform: translateY(15%);\n        }\n\n        slot[name=\"action\"]::slotted(*) {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n        }\n\n        @media (max-width: 480px) {\n          .title {\n            margin-bottom: 4px;\n          }\n\n          .top-app-bar {\n            padding-top: 0;\n            padding-bottom: 0;\n            padding-left: 8px;\n            padding-right: 0;\n          }\n\n          .top-app-bar.expanded {\n            height: var(--top-app-bar-expanded-height);\n            flex-direction: column;\n            justify-content: center;\n          }\n          .top-app-bar {\n            height: var(--top-app-bar-height);\n            flex-direction: row;\n            justify-content: space-between;\n            align-items: center;\n          }\n          .top-app-bar.expanded {\n            height: var(--top-app-bar-expanded-height);\n            flex-direction: column;\n            justify-content: center;\n            align-items: start;\n          }\n\n          .title.expanded {\n            order: 2;\n            margin-left: 12px;\n            margin-bottom: 0;\n            margin-top: 6px;\n          }\n\n          slot[name=\"action\"] {\n            position: absolute;\n            right: 0;\n            top: 4px;\n            display: flex;\n            align-items: center;\n          }\n        }\n      `,\n    ];\n  }\n\n  lastScrollY: number = 0;\n\n  constructor() {\n    super();\n  }\n\n  override updated(changedProperties: PropertyValues) {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"titleString\")) {\n      this.isTitleLong = this.titleString.trim().length > 16;\n    }\n  }\n\n  override connectedCallback(): void {\n    super.connectedCallback();\n    window.addEventListener(\"scroll\", this.handleScroll.bind(this));\n  }\n\n  override disconnectedCallback(): void {\n    window.removeEventListener(\"scroll\", this.handleScroll.bind(this));\n    super.disconnectedCallback();\n  }\n\n  handleScroll(): void {\n    const currentScrollY: number = window.scrollY;\n    const appBar: HTMLElement | null | undefined =\n      this.shadowRoot?.querySelector(\".top-app-bar\");\n\n    if (appBar) {\n      if (currentScrollY > this.lastScrollY) {\n        appBar.style.top = `-${getComputedStyle(this).getPropertyValue(\n          \"--top-app-bar-height\"\n        )}`;\n      } else {\n        appBar.style.top = \"0\";\n      }\n    }\n\n    this.lastScrollY = currentScrollY;\n  }\n\n  override render(): TemplateResult {\n    const appBarClass = this.isTitleLong\n      ? \"top-app-bar expanded\"\n      : \"top-app-bar\";\n\n    return html`\n      <div class=\"${appBarClass}\">\n        <slot name=\"navigation\"></slot>\n        <div class=\"title ${this.isTitleLong ? \"expanded\" : \"\"}\">\n          ${this.titleString}\n          ${this.breadcrumbs.length > 0 ? this.renderBreadcrumbsDropdown() : \"\"}\n        </div>\n        <slot name=\"action\"></slot>\n      </div>\n    `;\n  }\n}\n"]}