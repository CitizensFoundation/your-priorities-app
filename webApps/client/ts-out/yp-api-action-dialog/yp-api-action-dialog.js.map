{"version":3,"file":"yp-api-action-dialog.js","sourceRoot":"","sources":["../../src/yp-api-action-dialog/yp-api-action-dialog.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport \"@material/web/button/text-button.js\";\nimport \"@material/web/dialog/dialog.js\";\n\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\nimport { Dialog } from \"@material/web/dialog/internal/dialog.js\";\n\n@customElement(\"yp-api-action-dialog\")\nexport class YpApiActionDialog extends YpBaseElement {\n  @property({ type: String })\n  action: string | undefined;\n\n  @property({ type: String })\n  method: string | undefined;\n\n  @property({ type: String })\n  confirmationText: string | undefined;\n\n  @property({ type: String })\n  confirmButtonText: string | undefined;\n\n  @property({ type: Object })\n  onFinishedFunction: Function | undefined;\n\n  @property({ type: Boolean })\n  finalDeleteWarning = false;\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        md-dialog {\n          // height: 100%;\n        }\n        md-dialog[open][is-safari] {\n         // height: 100%;\n        }\n      `,\n    ];\n  }\n\n  override render() {\n    return html`\n      <md-dialog\n        id=\"confirmationDialog\"\n        ?is-safari=\"${this.isSafari}\"\n        @close=\"${this._onClose}\"\n      >\n        <div slot=\"content\">${this.confirmationText}</div>\n        <div slot=\"actions\">\n          <md-text-button dialogAction=\"cancel\"\n            @click=\"${()=>(this.$$(\"#confirmationDialog\") as Dialog).close()}\"\n            >${this.t(\"cancel\")}</md-text-button\n          >\n          <md-text-button dialogAction=\"accept\" @click=\"${this._delete}\"\n            >${this.confirmButtonText || \"\"}</md-text-button\n          >\n        </div>\n      </md-dialog>\n    `;\n  }\n\n  _onClose() {\n    this.fire(\"close\");\n    this.fireGlobal(\"yp-dialog-closed\");\n  }\n\n  setup(\n    action: string,\n    confirmationText: string,\n    onFinishedFunction: Function | undefined = undefined,\n    confirmButtonText: string | undefined = undefined,\n    method: string | undefined = undefined\n  ) {\n    this.action = action;\n    this.confirmationText = confirmationText;\n    this.onFinishedFunction = onFinishedFunction;\n    if (confirmButtonText) {\n      this.confirmButtonText = confirmButtonText;\n    } else {\n      this.confirmButtonText = this.t(\"delete\");\n    }\n    if (method) {\n      this.method = method;\n    } else {\n      this.method = \"DELETE\";\n    }\n  }\n\n  async open(options: { finalDeleteWarning: boolean } | undefined = undefined) {\n    if (options && options.finalDeleteWarning) {\n      this.finalDeleteWarning = true;\n    }\n\n    await this.updateComplete;\n\n    (this.$$(\"#confirmationDialog\") as Dialog).show();\n    this.fireGlobal(\"yp-dialog-opened\");\n  }\n\n  async _delete() {\n    if (!this.finalDeleteWarning && this.action && this.method) {\n      const response = await window.serverApi.apiAction(\n        this.action,\n        this.method,\n        { deleteConfirmed: true }\n      );\n      this.fire(\"api-action-finished\");\n      if (this.onFinishedFunction) {\n        this.onFinishedFunction(response);\n      }\n      (this.$$(\"#confirmationDialog\") as Dialog).close()\n    } else {\n      this.finalDeleteWarning = false;\n      this.confirmationText = this.t(\"finalDeleteWarning\");\n\n      await this.updateComplete;\n\n      (this.$$(\"#confirmationDialog\") as Dialog).show();\n    }\n  }\n}\n"]}