{"version":3,"file":"ac-activities.js","sourceRoot":"","sources":["../../src/ac-activities/ac-activities.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { property, customElement, state } from \"lit/decorators.js\";\n\nimport \"@material/web/button/outlined-button.js\";\nimport \"../yp-point/yp-point-news-story-edit.js\";\n\nimport \"./ac-activity.js\";\nimport \"./ac-activity-recommended-posts.js\";\n\nimport \"@lit-labs/virtualizer\";\n\nimport { YpBaseElementWithLogin } from \"../common/yp-base-element-with-login.js\";\nimport { LitVirtualizer } from \"@lit-labs/virtualizer\";\nimport { FlowLayout } from \"@lit-labs/virtualizer/layouts/flow.js\";\nimport { ShadowStyles } from \"../common/ShadowStyles.js\";\nimport { YpConfirmationDialog } from \"../yp-dialog-container/yp-confirmation-dialog.js\";\n\n@customElement(\"ac-activities\")\nexport class AcActivities extends YpBaseElementWithLogin {\n  @property({ type: Boolean })\n  disableNewPosts = false;\n\n  @property({ type: Boolean })\n  noRecommendedPosts = true;\n\n  @property({ type: Boolean })\n  gotInitialData = false;\n\n  @property({ type: Array })\n  activities: Array<AcActivityData> | undefined;\n\n  @property({ type: Number })\n  domainId: number | undefined;\n\n  @property({ type: String })\n  label: string | undefined;\n\n  @property({ type: String })\n  addLabel: string | undefined;\n\n  @property({ type: String })\n  notLoggedInLabel: string | undefined;\n\n  @property({ type: Number })\n  collectionId!: number;\n\n  @property({ type: String })\n  collectionType!: string;\n\n  @property({ type: Number })\n  communityId: number | undefined;\n\n  @property({ type: Number })\n  groupId: number | undefined;\n\n  @property({ type: Number })\n  postId: number | undefined;\n\n  @property({ type: Number })\n  postGroupId: number | undefined;\n\n  @property({ type: Number })\n  userId: number | undefined;\n\n  @property({ type: String })\n  mode: \"activities\" | \"news_feeds\" = \"activities\";\n\n  @property({ type: String })\n  url: string | undefined;\n\n  @property({ type: String })\n  latestProcessedActivityAt: string | undefined;\n\n  @property({ type: String })\n  oldestProcessedActivityAt: string | undefined;\n\n  @property({ type: Number })\n  activityIdToDelete: number | undefined;\n\n  @property({ type: Array })\n  recommendedPosts: Array<YpPostData> | undefined;\n\n  @state() closeNewsfeedSubmissions = false;\n\n  _moreToLoad = false;\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"domainId\")) {\n      this._domainIdChanged();\n    }\n\n    if (changedProperties.has(\"communityId\")) {\n      this._communityIdChanged();\n    }\n\n    if (changedProperties.has(\"groupId\")) {\n      this._groupIdChanged();\n    }\n\n    if (changedProperties.has(\"postId\")) {\n      this._postIdChanged();\n    }\n\n    if (changedProperties.has(\"userId\")) {\n      this._userIdChanged();\n    }\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      ShadowStyles,\n      css`\n        :host {\n          height: 100%;\n        }\n\n        lit-virtualizer {\n          height: 100vh;\n          width: 100vw;\n        }\n\n        .addNewsBox {\n          background-color: var(--md-sys-primary-container);\n          color: var(--md-sys-on-primary-container);\n          width: 550px;\n          height: 100%;\n          padding-left: 16px;\n          padding-right: 16px;\n          margin-top: 16px;\n          margin-left: 16px;\n          margin-right: 16px;\n        }\n\n        @media (max-width: 600px) {\n          .addNewsBox {\n            width: 100%;\n            height: 100%;\n            margin-bottom: 8px;\n            margin-top: 8px;\n            margin-left: 0;\n            margin-right: 0;\n          }\n        }\n\n        @media (max-width: 340px) {\n          .addNewsBox {\n            width: 100%;\n            height: 100%;\n            margin-bottom: 8px;\n            margin-top: 8px;\n            margin-left: 0;\n            margin-right: 0;\n          }\n        }\n\n        .activityContainer {\n          width: 550px;\n          margin: 0;\n          padding: 0;\n          border-radius: 24px;\n          margin-bottom: 16px;\n          margin-top: 16px;\n        }\n\n        @media (max-width: 600px) {\n          .activityContainer {\n            width: 100%;\n          }\n        }\n\n        .recommendedPosts[not-active] {\n          display: none;\n        }\n\n        .recommendedPosts[small] {\n          display: none;\n        }\n\n        .mainActivityContent {\n          height: 100% !important;\n        }\n\n        .headerUserImage {\n          padding-top: 16px;\n        }\n\n        h1 {\n          font-size: 24px;\n        }\n\n        md-outlined-button {\n        }\n\n        md-icon {\n        }\n\n        .createdAt {\n          margin-top: 16px;\n          font-size: 14px;\n        }\n\n        yp-ajax {\n        }\n\n        .deleteIcon {\n          position: absolute;\n          right: 0px;\n          bottom: 8px;\n        }\n\n        .withCursor {\n          cursor: pointer;\n        }\n\n        @media (max-width: 960px) {\n          .recommendedPosts {\n            display: none !important;\n          }\n        }\n\n        .topLevelActivitiesContainer[wide] {\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        .spinnerContainer {\n          margin-top: 32px;\n        }\n\n        .topSpinnerContainer {\n          margin-top: 16px;\n        }\n\n        :focus {\n          outline: none;\n        }\n\n        .notLoggedInButton {\n          margin-top: 8px;\n          width: 250px;\n          margin-bottom: 8px;\n          text-align: center;\n        }\n\n        .topLevelActivitiesContainer[rtl] {\n          direction: rtl;\n        }\n      `,\n    ];\n  }\n\n  renderItem(activity: AcActivityData, index: number) {\n    return html`\n      <div class=\"layout vertical center-center\" style=\"width: 100%;\">\n        <ac-activity\n          tabindex=\"${index}\"\n          .hasLoggedInUser=\"${this.isLoggedIn}\"\n          class=\"activityContainer\"\n          .activity=\"${activity}\"\n          .postId=\"${this.postId}\"\n          .groupId=\"${this.groupId}\"\n          .communityId=\"${this.communityId}\"\n          .domainId=\"${this.domainId}\"\n        ></ac-activity>\n      </div>\n    `;\n  }\n\n  override render() {\n    return html`\n      <div\n        class=\"layout horizontal topLevelActivitiesContainer center-center\"\n        wide=\"${this.wide}\"\n        ?rtl=\"${this.rtl}\"\n      >\n        <div class=\"layout vertical  center-center\">\n          ${this.loggedInUser\n            ? html`\n                <div\n                  .loggedInUser=\"${this.isLoggedIn}\"\n                  ?hidden=\"${this.closeNewsfeedSubmissions || !this.activities}\"\n                  class=\"addNewsBox\"\n                >\n                  <yp-point-news-story-edit\n                    .label=\"${this.label}\"\n                    .notLoggedInLabel=\"${this.notLoggedInLabel}\"\n                    .addLabel=\"${this.addLabel}\"\n                    .domainId=\"${this.domainId}\"\n                    .communityId=\"${this.communityId}\"\n                    .groupId=\"${this.groupId}\"\n                    .postGroupId=\"${this.postGroupId}\"\n                    .postId=\"${this.postId}\"\n                    @refresh=\"${this.loadNewData}\"\n                  >\n                  </yp-point-news-story-edit>\n                </div>\n              `\n            : html`\n                <div\n                  class=\"layout horizontal center-center\"\n                  style=\"width: 100%;\"\n                >\n                  <md-filled-button\n                    class=\"layout horizontal notLoggedInButton\"\n                    @click=\"${this._openLogin}\"\n                  >\n                    ${this.t(\"loginToShareALink\")}</md-filled-button\n                  >\n                </div>\n              `}\n          ${this.activities\n            ? html`\n                <lit-virtualizer\n                  id=\"list\"\n                  .items=${this.activities}\n                  .scrollTarget=\"${window}\"\n                  .layout=\"${FlowLayout}\"\n                  id=\"activitiesList\"\n                  .renderItem=${this.renderItem.bind(this)}\n                  @rangeChanged=${this.scrollEvent}\n                ></lit-virtualizer>\n              `\n            : nothing}\n        </div>\n\n        <div\n          class=\"layout vertical self-start recommendedPosts\"\n          ?notActive=\"${this.noRecommendedPosts}\"\n          small=\"${!this.wide}\"\n          ?hidden=\"${!this.recommendedPosts}\"\n        >\n          <ac-activity-recommended-posts\n            id=\"recommendedPosts\"\n            .recommendedPosts=\"${this.recommendedPosts}\"\n            class=\"layout vertical\"\n          ></ac-activity-recommended-posts>\n        </div>\n      </div>\n    `;\n  }\n\n  scrollEvent(event: { last: number }) {\n    //TODO: Check this logic\n\n    if (\n      this.activities &&\n      this._moreToLoad &&\n      event.last != -1 &&\n      event.last < this.activities.length &&\n      event.last + 5 >= this.activities.length\n    ) {\n      this._moreToLoad = true;\n      this._loadMoreData();\n    }\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.addListener(\"yp-point-deleted\", this._pointDeleted);\n    this.addListener(\n      \"yp-refresh-activities-scroll-threshold\",\n      this._clearScrollThreshold\n    );\n\n    this.addListener(\"yp-delete-activity\", this._deleteActivity);\n\n    switch (this.collectionType) {\n      case \"domain\":\n        this.domainId = this.collectionId;\n        break;\n      case \"community\":\n        this.communityId = this.collectionId;\n        break;\n      case \"group\":\n        this.groupId = this.collectionId;\n        break;\n      case \"post\":\n        this.postId = this.collectionId;\n        break;\n      case \"user\":\n        this.userId = this.collectionId;\n        break;\n    }\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeListener(\"yp-point-deleted\", this._pointDeleted);\n    this.removeListener(\n      \"yp-refresh-activities-scroll-threshold\",\n      this._clearScrollThreshold\n    );\n\n    this.removeListener(\"yp-delete-activity\", this._deleteActivity);\n  }\n\n  _openLogin() {\n    this.fire(\"yp-open-login\");\n  }\n\n  _pointDeleted(event: CustomEvent) {\n    if (this.activities) {\n      for (let i = 0; i < this.activities.length; i++) {\n        if (this.activities[i].Point) {\n          if (this.activities[i].Point!.id == event.detail.pointId) {\n            this._removeActivityId(this.activities[i].id);\n          }\n        }\n      }\n    }\n  }\n\n  get wideListOffset() {\n    if (this.groupId) {\n      return \"800\";\n    } else {\n      return \"415\";\n    }\n  }\n\n  get ironListResizeScrollThreshold() {\n    if (this.wide) {\n      return 800;\n    } else {\n      return 300;\n    }\n  }\n\n  //TODO: Look into if this is needed\n  get ironListPaddingTop() {\n    let offset = (this.$$(\"#activitiesList\") as HTMLElement).offsetTop;\n    offset -= 75;\n\n    if (!this.isLoggedIn && !this.groupId) offset -= 75;\n\n    if (offset > 0) {\n      console.info(\"News scroll offset: \" + offset);\n      return offset;\n    } else {\n      if (this.groupId) {\n        if (this.wide) {\n          offset = this.isLoggedIn ? 700 : 580;\n        } else {\n          offset = this.isLoggedIn ? 950 : 690;\n        }\n      } else {\n        if (this.wide) {\n          offset = this.isLoggedIn ? 600 : 400;\n        } else {\n          offset = this.isLoggedIn ? 700 : 610;\n        }\n      }\n      console.info(\"News (manual) scroll offset: \" + offset);\n      return offset;\n    }\n  }\n\n  _removeActivityId(activityId: number) {\n    if (this.activities) {\n      for (let i = 0; i < this.activities.length; i++) {\n        if (this.activities[i].id == activityId) {\n          this.activities.splice(i, 1);\n        }\n      }\n    }\n    //TODO: See if this needed\n    //this.$$(\"#activitiesList\").fire(\"iron-resize\");\n  }\n\n  _deleteActivity(event: CustomEvent) {\n    this.activityIdToDelete = event.detail.id;\n    window.appDialogs.getDialogAsync(\n      \"confirmationDialog\",\n      (dialog: YpConfirmationDialog) => {\n        dialog.open(\n          this.t(\"activity.confirmDelete\"),\n          this._reallyDelete.bind(this)\n        );\n      }\n    );\n  }\n\n  async _reallyDelete() {\n    let type, collectionId;\n    if (this.domainId) {\n      type = \"domains\";\n      collectionId = this.domainId;\n    } else if (this.communityId) {\n      type = \"communities\";\n      collectionId = this.communityId;\n    } else if (this.groupId) {\n      type = \"groups\";\n      collectionId = this.groupId;\n    } else if (this.postId) {\n      type = \"posts\";\n      collectionId = this.postId;\n    } else if (this.userId) {\n      type = \"users\";\n      collectionId = this.postId;\n    }\n\n    if (type && collectionId && this.activityIdToDelete) {\n      await window.serverApi.deleteActivity(\n        type,\n        collectionId,\n        this.activityIdToDelete\n      );\n      this._removeActivityId(this.activityIdToDelete);\n      this.activityIdToDelete = undefined;\n      this.requestUpdate();\n    } else {\n      console.error(\"No activity found to delete\");\n    }\n  }\n\n  _generateRequest(typeId: number, typeName: string) {\n    if (typeId) {\n      this.oldestProcessedActivityAt = undefined;\n      this.noRecommendedPosts = true;\n      this._moreToLoad = true;\n      //TODO: Add a minimum threshold of filtering before enabling dynamic news_feeds again\n      if (window.appUser && window.appUser.user && !this.postId) {\n        this.mode = \"activities\";\n        //this.mode = 'news_feeds';\n      } else {\n        this.mode = \"activities\";\n      }\n\n      this.url = \"/api/\" + this.mode + \"/\" + typeName + \"/\" + typeId;\n\n      this._loadMoreData();\n\n      if (typeName != \"posts\") {\n        this._getRecommendations(typeName, typeId);\n      }\n    }\n  }\n\n  async _loadMoreData() {\n    if (this.url && this._moreToLoad) {\n      this._moreToLoad = false;\n      let url = this.url;\n      if (this.oldestProcessedActivityAt)\n        url += \"?beforeDate=\" + this.oldestProcessedActivityAt;\n      const response = (await window.serverApi.getAcActivities(\n        url\n      )) as AcActivitiesResponse;\n      this._processResponse(response);\n    } else {\n      console.warn(\"Trying to load more activities without conditions\");\n    }\n  }\n\n  async loadNewData() {\n    if (this.url && this.latestProcessedActivityAt) {\n      let url = this.url;\n      if (this.oldestProcessedActivityAt)\n        url = url + \"?afterDate=\" + this.latestProcessedActivityAt;\n      this._processResponse(\n        (await window.serverApi.getAcActivities(url)) as AcActivitiesResponse,\n        true\n      );\n    } else if (this.url && !this.latestProcessedActivityAt) {\n      this._processResponse(\n        (await window.serverApi.getAcActivities(\n          this.url\n        )) as AcActivitiesResponse, true\n      );\n    }\n  }\n\n  _domainIdChanged() {\n    if (this.domainId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.domainId, \"domains\");\n    }\n  }\n\n  _communityIdChanged() {\n    if (this.communityId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.communityId, \"communities\");\n    }\n  }\n\n  _groupIdChanged() {\n    if (this.groupId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.groupId, \"groups\");\n    }\n  }\n\n  _postIdChanged() {\n    if (this.postId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.postId, \"posts\");\n    }\n  }\n\n  _userIdChanged() {\n    if (this.userId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.userId, \"users\");\n    }\n  }\n\n  _clearScrollThreshold() {\n    //TODO: Do we need this?\n    //this.$$(\"#scrollTheshold\").clearTriggers();\n  }\n\n  async _getRecommendations(typeName: string, typeId: number) {\n    let allowRecommendations = true;\n    if (this.activities && this.activities.length > 0) {\n      if (\n        this.activities[0].Group &&\n        this.activities[0].Group.configuration &&\n        this.activities[0].Group.configuration.hideRecommendationOnNewsFeed\n      ) {\n        allowRecommendations = false;\n      }\n      if (\n        this.activities[0].Community &&\n        this.activities[0].Community.configuration &&\n        this.activities[0].Community.configuration.hideRecommendationOnNewsFeed\n      ) {\n        allowRecommendations = false;\n      }\n    }\n    if (allowRecommendations) {\n      this.recommendedPosts = await window.serverApi.getRecommendations(\n        typeName,\n        typeId\n      );\n      this.noRecommendedPosts = false;\n    } else {\n      this.noRecommendedPosts = true;\n    }\n  }\n\n  _preProcessActivities(activities: Array<AcActivityData>) {\n    for (let i = 0; i < activities.length; i++) {\n      if (activities[i].Point) {\n        activities[i].Point!.latestContent =\n          activities[i].Point!.PointRevisions![\n            activities[i].Point!.PointRevisions!.length - 1\n          ].content;\n      }\n    }\n    return activities;\n  }\n\n  _processResponse(\n    activitiesResponse: AcActivitiesResponse,\n    newData = false\n  ) {\n    const activities = this._preProcessActivities(\n      activitiesResponse.activities\n    );\n\n    this.gotInitialData = true;\n\n    if (activitiesResponse.oldestProcessedActivityAt) {\n      this.oldestProcessedActivityAt =\n        activitiesResponse.oldestProcessedActivityAt;\n    } else {\n      console.warn(\"Have not set oldestProcessedActivityAt\");\n    }\n\n    if (this.activities) {\n      for (let i = 0; i < activities.length; i++) {\n        if (newData || this.url!.indexOf(\"afterDate\") > -1) {\n          this.activities.unshift(activities[i]);\n        } else {\n          this.activities.push(activities[i]);\n        }\n      }\n    } else {\n      this.activities = activities;\n    }\n\n    if (activities && activities.length > 0) {\n      if (\n        !this.latestProcessedActivityAt ||\n        this.latestProcessedActivityAt < activities[0].created_at\n      ) {\n        this.latestProcessedActivityAt = activities[0].created_at;\n      }\n      if (!this.latestProcessedActivityAt) {\n        console.error(\"Have not set latest processed activity at\");\n      }\n      this._moreToLoad = true;\n      if (\n        (this.activities.length < 15) ||\n        (activities.length < 3 && this.activities.length < 100)\n      ) {\n        this._loadMoreData();\n      }\n    }\n\n    this.fireGlobal(\"yp-refresh-activities-scroll-threshold\", {});\n\n    setTimeout(() => {\n      //TODO: Check out\n      //this.$$(\"#activitiesList\").fire('iron-resize');\n    });\n\n    this.closeNewsfeedSubmissions = false;\n\n    if (this.activities && this.activities.length > 0) {\n      if (\n        this.activities[0].Group &&\n        this.activities[0].Group.configuration &&\n        this.activities[0].Group.configuration.closeNewsfeedSubmissions\n      ) {\n        this.closeNewsfeedSubmissions = true;\n      } else if (\n        this.activities[0].Community &&\n        this.activities[0].Community.configuration &&\n        this.activities[0].Community.configuration.closeNewsfeedSubmissions\n      ) {\n        this.closeNewsfeedSubmissions = true;\n      }\n    }\n\n    console.error(`Acitivites length ${this.activities.length}`);\n    this.requestUpdate();\n  }\n\n  scrollToItem(item: AcActivityData) {\n    console.log(\"Activity scrolling to item\");\n    if (item && this.activities) {\n      for (let i = 0; i < this.activities.length; i++) {\n        if (this.activities[i] == item) {\n          (this.$$(\"#list\") as LitVirtualizer).scrollToIndex(i);\n          break;\n        }\n      }\n    }\n    //      this.fireGlobal('yp-refresh-activities-scroll-threshold');\n    //TODO: Get workgin\n    //(this.$$('#activitiesList') as LitVirtualizer).scrollToItem(item);\n  }\n\n  fireResize() {\n    console.log(\"fireResize\");\n    //TODO: Is this needed\n    //this.$$(\"#activitiesList\").fire('iron-resize');\n  }\n}\n"]}