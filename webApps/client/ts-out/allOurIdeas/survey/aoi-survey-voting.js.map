{"version":3,"file":"aoi-survey-voting.js","sourceRoot":"","sources":["../../../src/allOurIdeas/survey/aoi-survey-voting.ts"],"names":[],"mappings":"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","sourcesContent":["import { css, html, nothing, PropertyValueMap } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport { YpBaseElement } from \"../../common/yp-base-element.js\";\nimport { YpMediaHelpers } from \"../../common/YpMediaHelpers.js\";\n\nimport \"../../common/yp-image.js\";\n\nimport \"@material/web/button/elevated-button.js\";\nimport \"@material/web/button/outlined-button.js\";\nimport \"@material/web/progress/circular-progress.js\";\n\nimport \"./aoi-new-idea-dialog.js\";\nimport \"./aoi-llm-explain-dialog.js\";\n\nimport { SharedStyles } from \"./SharedStyles.js\";\nimport { Dialog } from \"@material/web/dialog/internal/dialog.js\";\nimport { AoiNewIdeaDialog } from \"./aoi-new-idea-dialog.js\";\nimport { YpFormattingHelpers } from \"../../common/YpFormattingHelpers.js\";\nimport { AoiLlmExplainDialog } from \"./aoi-llm-explain-dialog.js\";\nimport { YpGroup } from \"../../yp-collection/yp-group.js\";\nimport { YpMagicText } from \"../../yp-magic-text/yp-magic-text.js\";\nimport { MdOutlinedButton } from \"@material/web/button/outlined-button.js\";\n\n@customElement(\"aoi-survey-voting\")\nexport class AoiSurveyVoting extends YpBaseElement {\n  @property({ type: Number })\n  groupId!: number;\n\n  @property({ type: Object })\n  earl!: AoiEarlData;\n\n  @property({ type: Object })\n  question!: AoiQuestionData;\n\n  @property({ type: Object })\n  firstPrompt!: AoiPromptData;\n\n  @property({ type: Number })\n  promptId!: number;\n\n  @property({ type: Object })\n  group!: YpGroupData;\n\n  @property({ type: Number })\n  voteCount = 0;\n\n  @property({ type: Boolean })\n  spinnersActive = false;\n\n  @property({ type: Object })\n  leftAnswer: AoiAnswerToVoteOnData | undefined;\n\n  @property({ type: Object })\n  rightAnswer: AoiAnswerToVoteOnData | undefined;\n\n  @property({ type: String })\n  appearanceLookup!: string;\n\n  @property({ type: Boolean })\n  breakForVertical = false;\n\n  @property({ type: Boolean })\n  breakButtonsForVertical = false;\n\n  @property({ type: Boolean })\n  llmExplainOpen = false;\n\n  @property({ type: Number })\n  level = 1;\n\n  @property({ type: Number })\n  currentLevelTargetVotes: number | undefined;\n\n  timer: number | undefined;\n\n  constructor() {\n    super();\n    this.resetAnimation = this.resetAnimation.bind(this);\n  }\n\n  override async connectedCallback() {\n    super.connectedCallback();\n    this.setupBootListener();\n    this.spinnersActive = false;\n    this.fire(\"needs-new-earl\");\n    window.appGlobals.activity(\"Voting - open\");\n    this.resetTimer();\n    this.installMediaQueryWatcher(`(max-width: 800px)`, (matches) => {\n      this.breakForVertical = matches;\n    });\n\n    this.installMediaQueryWatcher(`(max-width: 450px)`, (matches) => {\n      this.breakButtonsForVertical = matches;\n    });\n  }\n\n  override disconnectedCallback(): void {\n    super.disconnectedCallback();\n    window.appGlobals.activity(\"Voting - close\");\n    this.fireGlobal(\"set-ids\", {\n      questionId: this.question.id,\n      promptId: undefined,\n    });\n  }\n\n  resetTimer() {\n    this.timer = new Date().getTime();\n  }\n\n  animateButtons(direction: \"left\" | \"right\" | \"skip\"): Promise<void> {\n    return new Promise((resolve) => {\n      const leftButton = this.shadowRoot?.querySelector(\"#leftAnswerButton\");\n      const rightButton = this.shadowRoot?.querySelector(\"#rightAnswerButton\");\n\n      leftButton?.addEventListener(\"animationend\", this.resetAnimation);\n      rightButton?.addEventListener(\"animationend\", this.resetAnimation);\n\n      if (direction === \"left\") {\n        leftButton?.classList.add(\"animate-up\", \"fade-slow\");\n        rightButton?.classList.add(\"animate-down\", \"fade-fast\");\n      } else if (direction === \"right\") {\n        rightButton?.classList.add(\"animate-up\", \"fade-slow\");\n        leftButton?.classList.add(\"animate-down\", \"fade-fast\");\n      } else {\n        leftButton?.classList.add(\"fade-slow\");\n        rightButton?.classList.add(\"fade-slow\");\n      }\n\n      resolve();\n    });\n  }\n\n  resetAnimation(event: any) {\n    event.target.classList.remove(\n      \"animate-up\",\n      \"animate-down\",\n      \"animate-from-left\",\n      \"animate-from-right\",\n      \"fade-fast\",\n      \"fade-slow\"\n    );\n  }\n\n  async voteForAnswer(direction: \"left\" | \"right\" | \"skip\") {\n    window.appGlobals.activity(`Voting - ${direction}`);\n\n    //this.resetAnimation({target: this.$$(\"#leftAnswerButton\")});\n    //this.resetAnimation({target: this.$$(\"#rightAnswerButton\")});\n\n    const voteData: AoiVoteData = {\n      time_viewed: new Date().getTime() - (this.timer || 0),\n      prompt_id: this.promptId,\n      direction,\n      appearance_lookup: this.appearanceLookup,\n    };\n\n    const postVotePromise = window.aoiServerApi.postVote(\n      this.groupId,\n      this.question.id,\n      this.promptId,\n      this.language,\n      voteData,\n      direction\n    );\n\n    let animationPromise = this.animateButtons(direction);\n\n    const spinnerTimeout = setTimeout(() => {\n      this.spinnersActive = true;\n    }, 1000);\n\n    const [postVoteResponse] = await Promise.all([\n      postVotePromise,\n      animationPromise,\n    ]);\n\n    clearTimeout(spinnerTimeout);\n\n    this.spinnersActive = false;\n\n    if (!postVoteResponse) {\n      this.fire(\"display-snackbar\", this.t(\"Network error, please try again.\"));\n      this.removeAndInsertFromLeft();\n      return;\n    } else {\n      try {\n        this.leftAnswer = JSON.parse(\n          postVoteResponse.newleft\n        ) as AoiAnswerToVoteOnData;\n      } catch (error) {\n        console.warn(\n          \"Error parsing answers JSON\",\n          error,\n          postVoteResponse.newleft,\n        );\n        this.leftAnswer = postVoteResponse.newleft as any;\n      }\n\n      try {\n        this.rightAnswer = JSON.parse(\n          postVoteResponse.newright\n        ) as AoiAnswerToVoteOnData;\n      } catch (error) {\n        console.warn(\n          \"Error parsing answers JSON\",\n          error,\n          postVoteResponse.newright\n        );\n        this.rightAnswer = postVoteResponse.newright as any;\n      }\n\n      this.promptId = postVoteResponse.prompt_id;\n      this.appearanceLookup = postVoteResponse.appearance_lookup;\n\n      this.fire(\"update-appearance-lookup\", {\n        appearanceLookup: this.appearanceLookup,\n        promptId: this.promptId,\n        leftAnswer: this.leftAnswer,\n        rightAnswer: this.rightAnswer,\n      });\n\n      this.fireGlobal(\"set-ids\", {\n        questionId: this.question.id,\n        promptId: this.promptId,\n      });\n\n      this.removeAndInsertFromLeft();\n\n      const buttons = this.shadowRoot?.querySelectorAll(\"md-elevated-button\");\n      buttons?.forEach((button) => {\n        button.blur();\n      });\n\n      if (direction !== \"skip\") {\n        this.question.visitor_votes += 1;\n      }\n      this.requestUpdate();\n\n      this.resetTimer();\n    }\n  }\n\n  async setLabelOnMdButton() {\n    // Query all custom buttons\n    const customButtons =\n      this.shadowRoot?.querySelectorAll(\"md-elevated-button\");\n\n    // Check if buttons are found\n    if (!customButtons) {\n      console.error(\"No custom buttons found\");\n      return;\n    }\n\n    await this.updateComplete;\n\n    // Iterate over each button\n    customButtons.forEach((customButton) => {\n      // Access the shadow DOM of each button\n      const shadow = customButton.shadowRoot;\n\n      if (shadow) {\n        const labelSpan = shadow.querySelector(\"button .label\") as HTMLElement;\n\n        if (labelSpan) {\n          // Change the overflow property\n          labelSpan.style.overflow = \"visible\";\n        } else {\n          console.error(\n            \"Label span not found within the shadow DOM of the button\"\n          );\n        }\n      } else {\n        console.error(\"Shadow DOM not found for the button\");\n      }\n    });\n  }\n\n  protected override firstUpdated(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    super.firstUpdated(_changedProperties);\n    this.setLabelOnMdButton();\n  }\n\n  removeAndInsertFromLeft() {\n    const leftButton = this.shadowRoot?.querySelector(\"#leftAnswerButton\");\n    const rightButton = this.shadowRoot?.querySelector(\"#rightAnswerButton\");\n\n    leftButton?.classList.remove(\n      \"animate-up\",\n      \"animate-down\",\n      \"fade-fast\",\n      \"fade-slow\"\n    );\n    rightButton?.classList.remove(\n      \"animate-up\",\n      \"animate-down\",\n      \"fade-fast\",\n      \"fade-slow\"\n    );\n\n    leftButton?.classList.add(\"animate-from-left\");\n    rightButton?.classList.add(\"animate-from-right\");\n  }\n\n  openNewIdeaDialog() {\n    (this.$$(\"#newIdeaDialog\") as AoiNewIdeaDialog).open();\n  }\n\n  async openLlmExplainDialog() {\n    this.llmExplainOpen = true;\n    await this.updateComplete;\n    (this.$$(\"#llmExplainDialog\") as AoiLlmExplainDialog).open();\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      SharedStyles,\n      css`\n        :host {\n          --md-elevated-button-container-color: var(\n            --md-sys-color-surface-container-high\n          );\n          --md-elevated-button-label-text-color: var(--md-sys-color-on-surface);\n        }\n\n        yp-magic-text {\n          min-width: 265px;\n        }\n\n        .iconImage,\n        .iconImageRight {\n          width: 100px;\n          height: 100px;\n          margin-left: 0;\n          margin-right: 0;\n          border-radius: 70px;\n          background-color: transparent;\n        }\n\n        .iconImage[rtl] {\n          margin-right: 0;\n          margin-left: 0px;\n        }\n\n        .iconImageRight {\n        }\n\n        .buttonContainer md-elevated-button {\n          margin: 8px;\n          width: 400px;\n          max-width: 400px;\n          max-height: 120px;\n          height: 120px;\n          white-space: normal;\n          font-size: 16px;\n          --md-elevated-button-container-height: 120px !important;\n          --md-elevated-button-hover-label-text-color: var(\n            --md-sys-color-on-surface\n          );\n        }\n\n        @supports (white-space: collapse balance) {\n          .buttonContainer md-elevated-button {\n            white-space: collapse balance;\n          }\n        }\n\n        .spinnerContainer {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          height: 120px;\n          margin: 8px;\n          width: 400px;\n        }\n\n        .progressBarContainer {\n          width: 450px;\n          height: 10px;\n          background-color: var(--md-sys-color-on-secondary);\n          border-radius: 5px;\n          overflow: hidden;\n          box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);\n          margin-top: 40px;\n        }\n\n        .progressBar {\n          height: 100%;\n          background-color: var(--md-sys-color-secondary);\n          transition: width 0.4s ease-in-out;\n        }\n\n        .progressBarText {\n          font-size: 12px;\n          text-align: right;\n          padding-top: 4px;\n          color: var(--md-sys-color-secondary);\n          width: 450px;\n        }\n\n        .or {\n          font-size: 22px;\n          padding: 8px;\n          color: var(--md-sys-color-secondary);\n        }\n\n        .questionTitle {\n          margin-top: 32px;\n        }\n\n        .newIdeaButton,\n        .skipButton {\n          margin-top: 24px;\n          margin-left: 12px;\n          margin-right: 12px;\n        }\n\n        .skipButton {\n          margin-left: 8px;\n        }\n\n        .buttonContainer {\n          margin-top: 32px;\n        }\n\n        .md-elevated-button {\n          transition: transform 0.3s ease-out;\n        }\n\n        .fade-fast {\n          transition: opacity 0.5s ease-out;\n          opacity: 0.2;\n        }\n\n        .fade-slow {\n          transition: opacity 1s ease-out;\n          opacity: 0.9;\n        }\n\n        .animate-up,\n        .animate-down {\n          transition: transform 1s ease-out;\n        }\n\n        .animate-up {\n          transform: translateY(-450px);\n        }\n\n        .animate-down {\n          transform: translateY(450px);\n        }\n\n        .animate-from-left,\n        .animate-from-right {\n          opacity: 1;\n        }\n\n        .animate-from-left {\n          animation: slideInFromLeft 0.7s forwards;\n        }\n\n        .animate-from-right {\n          animation: slideInFromRight 0.7s forwards;\n        }\n\n        @keyframes slideInFromLeft {\n          0% {\n            transform: translateX(-120%);\n            opacity: 0.25;\n          }\n          100% {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n\n        @keyframes slideInFromRight {\n          0% {\n            transform: translateX(120%);\n            opacity: 0.25;\n          }\n          100% {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n\n        @media (max-width: 450px) {\n          .animate-up {\n            transform: translateY(-550px);\n          }\n\n          .animate-down {\n            transform: translateY(550px);\n          }\n\n          .buttonContainer md-elevated-button {\n            width: 92vw;\n            max-width: 92vw;\n            font-size: 15px;\n            margin-top: 8px;\n            margin-bottom: 16px;\n          }\n\n          .questionTitle {\n            margin-top: 16px;\n            margin-bottom: 0px;\n            font-size: 22 px;\n          }\n\n          yp-magic-text {\n            min-width: 100%;\n          }\n\n          .spinnerContainer {\n            width: 100%;\n            height: 100px;\n          }\n\n          .topContainer {\n            overflow-x: clip;\n          }\n\n          .progressBarContainer {\n            width: 80%;\n          }\n\n          .progressBarText {\n            width: 80%;\n          }\n\n          .or {\n            font-size: 18px;\n            padding: 4px;\n            color: var(--md-sys-color-secondary);\n          }\n        }\n\n        @media (max-width: 360px) {\n          .buttonContainer md-elevated-button {\n            width: 92vw;\n            max-width: 92vw;\n            font-size: 14px;\n            margin-top: 8px;\n            margin-bottom: 16px;\n          }\n        }\n      `,\n    ];\n  }\n\n  renderProgressBar() {\n    if (this.earl.configuration) {\n      let initialTargetVotes = this.earl.configuration.target_votes || 30;\n\n      if (\n        !this.currentLevelTargetVotes ||\n        this.question.visitor_votes >= this.currentLevelTargetVotes\n      ) {\n        this.currentLevelTargetVotes = initialTargetVotes;\n        let levelMultiplier = 1;\n\n        while (this.question.visitor_votes >= this.currentLevelTargetVotes) {\n          this.currentLevelTargetVotes *= 2;\n          levelMultiplier *= 2;\n        }\n\n        let level = Math.log(levelMultiplier) / Math.log(2) + 1; // +1 because level starts at 1\n        this.level = level;\n      }\n\n      let targetVotes = this.currentLevelTargetVotes;\n\n      const progressPercentage = Math.min(\n        (this.question.visitor_votes / targetVotes) * 100,\n        100\n      );\n\n      return html`\n        <div class=\"progressBarContainer\">\n          <div class=\"progressBar\" style=\"width: ${progressPercentage}%;\"></div>\n        </div>\n        <div class=\"progressBarText\">\n          ${this.question.visitor_votes} ${this.t(\"votes of\")} ${targetVotes}\n          ${this.t(\"target\")} (${this.t(\"Level\")} ${this.level})\n        </div>\n      `;\n    } else {\n      return nothing;\n    }\n  }\n\n  override render() {\n    if (this.question) {\n      return html`\n        <div\n          class=\"topContainer layout vertical wrap center-center\"\n          tabindex=\"-1\"\n        >\n          <div class=\"questionTitle\">\n            <yp-magic-text\n              id=\"questionText\"\n              .contentId=\"${this.groupId}\"\n              .extraId=\"${this.question.id}\"\n              textOnly\n              truncate=\"400\"\n              .content=\"${this.question.name}\"\n              .contentLanguage=\"${this.group.language}\"\n              textType=\"aoiQuestionName\"\n            ></yp-magic-text>\n          </div>\n          <div\n            class=\"buttonContainer layout ${this.breakForVertical\n              ? \"vertical\"\n              : \"horizontal\"} wrap center-center\"\n          >\n            ${this.spinnersActive\n              ? html`\n                  <div class=\"spinnerContainer\">\n                    <md-circular-progress\n                      class=\"leftSpinner\"\n                      indeterminate\n                    ></md-circular-progress>\n                  </div>\n                `\n              : nothing}\n            <md-elevated-button\n              id=\"leftAnswerButton\"\n              class=\"leftAnswer answerButton\"\n              ?trailing-icon=\"${!this.rtl}\"\n              ?hidden=\"${this.spinnersActive}\"\n              @click=${() => this.voteForAnswer(\"left\")}\n            >\n              ${this.leftAnswer?.imageUrl\n                ? html`\n                    <yp-image\n                      slot=\"icon\"\n                      .src=\"${this.leftAnswer?.imageUrl}\"\n                      alt=\"Left answer image\"\n                      ?rtl=\"${this.rtl}\"\n                      class=\"iconImage\"\n                    ></yp-image>\n                  `\n                : nothing}\n              <yp-magic-text\n                id=\"leftAnswerText\"\n                class=\"magicAnswerText\"\n                .contentId=\"${this.groupId}\"\n                .extraId=\"${this.leftAnswer!.choiceId}\"\n                .additionalId=\"${this.question.id}\"\n                textOnly\n                truncate=\"140\"\n                .content=\"${this.leftAnswer?.content || this.leftAnswer}\"\n                .contentLanguage=\"${this.group.language}\"\n                textType=\"aoiChoiceContent\"\n              ></yp-magic-text>\n            </md-elevated-button>\n            <div class=\"layout horizontal center-center\">\n              <span class=\"or\"> ${this.t(\"or\")} </span>\n            </div>\n            ${this.spinnersActive\n              ? html`\n                  <div class=\"spinnerContainer\">\n                    <md-circular-progress\n                      class=\"leftSpinner\"\n                      indeterminate\n                    ></md-circular-progress>\n                  </div>\n                `\n              : nothing}\n            <md-elevated-button\n              id=\"rightAnswerButton\"\n              class=\"rightAnswer answerButton\"\n              ?trailing-icon=\"${!this.rtl}\"\n              ?hidden=\"${this.spinnersActive}\"\n              @click=${() => this.voteForAnswer(\"right\")}\n            >\n              ${this.rightAnswer?.imageUrl\n                ? html`\n                    <yp-image\n                      slot=\"icon\"\n                      ?rtl=\"${this.rtl}\"\n                      src=\"${this.rightAnswer?.imageUrl}\"\n                      alt=\"Right answer image\"\n                      class=\"iconImageRight\"\n                    ></yp-image>\n                  `\n                : nothing}\n              <yp-magic-text\n                id=\"rightAnswerText\"\n                class=\"magicAnswerText\"\n                .contentId=\"${this.groupId}\"\n                .extraId=\"${this.rightAnswer!.choiceId}\"\n                .additionalId=\"${this.question.id}\"\n                textOnly\n                truncate=\"140\"\n                .content=\"${this.rightAnswer?.content || this.rightAnswer}\"\n                .contentLanguage=\"${this.group.language}\"\n                textType=\"aoiChoiceContent\"\n              ></yp-magic-text>\n            </md-elevated-button>\n          </div>\n          <div\n            class=\"layout ${this.breakButtonsForVertical\n              ? \"vertical\"\n              : \"horizontal\"} center-center wrap\"\n          >\n            <md-text-button\n              ?hidden=\"${!this.hasLlm || this.earl.configuration?.hide_explain}\"\n              class=\"skipButton\"\n              @click=${this.openLlmExplainDialog}\n            >\n              ${this.t(\"Explain\")}\n            </md-text-button>\n\n            <md-text-button\n              ?hidden=\"${this.earl.configuration?.hide_skip}\"\n              class=\"skipButton\"\n              @click=${() => this.voteForAnswer(\"skip\")}\n            >\n              ${this.t(\"Skip\")}\n            </md-text-button>\n            <md-text-button\n              ?hidden=\"${!this.earl.configuration?.accept_new_ideas}\"\n              class=\"newIdeaButton\"\n              @click=\"${this.openNewIdeaDialog}\"\n            >\n              ${this.t(\"Add your own answer\")}\n            </md-text-button>\n          </div>\n          ${this.renderProgressBar()}\n          <div class=\"layout horizontal wrap center-center\"></div>\n        </div>\n        ${!this.wide\n          ? html`\n              <input\n                type=\"text\"\n                id=\"dummyInput\"\n                style=\"position:absolute;opacity:0;\"\n              />\n            `\n          : nothing}\n        <aoi-new-idea-dialog\n          id=\"newIdeaDialog\"\n          .question=${this.question}\n          .groupId=${this.groupId}\n          .group=${this.group}\n          @new-idea-added=\"${() => this.voteForAnswer(\"skip\")}\"\n          .earl=${this.earl}\n        ></aoi-new-idea-dialog>\n        ${this.llmExplainOpen\n          ? html`\n              <aoi-llm-explain-dialog\n                id=\"llmExplainDialog\"\n                .question=${this.question}\n                .questionText=${(this.$$(\"#questionText\") as YpMagicText)\n                  .translatedContent}\n                .leftAnswerText=${(this.$$(\"#leftAnswerText\") as YpMagicText)\n                  .translatedContent!}\n                .rightAnswerText=${(this.$$(\"#rightAnswerText\") as YpMagicText)\n                  .translatedContent!}\n                @closed=${() => (this.llmExplainOpen = false)}\n                .earl=${this.earl}\n                .groupId=${this.groupId}\n                .leftAnswer=${this.leftAnswer!}\n                .rightAnswer=${this.rightAnswer!}\n              ></aoi-llm-explain-dialog>\n            `\n          : nothing}\n      `;\n    } else {\n      return nothing;\n    }\n  }\n}\n"]}