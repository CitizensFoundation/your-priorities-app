{"version":3,"file":"aoi-survey-analysis.js","sourceRoot":"","sources":["../../../src/allOurIdeas/survey/aoi-survey-analysis.ts"],"names":[],"mappings":"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","sourcesContent":["import { css, html, nothing } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\nimport { resolveMarkdown } from \"../../common/litMarkdown/litMarkdown.js\";\n\nimport \"../../common/yp-image.js\";\nimport { YpFormattingHelpers } from \"../../common/YpFormattingHelpers.js\";\nimport { YpBaseElement } from \"../../common/yp-base-element.js\";\nimport { SharedStyles } from \"./SharedStyles.js\";\n\nimport \"@material/web/progress/circular-progress.js\";\n\nimport \"./aoi-streaming-analysis.js\";\n\n@customElement(\"aoi-survey-analysis\")\nexport class AoiSurveyAnalysis extends YpBaseElement {\n  @property({ type: Number })\n  groupId!: number;\n\n  @property({ type: Object })\n  group!: YpGroupData;\n\n  @property({ type: Object })\n  question!: AoiQuestionData;\n\n  @property({ type: Object })\n  earl!: AoiEarlData;\n\n  override async connectedCallback() {\n    super.connectedCallback();\n    window.appGlobals.activity(`Analysis - open`);\n  }\n\n  override disconnectedCallback(): void {\n    super.disconnectedCallback();\n    window.appGlobals.activity(`Analysis - close`);\n  }\n\n  renderStreamingAnalysis() {\n    try {\n      const analysis_config = JSON.parse(\n        this.earl.configuration!.analysis_config as any\n      ) as any;\n      return html` ${analysis_config.analyses.map((analysis: any) => {\n        return analysis.map((analysisTypeIndex: any) => {\n          return html`<aoi-streaming-analysis\n            groupId=${this.groupId}\n            analysisIndex=${analysis.analysisIndex}\n            analysisTypeIndex=${analysisTypeIndex}\n          >\n          </aoi-streaming-analysis>`;\n        });\n      })}`;\n    } catch (error) {\n      console.error(error);\n      return nothing;\n    }\n  }\n\n  override updated(\n    changedProperties: Map<string | number | symbol, unknown>\n  ): void {\n    super.updated(changedProperties);\n  }\n\n  static override get styles() {\n    return [\n      ...super.styles,\n      SharedStyles,\n      css`\n        .title {\n          font-size: 22px;\n          letter-spacing: 0.22em;\n          line-height: 1.7;\n          color: var(--md-sys-color-on-primary-container);\n          background-color: var(--md-sys-color-primary-container);\n          padding: 16px;\n          margin-top: 32px;\n          border-radius: 16px;\n          margin-bottom: 8px;\n        }\n\n\n        .analysisInfo {\n          font-size: 20px;\n          margin: 8px;\n          margin-bottom: 16px;\n          margin-top: 16px;\n          text-align: center;\n        }\n\n        .analysisTitle {\n          font-size: 16px;\n          margin: 16px;\n          padding: 8px;\n          margin-top: 8px;\n          border-radius: 16px;\n          text-align: center;\n        }\n\n        .ideasLabel {\n          font-size: 16px;\n          margin: 16px;\n          padding: 8px;\n          margin-bottom: 8px;\n          width: 80%;\n          border-radius: 16px;\n          text-align: center;\n          color: var(--md-sys-color-on-primary-container);\n          background-color: var(--md-sys-color-primary-container);\n        }\n\n        .generatingInfo {\n          font-size: 16px;\n          margin-top: 8px;\n          margin-bottom: 16px;\n          font-style: italic;\n        }\n\n        .analysisResults {\n          padding: 16px;\n          padding-top: 0;\n        }\n\n        .rowsContainer {\n          padding: 0;\n          padding-top: 0px;\n          padding-bottom: 8px;\n          margin: 16px;\n          width: 100%;\n          margin-top: 8px;\n          border-radius: 24px;\n          margin-bottom: 16px;\n          color: var(--md-sys-color-on-surface);\n          background-color: var(--md-sys-color-surface-container);\n        }\n\n        .analysisContainer {\n          padding: 8px;\n          margin: 8px;\n          color: var(--md-sys-color-primary);\n\n          min-width: 350px;\n          width: 550px;\n\n          font-size: 16px;\n          vertical-align: center;\n          margin-top: 0;\n          padding-top: 0;\n\n          padding-bottom: 16px;\n        }\n\n        aoi-streaming-analysis {\n          margin-bottom: 16px;\n          border-radius: 16px;\n        }\n\n        .analysisRow {\n          margin-bottom: 16px;\n          width: 100%;\n        }\n\n        .analysisRow {\n          padding: 0px;\n          margin: 0px;\n          border-radius: 16px;\n        }\n\n        .column {\n          padding: 8px;\n        }\n\n        .index {\n          font-size: 16px;\n        }\n\n        .nickname {\n          padding-bottom: 0;\n        }\n\n        .nameAndScore {\n          width: 100%;\n        }\n\n        .analysisRow {\n        }\n\n        .answers {\n          text-align: left;\n          align-items: left;\n          width: 100%;\n        }\n\n        .questionTitle {\n        }\n\n        aoi-streaming-analysis {\n          padding: 16px;\n        }\n\n\n        @media (min-width: 960px) {\n          .questionTitle {\n            margin-bottom: 16px;\n          }\n        }\n\n        @media (max-width: 960px) {\n          .title {\n            font-size: 18px;\n            letter-spacing: 0.15em;\n            line-height: 1.5;\n            margin-top: 16px;\n          }\n\n          .row {\n            min-width: 300px;\n            width: 300px;\n          }\n\n          .analysisContainer {\n            min-width: 100%;\n            width: 100%;\n            padding-left: 0;\n            padding-right: 0;\n            margin: 0;\n          }\n\n          .analysisResults {\n            border-radius: 16px;\n          }\n\n          .analysisRow {\n            width: 100%;\n          }\n\n          .ideaDescription {\n            padding-right: 24px;\n          }\n\n          .ideaIndex {\n            padding-left: 24px;\n          }\n        }\n      `,\n    ];\n  }\n\n  renderAnalysis() {\n    let outHtml = html``;\n\n    if (\n      this.earl.configuration &&\n      this.earl.configuration.analysis_config?.analyses?.length > 0\n    ) {\n      for (\n        let i = 0;\n        i < this.earl.configuration!.analysis_config.analyses.length;\n        i++\n      ) {\n        const analysis = this.earl.configuration!.analysis_config.analyses[i];\n        outHtml = html`${outHtml}`;\n        let innerHtml = html``;\n        for (let a = 0; a < analysis.analysisTypes.length; a++) {\n          innerHtml = html`${innerHtml}\n            <aoi-streaming-analysis\n              .groupId=${this.group.id}\n              .group=${this.group}\n              .earl=${this.earl}\n              .analysisIndex=${i}\n              .analysisTypeIndex=${a}\n            >\n            </aoi-streaming-analysis>`;\n        }\n        outHtml = html`${outHtml}\n          <div class=\"rowsContainer\">${innerHtml}</div>`;\n      }\n    }\n\n    return outHtml;\n  }\n\n  override render() {\n    return html`\n      <div class=\"topContainer layout vertical wrap center-center\">\n        <div class=\"analysisInfo\">${this.t('aiAnalysisInfo')}</div>\n        <div class=\"layout vertical self-start\">\n          <div class=\"questionTitle\">\n            <yp-magic-text\n              id=\"answerText\"\n              .contentId=\"${this.group.id}\"\n              .extraId=\"${this.question.id}\"\n              textOnly\n              truncate=\"300\"\n              .content=\"${this.question.name}\"\n              .contentLanguage=\"${this.group.language}\"\n              textType=\"aoiQuestionName\"\n            ></yp-magic-text>\n          </div>\n        </div>\n        <div class=\"layout vertical center-center analysisContainer\">\n          ${this.renderAnalysis()}\n        </div>\n      </div>\n    `;\n  }\n}\n"]}