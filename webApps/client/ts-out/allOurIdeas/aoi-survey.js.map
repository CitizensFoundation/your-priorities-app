{"version":3,"file":"aoi-survey.js","sourceRoot":"","sources":["../../src/allOurIdeas/aoi-survey.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { property, customElement, query } from \"lit/decorators.js\";\n\nimport \"@material/web/labs/navigationbar/navigation-bar.js\";\nimport \"@material/web/labs/navigationtab/navigation-tab.js\";\nimport \"@material/web/labs/navigationdrawer/navigation-drawer.js\";\nimport \"@material/web/list/list-item.js\";\nimport \"@material/web/list/list.js\";\nimport \"@material/web/icon/icon.js\";\nimport \"@material/web/iconbutton/icon-button.js\";\nimport \"@material/web/iconbutton/outlined-icon-button.js\";\nimport \"../yp-app/yp-snackbar.js\";\nimport \"@material/web/progress/linear-progress.js\";\n\nimport \"@material/web/menu/menu.js\";\nimport { cache } from \"lit/directives/cache.js\";\n\nimport \"../common/yp-image.js\";\n\n//import './chat/yp-chat-assistant.js';\n\nimport \"./survey/aoi-survey-intro.js\";\nimport \"./survey/aoi-survey-voting.js\";\nimport \"./survey/aoi-survey-results.js\";\nimport \"./survey/aoi-survey-analysis.js\";\nimport { AoiServerApi } from \"./survey/AoiServerApi.js\";\nimport { AoiAppGlobals } from \"./AoiAppGlobals.js\";\nimport { NavigationDrawer } from \"@material/web/labs/navigationdrawer/internal/navigation-drawer.js\";\n\nimport { NavigationBar } from \"@material/web/labs/navigationbar/internal/navigation-bar.js\";\nimport { YpCollection } from \"../yp-collection/yp-collection.js\";\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\nimport { MdPrimaryTab } from \"@material/web/tabs/primary-tab.js\";\nimport { live } from \"lit/directives/live.js\";\nimport { YpSnackbar } from \"../yp-app/yp-snackbar.js\";\n\nconst PagesTypes = {\n  Introduction: 1,\n  Voting: 2,\n  Results: 3,\n  Analysis: 4,\n  Share: 5,\n};\n\ndeclare global {\n  interface Window {\n    aoiAppGlobals: AoiAppGlobals;\n    aoiServerApi: AoiServerApi;\n    needsNewEarl: boolean;\n  }\n}\n\n//TODO: Label the pages for aria https://github.com/material-components/material-web/blob/main/docs/components/tabs.md\n\n@customElement(\"aoi-survey\")\nexport class AoiSurvey extends YpBaseElement {\n  @property({ type: Number })\n  pageIndex = 1;\n\n  @property({ type: Number })\n  totalNumberOfVotes = 0;\n\n  @property({ type: Number })\n  collectionId!: number;\n\n  @property({ type: Object })\n  collection!: YpGroupData;\n\n  @property({ type: String })\n  lastSnackbarText: string | undefined;\n\n  @property({ type: String })\n  currentError: string | undefined;\n\n  @property({ type: Object })\n  earl!: AoiEarlData;\n\n  @property({ type: Object })\n  question!: AoiQuestionData;\n\n  @property({ type: Object })\n  prompt!: AoiPromptData;\n\n  @property({ type: Boolean })\n  isAdmin = false;\n\n  @property({ type: Boolean })\n  surveyClosed = false;\n\n  @property({ type: String })\n  appearanceLookup!: string;\n\n  @property({ type: Object })\n  currentLeftAnswer: AoiAnswerToVoteOnData | undefined;\n\n  @property({ type: Object })\n  currentRightAnswer: AoiAnswerToVoteOnData | undefined;\n\n  @property({ type: Number })\n  currentPromptId: number | undefined;\n\n  drawer!: NavigationDrawer;\n\n  constructor() {\n    //super(\"group\", \"posts\", \"lighbulb\", \"create\");\n    super();\n    window.aoiServerApi = new AoiServerApi();\n    window.aoiAppGlobals = new AoiAppGlobals(window.aoiServerApi);\n    window.aoiAppGlobals.activity(\"pageview\");\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.setupBootListener();\n    this._setupEventListeners();\n    if (this.collection.configuration.allOurIdeas) {\n      console.error(\"Connecting to old configuration\");\n      this.getEarl();\n    } else {\n      this.fire(\"yp-network-error\", { showUserError: true });\n    }\n  }\n\n  async getEarl() {\n    window.aoiAppGlobals.activity(\"Survey - fetch start\");\n    try {\n      const earlData = await window.aoiServerApi.getEarlData(this.collectionId!);\n      this.earl = (\n        this.collection!.configuration as YpGroupConfiguration\n      ).allOurIdeas!.earl!;\n      this.question = earlData.question;\n      this.prompt = earlData.prompt;\n      this.appearanceLookup = this.question.appearance_id;\n\n      try {\n        this.currentLeftAnswer = JSON.parse(this.prompt.left_choice_text);\n        this.currentRightAnswer = JSON.parse(this.prompt.right_choice_text);\n      } catch (error) {\n        console.warn(\"Error parsing prompt answers\", error);\n        this.currentLeftAnswer = this.prompt.left_choice_text as any;\n        this.currentRightAnswer = this.prompt.right_choice_text as any;\n      }\n      this.currentPromptId = this.prompt.id;\n\n      document.title = this.question.name;\n\n      if (this.earl.active) {\n        this.surveyClosed = false;\n      } else {\n        this.surveyClosed = true;\n      }\n\n      this.fireGlobal(\"set-ids\", {\n        questionId: this.question.id,\n        promptId: this.prompt.id,\n      });\n\n      window.aoiAppGlobals.activity(\"Survey - fetch end\");\n    } catch (error) {\n      console.error(\"Error fetching earl\", error);\n      window.aoiAppGlobals.activity(\"Survey - fetch error\");\n    }\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this._removeEventListeners();\n  }\n\n  scrollToCollectionItemSubClass() {\n    //do nothing\n  }\n\n  getHexColor(color: string) {\n    if (color) {\n      // Replace all # with nothing\n      color = color.replace(/#/g, \"\");\n      if (color.length === 6) {\n        return `#${color}`;\n      } else {\n        return undefined;\n      }\n    } else {\n      return undefined;\n    }\n  }\n\n  snackbarclosed() {\n    this.lastSnackbarText = undefined;\n  }\n\n  tabChanged(event: CustomEvent) {\n    if (event.detail.activeIndex == 0) {\n      this.pageIndex = 1;\n    } else if (event.detail.activeIndex == 1) {\n      this.pageIndex = 2;\n    } else if (event.detail.activeIndex == 2) {\n      this.pageIndex = 3;\n    } else if (event.detail.activeIndex == 3) {\n      this.pageIndex = 4;\n    }\n  }\n\n  exitToMainApp() {\n    //TODO\n  }\n\n  async _displaySnackbar(event: CustomEvent) {\n    this.lastSnackbarText = event.detail;\n    await this.updateComplete;\n    (this.$$(\"#snackbar\") as YpSnackbar).open = true;\n  }\n\n  _setupEventListeners() {\n    this.addListener(\"display-snackbar\", this._displaySnackbar);\n  }\n\n  _removeEventListeners() {\n    this.removeListener(\"display-snackbar\", this._displaySnackbar);\n  }\n\n  externalGoalTrigger() {\n    try {\n      let triggerUrl = new URL(window.aoiAppGlobals.externalGoalTriggerUrl!);\n\n      let whiteList: string | string[] = window.aoiAppGlobals\n        .exernalGoalParamsWhiteList as string;\n\n      if (whiteList) {\n        whiteList = whiteList\n          .toLowerCase()\n          .split(\",\")\n          .map((param: string) => param.trim());\n      }\n\n      for (const key in window.aoiAppGlobals.originalQueryParameters) {\n        if (!whiteList || whiteList.includes(key.toLowerCase())) {\n          triggerUrl.searchParams.append(\n            key,\n            window.aoiAppGlobals.originalQueryParameters[key]\n          );\n        }\n      }\n\n      window.location.href = triggerUrl.toString();\n    } catch (error) {\n      console.error(\n        \"Invalid URL:\",\n        window.aoiAppGlobals.externalGoalTriggerUrl,\n        error\n      );\n    }\n  }\n\n  override updated(\n    changedProperties: Map<string | number | symbol, unknown>\n  ): void {\n    super.updated(changedProperties);\n  }\n\n  _appError(event: CustomEvent) {\n    console.error(event.detail.message);\n    this.currentError = event.detail.message;\n    //(this.$$('#errorDialog') as Dialog).open = true;\n  }\n\n  get adminConfirmed() {\n    return true;\n  }\n\n  _settingsColorChanged(event: CustomEvent) {\n    this.fireGlobal(\"yp-theme-color\", event.detail.value);\n  }\n\n  static override get styles() {\n    return [\n      ...super.styles,\n      css`\n        :host {\n          background-color: var(--md-sys-color-surface, #fefefe);\n        }\n\n        md-tabs {\n          z-index: 0;\n        }\n\n        :host {\n        }\n\n        md-tabs {\n          width: 100%;\n          max-width: 960px;\n        }\n\n        body {\n          background-color: var(--md-sys-color-on-surface, #fefefe);\n        }\n\n        .analyticsHeaderText {\n          font-size: var(--md-sys-typescale-headline-large-size, 18px);\n          margin-top: 16px;\n          margin-bottom: 16px;\n        }\n\n        .ypLogo {\n          margin-top: 16px;\n        }\n\n        .rightPanel {\n          width: 100%;\n        }\n\n        .drawer {\n          margin-left: 16px;\n          padding-left: 8px;\n          margin-right: 16px;\n          padding-bottom: 560px;\n        }\n\n        .selectedContainer {\n          --md-list-list-item-container-color: var(\n            --md-sys-color-secondary-container\n          );\n          color: var(--md-sys-color-on-background);\n          --md-list-list-item-label-text-color: var(\n            --md-sys-color-on-background\n          );\n        }\n\n        md-navigation-drawer {\n          --md-navigation-drawer-container-color: var(--md-sys-color-surface);\n        }\n\n        md-list {\n          --md-list-container-color: var(--md-sys-color-surface);\n        }\n\n        md-navigation-bar {\n          --md-navigation-bar-container-color: var(--md-sys-color-surface);\n        }\n\n        .loading {\n          display: flex;\n          justify-content: center;\n          width: 100%;\n          height: 100vh;\n          margin-top: 64px;\n        }\n\n        .lightDarkContainer {\n          padding-left: 8px;\n          padding-right: 8px;\n          color: var(--md-sys-color-on-surface);\n          font-size: 14px;\n        }\n\n        .darkModeButton {\n          margin: 16px;\n        }\n\n        .mainPageContainer {\n          overflow: hidden;\n        }\n\n        .topAppBar {\n          border-radius: 48px;\n          background-color: var(--md-sys-color-primary-container);\n          color: var(--md-sys-color-on-primary-container);\n          margin-top: 32px;\n          padding: 0px;\n          padding-left: 32px;\n          padding-right: 32px;\n          text-align: center;\n        }\n\n        .collectionLogoImage {\n          width: 60px;\n          height: 60px;\n          margin-left: 64px;\n        }\n\n        .mainPageContainer {\n          margin-top: 16px;\n        }\n\n        .navContainer {\n          position: fixed;\n          bottom: 0;\n          left: 0;\n          width: 100%;\n          z-index: 7;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        md-text-button {\n          --md-text-button-label-text-color: #fefefe;\n        }\n\n        md-icon-button {\n          --md-icon-button-unselected-icon-color: #f0f0f0;\n        }\n\n        #goalTriggerSnackbar {\n          padding: 24px;\n        }\n\n        @media (max-width: 960px) {\n          .mainPageContainer {\n            max-width: 100%;\n            width: 100%;\n            margin-bottom: 96px;\n            margin-top: 0;\n          }\n\n          prompt-promotion-dashboard {\n            max-width: 100%;\n          }\n        }\n      `,\n    ];\n  }\n\n  changeTabTo(tabId: number) {\n    this.tabChanged({ detail: { activeIndex: tabId } } as CustomEvent);\n  }\n\n  updateThemeColor(event: CustomEvent) {\n    this.themeColor = event.detail;\n  }\n\n  sendVoteAnalytics() {\n    if (this.totalNumberOfVotes % 10 === 0) {\n      window.aoiAppGlobals.activity(\n        `User voted ${this.totalNumberOfVotes} times`\n      );\n    }\n  }\n\n  updateappearanceLookup(event: CustomEvent) {\n    this.appearanceLookup = event.detail.appearanceLookup;\n    this.currentPromptId = event.detail.promptId;\n    this.currentLeftAnswer = event.detail.leftAnswer;\n    this.currentRightAnswer = event.detail.rightAnswer;\n\n    this.totalNumberOfVotes++;\n    this.question.votes_count++;\n\n    this.sendVoteAnalytics();\n  }\n\n  renderIntroduction() {\n    return html` <div class=\"layout vertical center-center\"></div> `;\n  }\n\n  renderShare() {\n    return html` <div class=\"layout vertical center-center\"></div> `;\n  }\n\n  startVoting() {\n    this.pageIndex = 2;\n    if (this.$$(\"#navBar\") as NavigationBar) {\n      (this.$$(\"#navBar\") as NavigationBar).activeIndex = 1;\n    }\n\n    if (this.$$(\"#votingTab\") as MdPrimaryTab) {\n      (this.$$(\"#votingTab\") as MdPrimaryTab).selected = true;\n    }\n\n    if (this.$$(\"#introTab\") as MdPrimaryTab) {\n      (this.$$(\"#introTab\") as MdPrimaryTab).selected = false;\n    }\n  }\n\n  openResults() {\n    debugger;\n    this.pageIndex = 3;\n    if (this.$$(\"#navBar\") as NavigationBar) {\n      (this.$$(\"#navBar\") as NavigationBar).activeIndex = 2;\n    }\n\n    if (this.$$(\"#resultsTab\") as MdPrimaryTab) {\n      (this.$$(\"#resultsTab\") as MdPrimaryTab).selected = true;\n    }\n\n    if (this.$$(\"#introTab\") as MdPrimaryTab) {\n      (this.$$(\"#introTab\") as MdPrimaryTab).selected = false;\n    }\n  }\n\n  triggerExternalGoalUrl() {\n    window.location.href = window.aoiAppGlobals.externalGoalTriggerUrl!;\n  }\n\n  _renderPage() {\n    if (this.earl) {\n      switch (this.pageIndex) {\n        case PagesTypes.Introduction:\n          return html`<aoi-survey-intro\n            .earl=\"${this.earl}\"\n            .group=\"${this.collection as YpGroupData}\"\n            .question=\"${this.question}\"\n            @startVoting=\"${this.startVoting}\"\n            @openResults=\"${this.openResults}\"\n            .themeDarkMode=\"${this.themeDarkMode}\"\n          ></aoi-survey-intro>`;\n        case PagesTypes.Voting:\n          return cache(html`<aoi-survey-voting\n            .earl=\"${this.earl}\"\n            .groupId=\"${this.collectionId!}\"\n            .group=\"${this.collection as YpGroupData}\"\n            .question=\"${this.question}\"\n            .leftAnswer=\"${this.currentLeftAnswer}\"\n            .rightAnswer=\"${this.currentRightAnswer}\"\n            .promptId=\"${this.currentPromptId}\"\n            .appearanceLookup=\"${this.appearanceLookup}\"\n            @update-appearance-lookup=\"${this.updateappearanceLookup}\"\n          ></aoi-survey-voting>`);\n        case PagesTypes.Results:\n          return html`<aoi-survey-results\n            .groupId=\"${this.collectionId!}\"\n            .group=\"${this.collection as YpGroupData}\"\n            .earl=\"${this.earl}\"\n            .question=\"${this.question}\"\n          ></aoi-survey-results>`;\n        case PagesTypes.Analysis:\n          return html`<aoi-survey-analysis\n            .groupId=\"${this.collectionId!}\"\n            .group=\"${this.collection as YpGroupData}\"\n            .earl=\"${this.earl}\"\n            .question=\"${this.question}\"\n          ></aoi-survey-analysis>`;\n        case PagesTypes.Share:\n          return html` ${this.renderShare()} `;\n        default:\n          return html`\n            <p>Page not found try going to <a href=\"#main\">Main</a></p>\n          `;\n      }\n    } else {\n      return html` <div class=\"loading\">\n        <md-circular-progress indeterminate></md-circular-progress>\n      </div>`;\n    }\n  }\n\n  renderScore() {\n    return html` <div class=\"layout vertical center-center\"></div> `;\n  }\n\n  renderNavigationBar() {\n    if (this.wide) {\n      return html`\n        <div class=\"layout vertical center-center\">\n          <md-tabs aria-label=\"Navigation Tabs\">\n            <md-primary-tab\n              id=\"introTab\"\n              class=\"${this.pageIndex == PagesTypes.Introduction &&\n              \"selectedContainer\"}\"\n              selected\n              @click=\"${() => this.changeTabTo(0)}\"\n              aria-label=\"${this.t(\"Why Participate\")}\"\n            >\n              <md-icon slot=\"icon\">info</md-icon>\n              ${this.t(\"About this project\")}\n            </md-primary-tab>\n\n            <md-primary-tab\n              id=\"votingTab\"\n              ?hidden=\"${this.surveyClosed}\"\n              class=\"${this.pageIndex == PagesTypes.Voting &&\n              \"selectedContainer\"}\"\n              @click=\"${() => this.changeTabTo(1)}\"\n              aria-label=\"${this.t(\"Participate Now!\")}\"\n            >\n              <md-icon slot=\"icon\">thumb_up</md-icon>\n              ${this.t(\"vote\")}\n            </md-primary-tab>\n\n\n            <md-primary-tab\n              id=\"resultsTab\"\n              ?hidden=\"${this.earl?.configuration!.hide_results}\"\n              class=\"${this.pageIndex == PagesTypes.Results &&\n              \"selectedContainer\"}\"\n              @click=\"${() => this.changeTabTo(2)}\"\n              aria-label=\"${this.t(\"Results\")}\"\n            >\n              <md-icon slot=\"icon\">grading</md-icon>\n              ${this.t(\"Results\")}\n            </md-primary-tab>\n\n            <md-primary-tab\n              ?hidden=\"${!this.hasLlm ||\n              this.earl?.configuration!.hide_analysis}\"\n              class=\"${this.pageIndex == PagesTypes.Analysis &&\n              \"selectedContainer\"}\"\n              @click=\"${() => this.changeTabTo(3)}\"\n              aria-label=\"${this.t(\"Analysis of Results\")}\"\n            >\n              <md-icon slot=\"icon\">insights</md-icon>\n              ${this.t(\"AI-generated analysis\")}\n            </md-primary-tab>\n          </md-tabs>\n        </div>\n      `;\n    } else {\n      return html`\n        <div class=\"navContainer\">\n          <md-navigation-bar\n            id=\"navBar\"\n            @navigation-bar-activated=\"${this.tabChanged}\"\n          >\n            <md-navigation-tab .label=\"${this.t(\"Intro\")}\"\n              ><md-icon slot=\"active-icon\">info</md-icon>\n              <md-icon slot=\"inactive-icon\">info</md-icon></md-navigation-tab\n            >\n            <md-navigation-tab\n              ?hidden=\"${this.surveyClosed}\"\n              id=\"votingTab\"\n              .label=\"${this.t(\"Voting\")}\"\n            >\n              <md-icon slot=\"active-icon\">thumb_up</md-icon>\n              <md-icon slot=\"inactive-icon\">thumb_up</md-icon>\n            </md-navigation-tab>\n            <md-navigation-tab\n              .label=\"${this.t(\"Results\")}\"\n              ?hidden=\"${this.earl?.configuration!.hide_results}\"\n            >\n              <md-icon slot=\"active-icon\">grading</md-icon>\n              <md-icon slot=\"inactive-icon\">grading</md-icon>\n            </md-navigation-tab>\n            <md-navigation-tab\n              .label=\"${this.t(\"Analysis\")}\"\n              ?hidden=\"${this.earl?.configuration!.hide_results}\"\n            >\n              <md-icon slot=\"active-icon\">insights</md-icon>\n              <md-icon slot=\"inactive-icon\">insights</md-icon>\n            </md-navigation-tab>\n          </md-navigation-bar>\n        </div>\n      `;\n    }\n  }\n\n  override render() {\n    return html`<div class=\"layout vertical\">\n      ${this.renderNavigationBar()}\n      <div class=\"rightPanel\">\n        <main>\n          <div class=\"mainPageContainer\">${this._renderPage()}</div>\n        </main>\n      </div>\n    </div>\n\n    </div>\n      ${\n        this.lastSnackbarText\n          ? html`\n              <yp-snackbar\n                id=\"snackbar\"\n                @closed=\"${this.snackbarclosed}\"\n                style=\"text-align: center;\"\n                .labelText=\"${this.lastSnackbarText}\"\n              ></yp-snackbar>\n            `\n          : nothing\n      }\n\n      ${\n        window.aoiAppGlobals.externalGoalTriggerUrl\n          ? html`\n              <yp-snackbar\n                id=\"goalTriggerSnackbar\"\n                style=\"text-align: center;\"\n                timeoutMs=\"-1\"\n                .labelText=\"${this.t(\"Target votes reached!\")}\"\n              >\n                <md-icon-button slot=\"dismiss\">\n                  <md-icon>close</md-icon>\n                </md-icon-button>\n                <md-text-button\n                  slot=\"action\"\n                  @click=\"${this.triggerExternalGoalUrl}\"\n                  >${this.t(\"Finish and return\")}</md-text-button\n                >\n              </yp-snackbar>\n            `\n          : nothing\n      }\n      `;\n  }\n}\n"]}