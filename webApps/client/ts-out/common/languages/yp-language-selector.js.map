{"version":3,"file":"yp-language-selector.js","sourceRoot":"","sources":["../../../src/common/languages/yp-language-selector.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing, PropertyValueMap } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport \"@material/web/select/outlined-select.js\";\nimport \"@material/web/select/select-option.js\";\nimport \"@material/web/textfield/filled-text-field.js\";\nimport \"@material/web/menu/menu.js\";\nimport \"@material/web/menu/menu-item.js\";\n\nimport { YpBaseElement } from \"../../common/yp-base-element.js\";\nimport { YpLanguages } from \"../../common/languages/ypLanguages.js\";\nimport { MdFilledTextField } from \"@material/web/textfield/filled-text-field.js\";\nimport { MdMenu } from \"@material/web/menu/menu.js\";\nimport { MdMenuItem } from \"@material/web/menu/menu-item.js\";\n\n@customElement(\"yp-language-selector\")\nexport class YpLanguageSelector extends YpBaseElement {\n  @property({ type: Boolean })\n  refreshLanguages = false;\n\n  @property({ type: Boolean })\n  noUserEvents = false;\n\n  @property({ type: String })\n  selectedLocale: string | undefined;\n\n  @property({ type: String })\n  value = \"\";\n\n  @property({ type: String })\n  autocompleteText = \"\";\n\n  @property({ type: String })\n  name = \"\";\n\n  @property({ type: Boolean })\n  autoTranslateOptionDisabled = false;\n\n  @property({ type: Boolean })\n  autoTranslate = false;\n\n  @property({ type: Boolean })\n  dropdownVisible = true;\n\n  @property({ type: Boolean })\n  hasServerAutoTranslation = false;\n\n  @property({ type: Boolean })\n  isOutsideChangeEvent = false;\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"selectedLocale\")) {\n      this._selectedLocaleChanged(\n        this.selectedLocale ? this.selectedLocale : this.language\n      );\n      this.fire(\"yp-selected-locale-changed\", this.selectedLocale);\n    }\n  }\n\n  _refreshLanguage() {\n    this.dropdownVisible = false;\n    this.refreshLanguages = !this.refreshLanguages;\n    setTimeout(() => {\n      this.dropdownVisible = true;\n    });\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        md-outlined-select {\n          max-width: 250px;\n        }\n\n        .translateButton,\n        .stopTranslateButton {\n          padding: 8px;\n          margin-top: 24px;\n          margin-bottom: 16px;\n        }\n\n        .translateText {\n          margin-left: 8px;\n        }\n\n        .stopIcon {\n          margin-left: 8px;\n        }\n      `,\n    ];\n  }\n\n  get foundAutoCompleteLanguages() {\n    return this.languages.filter((item) => {\n      return (\n        item.name.toLowerCase().indexOf(this.autocompleteText.toLowerCase()) >\n        -1\n      );\n    });\n  }\n\n  async openMenu() {\n    (this.$$(\"md-menu\") as MdMenu).open = true;\n    (this.$$(\"md-filled-text-field\") as MdFilledTextField).value =\"\";\n  }\n\n  _autoCompleteChange(event: CustomEvent) {\n    this.autocompleteText = (event.target as MdFilledTextField).value;\n  }\n\n  _selectLanguage(event: CustomEvent) {\n    this.selectedLocale = (event.currentTarget as MdMenuItem).getAttribute(\n      \"data-language\"\n    )!;\n\n    localStorage.setItem(\"yp-user-locale\", this.selectedLocale);\n    console.info(\"Saving locale\");\n  }\n\n  renderMenuItem(index: number, item: YpLanguageMenuItem) {\n    return html`\n      <md-menu-item\n        type=\"option\"\n        id=\"${index}\"\n        data-language=\"${item.language}\"\n        @click=\"${this._selectLanguage}\"\n      >\n        <div slot=\"headline\">${item.name}</div>\n      </md-menu-item>\n    `;\n  }\n\n  renderAutoComplete() {\n    let idIndex = 0;\n    return html`\n      <span style=\"position: relative\">\n        <md-filled-text-field\n          id=\"textfield\"\n          type=\"combobox\"\n          aria-controls=\"menu\"\n          aria-autocomplete=\"list\"\n          aria-expanded=\"true\"\n          aria-activedescendant=\"1\"\n          .label=\"${this.t(\"selectLanguage\")}\"\n          @click=\"${this.openMenu}\"\n          @keyup=${this._autoCompleteChange}\n          .value=\"${YpLanguages.getEnglishName(this.language) || \"\"}\"\n        >\n        </md-filled-text-field>\n        <md-menu\n          id=\"menu\"\n          anchor=\"textfield\"\n          role=\"listbox\"\n          aria-label=\"states\"\n        >\n          ${this.foundAutoCompleteLanguages.map((item) => {\n            return this.renderMenuItem(idIndex++, item);\n          })}\n          <md-divider\n            ?hidden=\"${this.foundAutoCompleteLanguages.length == 0}\"\n            role=\"separator\"\n            tabindex=\"-1\"\n          ></md-divider>\n          ${this.languages.map((item) => {\n            return this.renderMenuItem(idIndex++, item);\n          })}\n        </md-menu>\n      </span>\n    `;\n  }\n\n  override render() {\n    return html`\n      <div class=\"layout vertical\">\n        ${this.dropdownVisible ? this.renderAutoComplete() : nothing}\n        <div ?hidden=\"${!this.canUseAutoTranslate}\">\n          <md-filled-button\n            ?hidden=\"${this.autoTranslate}\"\n            class=\"layout horizontal translateButton\"\n            @click=\"${this.startTranslation}\"\n            >${this.t(\"autoTranslate\")}<md-icon slot=\"icon\">translate</md-icon>\n          </md-filled-button>\n          <md-filled-button\n            ?hidden=\"${!this.autoTranslate}\"\n            class=\"layout horizontal stopTranslateButton\"\n            @click=\"${this._stopTranslation}\"\n          >\n            ${this.t(\"stopAutoTranslate\")}<md-icon slot=\"icon\" class=\"stopIcon\"\n              >do_not_disturb</md-icon\n            >\n          </md-filled-button>\n        </div>\n      </div>\n    `;\n  }\n\n  override async connectedCallback() {\n    super.connectedCallback();\n    this.setupBootListener();\n    if (!this.noUserEvents) {\n      const response =\n        (await window.serverApi.hasAutoTranslation()) as YpHasAutoTranslationResponse;\n      if (response && response.hasAutoTranslation === true) {\n        this.hasServerAutoTranslation = true;\n      } else {\n        this.hasServerAutoTranslation = false;\n      }\n    }\n\n    this.addGlobalListener(\n      \"yp-refresh-language-selection\",\n      this._refreshLanguage.bind(this)\n    );\n\n    this.addGlobalListener(\n      \"yp-auto-translate\",\n      this._autoTranslateEvent.bind(this)\n    );\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeGlobalListener(\n      \"yp-auto-translate\",\n      this._autoTranslateEvent.bind(this)\n    );\n    this.removeGlobalListener(\n      \"yp-refresh-language-selection\",\n      this._refreshLanguage.bind(this)\n    );\n  }\n\n  protected override firstUpdated(\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>\n  ): void {\n    super.firstUpdated(_changedProperties);\n    if (_changedProperties.has(\"language\") && this.language) {\n      const textfield = this.$$(\"md-filled-text-field\") as MdFilledTextField;\n      textfield.value = YpLanguages.getEnglishName(this.language) || \"\";\n    }\n  }\n\n  _autoTranslateEvent(event: CustomEvent) {\n    this.autoTranslate = event.detail;\n  }\n\n  _stopTranslation() {\n    window.appGlobals.stopTranslation();\n    this.autoTranslate = false;\n    this.fire(\"yp-language-name\", YpLanguages.getEnglishName(this.language));\n    window.appDialogs.getDialogAsync(\"masterToast\", (toast: any) => {\n      toast.text = this.t(\"autoTranslationStopped\");\n      toast.open = true;\n    });\n    window.appGlobals.activity(\"click\", \"stopTranslation\", this.language);\n    sessionStorage.setItem(\"dontPromptForAutoTranslation\", \"true\");\n  }\n\n  startTranslation() {\n    if (this.canUseAutoTranslate) {\n      window.appGlobals.startTranslation();\n      this.autoTranslate = true;\n      this.fire(\"yp-language-name\", YpLanguages.getEnglishName(this.language));\n      window.appDialogs.getDialogAsync(\"masterToast\", (toast: any) => {\n        toast.text = this.t(\"autoTranslationStarted\");\n        toast.open = true;\n      });\n    }\n    window.appGlobals.activity(\"click\", \"startTranslation\", this.language);\n  }\n\n  get canUseAutoTranslate() {\n    if (\n      !this.autoTranslateOptionDisabled &&\n      this.language &&\n      this.hasServerAutoTranslation &&\n      !this.noUserEvents\n    ) {\n      return this.hasLlm===true || !(YpLanguages.isoCodesNotInGoogleTranslate.indexOf(this.language) > -1);\n    } else {\n      return false;\n    }\n  }\n\n  get languages(): YpLanguageMenuItem[] {\n    if (YpLanguages.allLanguages) {\n      let arr = [];\n      const highlighted = [];\n      let highlightedLocales = [\"en\", \"is\", \"fr\", \"de\", \"es\", \"ar\"];\n      if (window.appGlobals.highlightedLanguages) {\n        highlightedLocales = window.appGlobals.highlightedLanguages.split(\",\");\n      }\n\n      highlightedLocales = highlightedLocales.map((item) =>\n        item.replace(\"-\", \"_\").toLowerCase()\n      );\n\n      for (let l = 0; l < YpLanguages.allLanguages.length; l++) {\n        const language = YpLanguages.allLanguages[l];\n\n        if (highlightedLocales.indexOf(language.code) > -1) {\n          highlighted.push({\n            language: language.code,\n            name: `${language.nativeName} (${language.englishName})`,\n          });\n        } else {\n          arr.push({\n            language: language.code,\n            name: `${language.nativeName} (${language.englishName})`,\n          });\n        }\n      }\n\n      arr = arr.sort(function (a, b) {\n        if (a.name < b.name) {\n          return -1;\n        }\n        if (a.name > b.name) {\n          return 1;\n        }\n        return 0;\n      });\n      return highlighted.concat(arr);\n    } else {\n      return [];\n    }\n  }\n\n  _selectedLocaleChanged(oldLocale: string) {\n    if (this.selectedLocale) {\n      this.value = this.selectedLocale;\n      if (oldLocale) {\n        this.fire(\"changed\", this.value);\n      }\n      if (!this.noUserEvents && oldLocale) {\n        if (!this.canUseAutoTranslate && this.autoTranslate) {\n          this._stopTranslation();\n        }\n        this.fire(\n          \"yp-language-name\",\n          YpLanguages.getEnglishName(this.language)\n        );\n        window.appGlobals.changeLocaleIfNeeded(this.selectedLocale, true);\n\n        if (window.appUser && window.appUser.user) {\n          window.appUser.setLocale(this.selectedLocale);\n        }\n        window.appGlobals.activity(\n          \"click\",\n          \"changeLanguage\",\n          this.selectedLocale\n        );\n      }\n    }\n    this.isOutsideChangeEvent = false;\n  }\n}\n"]}