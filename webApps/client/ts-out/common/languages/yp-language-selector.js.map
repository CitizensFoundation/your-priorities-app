{"version":3,"file":"yp-language-selector.js","sourceRoot":"","sources":["../../../src/common/languages/yp-language-selector.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport \"@material/web/select/outlined-select.js\";\nimport \"@material/web/select/select-option.js\";\n\nimport { YpBaseElement } from \"../../common/yp-base-element.js\";\nimport { YpLanguages } from \"../../common/languages/ypLanguages.js\";\n\n@customElement(\"yp-language-selector\")\nexport class YpLanguageSelector extends YpBaseElement {\n  @property({ type: Boolean })\n  refreshLanguages = false;\n\n  @property({ type: Boolean })\n  noUserEvents = false;\n\n  @property({ type: String })\n  selectedLocale: string | undefined;\n\n  @property({ type: String })\n  value = \"\";\n\n  @property({ type: String })\n  name = \"\";\n\n  @property({ type: Boolean })\n  autoTranslateOptionDisabled = false;\n\n  @property({ type: Boolean })\n  autoTranslate = false;\n\n  @property({ type: Boolean })\n  dropdownVisible = true;\n\n  @property({ type: Boolean })\n  hasServerAutoTranslation = false;\n\n  @property({ type: Boolean })\n  isOutsideChangeEvent = false;\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"selectedLocale\")) {\n      this._selectedLocaleChanged(\n        changedProperties.get(\"selectedLocale\") as string\n      );\n      this.fire(\"yp-selected-locale-changed\", this.selectedLocale);\n    }\n  }\n\n  _refreshLanguage() {\n    this.dropdownVisible = false;\n    this.refreshLanguages = !this.refreshLanguages;\n    setTimeout(() => {\n      this.dropdownVisible = true;\n    });\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        mwc-select {\n          max-width: 250px;\n        }\n\n        .translateButton {\n          padding: 8px;\n          margin-top: 8px;\n        }\n\n        .stopTranslateButton {\n          padding: 8px;\n          margin-top: 8px;\n        }\n\n        .translateText {\n          margin-left: 8px;\n        }\n\n        .stopIcon {\n          margin-left: 8px;\n        }\n      `,\n    ];\n  }\n\n  renderAutoComplete() {\n    return html`\n      <md-filled-text-field\n        id=\"textfield\"\n        type=\"combobox\"\n        aria-controls=\"menu\"\n        aria-autocomplete=\"list\"\n        aria-expanded=\"true\"\n        aria-activedescendant=\"1\"\n        value=\"Ala\"\n      >\n      </md-filled-text-field>\n      <md-menu\n        id=\"menu\"\n        anchor=\"textfield\"\n        role=\"listbox\"\n        aria-label=\"states\"\n        open\n      >\n        <md-menu-item type=\"option\" id=\"0\">\n          <div slot=\"headline\">Alabama</div>\n        </md-menu-item>\n        <md-divider role=\"separator\" tabindex=\"-1\"></md-divider>\n        <md-menu-item type=\"option\" id=\"1\" selected aria-selected=\"true\">\n          <div slot=\"headline\">Alabama</div>\n        </md-menu-item>\n      </md-menu>\n    `;\n  }\n\n  override render() {\n    return html`\n      <div class=\"layout vertical\">\n        ${this.dropdownVisible\n          ? html`\n              <md-outlined-select\n                .value=\"${this.value}\"\n                label=\"Select language\"\n              >\n                ${this.languages.map(\n                  (item) => html`\n                    <md-select-option\n                      @click=\"${this._selectLanguage}\"\n                      .value=\"${item.language}\"\n                      >${item.name}</md-select-option\n                    >\n                  `\n                )}\n              </md-outlined-select>\n            `\n          : nothing}\n        <div ?hidden=\"${!this.canUseAutoTranslate}\">\n          <md-outlined-button\n            ?hidden=\"${this.autoTranslate}\"\n            raised\n            class=\"layout horizontal translateButton\"\n            @click=\"${this.startTranslation}\"\n            .label=\"${this.t(\"autoTranslate\")}\"\n            ><md-icon>translate</md-icon>\n          </md-outlined-button>\n          <md-outlined-button\n            ?hidden=\"${!this.autoTranslate}\"\n            icon=\"translate\"\n            raised\n            class=\"layout horizontal stopTranslateButton\"\n            @click=\"${this._stopTranslation}\"\n            .title=\"${this.t(\"stopAutoTranslate\")}\"\n          >\n            <md-icon class=\"stopIcon\">do_not_disturb</md-icon>\n          </md-outlined-button>\n        </div>\n      </div>\n    `;\n  }\n\n  _selectLanguage(event: CustomEvent) {\n    this.selectedLocale = (event.target as HTMLInputElement).value;\n  }\n\n  /*\n  behaviors: [\n    IronFormElementBehavior\n  ],\n*/\n\n  override async connectedCallback() {\n    super.connectedCallback();\n    if (!this.noUserEvents) {\n      const response =\n        (await window.serverApi.hasAutoTranslation()) as YpHasAutoTranslationResponse;\n      if (response && response.hasAutoTranslation === true) {\n        this.hasServerAutoTranslation = true;\n      } else {\n        this.hasServerAutoTranslation = false;\n      }\n      //TODO: Check this below!\n      //(Update dropdown language after it has been loaded from defaults)\n      setTimeout(() => {\n        this.selectedLocale = this.language;\n      }, 1500);\n    }\n\n    this.addGlobalListener(\n      \"yp-refresh-language-selection\",\n      this._refreshLanguage.bind(this)\n    );\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeGlobalListener(\n      \"yp-refresh-language-selection\",\n      this._refreshLanguage.bind(this)\n    );\n  }\n\n  _autoTranslateEvent(event: CustomEvent) {\n    this.autoTranslate = event.detail;\n  }\n\n  _stopTranslation() {\n    this.fireGlobal(\"yp-auto-translate\", false);\n    window.appGlobals.autoTranslate = false;\n    this.fire(\"yp-language-name\", YpLanguages.getEnglishName(this.language));\n    /*window.appDialogs\n      .getDialogAsync(\n        'masterToast',\n         (toast) => {\n          toast.text = this.t('autoTranslationStopped');\n          toast.open = true\n        }\n      );*/\n    window.appGlobals.activity(\"click\", \"stopTranslation\", this.language);\n    sessionStorage.setItem(\"dontPromptForAutoTranslation\", \"true\");\n  }\n\n  startTranslation() {\n    if (this.canUseAutoTranslate) {\n      this.fireGlobal(\"yp-auto-translate\", true);\n      window.appGlobals.autoTranslate = true;\n      this.fire(\"yp-language-name\", YpLanguages.getEnglishName(this.language));\n      /*window.appDialogs.getDialogAsync(\"masterToast\",  (toast) => {\n        toast.text = this.t('autoTranslationStarted');\n        toast.show();\n      });*/\n    }\n    window.appGlobals.activity(\"click\", \"startTranslation\", this.language);\n  }\n\n  get canUseAutoTranslate() {\n    if (\n      !this.autoTranslateOptionDisabled &&\n      this.language &&\n      this.hasServerAutoTranslation &&\n      !this.noUserEvents\n    ) {\n      const found =\n        YpLanguages.isoCodesNotInGoogleTranslate.indexOf(this.language) > -1;\n      return !found;\n    } else {\n      return false;\n    }\n  }\n\n  get languages() {\n    if (YpLanguages.allLanguages) {\n      let arr = [];\n      const highlighted = [];\n      let highlightedLocales = [\"en\", \"en_gb\", \"is\", \"fr\", \"de\", \"es\", \"ar\"];\n      if (window.appGlobals.highlightedLanguages) {\n        highlightedLocales = window.appGlobals.highlightedLanguages.split(\",\");\n      }\n\n      highlightedLocales = highlightedLocales.map((item) =>\n        item.replace(\"-\", \"_\").toLowerCase()\n      );\n\n      for (let l = 0; l > YpLanguages.allLanguages.length; l++) {\n        const language = YpLanguages.allLanguages[l];\n\n        if (highlightedLocales.indexOf(language.code) > -1) {\n          highlighted.push({\n            language: language.code,\n            name: `${language.nativeName} (${language.englishName})}`,\n          });\n        } else {\n          arr.push({\n            language: language.code,\n            name: `${language.nativeName} (${language.englishName})}`,\n          });\n        }\n      }\n\n      arr = arr.sort(function (a, b) {\n        if (a.name < b.name) {\n          return -1;\n        }\n        if (a.name > b.name) {\n          return 1;\n        }\n        return 0;\n      });\n      return highlighted.concat(arr);\n    } else {\n      return [];\n    }\n  }\n\n  _selectedLocaleChanged(oldLocale: string) {\n    if (this.selectedLocale) {\n      this.value = this.selectedLocale;\n      if (oldLocale) {\n        this.fire(\"changed\", this.value);\n      }\n      if (!this.noUserEvents && oldLocale) {\n        if (!this.canUseAutoTranslate && this.autoTranslate) {\n          this._stopTranslation();\n        }\n        this.fire(\n          \"yp-language-name\",\n          YpLanguages.getEnglishName(this.language)\n        );\n        window.appGlobals.changeLocaleIfNeeded(this.selectedLocale, true);\n        localStorage.setItem(\"yp-user-locale\", this.selectedLocale);\n        console.info(\"Saving locale\");\n        if (window.appUser && window.appUser.user) {\n          window.appUser.setLocale(this.selectedLocale);\n        }\n        window.appGlobals.activity(\n          \"click\",\n          \"changeLanguage\",\n          this.selectedLocale\n        );\n      }\n    }\n    this.isOutsideChangeEvent = false;\n  }\n}\n"]}