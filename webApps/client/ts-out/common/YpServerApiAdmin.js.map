{"version":3,"file":"YpServerApiAdmin.js","sourceRoot":"","sources":["../../src/common/YpServerApiAdmin.ts"],"names":[],"mappings":"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","sourcesContent":["import { YpServerApiBase } from './YpServerApiBase.js';\n\nexport class YpServerApiAdmin extends YpServerApiBase {\n  public adminMethod(\n    url: string,\n    method: string,\n    body: Record<string, unknown> | undefined = undefined\n  ) {\n    if ([\"GET\",\"HEAD\"].indexOf(method) > -1) {\n      return this.fetchWrapper(url);\n    } else {\n      return this.fetchWrapper(\n        url,\n        {\n          method: method,\n          body: JSON.stringify(body || {}),\n        },\n        false\n      );\n    }\n  }\n\n  public removeUserFromOrganization(\n    organizationId: number,\n    userId: number\n  ) {\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/organizations/${organizationId}/${userId}/remove_user`,\n      {\n        method: 'DELETE',\n        body: JSON.stringify({}),\n      },\n      false\n    );\n  }\n\n  public removeAdmin(\n    collection: string,\n    collectionId: number,\n    userId: number\n  ) {\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/${collection}/${collectionId}/${userId}/remove_admin`,\n      {\n        method: 'DELETE',\n        body: JSON.stringify({}),\n      },\n      false\n    );\n  }\n\n  public addAdmin(\n    collection: string,\n    collectionId: number,\n    adminEmail: string\n  ) {\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/${collection}/${collectionId}/${adminEmail}/add_admin`,\n      {\n        method: 'POST',\n        body: JSON.stringify({}),\n      },\n      false\n    );\n  }\n\n  public inviteUser(\n    collection: string,\n    collectionId: number,\n    inviteEmail: string,\n    inviteType: string\n  ) {\n    let query=\"\";\n    if (inviteType==\"addUserDirectly\") {\n      if (collection===\"communities\") {\n        query = `?addToCommunityDirectly=1`\n      } else {\n        query = `?addToGroupDirectly=1`\n      }\n    }\n\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/${collection}/${collectionId}/${inviteEmail}/invite_user${query}`,\n      {\n        method: 'POST',\n        body: JSON.stringify({}),\n      },\n      true,\n      undefined,\n      true\n    );\n  }\n\n  // add sibling\n  // add followup promt for additional causes\n  //\n\n  public addUserToOrganization(\n    organizationId: number,\n    userId: number\n  ) {\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/organizations/${organizationId}/${userId}/add_user`,\n      {\n        method: 'POST',\n        body: JSON.stringify({}),\n      },\n      false\n    );\n  }\n\n  public addCollectionItem(\n    collectionId: number,\n    collectionItemType: string,\n    body: Record<string, unknown>\n  ) {\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/${YpServerApiAdmin.transformCollectionTypeToApi(\n          collectionItemType\n        )}/${collectionId}`,\n      {\n        method: 'POST',\n        body: JSON.stringify(body),\n      },\n      false\n    );\n  }\n\n  public updateTranslation(\n    collectionType: string,\n    collectionId: number,\n    body: YpTranslationTextData\n  ) {\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/${YpServerApiAdmin.transformCollectionTypeToApi(\n          collectionType\n        )}/${collectionId}/update_translation`,\n      {\n        method: 'PUT',\n        body: JSON.stringify(body),\n      },\n      false\n    );\n  }\n\n  public getTextForTranslations(\n    collectionType: string,\n    collectionId: number,\n    targetLocale: string\n  ) {\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/${YpServerApiAdmin.transformCollectionTypeToApi(\n          collectionType\n        )}/${collectionId}/get_translation_texts?targetLocale=${targetLocale}`\n    );\n  }\n\n  public addVideoToCollection(collectionId: number, body: Record<string, unknown>, type: string) {\n    let fullType;\n\n    if (type==\"group\") {\n      fullType = \"completeAndAddToGroup\";\n    } else if(type==\"community\") {\n      fullType = \"completeAndAddToCommunity\";\n    } else {\n      fullType = \"completeAndAddToDomain\";\n    }\n\n    return this.fetchWrapper(\n      this.baseUrlPath + `/videos/${collectionId}/${fullType}`,\n      {\n        method: 'PUT',\n        body: JSON.stringify(body),\n      },\n      false\n    );\n  }\n\n  public getCommunityFolders(domainId: number) {\n    return this.fetchWrapper(\n      this.baseUrlPath + `/domains/${domainId}/availableCommunityFolders`\n    );\n  }\n\n  public getAnalyticsData(communityId: number, type: string, params: string) {\n    return this.fetchWrapper(\n      this.baseUrlPath + `/communities/${communityId}/${type}/getPlausibleSeries?${params}`\n    );\n  }\n\n  public getSsnListCount(communityId: number, ssnLoginListDataId: number) {\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/communities/${communityId}/${ssnLoginListDataId}/ssn_login_list_count`\n    );\n  }\n\n  public deleteSsnLoginList(communityId: number, ssnLoginListDataId: number) {\n    return this.fetchWrapper(\n      this.baseUrlPath +\n        `/communities/${communityId}/${ssnLoginListDataId}/ssn_login_list_count`,\n      {\n        method: 'DELETE',\n        body: JSON.stringify({}),\n      },\n      false\n    );\n  }\n}\n"]}