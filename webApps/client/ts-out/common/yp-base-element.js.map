{"version":3,"file":"yp-base-element.js","sourceRoot":"","sources":["../../src/common/yp-base-element.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, css } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { Layouts } from '../flexbox-literals/classes.js';\n\nexport class YpBaseElement extends LitElement {\n  @property({ type: String })\n  language = 'en';\n\n  @property({ type: Boolean })\n  wide = false;\n\n  @property({ type: Boolean })\n  rtl = false;\n\n  @property({ type: Boolean })\n  largeFont = false;\n\n  @property({ type: String })\n  themeColor = '#002255';\n\n  @property({ type: Boolean })\n  themeDarkMode: boolean | undefined;\n\n  static override get styles() {\n    return [\n      Layouts,\n      css`\n        [hidden] {\n          display: none !important;\n        }\n      `,\n    ] as any;\n  }\n\n  get isAppleDevice() {\n    return /Macintosh|iPhone|iPad/.test(navigator.userAgent);\n  }\n\n  installMediaQueryWatcher = (mediaQuery: string, layoutChangedCallback: (mediaQueryMatches: boolean) => void) => {\n    let mql = window.matchMedia(mediaQuery);\n    mql.addListener((e) => layoutChangedCallback(e.matches));\n    layoutChangedCallback(mql.matches);\n  };\n\n  override connectedCallback() {\n    super.connectedCallback();\n\n    this.addGlobalListener(\n      'yp-language-loaded',\n      this._languageEvent.bind(this)\n    );\n\n    //TODO: Do the large font thing with css custom properties\n    this.addGlobalListener('yp-large-font', this._largeFont.bind(this));\n\n    this.addGlobalListener('yp-theme-color', this._changeThemeColor.bind(this));\n\n    this.addGlobalListener(\n      'yp-theme-dark-mode',\n      this._changeThemeDarkMode.bind(this)\n    );\n\n    if (\n      window.appGlobals &&\n      window.appGlobals.i18nTranslation &&\n      window.appGlobals.locale\n    ) {\n      this.language = window.appGlobals.locale;\n      this._setupRtl();\n    } else {\n      this.language = 'en';\n    }\n\n    this.installMediaQueryWatcher(`(min-width: 900px)`, matches => {\n      this.wide = matches;\n    });\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeGlobalListener(\n      'yp-language-loaded',\n      this._languageEvent.bind(this)\n    );\n\n    this.removeGlobalListener('yp-large-font', this._largeFont.bind(this));\n\n    this.removeGlobalListener(\n      'yp-theme-color',\n      this._changeThemeColor.bind(this)\n    );\n\n    this.removeGlobalListener(\n      'yp-theme-dark-mode',\n      this._changeThemeDarkMode.bind(this)\n    );\n  }\n\n  _changeThemeColor(event: CustomEvent) {\n    this.themeColor = event.detail;\n  }\n\n  _changeThemeDarkMode(event: CustomEvent) {\n    this.themeDarkMode = event.detail;\n  }\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>): void {\n    super.updated(changedProperties);\n\n    if (changedProperties.has('language')) {\n      this.languageChanged();\n    }\n  }\n\n  static get rtlLanguages() {\n    return ['fa', 'ar', 'ar_EG'];\n  }\n\n  languageChanged() {\n    // Do nothing, override if needed\n  }\n\n  get isSafari() {\n    const userAgent = navigator.userAgent;\n\n    // Safari detection, ensuring not Chrome or Edge\n    return (\n      userAgent.includes(\"Safari\") &&\n      userAgent.includes(\"Version\") &&\n      !userAgent.includes(\"Chrome\") &&\n      !userAgent.includes(\"Edg\")\n    );\n  }\n\n  _setupRtl() {\n    if (YpBaseElement.rtlLanguages.indexOf(this.language) > -1) {\n      this.rtl = true;\n    } else {\n      this.rtl = false;\n    }\n  }\n\n  scrimDisableAction(event: CustomEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  _largeFont(event: CustomEvent) {\n    this.largeFont = event.detail;\n  }\n\n  _languageEvent(event: CustomEvent) {\n    this.language = event.detail.language;\n    window.appGlobals.locale = event.detail.language;\n    if (this.rtl !== undefined) {\n      this._setupRtl();\n    }\n    //this.requestUpdate();\n  }\n\n  fire(\n    eventName: string,\n    data: object | string | boolean | number | null = {},\n    target: LitElement | Document = this\n  ) {\n    const event = new CustomEvent(eventName, {\n      detail: data,\n      bubbles: true,\n      composed: true,\n    });\n    target.dispatchEvent(event);\n  }\n\n  fireGlobal(\n    eventName: string,\n    data: object | string | boolean | number | null = {}\n  ) {\n    this.fire(eventName, data, document);\n  }\n\n  addListener(\n    name: string,\n    callback: Function,\n    target: LitElement | Document = this\n  ) {\n    target.addEventListener(name, callback as EventListener, false);\n  }\n\n  addGlobalListener(name: string, callback: Function) {\n    this.addListener(name, callback, document);\n  }\n\n  removeListener(\n    name: string,\n    callback: Function,\n    target: LitElement | Document = this\n  ) {\n    target.removeEventListener(name, callback as EventListener);\n  }\n\n  removeGlobalListener(name: string, callback: Function) {\n    this.removeListener(name, callback, document);\n  }\n\n  t(...args: Array<string>): string {\n    const key = args[0];\n    if (window.appGlobals && window.appGlobals.i18nTranslation) {\n      let translation = window.appGlobals.i18nTranslation.t(key);\n      if (!translation) translation = '';\n      return translation;\n    } else {\n      return key;\n    }\n  }\n\n  $$(id: string): HTMLElement | null {\n    return this.shadowRoot ? this.shadowRoot.querySelector(id) : null;\n  }\n}\n"]}