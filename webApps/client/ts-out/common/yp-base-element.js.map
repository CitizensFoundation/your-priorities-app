{"version":3,"file":"yp-base-element.js","sourceRoot":"","sources":["../../src/common/yp-base-element.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, css, html } from \"lit\";\nimport { property } from \"lit/decorators.js\";\nimport { Layouts } from \"../flexbox-literals/classes.js\";\nimport { styles as typescaleStyles } from \"@material/web/typography/md-typescale-styles.js\";\n\nimport \"@material/web/iconbutton/outlined-icon-button.js\";\n\nexport class YpBaseElement extends LitElement {\n  @property({ type: String })\n  language = \"en\";\n\n  @property({ type: Boolean })\n  wide = false;\n\n  @property({ type: Boolean })\n  rtl = false;\n\n  @property({ type: Boolean })\n  hasLlm = false;\n\n  @property({ type: Boolean })\n  largeFont = false;\n\n  @property({ type: String })\n  themeColor = \"#002255\";\n\n  @property({ type: Boolean })\n  themeDarkMode: boolean | undefined;\n\n  @property({ type: Boolean })\n  themeHighContrast: boolean | undefined;\n\n  static darkModeLocalStorageKey = \"md3-yp-dark-mode\";\n  static highContrastLocalStorageKey = \"md3-yp-high-contrast-mode\";\n\n  static override get styles() {\n    return [\n      Layouts,\n      css`\n        [hidden] {\n          display: none !important;\n        }\n\n        .lightDarkContainer {\n          padding-left: 8px;\n          padding-right: 8px;\n          font-size: 14px;\n          margin-bottom: 16px;\n        }\n\n        .themeToggleText {\n          margin-top: 8px;\n        }\n      `,\n      typescaleStyles,\n    ] as any;\n  }\n\n  get isAppleDevice() {\n    return /Macintosh|iPhone|iPad/.test(navigator.userAgent);\n  }\n\n  installMediaQueryWatcher = (\n    mediaQuery: string,\n    layoutChangedCallback: (mediaQueryMatches: boolean) => void\n  ) => {\n    let mql = window.matchMedia(mediaQuery);\n    mql.addListener((e) => layoutChangedCallback(e.matches));\n    layoutChangedCallback(mql.matches);\n  };\n\n  override connectedCallback() {\n    super.connectedCallback();\n\n    this.hasLlm = window.appGlobals.hasLlm;\n\n    this.addGlobalListener(\n      \"yp-language-loaded\",\n      this._languageEvent.bind(this)\n    );\n\n    //TODO: Do the large font thing with css custom properties\n    this.addGlobalListener(\"yp-large-font\", this._largeFont.bind(this));\n\n    this.addGlobalListener(\"yp-theme-color\", this._changeThemeColor.bind(this));\n\n    this.addGlobalListener(\n      \"yp-theme-dark-mode\",\n      this._changeThemeDarkMode.bind(this)\n    );\n\n    if (\n      window.appGlobals &&\n      window.appGlobals.i18nTranslation &&\n      window.appGlobals.locale\n    ) {\n      this.language = window.appGlobals.locale;\n      this._setupRtl();\n    } else {\n      this.language = \"\";\n    }\n\n    this.installMediaQueryWatcher(`(min-width: 900px)`, (matches) => {\n      this.wide = matches;\n    });\n\n    this.setupThemeSettings();\n  }\n\n  hasBooted() {\n    this.hasLlm = window.appGlobals.hasLlm;\n  }\n\n  setupBootListener() {\n    this.addGlobalListener(\"yp-boot-from-server\", this.hasBooted.bind(this));\n  }\n\n  //TODO: See if we can do this without this arbitrary delay\n  async setupThemeSettings() {\n    await new Promise((resolve) => setTimeout(resolve, 50));\n    this.themeDarkMode = window.appGlobals.theme.themeDarkMode;\n    this.themeHighContrast = window.appGlobals.theme.themeHighContrast;\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeGlobalListener(\n      \"yp-language-loaded\",\n      this._languageEvent.bind(this)\n    );\n\n    this.removeGlobalListener(\"yp-large-font\", this._largeFont.bind(this));\n\n    this.removeGlobalListener(\n      \"yp-theme-color\",\n      this._changeThemeColor.bind(this)\n    );\n\n    this.removeGlobalListener(\n      \"yp-theme-dark-mode\",\n      this._changeThemeDarkMode.bind(this)\n    );\n\n    this.removeGlobalListener(\"yp-boot-from-server\", this.hasBooted.bind(this));\n  }\n\n  _changeThemeColor(event: CustomEvent) {\n    this.themeColor = event.detail;\n  }\n\n  _changeThemeDarkMode(event: CustomEvent) {\n    this.themeDarkMode = event.detail;\n  }\n\n  override updated(\n    changedProperties: Map<string | number | symbol, unknown>\n  ): void {\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"language\")) {\n      this.languageChanged();\n    }\n  }\n\n  static get rtlLanguages() {\n    return [\"fa\", \"ar\", \"he\", \"ur\", \"ps\", \"ku\", \"sd\", \"dv\", \"ug\", \"yi\"];\n  }\n\n  languageChanged() {\n    // Do nothing, override if needed\n  }\n\n  get isSafari() {\n    const userAgent = navigator.userAgent;\n\n    // Safari detection, ensuring not Chrome or Edge\n    return (\n      userAgent.includes(\"Safari\") &&\n      userAgent.includes(\"Version\") &&\n      !userAgent.includes(\"Chrome\") &&\n      !userAgent.includes(\"Edg\")\n    );\n  }\n\n  _setupRtl() {\n    const twoFirstCharsOfLanguage = this.language.substring(0, 2).toLowerCase();\n    if (YpBaseElement.rtlLanguages.indexOf(twoFirstCharsOfLanguage) > -1) {\n      this.rtl = true;\n    } else {\n      this.rtl = false;\n    }\n  }\n\n  scrimDisableAction(event: CustomEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  _largeFont(event: CustomEvent) {\n    this.largeFont = event.detail;\n  }\n\n  _languageEvent(event: CustomEvent) {\n    this.language = event.detail.language;\n    window.appGlobals.locale = event.detail.language;\n    if (this.rtl !== undefined) {\n      this._setupRtl();\n    }\n    //this.requestUpdate();\n  }\n\n  fire(\n    eventName: string,\n    data: object | string | boolean | number | null = {},\n    target: LitElement | Document = this\n  ) {\n    const event = new CustomEvent(eventName, {\n      detail: data,\n      bubbles: true,\n      composed: true,\n    });\n    target.dispatchEvent(event);\n  }\n\n  fireGlobal(\n    eventName: string,\n    data: object | string | boolean | number | null = {}\n  ) {\n    this.fire(eventName, data, document);\n  }\n\n  addListener(\n    name: string,\n    callback: Function,\n    target: LitElement | Document = this\n  ) {\n    target.addEventListener(name, callback as EventListener, false);\n  }\n\n  addGlobalListener(name: string, callback: Function) {\n    this.addListener(name, callback, document);\n  }\n\n  removeListener(\n    name: string,\n    callback: Function,\n    target: LitElement | Document = this\n  ) {\n    target.removeEventListener(name, callback as EventListener);\n  }\n\n  removeGlobalListener(name: string, callback: Function) {\n    this.removeListener(name, callback, document);\n  }\n\n  t(...args: Array<string>): string {\n    const key = args[0];\n    if (window.appGlobals && window.appGlobals.i18nTranslation) {\n      let translation = window.appGlobals.i18nTranslation.t(key);\n      if (!translation) translation = \"\";\n      return translation;\n    } else {\n      return key;\n    }\n  }\n\n  $$(id: string): HTMLElement | null {\n    return this.shadowRoot ? this.shadowRoot.querySelector(id) : null;\n  }\n\n  toggleHighContrast() {\n    this.themeHighContrast = !this.themeHighContrast;\n    window.appGlobals.theme.themeHighContrast =\n      !window.appGlobals.theme.themeHighContrast;\n    if (window.appGlobals.theme.themeHighContrast) {\n      window.appGlobals.activity(\"Settings - high contrast mode\");\n      localStorage.setItem(YpBaseElement.highContrastLocalStorageKey, \"true\");\n    } else {\n      window.appGlobals.activity(\"Settings - non high contrast mode\");\n      localStorage.removeItem(YpBaseElement.highContrastLocalStorageKey);\n    }\n    window.appGlobals.theme.themeChanged();\n  }\n\n  toggleDarkMode() {\n    this.themeDarkMode = !this.themeDarkMode;\n    window.appGlobals.theme.themeDarkMode =\n      !window.appGlobals.theme.themeDarkMode;\n    if (window.appGlobals.theme.themeDarkMode) {\n      window.appGlobals.activity(\"Settings - dark mode\");\n      localStorage.setItem(YpBaseElement.darkModeLocalStorageKey, \"true\");\n    } else {\n      window.appGlobals.activity(\"Settings - light mode\");\n      localStorage.removeItem(YpBaseElement.darkModeLocalStorageKey);\n    }\n    window.appGlobals.theme.themeChanged();\n  }\n\n  renderThemeToggle(hideText = false) {\n    return html`<div class=\"layout vertical center-center lightDarkContainer\">\n        ${!this.themeDarkMode\n          ? html`\n              <md-outlined-icon-button\n                class=\"darkModeButton\"\n                @click=\"${this.toggleDarkMode}\"\n                ><md-icon>dark_mode</md-icon></md-outlined-icon-button\n              >\n            `\n          : html`\n              <md-outlined-icon-button\n                class=\"darkModeButton\"\n                @click=\"${this.toggleDarkMode}\"\n                ><md-icon>light_mode</md-icon></md-outlined-icon-button\n              >\n            `}\n        <div class=\"themeToggleText\" ?hidden=\"${hideText}\">${this.t(\"Light/Dark\")}</div>\n      </div>\n\n      <div\n        class=\"layout vertical center-center lightDarkContainer\"\n        ?hidden=\"${this.isAppleDevice}\"\n      >\n        ${!this.themeHighContrast\n          ? html`\n            <md-outlined-icon-button\n              class=\"darkModeButton\"\n              @click=\"${this.toggleHighContrast}\"\n              ><md-icon>contrast</md-icon></md-outlined-icon-button\n            >\n          </div> `\n          : html`\n              <md-outlined-icon-button\n                class=\"darkModeButton\"\n                @click=\"${this.toggleHighContrast}\"\n                ><md-icon>contrast_rtl_off</md-icon></md-outlined-icon-button\n              >\n            `}\n        <div class=\"themeToggleText\" ?hidden=\"${hideText}\">${this.t(\"Contrast\")}</div>\n      </div>`;\n  }\n}\n"]}