{"version":3,"file":"yp-post-edit.js","sourceRoot":"","sources":["../../src/yp-post/yp-post-edit.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing, TemplateResult } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport { DateTime } from \"luxon\";\n\nimport \"@material/web/radio/radio.js\";\n\nimport \"@material/web/tabs/secondary-tab.js\";\nimport \"@material/web/tabs/tabs.js\";\nimport \"@material/web/textfield/outlined-text-field.js\";\n\nimport \"../common/yp-generate-ai-image.js\";\nimport \"../common/yp-image.js\";\n\nimport { YpEditBase } from \"../common/yp-edit-base.js\";\nimport { YpNavHelpers } from \"../common/YpNavHelpers.js\";\nimport { YpMagicText } from \"../yp-magic-text/yp-magic-text.js\";\nimport { YpFileUpload } from \"../yp-file-upload/yp-file-upload.js\";\nimport { YpEditDialog } from \"../yp-edit-dialog/yp-edit-dialog.js\";\nimport { YpEmojiSelector } from \"../common/yp-emoji-selector.js\";\nimport { YpStructuredQuestionEdit } from \"../yp-survey/yp-structured-question-edit.js\";\n\nimport \"../yp-survey/yp-structured-question-edit.js\";\nimport { YpSurveyHelpers } from \"../yp-survey/YpSurveyHelpers.js\";\n\nimport \"../yp-edit-dialog/yp-edit-dialog.js\";\n\nimport \"@material/web/iconbutton/filled-icon-button.js\";\nimport { YpForm } from \"../common/yp-form.js\";\nimport { TextField } from \"@material/web/textfield/internal/text-field.js\";\nimport { Radio } from \"@material/web/radio/internal/radio.js\";\nimport { MdTabs } from \"@material/web/tabs/tabs.js\";\nimport { cache } from \"lit/directives/cache.js\";\nimport { YpGenerateAiImage } from \"../common/yp-generate-ai-image.js\";\n\nexport const EditPostTabs: Record<string, number> = {\n  Description: 0,\n  Point: 1,\n  Location: 2,\n  Media: 3,\n};\n\n@customElement(\"yp-post-edit\")\nexport class YpPostEdit extends YpEditBase {\n  @property({ type: String })\n  action = \"/posts\";\n\n  @property({ type: Boolean })\n  newPost = false;\n\n  @property({ type: Number })\n  selectedCategoryArrayId: number | undefined;\n\n  @property({ type: Array })\n  initialStructuredAnswersJson: Array<YpStructuredAnswer> | undefined;\n\n  @property({ type: Array })\n  structuredQuestions: Array<YpStructuredQuestionData> | undefined;\n\n  @property({ type: Object })\n  post: YpPostData | undefined;\n\n  @property({ type: Object })\n  group: YpGroupData | undefined;\n\n  @property({ type: Boolean })\n  saveSurveyAnswers = true;\n\n  @property({ type: Boolean })\n  skipIfSavedSurveyAnswers = true;\n\n  @property({ type: Boolean })\n  locationHidden = false;\n\n  @property({ type: Object })\n  location: YpLocationData | undefined;\n\n  @property({ type: String })\n  encodedLocation: string | undefined;\n\n  @property({ type: Number })\n  selectedCategoryId: number | undefined;\n\n  @property({ type: Number })\n  uploadedVideoId: number | undefined;\n\n  @property({ type: Number })\n  uploadedAudioId: number | undefined;\n\n  @property({ type: Number })\n  currentVideoId: number | undefined;\n\n  @property({ type: Number })\n  currentAudioId: number | undefined;\n\n  @property({ type: Number })\n  selected = 0;\n\n  @property({ type: Boolean })\n  mapActive = false;\n\n  @property({ type: Boolean })\n  hasOnlyOneTab = false;\n\n  @property({ type: Number })\n  postDescriptionLimit: number | undefined;\n\n  @property({ type: String })\n  sructuredAnswersString: string | undefined;\n\n  @property({ type: String })\n  structuredAnswersJson = \"\";\n\n  @property({ type: String })\n  structuredAnswersString = \"\";\n\n  @property({ type: Array })\n  translatedQuestions: Array<YpStructuredQuestionData> | undefined;\n\n  @property({ type: Boolean })\n  autoTranslate = false;\n\n  @property({ type: String })\n  uploadedDocumentUrl: string | undefined;\n\n  @property({ type: String })\n  uploadedDocumentFilename: string | undefined;\n\n  @property({ type: String })\n  selectedCoverMediaType = \"none\";\n\n  @property({ type: Number })\n  override uploadedHeaderImageId: number | undefined;\n\n  @property({ type: String })\n  customTitleQuestionText: string | undefined;\n\n  emailValidationPattern =\n    \"^[_A-Za-z0-9-\\\\+]+(\\\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\\\.[A-Za-z0-9]+)*(\\\\.[A-Za-z]{2,})$\";\n\n  liveQuestionIds: Array<number> = [];\n\n  uniqueIdsToElementIndexes: Record<string, number> = {};\n\n  liveUniqueIds: Array<string> = [];\n\n  override updated(\n    changedProperties: Map<string | number | symbol, unknown>\n  ): void {\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"post\")) {\n      this._postChanged();\n    }\n\n    if (changedProperties.has(\"locationHidden\")) {\n      this._locationHiddenChanged();\n    }\n\n    if (changedProperties.has(\"location\")) {\n      this._locationChanged();\n    }\n\n    if (changedProperties.has(\"selectedCategoryArrayId\")) {\n      this._selectedCategoryChanged();\n    }\n\n    if (changedProperties.has(\"selectedCoverMediaType\")) {\n      this._uploadedHeaderImageIdChanged();\n    }\n    if (changedProperties.has(\"group\")) {\n      this._groupChanged();\n    }\n\n    if (changedProperties.has(\"selected\")) {\n      this._selectedChanged();\n      const a = this.selected;\n    }\n\n    this._setupStructuredQuestions();\n  }\n\n  _getQuestionLengthWithSubOptions(questions: string | any[]) {\n    let length = 0;\n    for (let i = 0; i < questions.length; i++) {\n      length += 1;\n      var question = questions[i];\n      if (\n        question.type === \"radios\" &&\n        question.radioButtons &&\n        question.radioButtons.length > 0\n      ) {\n        length += question.radioButtons.length;\n      } else if (\n        question.type === \"checkboxes\" &&\n        question.checkboxes &&\n        question.checkboxes.length > 0\n      ) {\n        length += question.checkboxes.length;\n      } else if (\n        question.type === \"dropdown\" &&\n        question.dropdownOptions &&\n        question.dropdownOptions.length > 0\n      ) {\n        length += question.dropdownOptions.length;\n      }\n    }\n\n    return length;\n  }\n\n  customValidation() {\n    let valid = true;\n    let hasFoundOne = false;\n    this.liveQuestionIds.forEach((liveIndex) => {\n      const questionElement = this.$$(\n        \"#structuredQuestionContainer_\" + liveIndex\n      ) as YpStructuredQuestionEdit;\n      questionElement.classList.remove(\"error\");\n      if (questionElement && !questionElement.checkValidity()) {\n        valid = false;\n        if (!hasFoundOne) {\n          questionElement.scrollIntoView();\n          hasFoundOne = true;\n        }\n        questionElement.classList.add(\"error\");\n      }\n      questionElement.requestUpdate();\n    });\n    return valid;\n  }\n\n  async _getTranslationsIfNeeded() {\n    this.translatedQuestions = undefined;\n    if (\n      this.autoTranslate &&\n      this.language &&\n      this.group &&\n      this.language !== this.group.language\n    ) {\n      const translatedTexts =\n        await window.serverApi.getSurveyQuestionsTranslations(\n          this.group,\n          this.language\n        );\n\n      if (this.autoTranslate && this.language !== this.group.language) {\n        var currentQuestions = JSON.parse(\n          JSON.stringify(this.group.configuration.structuredQuestionsJson)\n        );\n\n        if (\n          translatedTexts.length ===\n          this._getQuestionLengthWithSubOptions(currentQuestions)\n        ) {\n          var translatedItemCount = 0;\n          for (\n            var questionCount = 0;\n            questionCount < currentQuestions.length;\n            questionCount++\n          ) {\n            var question = currentQuestions[questionCount];\n            question.originalText = question.text;\n            question.text = translatedTexts[translatedItemCount++];\n\n            if (\n              question.type === \"radios\" &&\n              question.radioButtons &&\n              question.radioButtons.length > 0\n            ) {\n              for (\n                var subOptionCount = 0;\n                subOptionCount < question.radioButtons.length;\n                subOptionCount++\n              ) {\n                question.radioButtons[subOptionCount].originalText =\n                  question.radioButtons[subOptionCount].text;\n                question.radioButtons[subOptionCount].text =\n                  translatedTexts[translatedItemCount++];\n              }\n            } else if (\n              question.type === \"checkboxes\" &&\n              question.checkboxes &&\n              question.checkboxes.length > 0\n            ) {\n              for (\n                var subOptionCount = 0;\n                subOptionCount < question.checkboxes.length;\n                subOptionCount++\n              ) {\n                question.checkboxes[subOptionCount].originalText =\n                  question.checkboxes[subOptionCount].text;\n                question.checkboxes[subOptionCount].text =\n                  translatedTexts[translatedItemCount++];\n              }\n            } else if (\n              question.type === \"dropdown\" &&\n              question.dropdownOptions &&\n              question.dropdownOptions.length > 0\n            ) {\n              for (\n                var subOptionCount = 0;\n                subOptionCount < question.dropdownOptions.length;\n                subOptionCount++\n              ) {\n                question.dropdownOptions[subOptionCount].originalText =\n                  question.dropdownOptions[subOptionCount].text;\n                question.dropdownOptions[subOptionCount].text =\n                  translatedTexts[translatedItemCount++];\n              }\n            }\n          }\n\n          this.translatedQuestions = currentQuestions;\n        } else {\n          console.error(\"Questions and Translated texts length does not match\");\n          console.error(\n            `Questions: ${this._getQuestionLengthWithSubOptions(\n              currentQuestions\n            )} Translated: ${translatedTexts.length}`\n          );\n        }\n      } else {\n        this.translatedQuestions = undefined;\n      }\n    }\n  }\n\n  _groupChanged() {\n    if (\n      this.group &&\n      this.group.configuration &&\n      this.group.configuration.structuredQuestionsJson &&\n      this.group.configuration.structuredQuestionsJson.length > 0\n    ) {\n      if (window.autoTranslate) {\n        this.autoTranslate = window.autoTranslate;\n      }\n      this._getTranslationsIfNeeded();\n    }\n  }\n\n  _generateLogo(event: CustomEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.requestUpdate();\n    const generator = this.$$(\"#aiImageGenerator\") as YpGenerateAiImage;\n    const name = this.$$(\"#name\") as TextField;\n    const description = this.$$(\"#description\") as TextField;\n    generator.open(name.value, description.value);\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          text-align: left;\n        }\n        .access {\n        }\n\n        label {\n          padding: 8px;\n        }\n\n        md-radio {\n          margin-left: 8px;\n        }\n\n        md-text-button {\n        }\n\n        #generateButton {\n          margin: 16px;\n          margin-bottom: 24px;\n\n        }\n\n        md-secondary-tab {\n          --md-secondary-tab-container-color: var(--md-sys-color-surface-container-lowest);\n        }\n\n        .topNewPostContainer {\n          color: var(--md-sys-color-on-surface);\n          padding: 32px;\n          margin: 0;\n          border-radius: 16px;\n          padding-bottom: 64px;\n          padding-top: 0;\n        }\n\n        yp-edit-dialog {\n          margin: 0;\n          padding: 0;\n        }\n\n        yp-file-upload {\n          margin-top: 16px;\n        }\n\n        .accessHeader {\n          font-weight: normal;\n          margin-bottom: 0;\n        }\n\n        div {\n        }\n\n        .container {\n          width: 100%;\n          width: 100%;\n        }\n\n        yp-post-location {\n          min-height: 320px;\n        }\n\n        md-tab {\n          --md-secondary-tab-container-color: var(--md-sys-color-surface-container-lowest);\n        }\n\n        @media (max-width: 600px) {\n          .container {\n            padding-right: 16px;\n          }\n\n          .subContainer {\n          }\n\n          md-primary-tab {\n            font-size: 12px;\n          }\n        }\n\n        yp-post-location {\n        }\n\n        section {\n          margin-top: 32px;\n        }\n\n        .image {\n          width: 300px;\n          height: 169px;\n        }\n\n        #description {\n          margin-top: 16px;\n        }\n\n        .imageSizeInfo {\n          font-size: 12px;\n          padding-bottom: 16px;\n        }\n\n        md-outlined-select {\n          max-width: 250px;\n        }\n\n        .optional {\n          font-size: 12px;\n        }\n\n        .icon {\n          padding-right: 8px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        md-checkbox {\n          margin-left: 8px;\n          margin-top: 4px;\n        }\n\n        section {\n          width: 100%;\n        }\n\n        .contactInfo {\n          margin-top: 16px;\n        }\n\n        #description {\n          --md-outlined-text-field-container-input: {\n            max-height: 125px;\n          }\n        }\n\n        .postEmoji {\n          margin-left: 16px;\n          direction: ltr !important;\n        }\n\n        .pointEmoji {\n          direction: ltr !important;\n        }\n\n        .uploadSection {\n          max-width: 220px;\n          vertical-align: top;\n          margin-left: 8px;\n          margin-right: 8px;\n        }\n\n        @media (max-width: 600px) {\n          .uploadSection {\n            max-width: 100%;\n          }\n\n          .videoCam {\n          }\n\n          yp-structured-question-edit {\n            max-width: calc(100vw - 64px);\n          }\n        }\n\n        .postCoverVideoInfo {\n          margin-top: 8px;\n        }\n\n        .videoUploadDisclamer {\n          margin-top: 6px;\n          font-size: 12px;\n          padding: 0;\n          max-width: 200px;\n        }\n\n        .categoryDropDown {\n          margin-bottom: 8px;\n        }\n\n        .topNewPostContainer[no-title] {\n          margin-top: -42px;\n        }\n\n        md-tabs[title-disabled] {\n          margin-bottom: 24px;\n        }\n\n        .videoCamIcon {\n          margin-left: 6px;\n          margin-bottom: 2px;\n        }\n\n        .mediaTab {\n          vertical-align: center;\n        }\n\n        #pointFor {\n          width: 100%;\n        }\n\n        .attachmentInfo {\n          margin-top: -8px;\n          margin-left: 8px;\n        }\n      `,\n    ];\n  }\n\n  _setSelectedTab(event: CustomEvent) {\n    this.selected = (event.target as MdTabs).activeTabIndex;\n  }\n\n  renderTabs() {\n    return html`\n      <md-tabs\n        ?title-disabled=\"${this.group!.configuration\n          .hideNameInputAndReplaceWith}\"\n        .activeTabIndex=\"${this.selected}\"\n        @change=\"${this._setSelectedTab}\"\n        id=\"paperTabs\"\n        ?hidden=\"${this.hasOnlyOneTab}\"\n      >\n        <md-secondary-tab\n          >${this.t(\"post.yourPost\")}<md-icon\n            >lightbulb_outline</md-icon\n          ></md-secondary-tab\n        >\n\n        ${this.newPointShown\n          ? html`\n              <md-secondary-tab\n                >${this.t(\"post.yourPoint\")}<md-icon\n                  >comment</md-icon\n                ></md-secondary-tab\n              >\n            `\n          : nothing}\n        ${!this.locationHidden\n          ? html`\n              <md-secondary-tab\n                >${this.t(\"post.location\")}<md-icon\n                  >location_on</md-icon\n                ></md-secondary-tab\n              >\n            `\n          : nothing}\n        ${!this.mediaHidden\n          ? html`\n              <md-secondary-tab\n                >${this.t(\"media\")}<md-icon>videocam</md-icon></md-secondary-tab\n              >\n            `\n          : nothing}\n      </md-tabs>\n    `;\n  }\n\n  renderMoreContactInfo() {\n    return html`\n      <h2 class=\"contactInfo\">${this.t(\"contactInformation\")}</h2>\n      <md-outlined-text-field\n        id=\"contactName\"\n        name=\"contactName\"\n        type=\"text\"\n        .label=\"${this.t(\"user.name\")}\"\n        charCounter\n      >\n      </md-outlined-text-field>\n      <md-outlined-text-field\n        id=\"contactEmail\"\n        name=\"contactEmail\"\n        type=\"text\"\n        .label=\"${this.t(\"user.email\")}\"\n        charCounter\n      >\n      </md-outlined-text-field>\n      <md-outlined-text-field\n        id=\"contactTelephone\"\n        name=\"contacTelephone\"\n        type=\"text\"\n        .label=\"${this.t(\"contactTelephone\")}\"\n        maxlength=\"20\"\n        charCounter\n      >\n      </md-outlined-text-field>\n      <md-outlined-text-field\n        id=\"contactAddress\"\n        name=\"contactAddress\"\n        type=\"text\"\n        ?hidden=\"${!this.group!.configuration.moreContactInformationAddress}\"\n        .label=\"${this.t(\"contactAddress\")}\"\n        maxlength=\"300\"\n        charCounter\n      >\n      </md-outlined-text-field>\n    `;\n  }\n\n  get titleQuestionText() {\n    if (this.post && this.group && this.customTitleQuestionText) {\n      return this.customTitleQuestionText;\n    }\n    if (\n      this.post &&\n      this.group &&\n      this.group.configuration &&\n      this.group.configuration.customTitleQuestionText\n    ) {\n      return this.group.configuration.customTitleQuestionText;\n    } else {\n      return this.t(\"title\");\n    }\n  }\n\n  renderDescriptionTab() {\n    return this.group\n      ? html`\n          <section>\n            <div class=\"layout vertical flex\">\n              ${this.group.configuration.hideNameInputAndReplaceWith\n                ? html`\n                    <input\n                      type=\"hidden\"\n                      name=\"name\"\n                      .value=\"${this.replacedName || \"\"}\"\n                    />\n                  `\n                : this.post\n                ? html`\n                    <md-outlined-text-field\n                      id=\"name\"\n                      required\n                      minlength=\"1\"\n                      name=\"name\"\n                      type=\"text\"\n                      .label=\"${this.titleQuestionText}\"\n                      .value=\"${this.post.name}\"\n                      maxlength=\"60\"\n                      charCounter\n                    >\n                    </md-outlined-text-field>\n                  `\n                : nothing}\n              ${this.showCategories && this.group.Categories\n                ? html`\n                    <md-outlined-select\n                      class=\"categoryDropDown\"\n                      .label=\"${this.t(\"category.select\")}\"\n                      @selected=\"${this._selectedCategory}\"\n                      ?required=\"${this.group.configuration\n                        .makeCategoryRequiredOnNewPost}\"\n                    >\n                      ${this.group.Categories.map(\n                        (category) => html`\n                          <md-select-option .data-category-id=\"${category.id}\"\n                            >${category.name}</md-select-option\n                          >\n                        `\n                      )}\n                    </md-outlined-select>\n                    <input\n                      type=\"hidden\"\n                      name=\"categoryId\"\n                      .value=\"${this.selectedCategoryId\n                        ? this.selectedCategoryId.toString()\n                        : \"\"}\"\n                    />\n                  `\n                : nothing}\n              ${this.group &&\n              this.group.configuration &&\n              this.group.configuration.usePostTags\n                ? html` <md-outlined-text-field\n                    id=\"name\"\n                    name=\"tags\"\n                    type=\"text\"\n                    .label=\"${this.t(\"commaSeperatedTags\")}\"\n                    .value=\"${this.post!.public_data!.tags}\"\n                  >\n                  </md-outlined-text-field>`\n                : nothing}\n              ${this.postDescriptionLimit\n                ? html`\n                    <md-outlined-text-field\n                      type=\"textarea\"\n                      id=\"description\"\n                      ?hidden=\"${this.structuredQuestions != null}\"\n                      ?required=\"${this.structuredQuestions == null}\"\n                      minlength=\"1\"\n                      name=\"description\"\n                      .value=\"${this.post!.description}\"\n                      .label=\"${this.t(\"post.description\")}\"\n                      @change=\"${this._resizeScrollerIfNeeded}\"\n                      char-counter\n                      rows=\"5\"\n                      max-rows=\"5\"\n                      maxlength=\"${this.postDescriptionLimit}\"\n                    >\n                    </md-outlined-text-field>\n\n                    <div\n                      class=\"horizontal end-justified layout postEmoji\"\n                      ?hidden=\"${this.group.configuration.hideEmoji}\"\n                    >\n                      <emoji-selector\n                        id=\"emojiSelectorDescription\"\n                        ?hidden=\"${this.structuredQuestions != undefined}\"\n                      ></emoji-selector>\n                    </div>\n                  `\n                : nothing}\n              ${this.structuredQuestions != undefined\n                ? html`<div id=\"surveyContainer\">\n                    ${this.structuredQuestions.map(\n                      (\n                        question: YpStructuredQuestionData,\n                        index: number\n                      ) => html`\n                        <yp-structured-question-edit\n                          .index=\"${index}\"\n                          is-from-new-post\n                          use-small-font\n                          id=\"structuredQuestionContainer_${index}\"\n                          ?dontFocusFirstQuestion=\"${!this.group!.configuration\n                            .hideNameInputAndReplaceWith}\"\n                          @resize-scroller=\"${this._resizeScrollerIfNeeded}\"\n                          .structuredAnswers=\"${this\n                            .initialStructuredAnswersJson}\"\n                          ?isLastRating=\"${this._isLastRating(index)}\"\n                          ?isFirstRating=\"${this._isFirstRating(index)}\"\n                          ?hideQuestionIndex=\"${this.group!.configuration\n                            .hideQuestionIndexOnNewPost}\"\n                          .question=\"${question}\"\n                        >\n                        </yp-structured-question-edit>\n                      `\n                    )}\n                  </div>`\n                : nothing}\n              ${this.group.configuration.attachmentsEnabled\n                ? html`\n                    <yp-file-upload\n                      id=\"attachmentFileUpload\"\n                      raised\n                      attachmentUpload\n                      buttonIcon=\"attach_file\"\n                      .group=\"${this.group}\"\n                      .buttonText=\"${this.t(\"uploadAttachment\")}\"\n                      accept=\"application/msword,application/vnd.ms-excel,application/vnd.ms-powerpoint,text/plain,application/pdf,image/*\"\n                      .target=\"/api/groups/${this.group.id}/upload_document\"\n                      method=\"POST\"\n                      @success=\"${this._documentUploaded}\"\n                    >\n                    </yp-file-upload>\n                    <small class=\"attachmentInfo\"\n                      >${this.t(\"documentOnlyVisibleToAdmins\")}</small\n                    >\n\n                    ${this.post!.data?.attachment?.url\n                      ? html`\n                          <label>\n                            ${this.t(\"deleteAttachment\")}:\n                            ${this.post!.data.attachment.filename}\n                            <md-checkbox name=\"deleteAttachment\"></md-checkbox>\n                          </label>\n                        `\n                      : nothing}\n                  `\n                : nothing}\n              ${this.group.configuration.moreContactInformation\n                ? this.renderMoreContactInfo()\n                : nothing}\n            </div>\n          </section>\n        `\n      : nothing;\n  }\n\n  renderPointTab() {\n    return this.newPointShown\n      ? html`\n          <section class=\"subContainer\">\n            <md-outlined-text-field\n              id=\"pointFor\"\n              ?required=\"${!this.group!.configuration.newPointOptional}\"\n              minlength=\"1\"\n              name=\"pointFor\"\n              .value=\"${this.post!.pointFor || \"\"}\"\n              .label=\"${this.t(\"point.for\")}\"\n              charCounter\n              type=\"textarea\"\n              rows=\"5\"\n              max-rows=\"5\"\n              .maxlength=\"${this.pointMaxLength}\"\n            >\n            </md-outlined-text-field>\n            <div\n              class=\"horizontal end-justified layout pointEmoji\"\n              ?hidden=\"${this.group!.configuration.hideEmoji}\"\n            >\n              <emoji-selector id=\"emojiSelectorPointFor\"></emoji-selector>\n            </div>\n          </section>\n        `\n      : nothing;\n  }\n\n  renderLocationTab() {\n    return !this.locationHidden\n      ? html`\n          <section>\n            ${this.mapActive && this.group\n              ? html`\n                  <yp-post-location\n                    .encodedLocation=\"${this.encodedLocation}\"\n                    .location=\"${this.location}\"\n                    .group=\"${this.group}\"\n                    .post=\"${this.post}\"\n                  ></yp-post-location>\n                `\n              : nothing}\n          </section>\n        `\n      : nothing;\n  }\n\n  renderCoverMediaSelection() {\n    return html`\n      <h3 class=\"accessHeader\">${this.t(\"post.cover.media\")}</h3>\n      <div\n        id=\"coverMediaType\"\n        name=\"coverMediaType\"\n        class=\"coverMediaType layout horizontal wrap\"\n        .selected=\"${this.selectedCoverMediaType}\"\n      >\n        <label\n          >${this.t(\"post.cover.none\")}\n          <md-radio\n            value=\"none\"\n            id=\"mediaNone\"\n            ?checked=\"${this.selectedCoverMediaType === \"none\"}\"\n            @change=\"${this._setSelectedCoverMediaType}\"\n            name=\"radioButtonsMedia\"\n          >\n          </md-radio>\n        </label>\n\n        <label ?hidden=\"${!this.uploadedHeaderImageId}\"\n          >${this.t(\"post.cover.image\")}\n          <md-radio\n            value=\"image\"\n            id=\"mediaImage\"\n            ?checked=\"${this.selectedCoverMediaType === \"image\"}\"\n            @change=\"${this._setSelectedCoverMediaType}\"\n            name=\"radioButtonsMedia\"\n          >\n          </md-radio>\n        </label>\n\n        <label ?hidden=\"${!this.showVideoCover}\"\n          >${this.t(\"postCoverVideo\")}\n          <md-radio\n            value=\"video\"\n            id=\"mediaVideo\"\n            ?checked=\"${this.selectedCoverMediaType === \"video\"}\"\n            @change=\"${this._setSelectedCoverMediaType}\"\n            name=\"radioButtonsMedia\"\n          >\n          </md-radio>\n        </label>\n\n        <label ?hidden=\"${!this.showAudioCover}\"\n          >${this.t(\"postCoverAudio\")}\n          <md-radio\n            value=\"audio\"\n            id=\"mediaAudio\"\n            ?checked=\"${this.selectedCoverMediaType === \"audio\"}\"\n            @change=\"${this._setSelectedCoverMediaType}\"\n            name=\"radioButtonsMedia\"\n          >\n          </md-radio>\n        </label>\n\n        ${this.location\n          ? html`\n              <label\n                >${this.t(\"post.cover.map\")}\n                <md-radio\n                  value=\"map\"\n                  ?checked=\"${this.selectedCoverMediaType === \"map\"}\"\n                  id=\"mediaMap\"\n                  @change=\"${this._setSelectedCoverMediaType}\"\n                  name=\"radioButtonsMedia\"\n                >\n                </md-radio>\n              </label>\n\n              <label\n                >${this.t(\"post.cover.streetview\")}\n                <md-radio\n                  value=\"streetView\"\n                  id=\"mediaStreetview\"\n                  ?checked=\"${this.selectedCoverMediaType === \"streetView\"}\"\n                  @change=\"${this._setSelectedCoverMediaType}\"\n                  name=\"radioButtonsMedia\"\n                >\n                </md-radio>\n              </label>\n            `\n          : nothing}\n      </div>\n    `;\n  }\n\n  renderMediaTab() {\n    return html`\n      <section>\n        <div class=\"layout vertical center-center\">\n          ${this.renderCoverMediaSelection()}\n          <div class=\"layout horizontal center-center wrap\">\n            <div\n              class=\"layout vertical center-center self-start uploadSection\"\n              ?hidden=\"${this.group!.configuration.hidePostImageUploads}\"\n            >\n              ${this.imagePreviewUrl\n                ? html`\n                    <yp-image\n                      class=\"image\"\n                      sizing=\"contain\"\n                      .src=\"${this.imagePreviewUrl}\"\n                    ></yp-image>\n                  `\n                : nothing}\n              <div class=\"layout horizontal center-center\">\n                <yp-file-upload\n                  id=\"imageFileUpload\"\n                  raised\n                  target=\"/api/images?itemType=post-header\"\n                  method=\"POST\"\n                  buttonIcon=\"photo_camera\"\n                  .buttonText=\"${this.t(\"image.upload\")}\"\n                  @success=\"${this._imageUploaded}\"\n                >\n                </yp-file-upload>\n\n                ${this.group!.configuration.allowGenerativeImages\n                  ? html`\n                      <md-outlined-button\n                        id=\"generateButton\"\n                        @click=\"${this._generateLogo}\"\n                        >${this.t(\"generateImageWithAi\")}<md-icon slot=\"icon\"\n                          >smart_toy</md-icon\n                        ></md-outlined-button\n                      >\n                    `\n                  : nothing}\n              </div>\n            </div>\n\n            ${this.group!.configuration.allowPostVideoUploads\n              ? html`\n                  <div\n                    class=\"layout vertical center-center self-start uploadSection\"\n                  >\n                    <yp-file-upload\n                      id=\"videoFileUpload\"\n                      container-type=\"posts\"\n                      .group=\"${this.group}\"\n                      raised\n                      .uploadLimitSeconds=\"${this.group!.configuration\n                        .videoPostUploadLimitSec}\"\n                      videoUpload\n                      buttonIcon=\"videocam\"\n                      .buttonText=\"${this.t(\"uploadVideo\")}\"\n                      method=\"POST\"\n                      @success=\"${this._videoUploaded}\"\n                    >\n                    </yp-file-upload>\n                    <div\n                      class=\"videoUploadDisclamer\"\n                      ?hidden=\"${!this.group!.configuration\n                        .showVideoUploadDisclaimer || !this.uploadedVideoId}\"\n                    >\n                      ${this.t(\"videoUploadDisclaimer\")}\n                    </div>\n                  </div>\n                `\n              : nothing}\n            ${this.group!.configuration.allowPostAudioUploads\n              ? html`\n                  <div\n                    class=\"layout vertical center-center self-start uploadSection\"\n                  >\n                    <yp-file-upload\n                      id=\"audioFileUpload\"\n                      containerType=\"posts\"\n                      .group=\"${this.group}\"\n                      raised\n                      .uploadLimitSeconds=\"${this.group!.configuration\n                        .audioPostUploadLimitSec}\"\n                      .multi=\"false\"\n                      audioUpload\n                      method=\"POST\"\n                      buttonIcon=\"keyboard_voice\"\n                      .buttonText=\"${this.t(\"uploadAudio\")}\"\n                      @success=\"${this._audioUploaded}\"\n                    >\n                    </yp-file-upload>\n                  </div>\n                `\n              : nothing}\n          </div>\n        </div>\n      </section>\n    `;\n  }\n\n  _setSelectedCoverMediaType(event: CustomEvent) {\n    this.selectedCoverMediaType = (event.target as HTMLInputElement).value;\n  }\n\n  get _pointPageHidden() {\n    return !this.newPointShown || this.selected !== EditPostTabs.Point;\n  }\n\n  get _mediaPageHidden() {\n    if (this.mediaHidden) {\n      return true;\n    }\n    if (\n      this.newPointShown &&\n      !this.locationHidden &&\n      this.selected !== EditPostTabs.Media\n    ) {\n      return true;\n    } else if (\n      this.newPointShown &&\n      this.locationHidden &&\n      this.selected !== EditPostTabs.Media - 1\n    ) {\n      return true;\n    } else if (\n      !this.newPointShown &&\n      this.locationHidden &&\n      this.selected !== EditPostTabs.Media - 2\n    ) {\n      return true;\n    } else if (\n      !this.newPointShown &&\n      !this.locationHidden &&\n      this.selected !== EditPostTabs.Media - 1\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  renderCurrentTabPage(): TemplateResult | undefined | {} {\n    return html`\n      <div ?hidden=\"${this.selected !== EditPostTabs.Description}\">\n        ${this.renderDescriptionTab()}\n      </div>\n      <div ?hidden=\"${this._pointPageHidden}\">${this.renderPointTab()}</div>\n      <div ?hidden=\"${false}\">${this.renderLocationTab()}</div>\n      <div ?hidden=\"${this._mediaPageHidden}\">${this.renderMediaTab()}</div>\n    `;\n  }\n\n  renderHiddenInputs() {\n    return html`\n      <input\n        type=\"hidden\"\n        name=\"location\"\n        .value=\"${this.encodedLocation || \"\"}\"\n      />\n      <input\n        type=\"hidden\"\n        name=\"coverMediaType\"\n        .value=\"${this.selectedCoverMediaType}\"\n      />\n      <input\n        type=\"hidden\"\n        name=\"uploadedHeaderImageId\"\n        .value=\"${this.uploadedHeaderImageId\n          ? this.uploadedHeaderImageId.toString()\n          : \"\"}\"\n      />\n      <input\n        type=\"hidden\"\n        name=\"uploadedDocumentUrl\"\n        .value=\"${this.uploadedDocumentUrl || \"\"}\"\n      />\n      <input\n        type=\"hidden\"\n        name=\"uploadedDocumentFilename\"\n        .value=\"${this.uploadedDocumentFilename || \"\"}\"\n      />\n      <input\n        type=\"hidden\"\n        name=\"structuredAnswers\"\n        .value=\"${this.structuredAnswersString}\"\n      />\n      <input\n        type=\"hidden\"\n        name=\"structuredAnswersJson\"\n        .value=\"${this.structuredAnswersJson}\"\n      />\n    `;\n  }\n\n  override render() {\n    return html`\n      <yp-edit-dialog\n        name=\"postEdit\"\n        doubleWidth\n        .customValidationFunction=\"${this.customValidation.bind(this)}\"\n        id=\"editDialog\"\n        icon=\"lightbulb_outline\"\n        .action=\"${this.action}\"\n        .useNextTabAction=\"${this.newPost}\"\n        @next-tab-action=\"${this._nextTab}\"\n        .method=\"${this.method}\"\n        .heading=\"${this.editHeaderText ? this.editHeaderText : \"\"}\"\n        .saveText=\"${this.saveText}\"\n        class=\"container\"\n        customSubmit\n        .nextActionText=\"${this.t(\"next\")}\"\n        .snackbarText=\"${this.snackbarText}\"\n        .params=\"${this.params}\"\n      >\n        ${this.group && this.post\n          ? html`\n              <div\n                class=\"layout vertical wrap topNewPostContainer\"\n                ?no-title=\"${this.group.configuration\n                  .hideNameInputAndReplaceWith}\"\n              >\n                ${this.renderTabs()} ${cache(this.renderCurrentTabPage())}\n              </div>\n              ${this.renderHiddenInputs()}\n            `\n          : nothing}\n      </yp-edit-dialog>\n\n      ${this.group &&\n      this.group.configuration.alternativeTextForNewIdeaButtonHeader\n        ? html`\n            <yp-magic-text\n              id=\"alternativeTextForNewIdeaButtonHeaderId\"\n              hidden\n              .contentId=\"${this.group.id}\"\n              textOnly\n              .content=\"${this.group.configuration\n                .alternativeTextForNewIdeaButtonHeader}\"\n              .contentLanguage=\"${this.group.language}\"\n              @new-translation=\"${this\n                ._alternativeTextForNewIdeaButtonHeaderTranslation}\"\n              textType=\"alternativeTextForNewIdeaButtonHeader\"\n            ></yp-magic-text>\n          `\n        : nothing}\n      ${this.group && this.group.configuration.customThankYouTextNewPosts\n        ? html`\n            <yp-magic-text\n              id=\"customThankYouTextNewPostsId\"\n              hidden\n              .contentId=\"${this.group.id}\"\n              textOnly\n              .content=\"${this.group.configuration.customThankYouTextNewPosts}\"\n              .contentLanguage=\"${this.group.language}\"\n              textType=\"customThankYouTextNewPosts\"\n            ></yp-magic-text>\n          `\n        : nothing}\n      ${this.group && this.group.configuration.customTitleQuestionText\n        ? html`\n            <yp-magic-text\n              id=\"customTitleQuestionTextId\"\n              hidden\n              .contentId=\"${this.group.id}\"\n              textOnly\n              .content=\"${this.group.configuration.customTitleQuestionText}\"\n              .contentLanguage=\"${this.group.language}\"\n              @new-translation=\"${this._updatePostTitle}\"\n              textType=\"customTitleQuestionText\"\n            ></yp-magic-text>\n          `\n        : nothing}\n      ${this.group &&\n      this.group.configuration.alternativeTextForNewIdeaSaveButton\n        ? html`\n            <yp-magic-text\n              id=\"alternativeTextForNewIdeaSaveButtonId\"\n              hidden\n              .contentId=\"${this.group.id}\"\n              textOnly\n              .content=\"${this.group.configuration\n                .alternativeTextForNewIdeaSaveButton}\"\n              .contentLanguage=\"${this.group.language}\"\n              @new-translation=\"${this\n                ._alternativeTextForNewIdeaSaveButtonTranslation}\"\n              textType=\"alternativeTextForNewIdeaSaveButton\"\n            ></yp-magic-text>\n          `\n        : nothing}\n\n      <yp-generate-ai-image\n        id=\"aiImageGenerator\"\n        collectionType=\"group\"\n        .collectionId=\"${this.group!.id}\"\n        .name=\"${this.post?.name}\"\n        .description=\"${this.post?.description}\"\n        @got-image=\"${this._gotAiImage}\"\n      >\n      </yp-generate-ai-image>\n    `;\n  }\n\n  _gotAiImage(event: CustomEvent) {\n    this.imagePreviewUrl = event.detail.imageUrl;\n    this.uploadedHeaderImageId = event.detail.imageId;\n    this.selectedCoverMediaType = \"image\";\n    debugger;\n  }\n\n  _alternativeTextForNewIdeaSaveButtonTranslation() {\n    setTimeout(() => {\n      const label = this.$$(\n        \"#alternativeTextForNewIdeaSaveButtonId\"\n      ) as YpMagicText;\n      if (label && label.finalContent) {\n        this.saveText = label.finalContent;\n      }\n    });\n  }\n\n  _updatePostTitle() {\n    setTimeout(() => {\n      const label = this.$$(\"#customTitleQuestionTextId\") as YpMagicText;\n      if (label && label.finalContent) {\n        this.customTitleQuestionText = label.finalContent;\n      }\n    });\n  }\n\n  //TODO: Investigate if any are missing .html version of listeners\n  override connectedCallback() {\n    super.connectedCallback();\n    this.addListener(\"yp-form-invalid\", this._formInvalid);\n    this.addListener(\"yp-custom-form-submit\", this._customSubmit);\n    this.addListener(\"yp-open-to-unique-id\", this._openToId);\n    this.addListener(\"yp-skip-to-unique-id\", this._skipToId);\n    this.addListener(\"yp-goto-next-index\", this._goToNextIndex);\n    this.addGlobalListener(\n      \"yp-auto-translate\",\n      this._autoTranslateEvent.bind(this)\n    );\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeListener(\"yp-form-invalid\", this._formInvalid);\n    this.removeListener(\"yp-custom-form-submit\", this._customSubmit);\n    this.removeListener(\"yp-skip-to-unique-id\", this._skipToId);\n    this.removeListener(\"yp-open-to-unique-id\", this._openToId);\n    this.removeListener(\"yp-goto-next-index\", this._goToNextIndex);\n    this.removeGlobalListener(\n      \"yp-auto-translate\",\n      this._autoTranslateEvent.bind(this)\n    );\n  }\n\n  hasLongSaveText() {\n    return this.saveText && this.saveText.length > 9;\n  }\n\n  _autoTranslateEvent(event: CustomEvent) {\n    this.autoTranslate = event.detail;\n    this._getTranslationsIfNeeded();\n  }\n\n  _isLastRating(index: number) {\n    return (\n      this.structuredQuestions &&\n      this.structuredQuestions[index].subType === \"rating\" &&\n      index + 2 < this.structuredQuestions.length &&\n      this.structuredQuestions[index + 1].subType !== \"rating\"\n    );\n  }\n\n  _isFirstRating(index: number) {\n    return (\n      this.structuredQuestions &&\n      this.structuredQuestions[index].subType === \"rating\" &&\n      this.structuredQuestions[index - 1] &&\n      this.structuredQuestions[index - 1].subType !== \"rating\"\n    );\n  }\n\n  _openToId(event: CustomEvent) {\n    this._skipToId(event, true);\n  }\n\n  _goToNextIndex(event: CustomEvent) {\n    const currentPos = this.liveQuestionIds.indexOf(event.detail.currentIndex);\n    if (currentPos < this.liveQuestionIds.length - 1) {\n      const item = this.$$(\n        \"#structuredQuestionContainer_\" + this.liveQuestionIds[currentPos + 1]\n      ) as HTMLElement;\n      item.scrollIntoView({\n        block: \"end\",\n        inline: \"end\",\n        behavior: \"smooth\",\n      });\n      item.focus();\n    }\n  }\n\n  _skipToId(event: CustomEvent, showItems: boolean) {\n    const toId = event.detail.toId.replace(/]/g, \"\");\n    const fromId = event.detail.fromId.replace(/]/g, \"\");\n    const toIndex = this.uniqueIdsToElementIndexes[toId];\n    const item = this.$$(\n      \"#structuredQuestionContainer_\" + toIndex\n    ) as HTMLElement;\n    item.scrollIntoView({\n      block: \"end\",\n      inline: \"end\",\n      behavior: \"smooth\",\n    });\n    item.focus();\n  }\n\n  _skipToWithHideId(event: CustomEvent, showItems: boolean) {\n    let foundFirst = false;\n    if (this.$$(\"#surveyContainer\")) {\n      const children = this.$$(\"#surveyContainer\")!\n        .children as unknown as Array<YpStructuredQuestionEdit>;\n      for (let i = 0; i < children.length; i++) {\n        const toId = event.detail.toId.replace(/]/g, \"\");\n        const fromId = event.detail.fromId.replace(/]/g, \"\");\n        if (\n          children[i + 1] &&\n          children[i + 1].question &&\n          children[i + 1].question.uniqueId &&\n          children[i + 1].question.uniqueId!.substring(\n            children[i + 1].question.uniqueId!.length - 1\n          ) === \"a\"\n        ) {\n          children[i].question.uniqueId = children[\n            i + 1\n          ].question.uniqueId!.substring(\n            0,\n            children[i + 1].question.uniqueId!.length - 1\n          );\n        }\n        if (\n          children[i].question &&\n          event.detail.fromId &&\n          children[i].question.uniqueId === fromId\n        ) {\n          foundFirst = true;\n        } else if (\n          children[i].question &&\n          event.detail.toId &&\n          (children[i].question.uniqueId === toId ||\n            children[i].question.uniqueId === toId + \"a\")\n        ) {\n          break;\n        } else {\n          if (foundFirst) {\n            if (showItems) {\n              (children[i] as HTMLElement).hidden = false;\n            } else {\n              (children[i] as HTMLElement).hidden = true;\n            }\n          }\n        }\n      }\n    } else {\n      console.error(\"No survey container found\");\n    }\n  }\n\n  get replacedName() {\n    const { post } = this;\n    const { group } = this;\n    if (post && group && group.configuration.hideNameInputAndReplaceWith) {\n      let text = group.configuration.hideNameInputAndReplaceWith;\n      text = text.replace(\n        \"<DATESECONDS>\",\n        DateTime.now().toFormat(\"DD/MM/YYYY hh:mm:ss\")\n      );\n      text = text.replace(\n        \"<DATEMINUTES>\",\n        DateTime.now().toFormat(\"DD/MM/YYYY hh:mm\")\n      );\n      text = text.replace(\"<DATE>\", DateTime.now().toFormat(\"DD/MM/YYYY\"));\n      return text;\n    }\n\n    return null;\n  }\n\n  get pointMaxLength() {\n    const { group } = this;\n    if (group && group.configuration && group.configuration.pointCharLimit) {\n      return group.configuration.pointCharLimit;\n    }\n    return 500;\n  }\n\n  _floatIfValueOrIE(value: boolean) {\n    const ie11 = /Trident.*rv[ :]*11\\./.test(navigator.userAgent);\n    return ie11 || value;\n  }\n\n  get newPointShown() {\n    let hideNewPoint = false;\n    if (\n      this.group &&\n      this.group.configuration &&\n      this.group.configuration.hideNewPointOnNewIdea === true\n    ) {\n      hideNewPoint = true;\n    }\n\n    return this.newPost && !hideNewPoint;\n  }\n\n  _submitWithStructuredQuestionsJson() {\n    const answers: Array<YpStructuredAnswer> = [];\n    this.liveQuestionIds.forEach((liveIndex) => {\n      const questionElement = this.$$(\n        \"#structuredQuestionContainer_\" + liveIndex\n      ) as YpStructuredQuestionEdit;\n      if (questionElement) {\n        const answer = questionElement.getAnswer();\n        if (answer) {\n          answers.push(answer);\n        } else {\n          console.error(\"Can't find answer to question\");\n        }\n      }\n    });\n    this.structuredAnswersJson = JSON.stringify(answers);\n    (this.$$(\"#editDialog\") as YpEditDialog)._reallySubmit();\n  }\n\n  _submitWithStructuredQuestionsString() {\n    let description = \"\";\n    let answers = \"\";\n\n    for (let i = 0; i < this.structuredQuestions!.length; i += 1) {\n      description += this.structuredQuestions![i].text;\n      if (\n        this.structuredQuestions![i].text &&\n        this.structuredQuestions![i].text[\n          this.structuredQuestions![i].text.length - 1\n        ] !== \"?\"\n      )\n        description += \":\";\n      description += \"\\n\";\n      description += this.structuredQuestions![i].value;\n      answers += this.structuredQuestions![i].value;\n      if (i !== this.structuredQuestions!.length - 1) {\n        answers += \"%!#x\";\n        description += \"\\n\\n\";\n      }\n    }\n    if (this.post) this.post.description = description;\n    this.structuredAnswersString = answers;\n    (this.$$(\"#editDialog\") as YpEditDialog)._reallySubmit();\n  }\n\n  _customSubmit() {\n    if (\n      this.group &&\n      this.group.configuration &&\n      this.group.configuration.structuredQuestionsJson\n    ) {\n      this._submitWithStructuredQuestionsJson();\n    } else if (\n      this.structuredQuestions &&\n      this.structuredQuestions.length > 0\n    ) {\n      this._submitWithStructuredQuestionsString();\n    } else {\n      (this.$$(\"#editDialog\") as YpEditDialog)._reallySubmit();\n    }\n  }\n\n  _resizeScrollerIfNeeded() {\n    if (this.$$(\"#editDialog\"))\n      (this.$$(\"#editDialog\") as YpEditDialog).scrollResize();\n  }\n\n  _getStructuredQuestionsString() {\n    const structuredQuestions: Array<YpStructuredQuestionData> = [];\n\n    const questionComponents =\n      this.group!.configuration.structuredQuestions!.split(\",\");\n    for (let i = 0; i < questionComponents.length; i += 2) {\n      const question = questionComponents[i];\n      const maxLength = questionComponents[i + 1];\n      structuredQuestions.push({\n        text: question,\n        maxLength: parseInt(maxLength),\n        value: \"\",\n      });\n    }\n    if (\n      !this.newPost &&\n      this.post &&\n      this.post.public_data &&\n      this.post.public_data.structuredAnswers &&\n      this.post.public_data.structuredAnswers !== \"\"\n    ) {\n      const answers = this.post.public_data.structuredAnswers.split(\"%!#x\");\n      for (let i = 0; i < answers.length; i += 1) {\n        if (structuredQuestions[i]) structuredQuestions[i].value = answers[i];\n      }\n    }\n\n    return structuredQuestions;\n  }\n\n  _setupStructuredQuestions() {\n    const { post } = this;\n    const { group } = this;\n    if (this.translatedQuestions) {\n      this.structuredQuestions = this.translatedQuestions;\n    } else if (post && group && group.configuration.structuredQuestionsJson) {\n      this.structuredQuestions = group.configuration.structuredQuestionsJson;\n    } else if (\n      post &&\n      group &&\n      group.configuration.structuredQuestions &&\n      group.configuration.structuredQuestions !== \"\"\n    ) {\n      this.structuredQuestions = this._getStructuredQuestionsString();\n    } else {\n      return undefined;\n    }\n  }\n\n  get showVideoCover() {\n    return this.uploadedVideoId || this.currentVideoId;\n  }\n\n  get showAudioCover() {\n    return this.uploadedAudioId || this.currentAudioId;\n  }\n\n  _videoUploaded(event: CustomEvent) {\n    this.uploadedVideoId = event.detail.videoId;\n    (this.$$(\"#mediaVideo\") as Radio).checked = true;\n    setTimeout(() => {\n      this.fire(\"iron-resize\");\n    }, 50);\n  }\n\n  _audioUploaded(event: CustomEvent) {\n    this.uploadedAudioId = event.detail.audioId;\n    this.selectedCoverMediaType = \"audio\";\n    setTimeout(() => {\n      this.fire(\"iron-resize\");\n    });\n  }\n\n  _documentUploaded(event: CustomEvent) {\n    const responseURL = event.detail.xhr.responseURL.split(\"?\")[0];\n    this.uploadedDocumentUrl = responseURL;\n    this.uploadedDocumentFilename = event.detail.filename;\n  }\n\n  override customFormResponse() {\n    window.appGlobals.groupLoadNewPost = true;\n  }\n\n  _updateEmojiBindings() {\n    setTimeout(() => {\n      const description = this.$$(\"#description\") as HTMLInputElement;\n      const emojiSelector = this.$$(\n        \"#emojiSelectorDescription\"\n      ) as YpEmojiSelector;\n      if (description && emojiSelector) {\n        emojiSelector.inputTarget = description;\n      } else {\n        console.warn(\"Post edit: Can't bind emojis :(\");\n      }\n      const emojiSelectorPointFor = this.$$(\n        \"#emojiSelectorPointFor\"\n      ) as YpEmojiSelector;\n      const pointFor = this.$$(\"#pointFor\") as HTMLInputElement;\n      if (emojiSelectorPointFor && pointFor) {\n        emojiSelectorPointFor.inputTarget = pointFor;\n      }\n    }, 500);\n  }\n\n  _locationHiddenChanged() {\n    /*TODO: See if we need this\n    setTimeout( () => {\n      const pages = this.$$('#pages');\n      if (pages) {\n        pages.forceSynchronousItemUpdate();\n      }\n\n      const paperTabs = this.$$('#paperTabs');\n      if (paperTabs) {\n        paperTabs.forceSynchronousItemUpdate();\n      }\n      console.log('Location hidden changed');\n    }, 10); */\n  }\n\n  _formInvalid() {\n    if (\n      this.newPointShown &&\n      !(this.$$(\"#pointFor\") as TextField).checkValidity()\n    ) {\n      this.selected = 1;\n    } else {\n      this.selected = 0;\n    }\n    //TODO: Check this\n    //    if (this.$$(\"#name\")) (this.$$(\"#name\") as TextField).autoValidate = true;\n    //    if (this.$$(\"#description\"))\n    //      (this.$$(\"#description\") as TextField).autoValidate = true;\n    //    if (this.newPointShown) {\n    //      (this.$$(\"#pointFor\") as TextField).autoValidate = true;\n    //    }\n  }\n\n  _locationChanged() {\n    if (\n      this.location &&\n      (!this.selectedCoverMediaType ||\n        this.selectedCoverMediaType == \"\" ||\n        this.selectedCoverMediaType == \"none\")\n    ) {\n      this.selectedCoverMediaType = \"map\";\n    }\n  }\n\n  _uploadedHeaderImageIdChanged() {\n    if (this.uploadedHeaderImageId) {\n      this.selectedCoverMediaType = \"image\";\n    }\n  }\n\n  _getTabLength() {\n    let length = 4;\n\n    if (!this.newPointShown) {\n      length -= 1;\n    }\n\n    if (this.locationHidden) {\n      length -= 1;\n    }\n\n    if (this.mediaHidden) {\n      length -= 1;\n    }\n\n    return length;\n  }\n\n  _nextTab() {\n    const length = this._getTabLength();\n\n    if (this.selected < length) {\n      this.selected = this.selected + 1;\n    }\n  }\n\n  _selectedChanged() {\n    const newValue = this.selected;\n    setTimeout(() => {\n      if (!this.locationHidden && newValue == (this.newPointShown ? 2 : 1)) {\n        this.mapActive = true;\n      } else {\n        this.mapActive = false;\n      }\n\n      const finalTabNumber = this._getTabLength() - 1;\n\n      if (finalTabNumber === 0) {\n        this.hasOnlyOneTab = true;\n      }\n\n      if (newValue == finalTabNumber) {\n        (this.$$(\"#editDialog\") as YpEditDialog).useNextTabAction = false;\n      } else {\n        (this.$$(\"#editDialog\") as YpEditDialog).useNextTabAction = true;\n      }\n\n      if (newValue == 0) {\n        const nameElement = this.$$(\"#name\");\n        if (nameElement) {\n          nameElement.focus();\n        }\n      }\n      if (newValue == 1 && this.newPointShown) {\n        const pointFor = this.$$(\"#pointFor\");\n        if (pointFor) {\n          pointFor.focus();\n        }\n      }\n      setTimeout(() => {\n        this._resizeScrollerIfNeeded();\n      }, 50);\n    }, 50);\n  }\n\n  _selectedCategory(event: CustomEvent) {\n    this.selectedCategoryArrayId = event.detail.index;\n  }\n\n  _selectedCategoryChanged() {\n    if (this.selectedCategoryArrayId && this.group && this.group.Categories)\n      this.selectedCategoryId =\n        this.group.Categories[this.selectedCategoryArrayId].id;\n  }\n\n  get showCategories() {\n    if (this.group && this.group.Categories) {\n      return this.group.Categories.length > 0;\n    }\n    return false;\n  }\n\n  getPositionInArrayFromId(collection: Array<YpCategoryData>, id: number) {\n    for (let i = 0; i < collection.length; i++) {\n      if (collection[i].id == id) {\n        return i;\n      }\n    }\n    return undefined;\n  }\n\n  _postChanged() {\n    if (this.newPost && this.post) {\n      if (this.post.location) {\n        this.location = this.post.location;\n        this.encodedLocation = JSON.stringify(this.location);\n      }\n      if (this.post.cover_media_type)\n        this.selectedCoverMediaType = this.post.cover_media_type;\n    }\n    this._updateEmojiBindings();\n  }\n\n  _updateInitialCategory(group: YpGroupData) {\n    if (group && this.post && this.post.category_id && group.Categories) {\n      this.selectedCategoryId = this.post.category_id;\n      this.selectedCategoryArrayId = this.getPositionInArrayFromId(\n        group.Categories,\n        this.post.category_id\n      );\n    }\n  }\n\n  _imageUploaded(event: CustomEvent) {\n    const image = JSON.parse(event.detail.xhr.response);\n    this.uploadedHeaderImageId = image.id;\n    this.selectedCoverMediaType = \"image\";\n  }\n\n  async _redirectAfterVideo(post: YpPostData) {\n    this.post = post;\n\n    await window.serverApi.completeMediaPost(\"videos\", \"PUT\", this.post.id, {\n      videoId: this.uploadedVideoId,\n      appLanguage: this.language,\n    });\n\n    this._finishRedirect(post);\n\n    setTimeout(() => {\n      window.appGlobals.showSpeechToTextInfoIfNeeded();\n    }, 20);\n  }\n\n  async _redirectAfterAudio(post: YpPostData) {\n    this.post = post;\n\n    await window.serverApi.completeMediaPost(\"audios\", \"PUT\", this.post.id, {\n      audioId: this.uploadedAudioId,\n      appLanguage: this.language,\n    });\n\n    this._finishRedirect(post);\n\n    setTimeout(() => {\n      window.appGlobals.showSpeechToTextInfoIfNeeded();\n    }, 20);\n  }\n\n  get surveyAnswerLocalstorageKey() {\n    return `yp-survey-response-v2-for-${this.group!.id}-${\n      window.appUser.user!.id\n    }`;\n  }\n\n  saveSurveyAnswersToLocalStorage() {\n    localStorage.setItem(\n      this.surveyAnswerLocalstorageKey,\n      JSON.stringify(this.structuredAnswersJson)\n    );\n  }\n\n  async checkSurveyAnswers() {\n    setTimeout(() => {\n      const answersText = localStorage.getItem(\n        this.surveyAnswerLocalstorageKey\n      );\n\n      if (answersText) {\n        const jsonAnswers = JSON.parse(answersText);\n        this.structuredAnswersJson = jsonAnswers;\n        (this.$$(\"#editDialog\") as YpEditDialog)._reallySubmit(false);\n      }\n    }, 10);\n  }\n\n  override customRedirect(post: YpPostData) {\n    if (post) {\n      if (\n        post.newEndorsement &&\n        window.appUser &&\n        window.appUser.endorsementPostsIndex\n      ) {\n        window.appUser.endorsementPostsIndex[post.id] = post.newEndorsement;\n      }\n\n      if (this.saveSurveyAnswers && this.structuredAnswersJson) {\n        this.saveSurveyAnswersToLocalStorage();\n      }\n\n      if (this.uploadedVideoId) {\n        this._redirectAfterVideo(post);\n      } else if (this.uploadedAudioId && this.newPost) {\n        this._redirectAfterAudio(post);\n      } else {\n        this._finishRedirect(post);\n      }\n    } else {\n      console.warn(\"No post found on custom redirect\");\n    }\n  }\n\n  _finishRedirect(post: YpPostData) {\n    this.fire(\"yp-reset-keep-open-for-page\");\n    window.appGlobals.activity(\"completed\", \"newPost\");\n\n    let text = this.t(\"thankYouForYourSubmission\");\n    const customThankYouTextNewPostsId = this.$$(\n      \"#customThankYouTextNewPostsId\"\n    ) as YpMagicText;\n    if (\n      this.group &&\n      this.group.configuration &&\n      this.group.configuration.customThankYouTextNewPosts &&\n      customThankYouTextNewPostsId &&\n      customThankYouTextNewPostsId.content\n    ) {\n      if (customThankYouTextNewPostsId.finalContent) {\n        text = customThankYouTextNewPostsId.finalContent;\n      } else {\n        text = customThankYouTextNewPostsId.content;\n      }\n    }\n\n    /*window.appDialogs.getDialogAsync('mastersnackbar', (snackbar: Snackbar) => {\n      snackbar.textContent = text;\n      snackbar.timeoutMs = 5000;\n      snackbar.open = true;\n    });*/\n\n    if (\n      this.group &&\n      this.group.configuration &&\n      this.group.configuration.allPostsBlockedByDefault\n    ) {\n      // Nothing?\n    } else {\n      YpNavHelpers.redirectTo(\"/post/\" + (post ? post.id : this.post?.id));\n    }\n  }\n\n  clear() {\n    if (this.newPost) {\n      this.post = {\n        name: \"\",\n        description: \"\",\n        pointFor: \"\",\n        categoryId: undefined,\n      } as YpPostData;\n      this.location = undefined;\n      this.selectedCategoryArrayId = undefined;\n      this.selectedCategoryId = undefined;\n      this.selected = 0;\n      this.uploadedHeaderImageId = undefined;\n      this.uploadedVideoId = undefined;\n      this.uploadedAudioId = undefined;\n      this.currentVideoId = undefined;\n      this.currentAudioId = undefined;\n      this.selectedCoverMediaType = \"none\";\n      this.requestUpdate();\n      if (this.$$(\"#imageFileUpload\")) {\n        //(this.$$('#imageFileUpload') as YpFileUpload).clear();\n      }\n    }\n  }\n\n  async setup(\n    post: YpPostData | undefined,\n    newItem: boolean,\n    refreshFunction: Function | undefined,\n    group: YpGroupData,\n    params: any | undefined = undefined\n  ) {\n    if (window.appUser && window.appUser.loggedIn() === true) {\n      this._setupGroup(group);\n      if (newItem) {\n        this.new = true;\n      } else {\n        this.new = false;\n      }\n      if (params) this.params = params;\n      if (typeof this.setupAfterOpen === \"function\") {\n        this.setupAfterOpen({ group: group });\n      }\n      await this.updateComplete;\n      (this.$$(\"#editDialog\") as YpEditDialog).open();\n      await this.updateComplete;\n      if (post) {\n        this.post = post;\n        if (post.PostVideos && post.PostVideos.length > 0) {\n          this.currentVideoId = post.PostVideos[0].id;\n        }\n\n        if (post.PostAudios && post.PostAudios.length > 0) {\n          this.currentAudioId = post.PostAudios[0].id;\n        }\n      } else {\n        this.post = undefined;\n      }\n      this._updateInitialCategory(group);\n      this.newPost = newItem;\n      this.refreshFunction = refreshFunction;\n      this.setupTranslation();\n      this.clear();\n    } else {\n      window.appUser.loginForEdit(this, newItem, params, this.refreshFunction!);\n    }\n  }\n\n  _setupGroup(group: YpGroupData | undefined) {\n    if (group) {\n      this.group = group;\n      if (group.configuration) {\n        if (group.configuration.locationHidden) {\n          if (group.configuration.locationHidden == true) {\n            this.locationHidden = true;\n          } else {\n            this.locationHidden = false;\n          }\n        } else {\n          this.locationHidden = false;\n        }\n        if (group.configuration.postDescriptionLimit) {\n          this.postDescriptionLimit = group.configuration.postDescriptionLimit;\n        } else {\n          this.postDescriptionLimit = 500;\n        }\n\n        if (group.configuration.structuredQuestionsJson) {\n          setTimeout(() => {\n            this.liveQuestionIds = [];\n            this.uniqueIdsToElementIndexes = {};\n            this.liveUniqueIds = [];\n\n            group.configuration.structuredQuestionsJson!.forEach(\n              (question, index) => {\n                if (\n                  question.type.toLowerCase() === \"textfield\" ||\n                  question.type.toLowerCase() === \"textfieldlong\" ||\n                  question.type.toLowerCase() === \"textarea\" ||\n                  question.type.toLowerCase() === \"textarealong\" ||\n                  question.type.toLowerCase() === \"numberfield\" ||\n                  question.type.toLowerCase() === \"checkboxes\" ||\n                  question.type.toLowerCase() === \"radios\" ||\n                  question.type.toLowerCase() === \"dropdown\"\n                ) {\n                  this.liveQuestionIds.push(index);\n                  this.uniqueIdsToElementIndexes[question.uniqueId] = index;\n                  this.liveUniqueIds.push(question.uniqueId);\n                }\n              }\n            );\n          });\n        }\n      } else {\n        this.postDescriptionLimit = 500;\n      }\n\n      setTimeout(() => {\n        if (this.structuredQuestions) {\n          this.postDescriptionLimit = 9999;\n        }\n      }, 50);\n    }\n  }\n\n  get mediaHidden() {\n    if (\n      this.group &&\n      this.group.configuration &&\n      this.group.configuration.hideMediaInput === true\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  override setupAfterOpen(params: YpEditFormParams) {\n    this._setupGroup(params.group);\n    setTimeout(() => {\n      const nameElement = this.$$(\"#name\");\n      if (nameElement) {\n        nameElement.focus();\n      }\n    }, 250);\n\n    if (\n      this.post &&\n      !this.newPost &&\n      this.post.public_data &&\n      this.post.public_data.structuredAnswersJson\n    ) {\n      this.initialStructuredAnswersJson =\n        this.post.public_data.structuredAnswersJson;\n    }\n\n    this.checkSurveyAnswers();\n  }\n\n  _alternativeTextForNewIdeaButtonHeaderTranslation() {\n    setTimeout(() => {\n      const label = this.$$(\n        \"#alternativeTextForNewIdeaButtonHeaderId\"\n      ) as YpMagicText;\n      if (label && label.finalContent) {\n        this.editHeaderText = label.finalContent;\n      }\n    });\n  }\n\n  setupTranslation() {\n    setTimeout(() => {\n      if (this.t) {\n        if (this.newPost) {\n          if (\n            this.group &&\n            this.group.configuration &&\n            this.group.configuration.alternativeTextForNewIdeaButtonHeader\n          ) {\n            const label = this.$$(\n              \"#alternativeTextForNewIdeaButtonHeaderId\"\n            ) as YpMagicText;\n            this.editHeaderText =\n              label && label.finalContent\n                ? label.finalContent\n                : this.group.configuration\n                    .alternativeTextForNewIdeaButtonHeader;\n          } else {\n            this.editHeaderText = this.t(\"post.add_new\");\n          }\n\n          if (\n            this.group &&\n            this.group.configuration &&\n            this.group.configuration.alternativeTextForNewIdeaSaveButton\n          ) {\n            const label = this.$$(\n              \"#alternativeTextForNewIdeaSaveButtonId\"\n            ) as YpMagicText;\n            this.saveText =\n              label && label.finalContent\n                ? label.finalContent\n                : this.group.configuration.alternativeTextForNewIdeaSaveButton;\n          } else {\n            this.saveText = this.t(\"create\");\n          }\n          this.snackbarText = this.t(\"postCreated\");\n        } else {\n          this.saveText = this.t(\"save\");\n          this.editHeaderText = this.t(\"post.edit\");\n          this.snackbarText = this.t(\"postUpdated\");\n        }\n      }\n    }, 20);\n  }\n}\n"]}