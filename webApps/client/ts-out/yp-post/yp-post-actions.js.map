{"version":3,"file":"yp-post-actions.js","sourceRoot":"","sources":["../../src/yp-post/yp-post-actions.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css } from \"lit\";\nimport { customElement, property } from \"lit/decorators.js\";\nimport { YpFormattingHelpers } from \"../common/YpFormattingHelpers.js\";\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\n\nimport \"@material/web/iconbutton/outlined-icon-button.js\";\nimport \"@material/web/iconbutton/filled-tonal-icon-button.js\";\nimport \"@material/web/labs/badge/badge.js\";\n\nimport { ifDefined } from \"lit/directives/if-defined.js\";\nimport { YpNavHelpers } from \"../common/YpNavHelpers.js\";\nimport { MdOutlinedIconButton } from \"@material/web/iconbutton/outlined-icon-button.js\";\n\n@customElement(\"yp-post-actions\")\nexport class YpPostActions extends YpBaseElement {\n  @property({ type: Object })\n  post!: YpPostData;\n\n  @property({ type: String })\n  endorsementButtons = \"hearts\";\n\n  @property({ type: Boolean })\n  headerMode = false;\n\n  @property({ type: Boolean })\n  forceSmall = false;\n\n  @property({ type: Number })\n  endorseValue = 0;\n\n  @property({ type: Boolean })\n  allDisabled = false;\n\n  @property({ type: String })\n  disabledTitle: string | undefined;\n\n  @property({ type: Boolean })\n  floating = false;\n\n  @property({ type: Boolean })\n  votingDisabled = false;\n\n  @property({ type: Boolean })\n  smallerIcons = false;\n\n  @property({ type: Number })\n  maxNumberOfGroupVotes: number | undefined;\n\n  @property({ type: Number })\n  numberOfGroupVotes: number | undefined;\n\n  @property({ type: Boolean })\n  forceShowDebate = false;\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.addGlobalListener(\n      \"yp-got-endorsements-and-qualities\",\n      this._updateEndorsementsFromSignal.bind(this)\n    );\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeGlobalListener(\n      \"yp-got-endorsements-and-qualities\",\n      this._updateEndorsementsFromSignal.bind(this)\n    );\n  }\n\n  override firstUpdated(\n    changedProperties: Map<string | number | symbol, unknown>\n  ) {\n    super.firstUpdated(changedProperties);\n    if (this.endorsementButtons) {\n      this.$$(\"#actionDown\")!.className += \" \" + \"default-buttons-color\";\n      this.$$(\"#actionUp\")!.className += \" \" + \"default-buttons-color\";\n    }\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          display: block;\n        }\n\n        .action-bar {\n          position: absolute;\n        }\n\n        .action-bar[floating] {\n          position: relative;\n        }\n\n        .action-bar-small {\n          margin-top: 8px;\n          position: absolute;\n          width: 100%;\n          bottom: -32px;\n          vertical-align: bottom !important;\n        }\n\n        .action-text {\n          font-size: 16px;\n          text-align: left;\n          vertical-align: bottom;\n          padding-top: 8px;\n          margin-top: 4px;\n        }\n\n        .action-icon {\n        }\n\n        .action-up {\n        }\n\n        .action-down {\n        }\n\n        .default-buttons-color {\n        }\n\n        .default-buttons-up-selected {\n        }\n\n        .default-buttons-down-selected {\n        }\n\n        .hearts-up-selected {\n\n        }\n\n        .hearts-down-selected {\n\n        }\n\n        .action-debate {\n          margin-left: 8px;\n          margin-right: 16px;\n        }\n\n        md-badge {\n          --md-badge-color: var(--md-sys-color-secondary);\n          --md-badge-large-color: var(--md-sys-color-secondary);\n        }\n\n        .debate-text {\n          padding-top: 10px;\n          padding-right: 6px;\n        }\n\n        .down-text {\n          padding-right: 16px;\n          padding-top: 0px;\n          padding-left: 4px;\n          padding-bottom: 7px;\n        }\n\n        .up-text {\n          padding-top: 4px;\n          margin-right: 12px;\n          padding-left: 4px;\n          padding-bottom: 8px;\n        }\n\n        .up-text[rtl] {\n          margin-right: -8px;\n        }\n\n        .down-vote-icon {\n          margin-right: 0px;\n        }\n\n        md-filled-tonal-icon-button.mainIcons {\n          width: 48px;\n          height: 48px;\n        }\n\n        md-filled-tonal-icon-button.debateIcon {\n          width: 46px;\n          height: 46px;\n          margin-top: 2px;\n        }\n\n        md-filled-tonal-icon-button[smaller-icons] {\n          height: 48px;\n          width: 48px;\n        }\n\n        .debate-icon {\n        }\n\n        .up-vote-icon {\n          margin-left: 8px;\n        }\n\n        @media (max-width: 320px) {\n          :host {\n            width: 250px;\n          }\n        }\n\n        .shareButtonContainer {\n          position: absolute;\n          bottom: 55px;\n          right: -32px;\n          padding: 0;\n          margin: 0;\n          margin-bottom: 8px;\n        }\n\n        .shareButton {\n          padding: 2px;\n        }\n\n        .shareShare {\n          padding: 0;\n          margin: 0;\n        }\n\n        @media screen and (-ms-high-contrast: active),\n          (-ms-high-contrast: none) {\n          .action-debate {\n            display: none;\n          }\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        div[rtl] {\n          direction: rtl;\n        }\n\n        action-up[only-up-vote-showing] {\n          margin-right: -16px;\n        }\n      `,\n    ];\n  }\n\n  override render() {\n    return html`\n      <div\n        ?rtl=\"${this.rtl}\"\n        title=\"${ifDefined(this.disabledTitle)}\"\n        floating=\"${this.floating}\"\n        class=\"action-bar layout horizontal center-center\"\n      >\n        <div\n          id=\"actionUp\"\n          ?only-up-vote-showing=\"${this.onlyUpVoteShowing}\"\n          class=\"action-up layout horizontal layout start justified\"\n        >\n          <md-icon-button toggle ?selected=\"${this.isEndorsed}\"\n            id=\"iconUpButton\"\n            .smaller-icons=\"${this.smallerIcons}\"\n            ?disabled=\"${this.votingStateDisabled}\"\n            .title=\"${this.customVoteUpHoverText}\"\n            class=\"action-icon up-vote-icon largeButton\"\n            @click=\"${this.upVote}\"\n            ><md-icon slot=\"selected\">${this.endorseModeIcon(this.endorsementButtons, \"up\")}</md-icon><md-icon id=\"actionUpIcon\"\n              >${this.endorseModeIcon(this.endorsementButtons, \"up\")}</md-icon\n            ></md-icon-button\n          >\n          <div\n            ?rtl=\"${this.rtl}\"\n            class=\"action-text up-text\"\n            ?hidden=\"${this.post.Group.configuration.hideVoteCount}\"\n          >\n            ${YpFormattingHelpers.number(this.post.counter_endorsements_up)}\n          </div>\n        </div>\n\n        <div\n          class=\"action-debate layout horizontal\"\n          ?hidden=\"${this.hideDebate ||\n          (this.headerMode && !this.post.Group.configuration.hideAllTabs)}\"\n        >\n          <md-icon>chat_bubble_outline</md-icon>\n          <md-badge\n            .value=\"${YpFormattingHelpers.number(this.post.counter_points)}\"\n          ></md-badge>\n        </div>\n\n        <div\n          id=\"actionDown\"\n          class=\"action-down layout horizontal layout center justified\"\n          ?hidden=\"${this.post.Group.configuration.hideDownVoteForPost}\"\n        >\n          <md-icon-button toggle ?selected=\"${this.isOpposed}\"\n            smaller-icons=\"${this.smallerIcons}\"\n            ?disabled=\"${this.votingStateDisabled}\"\n            title=\"${this.customVoteDownHoverText}\"\n            class=\"action-icon down-vote-icon mainIcons\"\n            @click=\"${this.downVote}\"\n            ><md-icon slot=\"selected\">${this.endorseModeIconDown}</md-icon><md-icon>${this.endorseModeIconDown}</md-icon></md-icon-button\n          >\n          <div\n            class=\"action-text down-text\"\n            ?hidden=\"${this.post.Group.configuration.hideVoteCount}\"\n          >\n            ${YpFormattingHelpers.number(this.post.counter_endorsements_down)}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  get isEndorsed() {\n    return this.endorseValue > 0;\n  }\n\n  get isOpposed() {\n    return this.endorseValue < 0;\n  }\n\n  get votingStateDisabled() {\n    if (this.allDisabled) {\n      return true;\n    } else if (\n      !this.isEndorsed &&\n      this.maxNumberOfGroupVotes &&\n      this.numberOfGroupVotes\n    ) {\n      return this.maxNumberOfGroupVotes <= this.numberOfGroupVotes;\n    } else {\n      return false;\n    }\n  }\n\n  get onlyUpVoteShowing() {\n    if (this.post && this.post.Group && this.post.Group.configuration) {\n      return (\n        this.post.Group.configuration.hideDownVoteForPost &&\n        this.post.Group.configuration.hideDebateIcon\n      );\n    } else {\n      return false;\n    }\n  }\n\n  get endorseModeIconUp() {\n    return this.endorseModeIcon(this.endorsementButtons, \"up\");\n  }\n\n  get endorseModeIconDown() {\n    return this.endorseModeIcon(this.endorsementButtons, \"down\");\n  }\n\n  get customVoteUpHoverText() {\n    if (\n      this.post &&\n      this.post.Group &&\n      this.post.Group.configuration &&\n      this.post.Group.configuration.customVoteUpHoverText\n    ) {\n      return this.post.Group.configuration.customVoteUpHoverText;\n    } else {\n      return this.t(\"post.up_vote\");\n    }\n  }\n\n  get customVoteDownHoverText() {\n    if (\n      this.post &&\n      this.post.Group &&\n      this.post.Group.configuration &&\n      this.post.Group.configuration.customVoteDownHoverText\n    ) {\n      return this.post.Group.configuration.customVoteDownHoverText;\n    } else {\n      return this.t(\"post.down_vote\");\n    }\n  }\n\n  _goToPostIfNotHeader() {\n    if (!this.headerMode) {\n      YpNavHelpers.goToPost(this.post.id);\n    }\n  }\n\n  get hideDebate() {\n    return (\n      !this.forceShowDebate &&\n      (!this.wide ||\n        this.forceSmall ||\n        this.headerMode ||\n        (this.post &&\n          this.post.Group &&\n          this.post.Group.configuration &&\n          this.post.Group.configuration.hideDebateIcon))\n    );\n  }\n\n  override async updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    // TODO: Test this well is it working as expected\n    if (changedProperties.has(\"post\") && this.post) {\n      await this.updateComplete;\n      YpFormattingHelpers.removeClass(\n        this.$$(\"#actionUp\"),\n        \"hearts-up-selected\"\n      );\n      YpFormattingHelpers.removeClass(\n        this.$$(\"#actionDown\"),\n        \"hearts-down-selected\"\n      );\n      YpFormattingHelpers.removeClass(\n        this.$$(\"#actionUp\"),\n        \"default-buttons-up-selected\"\n      );\n      YpFormattingHelpers.removeClass(\n        this.$$(\"#actionDown\"),\n        \"default-buttons-down-selected\"\n      );\n      this.endorseValue = 0;\n\n      if (\n        this.post.Group.configuration &&\n        this.post.Group.configuration.canVote != undefined &&\n        this.post.Group.configuration.canVote == false\n      ) {\n        this.votingDisabled = true;\n        this.allDisabled = true;\n        this.disabledTitle = this.t(\"votingDisabled\");\n      } else {\n        this.votingDisabled = false;\n        this.allDisabled = false;\n      }\n      if (\n        this.post.Group.configuration &&\n        this.post.Group.configuration.endorsementButtons != undefined\n      ) {\n        this.endorsementButtons =\n          this.post.Group.configuration.endorsementButtons;\n      } else {\n        this.endorsementButtons = \"hearts\";\n      }\n\n      if (this.post.Group.configuration) {\n        this.post.Group.configuration.originalHideVoteCount =\n          this.post.Group.configuration.hideVoteCount;\n        if (this.post.Group.configuration.hideVoteCountUntilVoteCompleted) {\n          this.post.Group.configuration.hideVoteCount = true;\n          this.requestUpdate();\n        }\n      }\n\n      if (this.post.Group.configuration.maxNumberOfGroupVotes) {\n        this.maxNumberOfGroupVotes =\n          this.post.Group.configuration.maxNumberOfGroupVotes;\n        this.numberOfGroupVotes =\n          window.appUser.groupCurrentVoteCountIndex[this.post.Group.id];\n      } else {\n        this.maxNumberOfGroupVotes = undefined;\n        this.numberOfGroupVotes = undefined;\n      }\n\n      this._updateEndorsements();\n    }\n  }\n\n  _updateEndorsementsFromSignal(event: CustomEvent) {\n    if (this.post) {\n      this._updateEndorsements(event);\n    }\n  }\n\n  _updateEndorsements(event: CustomEvent | undefined = undefined) {\n    if (\n      window.appUser &&\n      window.appUser.loggedIn() &&\n      window.appUser.user &&\n      window.appUser.user.Endorsements\n    ) {\n      const thisPostsEndorsement =\n        window.appUser.endorsementPostsIndex[this.post.id];\n      if (thisPostsEndorsement)\n        this._setEndorsement(thisPostsEndorsement.value);\n      else this._setEndorsement(0);\n\n      if (\n        event &&\n        event.detail &&\n        event.detail.maxGroupId === this.post.Group.id\n      ) {\n        this.numberOfGroupVotes = event.detail.groupCurrentVoteCount;\n      }\n    }\n  }\n\n  endorseModeIcon(endorsementButtons: string, upDown: string) {\n    if (endorsementButtons != \"hearts\" && endorsementButtons != \"hats\") {\n      this.smallerIcons = true;\n    } else {\n      this.smallerIcons = false;\n    }\n    if (endorsementButtons == \"thumbs\" && upDown == \"up\") {\n      return \"thumb_up\";\n    } else if (endorsementButtons == \"thumbs\" && upDown == \"down\") {\n      return \"thumb_down\";\n    } else if (endorsementButtons == \"hearts\" && upDown == \"up\") {\n      return \"favorite\";\n    } else if (endorsementButtons == \"hearts\" && upDown == \"down\") {\n      return \"do_not_disturb\";\n    } else if (endorsementButtons == \"hats\" && upDown == \"up\") {\n      return \"keyboard_arrow_up\";\n    } else if (endorsementButtons == \"hats\" && upDown == \"down\") {\n      return \"keyboard_arrow_down\";\n    } else if (endorsementButtons == \"arrows\" && upDown == \"up\") {\n      return \"arrow_upward\";\n    } else if (endorsementButtons == \"arrows\" && upDown == \"down\") {\n      return \"arrow_downward\";\n    }\n    return undefined;\n  }\n\n  _setEndorsement(value: number) {\n    this.endorseValue = value;\n\n    if (\n      value !== 0 &&\n      this.post.Group.configuration &&\n      this.post.Group.configuration.hideVoteCount &&\n      !this.post.Group.configuration.originalHideVoteCount\n    ) {\n      this.post.Group.configuration.hideVoteCount = false;\n    }\n\n    if (this.endorsementButtons == \"hearts\") {\n      if (value > 0) {\n        this.$$(\"#actionUp\")!.className += \" \" + \"hearts-up-selected\";\n        YpFormattingHelpers.removeClass(\n          this.$$(\"#actionDown\"),\n          \"hearts-down-selected\"\n        );\n        (this.$$(\"#iconUpButton\") as MdOutlinedIconButton).innerHTML =\n          \"<md-icon>favorite</md-icon>\";\n      } else if (value < 0) {\n        this.$$(\"#actionDown\")!.className += \" \" + \"hearts-down-selected\";\n        YpFormattingHelpers.removeClass(\n          this.$$(\"#actionUp\"),\n          \"hearts-up-selected\"\n        );\n        (this.$$(\"#iconUpButton\") as MdOutlinedIconButton).innerHTML =\n          \"<md-icon>favorite</md-icon>\";\n      } else {\n        YpFormattingHelpers.removeClass(\n          this.$$(\"#actionUp\"),\n          \"hearts-up-selected\"\n        );\n        YpFormattingHelpers.removeClass(\n          this.$$(\"#actionDown\"),\n          \"hearts-down-selected\"\n        );\n        (this.$$(\"#iconUpButton\") as MdOutlinedIconButton).innerHTML =\n          \"<md-icon>favorite</md-icon>\";\n      }\n    } else {\n      if (value > 0) {\n        this.$$(\"#actionUp\")!.className += \" \" + \"default-buttons-up-selected\";\n        YpFormattingHelpers.removeClass(\n          this.$$(\"#actionDown\"),\n          \"default-buttons-down-selected\"\n        );\n      } else if (value < 0) {\n        this.$$(\"#actionDown\")!.className +=\n          \" \" + \"default-buttons-down-selected\";\n        YpFormattingHelpers.removeClass(\n          this.$$(\"#actionUp\"),\n          \"default-buttons-up-selected\"\n        );\n      } else {\n        YpFormattingHelpers.removeClass(\n          this.$$(\"#actionUp\"),\n          \"default-buttons-up-selected\"\n        );\n        YpFormattingHelpers.removeClass(\n          this.$$(\"#actionDown\"),\n          \"default-buttons-down-selected\"\n        );\n      }\n    }\n\n    this.requestUpdate();\n  }\n\n  _enableVoting() {\n    if (!this.votingDisabled) {\n      this.allDisabled = false;\n    }\n  }\n\n  generateEndorsementFromLogin(value: number) {\n    if (!window.appUser.endorsementPostsIndex[this.post.id]) {\n      this.generateEndorsement(value);\n    }\n  }\n\n  async generateEndorsement(value: number) {\n    if (window.appUser.loggedIn() === true) {\n      let method: string;\n\n      if (this.endorseValue === value) {\n        method = \"DELETE\";\n      } else {\n        method = \"POST\";\n      }\n\n      const endorseResponse = (await window.serverApi.endorsePost(\n        this.post.id,\n        method,\n        { post_id: this.post.id, value: value }\n      )) as YpEndorseResponse | void;\n\n      if (endorseResponse) {\n        this._enableVoting();\n        const endorsement = endorseResponse.endorsement;\n        const oldEndorsementValue = endorseResponse.oldEndorsementValue;\n        window.appUser.updateEndorsementForPost(\n          this.post.id,\n          endorsement,\n          this.post.Group\n        );\n        this._setEndorsement(endorsement.value);\n        if (oldEndorsementValue) {\n          if (oldEndorsementValue > 0)\n            this.post.counter_endorsements_up =\n              this.post.counter_endorsements_up - 1;\n          else if (oldEndorsementValue < 0)\n            this.post.counter_endorsements_down =\n              this.post.counter_endorsements_down - 1;\n        }\n        if (endorsement.value > 0)\n          this.post.counter_endorsements_up =\n            this.post.counter_endorsements_up + 1;\n        else if (endorsement.value < 0)\n          this.post.counter_endorsements_down =\n            this.post.counter_endorsements_down + 1;\n      }\n    } else {\n      this._enableVoting();\n      window.appUser.loginForEndorse(this, { value: value });\n    }\n  }\n\n  upVote() {\n    this.allDisabled = true;\n    this.generateEndorsement(1);\n    window.appGlobals.activity(\n      \"clicked\",\n      \"endorse_up\",\n      this.post ? this.post.id : -1\n    );\n    this._setVoteHidingStatus();\n  }\n\n  downVote() {\n    this.allDisabled = true;\n    this.generateEndorsement(-1);\n    window.appGlobals.activity(\n      \"clicked\",\n      \"endorse_down\",\n      this.post ? this.post.id : -1\n    );\n    this._setVoteHidingStatus();\n  }\n\n  _setVoteHidingStatus() {\n    if (\n      this.post.Group.configuration &&\n      this.post.Group.configuration.hideVoteCountUntilVoteCompleted &&\n      !this.post.Group.configuration.originalHideVoteCount\n    ) {\n      this.post.Group.configuration.hideVoteCount = false;\n      this.requestUpdate();\n    }\n  }\n}\n"]}