{"version":3,"file":"yp-promotion-app.js","sourceRoot":"","sources":["../../src/analytics-and-promotion/yp-promotion-app.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\nimport { ShadowStyles } from \"../common/ShadowStyles.js\";\n\nimport { YpAppGlobals } from \"../yp-app/YpAppGlobals.js\";\nimport { YpAppUser } from \"../yp-app/YpAppUser.js\";\nimport { YpServerApi } from \"../common/YpServerApi.js\";\nimport { YpServerApiAdmin } from \"../common/YpServerApiAdmin.js\";\n\nimport { YpAccessHelpers } from \"../common/YpAccessHelpers.js\";\nimport { classMap } from \"lit/directives/class-map.js\";\n\nimport \"@material/web/labs/navigationbar/navigation-bar.js\";\nimport \"@material/web/labs/navigationtab/navigation-tab.js\";\nimport \"@material/web/iconbutton/filled-icon-button.js\";\nimport \"@material/web/labs/navigationdrawer/navigation-drawer.js\";\nimport \"@material/web/list/list-item.js\";\nimport \"@material/web/list/list.js\";\nimport \"@material/web/iconbutton/outlined-icon-button.js\";\nimport \"@material/web/iconbutton/icon-button.js\";\n\n\nimport {\n  argbFromHex,\n  themeFromSourceColor,\n  applyTheme,\n} from \"@material/material-color-utilities\";\n\nimport \"@material/web/menu/menu.js\";\nimport \"./yp-analytics/yp-promotion-dashboard.js\";\nimport { cache } from \"lit/directives/cache.js\";\n\nimport \"./yp-promotion/yp-campaign-manager.js\";\nimport { YpCollectionHelpers } from \"../common/YpCollectionHelpers.js\";\nimport { ifDefined } from \"lit/directives/if-defined.js\";\n\nimport \"../common/yp-image.js\";\nimport { YpBaseElementWithLogin } from \"../common/yp-base-element-with-login.js\";\nimport { Dialog } from \"@material/web/dialog/internal/dialog.js\";\n\nconst PagesTypes = {\n  Analytics: 1,\n  Campaign: 2,\n  EmailLists: 3,\n  AiAnalysis: 4,\n  Settings: 5,\n};\n\n@customElement(\"yp-promotion-app\")\nexport class YpPromotionApp extends YpBaseElementWithLogin {\n  @property({ type: String })\n  collectionType: string;\n\n  @property({ type: Number })\n  collectionId: number | string;\n\n  @property({ type: String })\n  collectionAction: string = \"config\";\n\n  @property({ type: String })\n  page: string | undefined;\n\n  @property({ type: Number })\n  pageIndex = 1;\n\n  @property({ type: Object })\n  collection: YpCollectionData | undefined;\n\n  @property({ type: String })\n  currentError: string | undefined;\n\n  @property({ type: Boolean })\n  adminConfirmed = false;\n\n  @property({ type: Boolean })\n  haveCheckedAdminRights = false;\n\n  @property({ type: Boolean })\n  haveCheckedPromoterRights = false;\n\n  @property({ type: Boolean, reflect: true })\n  active!: boolean;\n\n  @property({ type: String })\n  lastSnackbarText: string | undefined;\n\n  @property({ type: String })\n  useCommunityId: string | number | undefined;\n\n  originalCollectionType: string | undefined;\n\n  collectionURL: string | undefined;\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          width: 100vw;\n          height: 100vh;\n          background-color: var(--md-sys-color-surface, #fefefe);\n        }\n        .backContainer {\n          margin-top: 16px;\n          margin-left: 16px;\n        }\n        body {\n          background-color: var(--md-sys-color-surface, #fefefe);\n        }\n\n        .navContainer {\n          position: fixed;\n          bottom: 0;\n          left: 0;\n          width: 100%;\n          z-index: 7;\n        }\n\n        .headerContainer {\n          width: 100%;\n          margin-bottom: 8px;\n          vertical-align: middle;\n        }\n\n        .analyticsHeaderText {\n          font-size: var(--md-sys-typescale-headline-large-size, 18px);\n          margin-top: 16px;\n          margin-bottom: 16px;\n        }\n\n        .ypLogo {\n          margin-top: 16px;\n        }\n\n        .rightPanel {\n          margin-left: 16px;\n          width: 100%;\n        }\n\n        .loadingText {\n          margin-top: 48px;\n        }\n\n        .collectionName {\n          color: var(--md-sys-color-on-surface);\n        }\n\n        .selectedContainer {\n          --md-list-list-item-container-color: var(\n            --md-sys-color-secondary-container\n          );\n          color: var(--md-sys-color-on-secondary-container);\n          --md-list-list-item-label-text-color: var(\n            --md-sys-color-on-secondary-container\n          );\n        }\n\n        .topAppBar {\n          border-radius: 48px;\n          background-color: var(--md-sys-color-primary-container);\n          color: var(--md-sys-color-on-primary-container);\n          margin-top: 32px;\n          padding: 0px;\n          padding-left: 32px;\n          padding-right: 32px;\n          text-align: center;\n        }\n\n        .collectionLogoImage {\n          width: 120px;\n          height: 68px;\n          margin-right: 16px;\n          margin-left: 16px;\n        }\n\n        .mainPageContainer {\n          margin-top: 16px;\n          max-width: 1100px;\n          width: 1100px;\n        }\n\n        yp-promotion-dashboard {\n          max-width: 1100px;\n        }\n\n        @media (max-width: 1100px) {\n          .mainPageContainer {\n            max-width: 100%;\n            width: 100%;\n            margin-bottom: 96px;\n          }\n\n          yp-promotion-dashboard {\n            max-width: 100%;\n          }\n        }\n      `,\n    ];\n  }\n\n  constructor() {\n    super();\n\n    let pathname = window.location.pathname;\n    if (pathname.endsWith(\"/\"))\n      pathname = pathname.substring(0, pathname.length - 1);\n    const split = pathname.split(\"/\");\n    this.collectionType = split[split.length - 2];\n\n    this.originalCollectionType = this.collectionType;\n\n    this.collectionId = split[split.length - 1];\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this._setupEventListeners();\n    window.appUser.recheckAdminRights();\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this._removeEventListeners();\n  }\n\n  async _getCollection() {\n    const collection = (await window.serverApi.getCollection(\n      this.collectionType,\n      this.collectionId as number\n    )) as YpCollectionData | YpGroupResults;\n    if (this.collectionType == \"group\") {\n      this.collection = (collection as YpGroupResults).group;\n    } else if (this.collectionType == \"community\") {\n      if (\n        (collection as YpCommunityData).configuration.useCommunityIdForAnalytics &&\n        (collection as YpCommunityData).configuration.communityId\n      ) {\n        this.useCommunityId = (\n          collection as YpCommunityData\n        ).configuration.communityId;\n      } else {\n        this.useCommunityId = undefined;\n      }\n      this.collection = collection as YpCollectionData;\n    } else {\n      this.collection = collection as YpCollectionData;\n    }\n    await this.updateComplete;\n    this._setAdminConfirmed();\n  }\n\n  renderTopBar() {\n    return html`\n      <div class=\"layout vertical center-center\">\n        <div class=\"layout horizontal topAppBar\">\n          <div class=\"layout horizontal headerContainer\">\n            <div class=\"analyticsHeaderText layout horizontal center-center\">\n              <div>\n                <img\n                  class=\"collectionLogoImage\"\n                  src=\"${ifDefined(\n                    YpCollectionHelpers.logoImagePath(\n                      this.collectionType,\n                      this.collection!\n                    )\n                  )}\"\n                />\n              </div>\n              <div></div>\n              ${this.collection ? this.collection.name : \"\"}\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  snackbarclosed() {\n    this.lastSnackbarText = undefined;\n  }\n\n  override render() {\n    return html`\n      <md-dialog id=\"errorDialog\">\n        <div slot=\"heading\">${this.t(\"error\")}</div>\n        <div>${this.currentError}</div>\n        <md-text-button dialogAction=\"cancel\" slot=\"secondaryAction\">\n          ${this.t(\"ok\")}\n        </md-text-button>\n      </md-dialog>\n      ${this.collection\n        ? html`\n            <div class=\"layout horizontal\">\n              ${this.renderNavigationBar()}\n              <div class=\"rightPanel\">\n                <main>\n                  <div class=\"mainPageContainer\">${this._renderPage()}</div>\n                </main>\n              </div>\n            </div>\n          `\n        : html`\n            <div class=\"layout horizontal center-center loadingText\">\n              <div>${this.t(\"Loading...\")}</div>\n            </div>\n          `}\n    `;\n  }\n\n  renderNavigationBar() {\n    if (this.wide) {\n      return html`\n        <div class=\"layout vertical\">\n          <div class=\"layout horizontal backContainer\">\n            <md-icon-button @click=\"${this.exitToMainApp}\">\n              <md-icon>close</md-icon>\n            </md-icon-button>\n          </div>\n          <div class=\"layout horizontal headerContainer\">\n            <div class=\"analyticsHeaderText layout horizontal center-center\">\n              <div>\n                <yp-image\n                  class=\"collectionLogoImage\"\n                  sizing=\"contain\"\n                  .src=\"${YpCollectionHelpers.logoImagePath(\n                    this.collectionType,\n                    this.collection!\n                  )}\"\n                ></yp-image>\n              </div>\n              <div class=\"collectionName\">\n                ${this.collection ? this.collection.name : \"\"}\n              </div>\n            </div>\n          </div>\n\n          <md-list>\n            <md-list-item\n              class=\"${this.pageIndex == 1 && \"selectedContainer\"}\"\n              @click=\"${() => (this.pageIndex = 1)}\"\n              type=\"button\"\n            >\n              <div slot=\"headline\">${this.t(\"Analytics\")}</div>\n              <div slot=\"supporting-text\">\n                ${this.t(\"Historical and realtime\")}\n              </div>\n              <md-icon slot=\"start\">\n                <md-icon>insights</md-icon>\n              </md-icon></md-list-item\n            >\n            <md-list-item\n              class=\"${this.pageIndex == 2 && \"selectedContainer\"}\"\n              @click=\"${() => (this.pageIndex = 2)}\"\n              type=\"button\"\n            >\n              <div slot=\"headline\">${this.t(\"Promotion\")}</div>\n              <div slot=\"supporting-text\">\n                ${this.collectionType == \"post\"\n                  ? this.t(\"Promote your idea\")\n                  : this.t(\"Promote your community\")}\n              </div>\n              <md-icon slot=\"start\"\n                ><md-icon>ads_click</md-icon></md-icon\n              ></md-list-item\n            >\n            <md-list-item\n              class=\"${this.pageIndex == 3 && \"selectedContainer\"}\"\n              @click=\"${() => (this.pageIndex = 3)}\"\n              ?hidden=\"${true || this.collectionType == \"post\"}\"\n              type=\"button\"\n            >\n              <div slot=\"headline\">${this.t(\"Email Lists\")}</div>\n              <div slot=\"supporting-text\">\n                ${this.t(\"Send promotional emails\")}\n              </div>\n              <md-icon slot=\"start\"\n                ><md-icon\n                  ><span class=\"material-symbols-outlined\"\n                    >schedule_send</span\n                  ></md-icon\n                ></md-icon\n              ></md-list-item\n            >\n          </md-list>\n        </div>\n      `;\n    } else {\n      return html`\n        <div class=\"navContainer\">\n          <md-navigation-bar @navigation-bar-activated=\"${this.tabChanged}\">\n            <md-navigation-tab .label=\"${this.t(\"Analytics\")}\"\n              ><md-icon slot=\"activeIcon\">insights</md-icon>\n              <md-icon slot=\"inactiveIcon\">insights</md-icon></md-navigation-tab\n            >\n            <md-navigation-tab .label=\"${this.t(\"Promotion\")}\">\n              <md-icon slot=\"activeIcon\">ads_click</md-icon>\n              <md-icon slot=\"inactiveIcon\">ads_click</md-icon>\n            </md-navigation-tab>\n            <md-navigation-tab .label=\"${this.t(\"Settings\")}\">\n              <md-icon slot=\"activeIcon\">settings</md-icon>\n              <md-icon slot=\"inactiveIcon\">settings</md-icon>\n            </md-navigation-tab>\n          </md-navigation-bar>\n        </div>\n      `;\n    }\n  }\n\n  tabChanged(event: CustomEvent) {\n    if (event.detail.activeIndex == 0) {\n      this.pageIndex = 1;\n    } else if (event.detail.activeIndex == 1) {\n      this.pageIndex = 2;\n    } else if (event.detail.activeIndex == 2) {\n      this.pageIndex = 5;\n    }\n  }\n\n  exitToMainApp() {\n    window.location.href = `/${this.originalCollectionType}/${this.collectionId}`;\n  }\n\n  _setupEventListeners() {\n    this.addListener(\"exit-to-app\", this.exitToMainApp);\n    this.addGlobalListener(\n      \"yp-got-admin-rights\",\n      this._gotAdminRights.bind(this)\n    );\n    this.addGlobalListener(\n      \"yp-got-promoter-rights\",\n      this._gotPromoterRights.bind(this)\n    );\n  }\n\n  _removeEventListeners() {\n    this.removeGlobalListener(\n      \"yp-got-admin-rights\",\n      this._gotAdminRights.bind(this)\n    );\n    this.removeGlobalListener(\n      \"yp-got-promoter-rights\",\n      this._gotPromoterRights.bind(this)\n    );\n  }\n\n  _gotAdminRights(event: CustomEvent) {\n    this.haveCheckedAdminRights = true;\n  }\n\n  _gotPromoterRights(event: CustomEvent) {\n    this.haveCheckedPromoterRights = true;\n  }\n\n  _setAdminConfirmed() {\n    if (this.collection) {\n      switch (this.collectionType) {\n        case \"domain\":\n          this.adminConfirmed = YpAccessHelpers.checkDomainAccess(\n            this.collection as YpDomainData\n          );\n          break;\n        case \"community\":\n          this.adminConfirmed = YpAccessHelpers.checkCommunityAccess(\n            this.collection as YpCommunityData\n          );\n          break;\n        case \"group\":\n          this.adminConfirmed = YpAccessHelpers.checkGroupAccess(\n            this.collection as YpGroupData\n          );\n          break;\n        case \"post\":\n          this.adminConfirmed = YpAccessHelpers.checkPostAccess(\n            this.collection as unknown as YpPostData\n          );\n          break;\n      }\n    }\n\n    if (!this.adminConfirmed) {\n      switch (this.collectionType) {\n        case \"community\":\n          this.adminConfirmed = YpAccessHelpers.checkCommunityPromoterAccess(\n            this.collection as YpCommunityData\n          );\n          break;\n        case \"group\":\n          this.adminConfirmed = YpAccessHelpers.checkGroupPromoterAccess(\n            this.collection as YpGroupData\n          );\n          break;\n      }\n    }\n\n    if (!this.adminConfirmed) {\n      this.fire(\"yp-network-error\", { message: this.t(\"unauthorized\") });\n    }\n  }\n\n  override updated(\n    changedProperties: Map<string | number | symbol, unknown>\n  ): void {\n    super.updated(changedProperties);\n\n    if (\n      (changedProperties.has(\"loggedInUser\") ||\n        changedProperties.has(\"haveCheckedAdminRights\") ||\n        changedProperties.has(\"haveCheckedPromoterRights\")) &&\n      this.loggedInUser &&\n      this.haveCheckedAdminRights === true &&\n      this.haveCheckedPromoterRights == true\n    ) {\n      this._getCollection();\n    }\n  }\n\n  _appError(event: CustomEvent) {\n    let error = event.detail.message;\n    if (event.detail && event.detail.response) {\n      error = event.detail.response.statusText;\n    }\n    console.error(error);\n    this.currentError = error;\n    (this.$$(\"#errorDialog\") as Dialog).open = true;\n  }\n\n  _renderPage() {\n    console.error(`admin confirmed: ${this.adminConfirmed}`);\n    if (this.adminConfirmed) {\n      console.error(this.pageIndex);\n      switch (this.pageIndex) {\n        case PagesTypes.Analytics:\n          switch (this.collectionType) {\n            case \"domain\":\n            case \"community\":\n            case \"group\":\n            case \"post\":\n              return html`\n                ${cache(\n                  this.collection\n                    ? html`<yp-promotion-dashboard\n                        .collectionType=\"${this.collectionType}\"\n                        .collection=\"${this.collection}\"\n                        .collectionId=\"${this.collectionId}\"\n                        .useCommunityId=\"${this.useCommunityId}\"\n                      >\n                      </yp-promotion-dashboard>`\n                    : nothing\n                )}\n              `;\n            default:\n              return html`<p>\n                Page not found try going to <a href=\"#main\">Main</a>\n              </p>`;\n          }\n        case PagesTypes.Campaign:\n          return html`\n            ${cache(\n              this.collection\n                ? html`<yp-campaign-manager\n                    .collectionType=\"${this.collectionType}\"\n                    .collection=\"${this.collection}\"\n                    .collectionId=\"${this.collectionId}\"\n                  >\n                  </yp-campaign-manager>`\n                : nothing\n            )}\n          `;\n        case PagesTypes.AiAnalysis:\n          return html`\n            ${cache(\n              this.collection\n                ? html`<yp-ai-text-analysis\n                    .collectionType=\"${this.collectionType}\"\n                    .collection=\"${this.collection}\"\n                    .collectionId=\"${this.collectionId}\"\n                  >\n                  </yp-ai-text-analysis>`\n                : nothing\n            )}\n          `;\n        case PagesTypes.EmailLists:\n          return html`\n            ${cache(\n              this.collection\n                ? html`<yp-email-lists\n                    .collectionType=\"${this.collectionType}\"\n                    .collection=\"${this.collection}\"\n                    .collectionId=\"${this.collectionId}\"\n                  >\n                  </yp-email-lists>`\n                : nothing\n            )}\n          `;\n        case PagesTypes.Settings:\n          return html`\n            ${cache(\n              this.collection\n                ? html`<yp-promotion-settings\n                    .collectionType=\"${this.collectionType}\"\n                    .collection=\"${this.collection}\"\n                    .collectionId=\"${this.collectionId}\"\n                    @color-changed=\"${this._settingsColorChanged}\"\n                  >\n                  </yp-promotion-settings>`\n                : nothing\n            )}\n          `;\n        default:\n          return html`\n            <p>Page not found try going to <a href=\"#main\">Main</a></p>\n          `;\n      }\n    } else {\n      return nothing;\n    }\n  }\n\n  _settingsColorChanged(event: CustomEvent) {\n    this.fireGlobal(\"yp-theme-color\", event.detail.value);\n  }\n}\n"]}