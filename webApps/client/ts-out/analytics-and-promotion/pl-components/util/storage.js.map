{"version":3,"file":"storage.js","sourceRoot":"","sources":["../../../../src/analytics-and-promotion/pl-components/util/storage.ts"],"names":[],"mappings":"AAKA,MAAM,QAAQ,GAAa,EAAE,CAAC;AAE9B,SAAS,4BAA4B;IACnC,IAAI,CAAC;QACH,MAAM,QAAQ,GAAG,MAAM,CAAC;QACxB,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QACzC,YAAY,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QAClC,OAAO,IAAI,CAAC;IACd,CAAC;IAAC,OAAO,CAAC,EAAE,CAAC;QACX,OAAO,KAAK,CAAC;IACf,CAAC;AACH,CAAC;AAED,MAAM,uBAAuB,GAAG,4BAA4B,EAAE,CAAC;AAE/D,MAAM,UAAU,OAAO,CAAC,GAAW,EAAE,KAAa;IAChD,IAAI,uBAAuB,EAAE,CAAC;QAC5B,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAC1C,CAAC;SAAM,CAAC;QACN,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;IACxB,CAAC;AACH,CAAC;AAED,MAAM,UAAU,OAAO,CAAC,GAAW;IACjC,IAAI,uBAAuB,EAAE,CAAC;QAC5B,OAAO,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC1C,CAAC;SAAM,CAAC;QACN,OAAO,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC;IAC/B,CAAC;AACH,CAAC","sourcesContent":["// Type for the in-memory storage\ninterface MemStore {\n  [key: string]: string | undefined;\n}\n\nconst memStore: MemStore = {};\n\nfunction testLocalStorageAvailability(): boolean {\n  try {\n    const testItem = 'test';\n    localStorage.setItem(testItem, testItem);\n    localStorage.removeItem(testItem);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst isLocalStorageAvailable = testLocalStorageAvailability();\n\nexport function setItem(key: string, value: string): void {\n  if (isLocalStorageAvailable) {\n    window.localStorage.setItem(key, value);\n  } else {\n    memStore[key] = value;\n  }\n}\n\nexport function getItem(key: string): string | null {\n  if (isLocalStorageAvailable) {\n    return window.localStorage.getItem(key);\n  } else {\n    return memStore[key] ?? null;\n  }\n}\n"]}