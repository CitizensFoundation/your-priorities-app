{"version":3,"file":"yp-user-edit.js","sourceRoot":"","sources":["../../src/yp-user/yp-user-edit.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport \"@material/web/button/text-button.js\";\nimport \"@material/web/textfield/outlined-text-field.js\";\n\nimport \"../ac-notifications/ac-notification-settings.js\";\nimport \"../yp-file-upload/yp-file-upload.js\";\nimport \"../common/languages/yp-language-selector.js\";\n\nimport { YpEditBase } from \"../common/yp-edit-base.js\";\nimport { YpFileUpload } from \"../yp-file-upload/yp-file-upload.js\";\nimport { YpConfirmationDialog } from \"../yp-dialog-container/yp-confirmation-dialog.js\";\nimport { YpUserDeleteOrAnonymize } from \"./yp-user-delete-or-anonymize.js\";\nimport { YpApiActionDialog } from \"../yp-api-action-dialog/yp-api-action-dialog.js\";\n\n@customElement(\"yp-user-edit\")\nexport class YpUserEdit extends YpEditBase {\n  @property({ type: String })\n  action = \"/users\";\n\n  @property({ type: Object })\n  user: YpUserData | undefined;\n\n  @property({ type: Number })\n  selected = 0;\n\n  @property({ type: String })\n  encodedUserNotificationSettings: string | undefined;\n\n  @property({ type: String })\n  currentApiKey: string | undefined;\n\n  @property({ type: Number })\n  uploadedProfileImageId: number | undefined;\n\n  @property({ type: Number })\n  override uploadedHeaderImageId: number | undefined;\n\n  @property({ type: Object })\n  notificationSettings: AcNotificationSettingsData | undefined;\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"user\")) {\n      this._userChanged();\n    }\n\n    if (changedProperties.has(\"notificationSettings\")) {\n      this._notificationSettingsChanged();\n    }\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        .container {\n          height: 100%;\n          min-height: 350px;\n        }\n\n        .additionalSettings {\n          margin-top: 16px;\n        }\n\n        .icon {\n          padding-right: 8px;\n        }\n\n        h2 {\n          padding-top: 16px;\n        }\n\n        #deleteUser {\n          max-width: 250px;\n          margin-top: 16px;\n        }\n\n        .disconnectButtons {\n          margin-top: 8px;\n          max-width: 250px;\n        }\n\n        yp-language-selector {\n          margin-bottom: 8px;\n        }\n\n        md-text-button {\n          text-align: center;\n        }\n\n        .ssn {\n          margin-top: 0;\n          margin-bottom: 4px;\n          font-weight: 400;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        .tempApiKeyContainer {\n          margin-top: 16px;\n          margin-bottom: 16px;\n          padding-bottom: 8px;\n          padding-top: 8px;\n        }\n\n        .temporaryApiKeyInformation {\n          color: var(--md-sys-color-on-error-container);\n          background-color: var(--md-sys-color-error-container);\n          font-size: 16px;\n          margin-bottom: 8px;\n        }\n\n        .apiKey {\n          font-size: 16px;\n          padding-right: 8px;\n          padding-top: 12px;\n          font-weight: bold;\n        }\n      `,\n    ];\n  }\n\n  override render() {\n    return this.user\n      ? html`\n          <yp-edit-dialog\n            name=\"userEdit\"\n            id=\"editDialog\"\n            .title=\"${this.editHeaderText}\"\n            doubleWidth\n            icon=\"face\"\n            .action=\"${this.action}\"\n            @iron-form-response=\"${this._editResponse}\"\n            method=\"${this.method}\"\n            .params=\"${this.params}\"\n            .saveText=\"${this.saveText}\"\n            .snackbarText=\"${this.snackbarText || \"\"}\"\n          >\n            <div class=\"container\">\n              <div class=\"layout vertical wrap container\">\n                <md-outlined-text-field\n                  id=\"name\"\n                  name=\"name\"\n                  type=\"text\"\n                  .label=\"${this.t(\"Name\")}\"\n                  .value=\"${this.user.name}\"\n                  maxlength=\"50\"\n                  char-counter\n                >\n                </md-outlined-text-field>\n\n                <div class=\"ssn\" ?hidden=\"${!this.user.ssn}\">\n                  ${this.t(\"ssn\")}: ${this.user.ssn}\n                </div>\n\n                <md-outlined-text-field\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"text\"\n                  .label=\"${this.t(\"Email\")}\"\n                  .value=\"${this.user.email || \"\"}\"\n                >\n                </md-outlined-text-field>\n\n                <div class=\"layout horizontal wrap\">\n                  <div class=\"layout vertical additionalSettings\">\n                    <yp-file-upload\n                      id=\"profileImageUpload\"\n                      raised\n                      target=\"/api/images?itemType=user-profile\"\n                      method=\"POST\"\n                      buttonIcon=\"photo_camera\"\n                      .buttonText=\"${this.t(\"image.profile.upload\")}\"\n                      @success=\"${this._profileImageUploaded}\"\n                    >\n                    </yp-file-upload>\n                  </div>\n\n                  <div class=\"layout vertical additionalSettings\" hidden=\"\">\n                    <yp-file-upload\n                      id=\"headerImageUpload\"\n                      raised\n                      target=\"/api/images?itemType=user-header\"\n                      method=\"POST\"\n                      buttonIcon=\"photo_camera\"\n                      .buttonText=\"${this.t(\"image.header.upload\")}\"\n                      @success=\"${this._headerImageUploaded}\"\n                    >\n                    </yp-file-upload>\n                  </div>\n                </div>\n\n                <yp-language-selector\n                  name=\"defaultLocale\"\n                  auto-translate-option-disabled=\"\"\n                  .selectedLocale=\"${this.user.default_locale}\"\n                ></yp-language-selector>\n\n                <md-text-button\n                  ?hidden=\"${this.user.profile_data?.hasApiKey}\"\n                  raised\n\n                  class=\"disconnectButtons\"\n                  @click=\"${this._createApiKey}\"\n                >${this.t(\"createApiKey\")}</md-text-button>\n\n                <md-text-button\n                  ?hidden=\"${!this.user.profile_data?.hasApiKey}\"\n\n                  class=\"disconnectButtons\"\n                  @click=\"${this._reCreateApiKey}\"\n                >${this.t(\"reCreateApiKey\")}</md-text-button>\n\n                <div\n                  class=\"layout vertical tempApiKeyContainer\"\n                  ?hidden=\"${!this.currentApiKey}\"\n                >\n                  <div class=\"temporaryApiKeyInformation\">\n                    ${this.t(\"showingApiKeyOnce\")}\n                  </div>\n                  <div class=\"layout horizontal\">\n                    <div class=\"apiKey\">${this.currentApiKey}</div>\n                    <md-text-button\n\n                      @click=\"${this._copyApiKey}\"\n                    >${this.t(\"copyApiKey\")}</md-text-button>\n                  </div>\n                </div>\n\n                <md-text-button\n                  ?hidden=\"${!this.user.facebook_id}\"\n                  class=\"disconnectButtons\"\n\n                  @click=\"${this._disconnectFromFacebookLogin}\"\n                >${this.t(\"disconnectFromFacebookLogin\")}</md-text-button>\n\n                <md-text-button\n                  ?hidden=\"${!this.user.ssn}\"\n\n                  class=\"disconnectButtons\"\n                  @click=\"${this._disconnectFromSamlLogin}\"\n                >${this.t(\"disconnectFromSamlLogin\")}</md-text-button>\n\n                <md-text-button\n                  id=\"deleteUser\"\n\n                  @click=\"${this._deleteOrAnonymizeUser}\"\n                >${this.t(\"deleteOrAnonymizeUser\")}</md-text-button>\n\n\n                ${this.uploadedProfileImageId? html`\n                <input\n                  type=\"hidden\"\n                  name=\"uploadedProfileImageId\"\n                  .value=\"${this.uploadedProfileImageId}\"\n                />\n                `: nothing}\n\n\n                ${this.uploadedHeaderImageId? html`\n                <input\n                  type=\"hidden\"\n                  name=\"uploadedHeaderImageId\"\n                  .value=\"${this.uploadedHeaderImageId}\"\n                />\n                `: nothing}\n\n\n                <h2>${this.t(\"user.notifications\")}</h2>\n\n                <ac-notification-settings\n                  .notificationsSettings=\"${this.notificationSettings!}\"\n                ></ac-notification-settings>\n\n                <input\n                  type=\"hidden\"\n                  name=\"notifications_settings\"\n                  .value=\"${this.encodedUserNotificationSettings || \"\"}\"\n                />\n              </div>\n            </div>\n          </yp-edit-dialog>\n        `\n      : nothing;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.addListener(\n      \"yp-notifications-changed\",\n      this._setNotificationSettings.bind(this)\n    );\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeListener(\n      \"yp-notifications-changed\",\n      this._setNotificationSettings.bind(this)\n    );\n  }\n\n  _editResponse(event: CustomEvent) {\n    if (event.detail.response.duplicateEmail) {\n      this.fire(\"yp-error\", this.t(\"emailAlreadyRegisterred\"));\n    }\n  }\n\n  _checkIfValidEmail() {\n    return (\n      this.user &&\n      this.user.email &&\n      !(\n        this.user.email.indexOf(\"@citizens.is\") > -1 &&\n        this.user.email.indexOf(\"anonymous\") > -1\n      )\n    );\n  }\n\n  _disconnectFromFacebookLogin() {\n    if (this._checkIfValidEmail()) {\n      window.appDialogs.getDialogAsync(\n        \"confirmationDialog\",\n        (dialog: YpConfirmationDialog) => {\n          dialog.open(\n            this.t(\"areYouSureYouWantToDisconnectFacebookLogin\"),\n            this._reallyDisconnectFromFacebookLogin.bind(this),\n            true\n          );\n        }\n      );\n    } else {\n      this.fire(\n        \"yp-error\",\n        this.t(\"cantDisconnectFromFacebookWithoutValidEmail\")\n      );\n    }\n  }\n\n  async _reallyDisconnectFromFacebookLogin() {\n    await window.serverApi.disconnectFacebookLogin();\n    this.user!.facebook_id = undefined;\n    window.appGlobals.notifyUserViaToast(\n      this.t(\"disconnectedFacebookLoginFor\") + \" \" + this.user!.email\n    );\n  }\n\n  _disconnectFromSamlLogin() {\n    if (this._checkIfValidEmail()) {\n      window.appDialogs.getDialogAsync(\n        \"confirmationDialog\",\n        (dialog: YpConfirmationDialog) => {\n          dialog.open(\n            this.t(\"areYouSureYouWantToDisconnectSamlLogin\"),\n            this._reallyDisconnectFromSamlLogin.bind(this),\n            true\n          );\n        }\n      );\n    } else {\n      this.fire(\"yp-error\", this.t(\"cantDisconnectFromSamlWithoutValidEmail\"));\n    }\n  }\n\n  async _reallyDisconnectFromSamlLogin() {\n    await window.serverApi.disconnectSamlLogin();\n    if (this.user) this.user.ssn = undefined;\n    window.appGlobals.notifyUserViaToast(\n      this.t(\"disconnectedSamlLoginFor\") + \" \" + this.user!.email\n    );\n  }\n\n  _setNotificationSettings(event: CustomEvent) {\n    this.notificationSettings = event.detail;\n    this.encodedUserNotificationSettings = this._encodeNotificationsSettings(\n      this.notificationSettings\n    );\n  }\n\n  _notificationSettingsChanged() {\n    if (this.notificationSettings) {\n      this.encodedUserNotificationSettings = this._encodeNotificationsSettings(\n        this.notificationSettings\n      );\n    }\n  }\n\n  _encodeNotificationsSettings(\n    settings: AcNotificationSettingsData | undefined\n  ) {\n    if (settings) {\n      return JSON.stringify(settings);\n    } else {\n      return undefined;\n    }\n  }\n\n  _userChanged() {\n    if (this.user) {\n      this.notificationSettings = this.user.notifications_settings;\n    }\n  }\n\n  _profileImageUploaded(event: CustomEvent) {\n    const image = JSON.parse(event.detail.xhr.response);\n    this.uploadedProfileImageId = image.id;\n  }\n\n  override _headerImageUploaded(event: CustomEvent) {\n    const image = JSON.parse(event.detail.xhr.response);\n    this.uploadedHeaderImageId = image.id;\n  }\n\n  override customRedirect() {\n    window.appUser.checkLogin();\n  }\n\n  clear() {\n    this.user = { name: \"\", email: \"\" } as YpUserData;\n    this.uploadedProfileImageId = undefined;\n    this.uploadedHeaderImageId = undefined;\n    (this.$$(\"#headerImageUpload\") as YpFileUpload).clear();\n    (this.$$(\"#profileImageUpload\") as YpFileUpload).clear();\n  }\n\n  _copyApiKey() {\n    navigator.clipboard.writeText(this.currentApiKey!);\n  }\n\n  async _createApiKey() {\n    window.appGlobals.activity(\"open\", \"user.createApiKey\");\n    const response =\n      (await window.serverApi.createApiKey()) as YpCreateApiKeyResponse;\n    this.currentApiKey = response.apiKey;\n    this.user!.profile_data!.hasApiKey = true;\n  }\n\n  _reCreateApiKey() {\n    window.appGlobals.activity(\"open\", \"user.reCreateApiKey\");\n    window.appDialogs.getDialogAsync(\n      \"apiActionDialog\",\n      (dialog: YpApiActionDialog) => {\n        dialog.setup(\n          \"/api/users/createApiKey\",\n          this.t(\"areYouSureYouWantToRecreateApiKey\"),\n          this._createApiKey.bind(this),\n          this.t(\"recreate\"),\n          \"POST\"\n        );\n        dialog.open();\n      }\n    );\n  }\n\n  setup(\n    user: YpUserData,\n    newNotEdit: boolean,\n    refreshFunction: Function | undefined,\n    openNotificationTab = false\n  ) {\n    this.user = user;\n    this.new = newNotEdit;\n    this.refreshFunction = refreshFunction;\n    if (openNotificationTab) {\n      this.selected = 1;\n    }\n    this.setupTranslation();\n  }\n\n  setupTranslation() {\n    if (this.new) {\n      this.editHeaderText = this.t(\"user.new\");\n      this.snackbarText = this.t(\"userToastCreated\");\n      this.saveText = this.t(\"create\");\n    } else {\n      this.saveText = this.t(\"save\");\n      this.editHeaderText = this.t(\"user.edit\");\n      this.snackbarText = this.t(\"userToastUpdated\");\n    }\n  }\n\n  _deleteOrAnonymizeUser() {\n    window.appDialogs.getDialogAsync(\n      \"userDeleteOrAnonymize\",\n      (dialog: YpUserDeleteOrAnonymize) => {\n        dialog.open();\n      }\n    );\n  }\n}\n"]}