{"version":3,"file":"yp-login.js","sourceRoot":"","sources":["../../src/yp-user/yp-login.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators.js\";\n\nimport \"./yp-registration-questions.js\";\nimport \"./yp-forgot-password.js\";\n\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\nimport { YpNavHelpers } from \"../common/YpNavHelpers.js\";\nimport { YpRegistrationQuestions } from \"./yp-registration-questions.js\";\n\nimport \"@material/web/iconbutton/icon-button.js\";\nimport \"@material/web/textfield/filled-text-field.js\";\nimport \"@material/web/radio/radio.js\";\nimport \"@material/web/icon/icon.js\";\nimport \"@material/web/button/filled-tonal-button.js\";\nimport \"@material/web/button/filled-button.js\";\nimport \"@material/web/button/text-button.js\";\nimport \"@material/web/button/outlined-button.js\";\nimport \"@material/web/dialog/dialog.js\";\nimport \"@material/web/progress/circular-progress.js\";\n\nimport { Dialog } from \"@material/web/dialog/internal/dialog.js\";\nimport { TextField } from \"@material/web/textfield/internal/text-field.js\";\nimport { YpForgotPassword } from \"./yp-forgot-password.js\";\nimport { YpCollectionHelpers } from \"../common/YpCollectionHelpers.js\";\n\n@customElement(\"yp-login\")\nexport class YpLogin extends YpBaseElement {\n  @property({ type: Boolean })\n  userSpinner = false;\n\n  @property({ type: Object })\n  domain: YpDomainData | undefined;\n\n  @property({ type: String })\n  reCaptchaSiteKey = \"\";\n\n  @property({ type: String })\n  emailErrorMessage: string | undefined;\n\n  @property({ type: String })\n  passwordErrorMessage: string | undefined;\n\n  @property({ type: String })\n  name = \"\";\n\n  @property({ type: String })\n  email = \"\";\n\n  @property({ type: String })\n  password = \"\";\n\n  @property({ type: String })\n  submitText = \"\";\n\n  @property({ type: String })\n  redirectToURL: string | undefined;\n\n  @property({ type: Boolean })\n  forgotPasswordOpen = false;\n\n  @property({ type: String })\n  heading: string | undefined;\n\n  @property({ type: String })\n  customUserRegistrationText: string | undefined;\n\n  @property({ type: Boolean })\n  opened = false;\n\n  @property({ type: Boolean })\n  dialogMode = false;\n\n  @property({ type: Object })\n  target: any | undefined;\n\n  @property({ type: Boolean })\n  forceSecureSamlLogin = false;\n\n  @property({ type: Boolean })\n  directSamlIntegration = false;\n\n  @property({ type: Boolean })\n  hasAnonymousLogin = false;\n\n  @property({ type: Boolean })\n  disableFacebookLoginForGroup = false;\n\n  @property({ type: String })\n  credentials: Record<string, unknown> | undefined;\n\n  @property({ type: Object })\n  pollingStartedAt: Date | undefined;\n\n  @property({ type: Number })\n  signupTermsId: number | undefined;\n\n  @property({ type: String })\n  samlLoginButtonUrl: string | undefined;\n\n  @property({ type: String })\n  customSamlLoginText: string | undefined;\n\n  @property({ type: String })\n  oneTimeLoginName: string | undefined;\n\n  @property({ type: Boolean })\n  hasOneTimeLoginWithName = false;\n\n  @property({ type: Boolean })\n  fullWithLoginButton = false;\n\n  @property({ type: Object })\n  registrationQuestionsGroup: YpGroupData | undefined;\n\n  onLoginFunction: Function | undefined;\n\n  isSending = false;\n\n  reloadPageOnDialogClose = true;\n\n  _logingDialogClose() {\n    if (this.reloadPageOnDialogClose) {\n      setTimeout(() => {\n        window.location.reload();\n      }, 350);\n    }\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          --md-dialog-container-color: var(--md-sys-color-surface);\n          --md-filled-field-container-color: var(\n            --md-sys-color-surface\n          ) !important;\n        }\n\n        .welcome {\n          font-family: var(--md-ref-typeface-brand);\n          font-size: 28px;\n          font-weight: 700;\n          margin-bottom: 24px;\n        }\n\n        .domainImage {\n          width: 170px;\n          height: 96px;\n          margin-bottom: 32px;\n        }\n\n        .createUserInputField {\n          margin: 16px;\n        }\n\n        .dontHaveAccountInfo {\n          align-items: center;\n          width: fit-content;\n          text-align: left;\n          align-self: start;\n          margin-top: 8px;\n        }\n\n        .createUserButton {\n          margin-left: 4px;\n        }\n\n        .resetPasswordButton {\n          width: fit-content;\n          margin-left: -10px;\n        }\n\n        .loginButton[fullWithLoginButton] {\n          width: 100%;\n          --md-filled-button-container-shape: 4px;\n        }\n\n        .closeLoginDialog {\n          margin-bottom: 6px;\n        }\n\n        md-filled-text-field {\n          --md-filled-field-container-color: var(\n            --md-sys-color-surface\n          ) !important;\n        }\n\n        md-dialog[open][is-safari] {\n          height: 100%;\n        }\n\n        .createUser {\n          padding: 16px;\n          text-align: left;\n          margin-bottom: 8px;\n          margin-top: 8px;\n        }\n\n        .loginInfo {\n          padding-right: 4px;\n          font-size: 16px;\n        }\n\n        .capitalize {\n          text-transform: capitalize;\n        }\n\n        .loginInfoOptions {\n          margin-top: 8px;\n        }\n\n        .login-button-row {\n          margin-top: 16px;\n          margin-bottom: 24px;\n        }\n\n        .loginInfoContainer {\n          margin-bottom: 8px;\n          text-align: left;\n          margin-left: 8px;\n          margin-right: 8px;\n        }\n\n        .btn-auth,\n        .btn-auth:visited {\n          position: relative;\n          display: inline-block;\n          height: 22px;\n          padding: 0 1em;\n          border: 1px solid;\n          border-radius: 2px;\n          text-align: center;\n          text-decoration: none;\n          font-size: 14px;\n          line-height: 22px;\n          white-space: nowrap;\n          cursor: pointer;\n          -webkit-box-sizing: content-box;\n          -moz-box-sizing: content-box;\n          box-sizing: content-box;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n          /* iOS */\n          -webkit-appearance: none; /* 1 */\n          /* IE6/7 hacks */\n          *overflow: visible; /* 2 */\n          *display: inline; /* 3 */\n          *zoom: 1; /* 3 */\n          margin: 4px;\n        }\n\n        .btn-auth:hover,\n        .btn-auth:focus,\n        .btn-auth:active {\n          text-decoration: none;\n        }\n\n        .btn-auth:before {\n          content: \"\";\n          float: left;\n          width: 22px;\n          height: 22px;\n          background: url(/images/auth-icons.png) no-repeat 99px 99px;\n        }\n\n        /**\n       * 36px\n       */\n\n        .btn-auth.large {\n          height: 32px;\n          line-height: 36px;\n          font-size: 20px;\n        }\n\n        .btn-auth.large:before {\n          width: 36px;\n          height: 36px;\n        }\n\n        .login-user-row {\n          text-align: left;\n        }\n\n        /*\n       * Remove excess padding and border in FF3+\n       */\n\n        .btn-auth::-moz-focus-inner {\n          border: 0;\n          padding: 0;\n        }\n\n        /* Facebook (extends .btn-auth)\n         ========================================================================== */\n\n        .btn-facebook,\n        .btn-facebook:visited {\n          border-color: #29447e;\n          border-bottom-color: #1a356e;\n          color: #fff;\n          background-color: #5872a7;\n          background-image: -webkit-gradient(\n            linear,\n            0 0,\n            0 100%,\n            from(#637bad),\n            to(#5872a7)\n          );\n          background-image: -webkit-linear-gradient(#637bad, #5872a7);\n          background-image: -moz-linear-gradient(#637bad, #5872a7);\n          background-image: -ms-linear-gradient(#637bad, #5872a7);\n          background-image: -o-linear-gradient(#637bad, #5872a7);\n          background-image: linear-gradient(#637bad, #5872a7);\n          -webkit-box-shadow: inset 0 1px 0 #879ac0;\n          box-shadow: inset 0 1px 0 #879ac0;\n        }\n\n        .btn-facebook:hover,\n        .btn-facebook:focus {\n          color: #fff;\n          background-color: #3b5998;\n        }\n\n        .btn-facebook:active {\n          color: #fff;\n          background: #4f6aa3;\n          -webkit-box-shadow: inset 0 1px 0 #45619d;\n          box-shadow: inset 0 1px 0 #45619d;\n        }\n\n        /*\n       * Icon\n       */\n\n        .btn-facebook:before {\n          border-right: 1px solid #465f94;\n          margin: 0 1em 0 -1em;\n          background-position: 0 0;\n        }\n\n        .btn-facebook.large:before {\n          background-position: 0 -22px;\n        }\n\n        :host {\n        }\n\n        md-textarea,\n        md-textfield {\n        }\n\n        .innerScroll {\n          height: 100% !important;\n        }\n\n        .islandIs {\n          width: 107px;\n          height: 19px;\n          margin-left: 8px;\n          margin-top: 4px;\n          margin-bottom: 8px;\n          margin-right: 8px;\n          margin-left: 8px;\n          padding: 2px;\n          border: 2px solid var(--md-sys-color-primary);\n          border-radius: 3px;\n        }\n\n        .buttons {\n          font-size: 15px;\n          margin-top: 20px;\n          text-align: center;\n          vertical-align: bottom;\n          margin-bottom: 16px;\n        }\n\n        .buttons[has-registration-questions] {\n          padding-bottom: 16px;\n        }\n\n        .boldButton {\n          font-weight: bold;\n        }\n\n        .create-user {\n        }\n\n        .create-user [slot=\"header\"] {\n          display: flex;\n          flex-direction: row-reverse;\n          align-items: center;\n        }\n\n        .create-user[showing-fullscreen] [slot=\"header\"] {\n          flex-direction: row;\n        }\n\n        .headline {\n          flex-direction: row-reverse;\n          align-items: center;\n          text-align: center;\n        }\n\n        .create-user-content,\n        .login-user-row {\n          display: flex;\n        }\n\n        .create-user-content {\n          flex-direction: column;\n        }\n\n        .login-user-row > * {\n          flex: 1;\n        }\n\n        .login-button-row {\n          display: flex;\n          justify-content: flex-end;\n        }\n\n        md-filled-text-field {\n          width: 340px;\n        }\n\n        .loginField {\n          margin-bottom: 8px;\n          margin-top: 8px;\n        }\n\n        @media (max-width: 900px) {\n          md-filled-text-field {\n            width: 280px;\n          }\n          .login-user-row {\n            flex-direction: column;\n          }\n\n          .login-button-row {\n            justify-content: center;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .buttons {\n            margin-top: 12px;\n            font-size: 14px;\n          }\n        }\n\n        @media (max-width: 320px) {\n          :host {\n            max-height: 100% !important;\n            height: 100% !important;\n          }\n\n          .buttons {\n            font-size: 13px;\n          }\n        }\n\n        .additionAuthMethodsDivider {\n          padding-bottom: 8px;\n        }\n\n        .strike {\n          display: block;\n          text-align: center;\n          overflow: hidden;\n          white-space: nowrap;\n          font-size: 17px;\n        }\n\n        .strike > span {\n          position: relative;\n          display: inline-block;\n        }\n\n        .strike > span:before,\n        .strike > span:after {\n          content: \"\";\n          position: absolute;\n          top: 50%;\n          width: 9999px;\n          height: 1px;\n          background: #888;\n        }\n\n        .strike > span:before {\n          right: 85%;\n          margin-right: 15px;\n        }\n\n        .strike > span:after {\n          left: 85%;\n          margin-left: 15px;\n        }\n\n        .socialMediaLogin {\n          padding-top: 8px;\n          margin-top: 8px;\n        }\n\n        .cursor {\n          cursor: pointer;\n        }\n\n        .orContainer {\n          padding-top: 0;\n          margin-top: 0;\n          padding-bottom: 24px;\n        }\n\n        yp-magic-text,\n        .customUserRegistrationText {\n          font-size: 14px;\n          margin: 8px;\n          margin-bottom: 8px;\n        }\n\n        .mainSpinner[hide] {\n          display: none;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        .openTerms {\n          text-decoration: underline;\n          cursor: pointer;\n        }\n\n        @media all and (-ms-high-contrast: none) {\n          #scrollable {\n            min-height: 350px;\n          }\n        }\n\n        .signupTerms {\n          margin-top: 16px;\n          margin-bottom: 8px;\n        }\n\n        .ajaxElements {\n          margin-top: 8px;\n        }\n\n        .forceSecureSamlLoginInfo {\n          font-weight: bold;\n          font-size: 17px;\n          margin-bottom: 8px;\n        }\n\n        .anonLoginButton {\n          margin-top: 0;\n          margin-bottom: 12px;\n        }\n\n        .largeSamlLogo {\n          margin-top: 16px;\n          padding: 12px;\n          padding-top: 18px;\n        }\n\n        md-circular-progress {\n          width: 24px;\n          height: 24px;\n        }\n      `,\n    ];\n  }\n\n  renderSamlLogin() {\n    return html`\n      ${this.samlLoginButtonUrl\n        ? html`\n            <div\n              class=\"islandIs cursor layout horizontal center-center\"\n              role=\"button\"\n              tabindex=\"0\"\n            >\n              <img\n                ?hidden=\"${this.forceSecureSamlLogin}\"\n                @click=\"${this._openSamlLogin}\"\n                width=\"80\"\n                src=\"${this.samlLoginButtonUrl}\"\n              />\n              <div\n                ?hidden=\"${!this.forceSecureSamlLogin}\"\n                class=\"largeSamlLogo\"\n                @click=\"${this._openSamlLogin}\"\n                role=\"button\"\n                tabindex=\"0\"\n              >\n                <img width=\"130\" src=\"${this.samlLoginButtonUrl}\" />\n              </div>\n            </div>\n          `\n        : html`\n            <div\n              class=\"islandIs cursor layout horizontal center-center\"\n              role=\"button\"\n              tabindex=\"0\"\n              @keydown=\"${this._keySaml}\"\n            >\n              <img\n                ?hidden=\"${this.forceSecureSamlLogin}\"\n                @click=\"${this._openSamlLogin}\"\n                width=\"107\"\n                height=\"19\"\n                src=\"https://yrpri-eu-direct-assets.s3-eu-west-1.amazonaws.com/islanddotis.png\"\n              />\n              <div\n                ?hidden=\"${!this.forceSecureSamlLogin}\"\n                class=\"largeSamlLogo\"\n                @click=\"${this._openSamlLogin}\"\n                role=\"button\"\n                tabindex=\"0\"\n              >\n                <img\n                  width=\"140\"\n                  height=\"25\"\n                  src=\"https://yrpri-eu-direct-assets.s3-eu-west-1.amazonaws.com/islanddotis.png\"\n                />\n              </div>\n            </div>\n          `}\n    `;\n  }\n\n  renderAdditionalMethods() {\n    return html`<div\n      class=\"layout vertical center-center socialMediaLogin\"\n      ?hidden=\"${!this.hasAdditionalAuthMethods}\"\n    >\n      <div class=\"layout vertical center-center\">\n        ${this.hasAnonymousLogin\n          ? html`\n              <md-filled-tonal-button\n                raised\n                class=\"anonLoginButton\"\n                @click=\"${this.anonymousLogin}\"\n                >${this.t(\"participateAnonymously\")}</md-filled-tonal-button\n              >\n            `\n          : nothing}\n        ${this.hasOneTimeLoginWithName\n          ? html`\n              <md-filled-tonal-button\n                raised\n                class=\"anonLoginButton\"\n                @click=\"${this.oneTimeLogin}\"\n                >${this.t(\"oneTimeLoginWithName\")}</md-filled-tonal-button\n              >\n            `\n          : nothing}\n\n        <div class=\"layout horizontal\">\n          ${this.hasFacebookLogin\n            ? html`\n                <span ?hidden=\"${this.forceSecureSamlLogin}\">\n                  <div\n                    class=\"btn-auth btn-facebook cursor\"\n                    @click=\"${this._facebookLogin}\"\n                    role=\"button\"\n                    tabindex=\"0\"\n                    ?hidden=\"${this.disableFacebookLoginForGroup}\"\n                  >\n                    ${this.t(\"user.facebookLogin\")}\n                  </div>\n                </span>\n              `\n            : nothing}\n          ${this.hasSamlLogin ? this.renderSamlLogin() : nothing}\n        </div>\n      </div>\n    </div>`;\n  }\n\n  renderLoginButton() {\n    return html`<md-filled-button\n        autofocus\n        raised\n        ?fullWithLoginButton=\"${this.fullWithLoginButton}\"\n        class=\"loginButton\"\n        @click=\"${() => this._validateAndSend(false)}\"\n        ><span class=\"capitalize\"\n          >${this.submitText}</span\n        ></md-filled-button\n      >\n    </div>`;\n  }\n\n  renderLoginInput() {\n    return html`<md-outlined-text-field\n        id=\"email\"\n        type=\"email\"\n        .label=\"${this.t(\"user.email\")}\"\n        name=\"username\"\n        pattern=\"^.+@.+$\"\n        minLength=\"5\"\n        class=\"loginField\"\n        .value=\"${this.email}\"\n        autocomplete=\"username\"\n      ></md-outlined-text-field>\n      <md-outlined-text-field\n        id=\"password\"\n        type=\"password\"\n        .label=\"${this.t(\"user.password\")}\"\n        autocomplete=\"current-password\"\n        class=\"loginField\"\n        minLength=\"1\"\n        .value=\"${this.password}\"\n        @keyup=\"${this.onEnterLogin}\"\n      ></md-outlined-text-field>\n      <div style=\"width: 100%\">${this.renderForgotPasswordButton()}</div> `;\n  }\n\n  renderSamlInfo() {\n    return html`\n      <div\n        class=\"customUserRegistrationText\"\n        ?hidden=\"${!this.forceSecureSamlLogin}\"\n      >\n        <div ?hidden=\"${!this.customSamlLoginText}\">\n          <yp-magic-text\n            disableTranslation\n            linkifyCutoff=\"100\"\n            .content=\"${this.customSamlLoginText}\"\n          ></yp-magic-text>\n        </div>\n        <div ?hidden=\"${this.customSamlLoginText != null}\">\n          ${this.t(\"forceSecureSamlLoginInfo\")}\n        </div>\n      </div>\n    `;\n  }\n\n  renderCustomUserRegistrationText() {\n    return html`<div\n      ?hidden=\"${!this.customUserRegistrationText}\"\n      class=\"customUserRegistrationText\"\n    >\n      <yp-magic-text\n        disableTranslation\n        linkifyCutoff=\"100\"\n        .content=\"${this.customUserRegistrationText}\"\n      ></yp-magic-text>\n    </div>`;\n  }\n\n  renderDomainImage() {\n    if (window.appGlobals.domain) {\n      return html`<yp-image\n        class=\"domainImage\"\n        .alt=\"${window.appGlobals.domain?.name}\"\n        sizing=\"cover\"\n        .src=\"${YpCollectionHelpers.logoImagePath(\n          \"domain\",\n          window.appGlobals.domain\n        )}\"\n      ></yp-image>`;\n    } else {\n      return nothing;\n    }\n  }\n\n  renderLoginSurface() {\n    return html`${!this.dialogMode ? this.renderDomainImage() : nothing}\n      <div class=\"welcome\">${this.t(\"welcome\")}</div>\n      ${this.renderCustomUserRegistrationText()} ${this.renderSamlInfo()}\n      ${this.renderAdditionalMethods()}\n\n      <div ?hidden=\"${this.forceSecureSamlLogin}\">\n        <div class=\"login-user-row layout vertical center-center\">\n          ${this.renderLoginInput()}\n        </div>\n        <div class=\"login-button-row layout vertical center-center\">\n          ${this.renderLoginButton()}\n          <div class=\"layout horizontal dontHaveAccountInfo\">\n            ${this.t(\"dontHaveAnAccount\")} ${this.renderCreateUserButton()}\n          </div>\n        </div>\n        <div class=\"orContainer\" ?hidden=\"${!this.hasAdditionalAuthMethods}\">\n          <div class=\"strike\">\n            <span>${this.t(\"or\")}</span>\n          </div>\n        </div>\n      </div>`;\n  }\n\n  renderCreateUserButton() {\n    return html`<md-text-button\n      class=\"createUserButton\"\n      @click=\"${this.openCreateUser}\"\n      >${this.t(\"user.create\")}</md-text-button\n    >`;\n  }\n\n  renderForgotPasswordButton() {\n    return html`<md-text-button\n      class=\"resetPasswordButton\"\n      @click=\"${this._forgotPassword}\"\n      >${this.t(\"forgotPassword\")}</md-text-button\n    >`;\n  }\n\n  renderLoginDialog() {\n    return html`\n      <md-dialog\n        id=\"loginDialog\"\n        @cancel=\"${this.scrimDisableAction}\"\n        ?is-safari=\"${this.isSafari}\"\n        transition=\"grow-right\"\n        ?open=\"${this.opened}\"\n        footerHidden\n        @closed=\"${this.closeAndReset}\"\n        .fullscreen=${!this.wide}\n      >\n        <div slot=\"headline\">\n          <span class=\"headline\">${this.t(\"loginAndRegistration\")}</span>\n        </div>\n        <div slot=\"icon\">\n          <md-icon>person</md-icon>\n        </div>\n\n        <div class=\"create-user-content\" slot=\"content\">\n          ${this.renderLoginSurface()}\n        </div>\n        <div slot=\"actions\">\n          <div class=\"loginInfoOptions layout horizontal center-center wrap\">\n            <md-icon-button\n              class=\"closeLoginDialog\"\n              @click=\"${this._logingDialogClose}\"\n              ><md-icon>close</md-icon></md-icon-button\n            >\n          </div>\n        </div>\n      </md-dialog>\n    `;\n  }\n\n  renderCreateUserSurface() {\n    return html`<div class=\"create-user-content\">\n      <md-outlined-text-field\n        id=\"fullname\"\n        type=\"text\"\n        .label=\"${this.userNameText}\"\n        maxLength=\"50\"\n        minLength=\"2\"\n        class=\"createUserInputField\"\n        required\n        charCounter\n      ></md-outlined-text-field>\n      <md-outlined-text-field\n        id=\"regEmail\"\n        type=\"email\"\n        .label=\"${this.t(\"user.email\")}\"\n        name=\"username\"\n        class=\"createUserInputField\"\n        pattern=\".+@.+\"\n        min=\"5\"\n        autocomplete=\"username\"\n      ></md-outlined-text-field>\n      <md-outlined-text-field\n        id=\"regPassword\"\n        type=\"password\"\n        minLength=\"5\"\n        class=\"createUserInputField\"\n        .label=\"${this.t(\"user.password\")}\"\n        autocomplete=\"current-password\"\n        @keyup=\"${this.onEnterRegistration}\"\n      ></md-outlined-text-field>\n      ${this.registrationQuestionsGroup\n        ? html`\n            <yp-registration-questions\n              id=\"registrationQuestions\"\n              @questions-changed=\"${this._registrationQuestionsChanged}\"\n              @resize-scroller=\"${this._registrationQuestionsChanged}\"\n              .group=\"${this.registrationQuestionsGroup}\"\n            >\n            </yp-registration-questions>\n          `\n        : nothing}\n      <div class=\"signupTerms\" ?hidden=\"${!this.showSignupTerms}\">\n        ${this.customTermsIntroText} -\n        <span @click=\"${this._openTerms}\" class=\"openTerms\"\n          >${this.t(\"signupTermsOpen\")}</span\n        >\n      </div>\n    </div>`;\n  }\n\n  renderCreateUserDialog() {\n    return html`\n      <md-dialog\n        id=\"createUserDialog\"\n        @cancel=\"${this.scrimDisableAction}\"\n        ?is-safari=\"${this.isSafari}\"\n        transition=\"grow-left\"\n        .fullscreen=${!this.wide}\n      >\n        <div slot=\"headline\" class=\"layout horizontal center-center\">\n          ${this.t(\"user.create\")}\n        </div>\n        <div slot=\"content\">${this.renderCreateUserSurface()}</div>\n        <div slot=\"actions\">\n          <md-text-button\n            @click=\"${this.cancelRegistration}\"\n            dialogAction=\"cancel\"\n            >${this.t(\"cancel\")}</md-text-button\n          >\n          <md-text-button @click=\"${() => this._validateAndSend(true)}\"\n            >${this.t(\"user.create\")}</md-text-button\n          >\n        </div>\n      </md-dialog>\n    `;\n  }\n\n  renderButtons() {\n    return html`\n      <div\n        class=\"buttons layout horizontal self-end\"\n        ?has-registration-questions=\"${this.registrationQuestionsGroup !=\n        undefined}\"\n      >\n        <md-circular-progress\n          class=\"mainSpinner\"\n          indeterminate\n          ?hidden=\"${!this.userSpinner}\"\n        ></md-circular-progress>\n        <div class=\"flex\"></div>\n        <md-text-button dialogAction=\"cancel\" @click=\"${this._cancel}\"\n          >${this.t(\"cancel\")}</md-text-button\n        >\n        <md-text-button\n          ?hidden=\"${this.forceSecureSamlLogin}\"\n          @click=\"${this._forgotPassword}\"\n          >${this.t(\"user.newPassword\")}</md-text-button\n        >\n        <md-filled-button\n          ?hidden=\"${this.forceSecureSamlLogin}\"\n          autofocus\n          raised\n          class=\"boldButton\"\n          .label=\"${this.submitText}\"\n          @click=\"${this._validateAndSend}\"\n        ></md-filled-button>\n      </div>\n    `;\n  }\n\n  closeAndReset() {\n    this.close();\n  }\n\n  renderOneTimeDialog() {\n    return html`\n      <md-dialog\n        id=\"dialogOneTimeWithName\"\n        @cancel=\"${this.scrimDisableAction}\"\n        ?is-safari=\"${this.isSafari}\"\n      >\n        <div slot=\"headline\">[[t('oneTimeLoginWithName')]]</div>\n        <div slot=\"content\">\n          <md-filled-text-field\n            id=\"oneTimeLoginWithNameId\"\n            type=\"text\"\n            .label=\"${this.userNameText}\"\n            maxlength=\"50\"\n            @keyup=\"${this._updateOneTimeLoginName}\"\n            autocomplete=\"off\"\n          ></md-filled-text-field>\n          ${this.registrationQuestionsGroup\n            ? html`\n                <yp-registration-questions\n                  id=\"registrationQuestionsOneTimeLogin\"\n                  @questions-changed=\"${this._registrationQuestionsChanged}\"\n                  @resize-scroller=\"${this._registrationQuestionsChanged}\"\n                  .group=\"${this.registrationQuestionsGroup}\"\n                ></yp-registration-questions>\n              `\n            : nothing}\n        </div>\n\n        <div class=\"buttons\" slot=\"actions\">\n          <md-text-button dialogAction=\"cancel\" @click=\"${this._cancel}\"\n            >${this.t(\"cancel\")}</md-text-button\n          >\n          <md-text-button\n            ?disabled=\"${!this.oneTimeLoginName}\"\n            @click=\"${this.finishOneTimeLoginWithName}\"\n          >\n            ${this.t(\"user.login\")}</md-text-button\n          >\n        </div>\n      </md-dialog>\n    `;\n  }\n\n  openCreateUser() {\n    (this.$$(\"#createUserDialog\") as Dialog).show();\n    if (this.$$(\"#loginDialog\")) {\n      (this.$$(\"#loginDialog\") as Dialog).close();\n    }\n  }\n\n  cancelRegistration() {\n    (this.$$(\"#createUserDialog\") as Dialog).close();\n    if (this.$$(\"#loginDialog\")) {\n      (this.$$(\"#loginDialog\") as Dialog).show();\n    }\n  }\n\n  _setupJsonCredentials(registerMode: boolean) {\n    this.credentials = {\n      name: this.fullnameValue,\n      email: this.emailValue(registerMode),\n      identifier: this.emailValue(registerMode),\n      username: this.emailValue(registerMode),\n      password: this.passwordValue(registerMode),\n      registration_answers:\n        this.registrationQuestionsGroup && this.$$(\"#registrationQuestions\")\n          ? (\n              this.$$(\"#registrationQuestions\") as YpRegistrationQuestions\n            ).getAnswers()\n          : undefined,\n    };\n  }\n\n  _updateOneTimeLoginName(event: KeyboardEvent) {\n    this.oneTimeLoginName = (\n      this.$$(\"#oneTimeLoginWithNameId\") as TextField\n    ).value;\n    if (this.oneTimeLoginName && this.oneTimeLoginName.length > 0) {\n      if (event.key == \"enter\") {\n        this.finishOneTimeLoginWithName();\n      }\n    }\n  }\n\n  renderForgotPassword() {\n    return html`\n      <yp-forgot-password id=\"forgotPasswordDialog\"></yp-forgot-password>\n    `;\n  }\n\n  override render() {\n    if (this.dialogMode) {\n      return html`\n        ${this.renderLoginDialog()} ${this.renderCreateUserDialog()}\n        ${this.renderForgotPassword()}\n        ${this.hasOneTimeLoginWithName ? this.renderOneTimeDialog() : nothing}\n      `;\n    } else {\n      return html`\n        ${this.renderForgotPassword()}\n        ${this.hasOneTimeLoginWithName ? this.renderOneTimeDialog() : nothing}\n        ${this.renderLoginSurface()} ${this.renderCreateUserDialog()}\n      `;\n    }\n  }\n\n  _registrationQuestionsChanged() {\n    //this.$.dialog.fire('iron-resize');\n    const oneTimeDialog = this.$$(\"#dialogOneTimeWithName\");\n    if (oneTimeDialog) {\n      //oneTimeDialog.fire('iron-resize');\n    }\n  }\n\n  _setupCustomRegistrationQuestions() {\n    if (window.appGlobals.registrationQuestionsGroup) {\n      this.registrationQuestionsGroup =\n        window.appGlobals.registrationQuestionsGroup;\n    } else {\n      this.registrationQuestionsGroup = undefined;\n    }\n  }\n\n  _keySaml(event: KeyboardEvent) {\n    if (event.keyCode == 13) {\n      event.preventDefault();\n      this._openSamlLogin();\n    }\n  }\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"opened\")) {\n      this._openedChanged();\n    }\n  }\n\n  get customTermsIntroText() {\n    if (\n      window.appGlobals.currentGroup &&\n      window.appGlobals.currentGroup.configuration &&\n      window.appGlobals.currentGroup.configuration.customTermsIntroText\n    ) {\n      return window.appGlobals.currentGroup.configuration.customTermsIntroText;\n    } else {\n      return this.t(\"signupTermsInfo\");\n    }\n  }\n\n  get userNameText() {\n    if (\n      window.appGlobals.currentGroup &&\n      window.appGlobals.currentGroup.configuration &&\n      window.appGlobals.currentGroup.configuration.customUserNamePrompt\n    ) {\n      return window.appGlobals.currentGroup.configuration.customUserNamePrompt;\n    } else {\n      return this.t(\"user.name\");\n    }\n  }\n\n  get showSignupTerms() {\n    return this.signupTermsId;\n  }\n\n  _isiOsInApp() {\n    return (\n      /iPad|iPhone|Android|android|iPod/.test(navigator.userAgent) &&\n      !window.MSStream &&\n      (/FBAN/.test(navigator.userAgent) ||\n        /FBAV/.test(navigator.userAgent) ||\n        /Instagram/.test(navigator.userAgent))\n    );\n  }\n\n  _openTerms() {\n    this.fire(\"yp-open-page\", { pageId: this.signupTermsId });\n  }\n\n  _facebookLogin() {\n    const domainName = window.location.hostname.split(\".\").slice(-2).join(\".\");\n\n    let hostName;\n\n    if (domainName.indexOf(\"forbrukerradet\") > -1) {\n      hostName = \"mineideer\";\n    } else if (domainName.indexOf(\"parliament.scot\") > -1) {\n      hostName = \"engage\";\n    } else if (domainName.indexOf(\"multicitychallenge.org\") > -1) {\n      hostName = \"yp\";\n    } else if (domainName.indexOf(\"smarter.nj.gov\") > -1) {\n      hostName = \"enjine\";\n    } else if (\n      window.appGlobals.domain &&\n      window.appGlobals.domain.loginCallbackCustomHostName\n    ) {\n      hostName = window.appGlobals.domain.loginCallbackCustomHostName;\n    } else {\n      hostName = \"login\";\n    }\n\n    const url =\n      \"https://\" + hostName + \".\" + domainName + \"/api/users/auth/facebook\";\n\n    const width = 1000,\n      height = 650,\n      top = (window.outerHeight - height) / 2,\n      left = (window.outerWidth - width) / 2,\n      name = \"_blank\";\n    if (this._isInApp()) {\n      document.cookie =\n        \"ypRedirectCookie=\" +\n        encodeURI(window.location.href) +\n        \";domain=.\" +\n        domainName +\n        \";path=/\";\n      window.location.href = url;\n    } else {\n      window.appUser.facebookPopupWindow = window.open(\n        url,\n        name,\n        \"width=\" +\n          width +\n          \",height=\" +\n          height +\n          \",scrollbars=0,top=\" +\n          top +\n          \",left=\" +\n          left\n      );\n    }\n    window.appUser.startPollingForLogin();\n    this._startSpinner();\n    window.appGlobals.analytics.sendLoginAndSignup(\n      -1,\n      \"Login Submit\",\n      \"Facebook\"\n    );\n  }\n\n  oneTimeLogin() {\n    this.oneTimeLoginName = undefined;\n    (this.$$(\"#dialogOneTimeWithName\") as Dialog).show();\n    setTimeout(() => {\n      this.$$(\"#oneTimeLoginWithNameId\")?.focus();\n    }, 50);\n  }\n\n  finishOneTimeLoginWithName() {\n    (this.$$(\"#dialogOneTimeWithName\") as Dialog).close();\n    if (\n      this.oneTimeLoginName &&\n      (!this.registrationQuestionsGroup ||\n        (\n          this.$$(\n            \"#registrationQuestionsOneTimeLogin\"\n          ) as YpRegistrationQuestions\n        ).validate())\n    ) {\n      let registrationAnswers: Record<string, string>[] | undefined = undefined;\n      if (this.registrationQuestionsGroup) {\n        registrationAnswers = (\n          this.$$(\n            \"#registrationQuestionsOneTimeLogin\"\n          ) as YpRegistrationQuestions\n        ).getAnswers();\n      }\n      this.anonymousLogin(\"One Time Login\", registrationAnswers);\n    }\n  }\n\n  async anonymousLogin(\n    loginSubType = \"Anonymous\",\n    registrationAnswers: Record<string, string>[] | undefined = undefined\n  ) {\n    if (window.appGlobals.currentAnonymousGroup) {\n      window.appGlobals.analytics.sendLoginAndSignup(\n        -1,\n        \"Signup Submit\",\n        loginSubType\n      );\n\n      this._startSpinner();\n\n      const user = (await window.serverApi.registerAnonymously({\n        groupId: window.appGlobals.currentAnonymousGroup.id,\n        trackingParameters: window.appGlobals.originalQueryParameters,\n        oneTimeLoginName: this.hasOneTimeLoginWithName\n          ? this.oneTimeLoginName\n          : null,\n        registration_answers: registrationAnswers,\n      })) as YpUserData;\n\n      this._cancel();\n\n      this.isSending = false;\n\n      if (user) {\n        window.appGlobals.analytics.sendLoginAndSignup(\n          user.id,\n          \"Signup Success\",\n          loginSubType\n        );\n        this._loginCompleted(user);\n        if (this.$$(\"#dialogOneTimeWithName\") as Dialog) {\n          (this.$$(\"#dialogOneTimeWithName\") as Dialog).close();\n        }\n        return true;\n      } else {\n        console.error(\"No user in anonymousLogin\");\n        return false;\n      }\n    } else {\n      console.error(\"No anon group in config\");\n      return false;\n    }\n  }\n\n  _isInApp() {\n    return (\n      /iPad|iPhone|Android|android|iPod/.test(navigator.userAgent) &&\n      !window.MSStream &&\n      (/FBAN/.test(navigator.userAgent) ||\n        /FBAV/.test(navigator.userAgent) ||\n        /Instagram/.test(navigator.userAgent))\n    );\n  }\n\n  _openSamlLogin() {\n    if (this.forceSecureSamlLogin && window.appUser && window.appUser.user) {\n      window.appUser.logout();\n      setTimeout(() => {\n        window.appUser.logout();\n      });\n    }\n\n    const domainName = window.location.hostname.split(\".\").slice(-2).join(\".\");\n\n    const url = \"/api/users/auth/saml\",\n      width = 1200,\n      height = 650,\n      top = (window.outerHeight - height) / 2,\n      left = (window.outerWidth - width) / 2,\n      name = \"_blank\";\n    if (this._isInApp()) {\n      document.cookie =\n        \"ypRedirectCookie=\" +\n        encodeURI(window.location.href) +\n        \";domain=.\" +\n        domainName +\n        \";path=/\";\n      window.location.href = url;\n    } else {\n      window.appUser.samlPopupWindow = window.open(\n        url,\n        name,\n        \"width=\" +\n          width +\n          \",height=\" +\n          height +\n          \",scrollbars=0,top=\" +\n          top +\n          \",left=\" +\n          left\n      );\n    }\n    window.appUser.startPollingForLogin();\n    this._startSpinner();\n    window.appGlobals.analytics.sendLoginAndSignup(-1, \"Login Submit\", \"Saml2\");\n  }\n\n  override firstUpdated() {\n    //    (this.$$(\"#createUserDialog\") as Dialog).open = true;\n  }\n\n  _startSpinner() {\n    this.userSpinner = true;\n    setTimeout(() => {\n      //this.$$('#dialog').fire('iron-resize');\n    });\n  }\n\n  _cancel() {\n    this.userSpinner = true;\n    window.appUser.cancelLoginPolling();\n  }\n\n  _domainEvent(event: CustomEvent) {\n    if (event.detail.domain) {\n      this.domain = event.detail.domain as YpDomainData;\n    }\n  }\n\n  get hasAdditionalAuthMethods() {\n    return (\n      this.domain &&\n      ((this.hasFacebookLogin && !this.disableFacebookLoginForGroup) ||\n        this.hasSamlLogin ||\n        this.hasAnonymousLogin ||\n        this.hasOneTimeLoginWithName)\n    );\n  }\n\n  get hasFacebookLogin() {\n    if (this.domain) {\n      return this.domain.facebookLoginProvided;\n    } else {\n      return false;\n    }\n  }\n\n  get hasGoogleLogin() {\n    if (this.domain) {\n      return false; //TODO: this.domain.googleLoginProvided;\n    } else {\n      return false;\n    }\n  }\n\n  get hasSamlLogin() {\n    if (this.domain) {\n      return this.domain.samlLoginProvided;\n    } else {\n      return false;\n    }\n  }\n\n  _openedChanged() {\n    if (this.opened) {\n      if (\n        window.appGlobals.currentAnonymousGroup &&\n        window.appGlobals.currentGroup &&\n        window.appGlobals.currentGroup.configuration &&\n        window.appGlobals.currentGroup.configuration.allowAnonymousUsers\n      ) {\n        this.hasAnonymousLogin = true;\n      } else {\n        this.hasAnonymousLogin = false;\n      }\n\n      if (\n        window.appGlobals.currentAnonymousGroup &&\n        window.appGlobals.currentGroup &&\n        window.appGlobals.currentGroup.configuration &&\n        window.appGlobals.currentGroup.configuration.allowOneTimeLoginWithName\n      ) {\n        this.hasOneTimeLoginWithName = true;\n      } else {\n        this.hasOneTimeLoginWithName = false;\n      }\n\n      if (window.appGlobals.disableFacebookLoginForGroup) {\n        this.disableFacebookLoginForGroup = true;\n      } else {\n        this.disableFacebookLoginForGroup = false;\n      }\n\n      if (\n        window.appGlobals.domain &&\n        window.appGlobals.domain.configuration &&\n        window.appGlobals.domain.configuration.customUserRegistrationText\n      ) {\n        this.customUserRegistrationText =\n          window.appGlobals.domain.configuration.customUserRegistrationText;\n      } else {\n        this.customUserRegistrationText = undefined;\n      }\n\n      if (window.appGlobals.domain && window.appGlobals.domain.configuration) {\n        this.samlLoginButtonUrl =\n          window.appGlobals.domain.configuration.samlLoginButtonUrl;\n\n        this.directSamlIntegration =\n          window.appGlobals.domain.configuration.directSamlIntegration !==\n          undefined\n            ? window.appGlobals.domain.configuration.directSamlIntegration\n            : false;\n      } else {\n        this.samlLoginButtonUrl = undefined;\n        this.directSamlIntegration = false;\n      }\n\n      if (\n        window.appGlobals.domain &&\n        window.appGlobals.domain.configuration &&\n        window.appGlobals.domain.configuration.customSamlLoginText\n      ) {\n        this.customSamlLoginText =\n          window.appGlobals.domain.configuration.customSamlLoginText;\n      } else if (window.appGlobals.currentSamlLoginMessage) {\n        this.customSamlLoginText = window.appGlobals.currentSamlLoginMessage;\n      } else {\n        this.customSamlLoginText = undefined;\n      }\n\n      setTimeout(() => {\n        //TODO: Make return work - shold work now 24112020\n        //this.$$('#a11y').target = this.$$('#form');\n        //this.$$('#email').focus();\n      }, 50);\n\n      if (window.appGlobals.signupTermsPageId) {\n        this.signupTermsId = window.appGlobals.signupTermsPageId;\n      } else {\n        this.signupTermsId = undefined;\n      }\n\n      if (window.appGlobals.currentForceSaml) {\n        this.forceSecureSamlLogin = true;\n      } else {\n        this.forceSecureSamlLogin = false;\n      }\n    }\n  }\n\n  onEnterLogin(event: KeyboardEvent) {\n    if (event.key == \"Enter\") {\n      this._validateAndSend(false);\n    }\n  }\n\n  onEnterRegistration(event: KeyboardEvent) {\n    if (event.key == \"Enter\") {\n      this._validateAndSend(true);\n    }\n  }\n\n  onEnterOneTimeLogin(event: KeyboardEvent) {\n    if (event.key == \"Enter\") {\n      this._validateAndSend(true);\n    }\n  }\n\n  //TODO: Test and make sure this works as expected\n  _networkError(event: CustomEvent) {\n    const response = event.detail.response;\n\n    if (response.url.indexOf(\"/api/users/register\") > -1) {\n      this.isSending = false;\n      window.appGlobals.analytics.sendLoginAndSignup(\n        -1,\n        \"Signup Fail\",\n        \"Email\",\n        response.message\n      );\n    } else if (response.url.indexOf(\"/api/users/login\") > -1) {\n      this.isSending = false;\n      window.appGlobals.analytics.sendLoginAndSignup(\n        -1,\n        \"Login Fail\",\n        \"Email\",\n        response.message\n      );\n    }\n  }\n\n  _forgotPassword() {\n    (this.$$(\"#forgotPasswordDialog\") as YpForgotPassword).open({\n      email: this.emailValue(true),\n    });\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    if (window.appGlobals && window.appGlobals.domain) {\n      this.domain = window.appGlobals.domain;\n    }\n    this.addListener(\"yp-domain-changed\", this._domainEvent.bind(this));\n    this.addListener(\"yp-network-error\", this._networkError.bind(this));\n    this.addGlobalListener(\"yp-logged-in-via-polling\", this.close.bind(this));\n    this.addGlobalListener(\"yp-language-loaded\", this._setTexts.bind(this));\n  }\n\n  override disconnectedCallback() {\n    super.connectedCallback();\n    this.removeListener(\"yp-domain-changed\", this._domainEvent.bind(this));\n    this.removeListener(\"yp-network-error\", this._networkError.bind(this));\n    this.removeGlobalListener(\n      \"yp-logged-in-via-polling\",\n      this.close.bind(this)\n    );\n    this.removeGlobalListener(\"yp-language-loaded\", this._setTexts.bind(this));\n  }\n\n  setup(onLoginFunction: Function, domain: YpDomainData) {\n    this.onLoginFunction = onLoginFunction;\n    if (domain) {\n      this.domain = domain;\n    }\n  }\n\n  _setTexts() {\n    this.emailErrorMessage = this.t(\"inputError\");\n    this.passwordErrorMessage = this.t(\"inputError\");\n    this.submitText = this.t(\"user.login\");\n  }\n\n  emailValue(registerMode: boolean | undefined = undefined) {\n    const email = (this.$$(\"#email\") as TextField).value.trim();\n    const regEmail = (this.$$(\"#regEmail\") as TextField).value.trim();\n\n    if (registerMode === undefined) {\n      return email || regEmail;\n    } else if (registerMode === true) {\n      return regEmail;\n    } else {\n      return email;\n    }\n  }\n\n  passwordValue(registerMode: boolean | undefined = undefined) {\n    const password = (this.$$(\"#password\") as TextField).value.trim();\n    const regPassword = (this.$$(\"#regPassword\") as TextField).value.trim();\n\n    if (registerMode === undefined) {\n      return password || regPassword;\n    } else if (registerMode === true) {\n      return regPassword;\n    } else {\n      return password;\n    }\n  }\n\n  get fullnameValue(): string | void {\n    if (this.$$(\"#fullname\"))\n      return (this.$$(\"#fullname\") as HTMLInputElement).value.trim();\n  }\n\n  async _registerUser() {\n    const user = (await window.serverApi.registerUser(\n      this.credentials!\n    )) as YpUserData;\n    this.isSending = false;\n    if (user) {\n      window.appGlobals.analytics.sendLoginAndSignup(\n        user.id,\n        \"Signup Success\",\n        \"Email\"\n      );\n      this._loginCompleted(user);\n      console.debug(\n        \"Got register response for: \" + user ? user.email : \"unknown\"\n      );\n      (this.$$(\"#createUserDialog\") as Dialog).close();\n    } else {\n      this.fire(\"yp-error\", this.t(\"user.alreadyRegisterred\"));\n      console.error(\"No user in registerUser\");\n    }\n  }\n\n  async _loginUser() {\n    const user = (await window.serverApi.loginUser(\n      this.credentials!\n    )) as YpUserData;\n    this.isSending = false;\n    if (user) {\n      this._loginCompleted(user);\n    } else {\n      this.fire(\"yp-error\", this.t(\"user.loginNotAuthorized\"));\n      console.error(\"No user in loginUser\");\n    }\n  }\n\n  _validateAndSend(registerMode: boolean) {\n    if (!this.isSending) {\n      this.isSending = true;\n      window.appGlobals.analytics.sendLoginAndSignup(\n        -1,\n        registerMode ? \"Signup Submit\" : \"Login Submit\",\n        \"Email\"\n      );\n      if (\n        this.emailValue(registerMode) &&\n        this.passwordValue(registerMode) &&\n        (!registerMode ||\n          !this.registrationQuestionsGroup ||\n          (\n            this.$$(\"#registrationQuestions\") as YpRegistrationQuestions\n          ).validate())\n      ) {\n        this.userSpinner = true;\n        this._setupJsonCredentials(registerMode);\n        if (registerMode) {\n          this._registerUser();\n        } else {\n          this._loginUser();\n        }\n        this.userSpinner = false;\n        return true;\n      } else {\n        //this.fire(\"yp-error\", this.t(\"user.completeForm\"));\n        window.appGlobals.analytics.sendLoginAndSignup(\n          -1,\n          registerMode ? \"Signup Fail\" : \"Login Fail\",\n          \"Email\",\n          \"Form not validated\"\n        );\n        this.isSending = false;\n        return false;\n      }\n    } else {\n      console.warn(\"Trying to call _validateAndSend while sending\");\n      return false;\n    }\n  }\n\n  _loginAfterSavePassword(user: YpUserData) {\n    if (this.redirectToURL) YpNavHelpers.redirectTo(this.redirectToURL);\n    if (this.onLoginFunction) {\n      this.onLoginFunction(user);\n    } else {\n      window.appUser.setLoggedInUser(user);\n    }\n    if (!this.dialogMode) {\n      window.appUser._handleLogin(user);\n    }\n    this.close();\n    this.fireGlobal(\"yp-logged-in\", user);\n  }\n\n  _loginCompleted(user: YpUserData) {\n    if (\n      window.PasswordCredential &&\n      this.emailValue() &&\n      this.passwordValue()\n    ) {\n      const c = new window.PasswordCredential({\n        name: this.emailValue(),\n        id: this.emailValue(),\n        password: this.passwordValue(),\n      });\n      navigator.credentials\n        .store(c)\n        .then(() => {\n          this._loginAfterSavePassword(user);\n        })\n        .catch((error) => {\n          console.error(error);\n          this._loginAfterSavePassword(user);\n        });\n    } else {\n      this._loginAfterSavePassword(user);\n    }\n  }\n\n  async openDialog(\n    redirectToURL: string | undefined,\n    email: string | undefined,\n    collectionConfiguration: YpCollectionConfiguration | undefined\n  ) {\n    this._setTexts();\n    this.redirectToURL = redirectToURL;\n    this.userSpinner = false;\n\n    if (email) {\n      this.email = email;\n    }\n\n    if (\n      collectionConfiguration &&\n      ((collectionConfiguration as YpGroupConfiguration)\n        .disableFacebookLoginForGroup ||\n        (collectionConfiguration as YpCommunityConfiguration)\n          .disableFacebookLoginForCommunity)\n    ) {\n      window.appGlobals.disableFacebookLoginForGroup = true;\n    }\n\n    this.opened = true;\n\n    await this.updateComplete;\n\n    (this.$$(\"md-dialog\") as Dialog).show();\n\n    window.appGlobals.analytics.sendLoginAndSignup(\n      -1,\n      \"Signup/Login Opened\",\n      \"Undecided\"\n    );\n\n    setTimeout(() => {\n      if (\n        !this.forceSecureSamlLogin &&\n        window.PasswordCredential &&\n        navigator.credentials\n      ) {\n        navigator.credentials\n          // @ts-ignore\n          .get({ password: true })\n          .then(async (credentials) => {\n            // @ts-ignore\n            const passwordCredentials = credentials as PasswordCredential;\n            if (credentials && credentials.id && passwordCredentials.password) {\n              this.email = credentials.id;\n              this.password = passwordCredentials.password\n                ? passwordCredentials.password\n                : \"\";\n              await this.requestUpdate();\n              if (window.appUser.hasIssuedLogout === true) {\n                console.log(\"Have issued logout not auto logging in\");\n              } else {\n                //this._validateAndSend();\n              }\n            } else {\n              console.warn(\"Canceling credentials.get\");\n            }\n          });\n      }\n    });\n\n    this._setupCustomRegistrationQuestions();\n  }\n\n  close() {\n    this.opened = false;\n    this.userSpinner = false;\n    (this.$$(\"md-dialog\") as Dialog).close();\n    console.log(\"Closed login dialog\");\n  }\n}\n"]}