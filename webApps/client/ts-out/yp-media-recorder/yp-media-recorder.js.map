{"version":3,"file":"yp-media-recorder.js","sourceRoot":"","sources":["../../src/yp-media-recorder/yp-media-recorder.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,KAAK,CAAC;AACzC,OAAO,EAAE,QAAQ,EAAE,aAAa,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AACnE,OAAO,EAAE,aAAa,EAAE,MAAM,8BAA8B,CAAC;AAC7D,OAAO,uCAAuC,CAAC;AAC/C,OAAO,8BAA8B,CAAC;AAEtC,OAAO,KAAK,SAAS,MAAM,WAAW,CAAC;AACvC,OAAO,KAAK,UAAU,MAAM,eAAe,CAAC;AAC5C,OAAO,KAAK,cAAc,MAAM,wDAAwD,CAAC;AAEzF,OAAO,gCAAgC,CAAC;AACxC,OAAO,oCAAoC,CAAC;AAC5C,OAAO,8BAA8B,CAAC;AAM/B,IAAM,eAAe,GAArB,MAAM,eAAgB,SAAQ,aAAa;IAA3C;;QAWL,mBAAc,GAAG,KAAK,CAAC;QAGvB,mBAAc,GAAG,KAAK,CAAC;QAGvB,cAAS,GAAG,CAAC,CAAC;QAMd,sBAAiB,GAAG,KAAK,CAAC;QAG1B,gBAAW,GAAG,KAAK,CAAC;QAGpB,mBAAc,GAAG,KAAK,CAAC;QAGvB,kBAAa,GAAG,KAAK,CAAC;QAqBtB,sBAAiB,GAAG,CAAC,CAAC;QAkBtB,gBAAW,GAAG,UAAU,CAAC;QAEG,mBAAc,GAAG,MAAM,CAAC;QACvB,kBAAa,GAAG,KAAK,CAAC;QACtB,aAAQ,GAAG,KAAK,CAAC;QAE9C,0BAAqB,GAAkB,IAAI,CAAC;QAC5C,0BAAqB,GAAkB,IAAI,CAAC;IA+yB9C,CAAC;IAzyBC,MAAM,KAAc,MAAM;QACxB,OAAO;YACL,KAAK,CAAC,MAAM;YACZ,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OA+HF;SACF,CAAC;IACJ,CAAC;IAED,iBAAiB;QACf,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;YACrB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;gBAC7C,KAAK,CAAC,IAAI,EAAE,CAAC;YACf,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;QAC/B,CAAC;QACD,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;YACf,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAS,CAAC,IAAI,EAAE,CAAC;YAClD,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YACtB,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;QAC1B,CAAC;QACD,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;IAC7B,CAAC;IAEO,6BAA6B;QACnC,6EAA6E;QAC7E,IAAI,CAAC,MAAM,EAAE,CAAC;QAEd,gGAAgG;QAChG,gGAAgG;QAChG,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAClD,CAAC;aAAM,CAAC;YACN,OAAO,CAAC,KAAK,CAAC,qCAAqC,CAAC,CAAC;QACvD,CAAC;IACH,CAAC;IAEO,KAAK,CAAC,mBAAmB;QAC/B,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YACzC,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACvC,CAAC;aAAM,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YAC/B,MAAM,YAAY,GAAG,IAAI,CAAC,UAAW,CAAC,aAAa,CACjD,gBAAgB,CACG,CAAC;YACtB,MAAM,mBAAmB,GAAG,IAAI,CAAC,UAAW,CAAC,aAAa,CACxD,iBAAiB,CACE,CAAC;YACtB,IAAI,KAAa,EAAE,MAAc,CAAC;YAElC,IAAI,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;gBAC3C,IAAI,CAAC,aAAa,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;gBAClD,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;gBACtD,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC;gBACjD,OAAO,CAAC,IAAI,CACV,qBAAqB,KAAK,YAAY,MAAM,gCAAgC,CAC7E,CAAC;YACJ,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,aAAa,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;gBAClD,IAAI,WAAW,GAAG,GAAG,CAAC;gBACtB,IAAI,MAAM,CAAC,WAAW,GAAG,GAAG;oBAAE,WAAW,GAAG,GAAG,CAAC;gBAChD,IAAI,MAAM,CAAC,WAAW,GAAG,GAAG;oBAAE,WAAW,GAAG,GAAG,CAAC;gBAChD,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,WAAW,GAAG,WAAW,CAAC,CAAC,CAAC;gBACnE,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,aAAa,CAAC,CAAC,CAAC;gBACzD,OAAO,CAAC,IAAI,CAAC,sBAAsB,KAAK,YAAY,MAAM,EAAE,CAAC,CAAC;YAChE,CAAC;YACD,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC;YAC1C,YAAY,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,KAAK,IAAI,CAAC;YACxC,mBAAmB,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,MAAM,GAAG,GAAG,IAAI,CAAC;YACvD,mBAAmB,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,KAAK,GAAG,GAAG,IAAI,CAAC;QACvD,CAAC;QAED,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC1C,MAAM,IAAI,CAAC,cAAc,CAAC;YACzB,IAAI,CAAC,UAAW,CAAC,aAAa,CAAC,SAAS,CAAY,CAAC,IAAI,GAAG,IAAI,CAAC;YAClE,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;IACH,CAAC;IAED,gDAAgD;IACvC,MAAM;QACb,OAAO,IAAI,CAAA;;;;;;;;;0BASW,IAAI,CAAC,mBAAmB;;;0CAGR,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC;;;;;;;;0BAQhC,IAAI,CAAC,WAAW;;;0CAGA,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC;;;;gDAIV,IAAI,CAAC,CAAC,CAAC,aAAa,CAAC;0BAC3C,IAAI,CAAC,cAAc;;;;0BAInB,IAAI,CAAC,eAAe;;;;;;;;mDAQK,IAAI,CAAC,eAAe;;;;;;;iBAOtD,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC;;;;;sDAKqB,IAAI,CAAC,cAAc;;YAE7D,IAAI,CAAC,cAAc;YACnB,CAAC,CAAC,IAAI,CAAA;;;;6BAIW,IAAI,CAAC,aAAa;;;;;;6BAMlB,CAAC,IAAI,CAAC,aAAa;;eAEjC;YACH,CAAC,CAAC,OAAO;YACT,IAAI,CAAC,cAAc;YACnB,CAAC,CAAC,IAAI,CAAA;;;sBAGI,IAAI,CAAC,CAAC,CAAC,eAAe,CAAC;;;;+BAId,IAAI,CAAC,YAAY,IAAI,IAAI;;;;;;;;;;;;+BAYzB,CAAC,IAAI,CAAC,aAAa;;;eAGnC;YACH,CAAC,CAAC,OAAO;;;sCAGiB,IAAI,CAAC,MAAM;;;sDAGK,CAAC,IAAI,CAAC,QAAQ;;0BAE1C,IAAI,CAAC,gBAAgB;2BACpB,CAAC,IAAI,CAAC,YAAY;;;;;0BAKnB,IAAI,CAAC,eAAe;2BACnB,IAAI,CAAC,YAAY,IAAI,IAAI;;;kBAGlC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC;;+CAEa,IAAI,CAAC,YAAY,IAAI,IAAI;kBACtD,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC;;;0BAGnC,IAAI,CAAC,cAAc;2BAClB,CAAC,IAAI,CAAC,WAAW;;;kBAG1B,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC;;;6BAGH,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc;;;;4BAIxC,IAAI,CAAC,WAAW;6BACf,IAAI,CAAC,YAAY,IAAI,IAAI;;;oBAGlC,IAAI,CAAC,CAAC,CAAC,YAAY,CAAC;;;;;+BAKT,IAAI,CAAC,eAAe;;;;;;;;;+BASpB,IAAI,CAAC,eAAe;;;;;;;;;wBAS3B,IAAI,CAAC,SAAS;yBACb,CAAC,IAAI,CAAC,YAAY;;;gBAG3B,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC;;;;wBAIN,CAAC,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK;;QAE1C,IAAI,CAAC,UAAU;YACf,CAAC,CAAC,IAAI,CAAA;;qCAEuB,IAAI,CAAC,iBAAiB;;kBAEzC,IAAI,CAAC,UAAU,CAAC,GAAG,CACnB,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAA;;gCAEA,IAAI,CAAC,oBAAoB;+BAC1B,IAAI,CAAC,QAAQ;;wBAEpB,IAAI,CAAC,KAAK;;mBAEf,CACF;;;uBAGM,IAAI,CAAC,CAAC,CAAC,gBAAgB,CAAC;;;;WAIpC;YACH,CAAC,CAAC,OAAO;;+BAEc,IAAI,CAAC,CAAC,CAAC,gBAAgB,CAAC;;;;;sBAKjC,GAAG,EAAE,CAAE,IAAI,CAAC,EAAE,CAAC,YAAY,CAAY,CAAC,KAAK,EAAE;;cAEvD,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;;;;KAIrB,CAAC;IACJ,CAAC;IAED,eAAe,CAAC,KAAkB;QAChC,QAAQ,CAAC;QACT,IAAI,CAAC,WAAW,GAAI,KAAK,CAAC,MAA2B,CAAC,KAAe,CAAC;QACtE,QAAQ,CAAC;IACX,CAAC;IAED,kBAAkB,CAAC,KAAkB;QACnC,MAAM,MAAM,GAAG,KAAK,CAAC,MAAqB,CAAC;QAC3C,IAAI,MAAM,CAAC,EAAE,EAAE,CAAC;YACd,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC,EAAE,CAAC;QACzC,CAAC;QAED,IAAK,IAAI,CAAC,EAAE,CAAC,WAAW,CAAc,CAAC,OAAO,EAAE,CAAC;YAC/C,YAAY,CAAC,OAAO,CAClB,uBAAuB,EACvB,IAAI,CAAC,qBAAsB,CAC5B,CAAC;QACJ,CAAC;QAEA,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAY,CAAC,IAAI,GAAG,KAAK,CAAC;QACnD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAC/C,CAAC;IAED,kBAAkB,CAAC,KAAkB;QACnC,IAAK,KAAK,CAAC,MAAsB,CAAC,EAAE,EAAE,CAAC;YACrC,IAAI,CAAC,qBAAqB,GAAI,KAAK,CAAC,MAAsB,CAAC,EAAE,CAAC;QAChE,CAAC;QAED,IAAK,IAAI,CAAC,EAAE,CAAC,WAAW,CAAc,CAAC,OAAO,EAAE,CAAC;YAC/C,YAAY,CAAC,OAAO,CAClB,uBAAuB,EACvB,IAAI,CAAC,qBAAsB,CAC5B,CAAC;QACJ,CAAC;QAEA,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAY,CAAC,IAAI,GAAG,KAAK,CAAC;QACnD,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,KAAK,CAAC,kBAAkB;QACtB,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACtD,IAAI,YAAY,CAAC,OAAO,CAAC,uBAAuB,CAAC,EAAE,CAAC;gBAClD,IAAI,CAAC,qBAAqB,GAAG,YAAY,CAAC,OAAO,CAC/C,uBAAuB,CACxB,CAAC;gBACF,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAC/C,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC;gBACrD,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC/D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC;gBACpC,wBAAwB;gBACxB,4CAA4C;gBAC5C,MAAM,IAAI,CAAC,cAAc,CAAC;gBACzB,IAAI,CAAC,EAAE,CAAC,WAAW,CAAc,CAAC,OAAO,GAAG,KAAK,CAAC;gBAClD,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAY,CAAC,IAAI,GAAG,IAAI,CAAC;YACpD,CAAC;QACH,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC/C,CAAC;IACH,CAAC;IAED,KAAK,CAAC,kBAAkB;QACtB,IACE,IAAI,CAAC,cAAc;YACnB,IAAI,CAAC,YAAY;YACjB,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAC5B,CAAC;YACD,IAAI,YAAY,CAAC,OAAO,CAAC,uBAAuB,CAAC,EAAE,CAAC;gBAClD,IAAI,CAAC,qBAAqB,GAAG,YAAY,CAAC,OAAO,CAC/C,uBAAuB,CACxB,CAAC;gBACF,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAClC,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC;gBACrD,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;gBAC5B,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC/D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC;gBACpC,wBAAwB;gBACxB,4CAA4C;gBAC5C,MAAM,IAAI,CAAC,cAAc,CAAC;gBACzB,IAAI,CAAC,EAAE,CAAC,WAAW,CAAc,CAAC,OAAO,GAAG,KAAK,CAAC;gBAClD,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAY,CAAC,IAAI,GAAG,IAAI,CAAC;YACpD,CAAC;QACH,CAAC;aAAM,CAAC;YACN,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAClC,CAAC;IACH,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;YACrB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,UAAU,KAAK;gBAClD,KAAK,CAAC,IAAI,EAAE,CAAC;YACf,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;YACf,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAS,CAAC,IAAI,EAAE,CAAC;YAClD,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;QACD,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAY,CAAC,IAAI,GAAG,KAAK,CAAC;IACrD,CAAC;IAED,WAAW;QACT,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,kBAAmB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC7C,CAAC;IAED,SAAS;QACP,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC3C,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACzC,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;YAC9B,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;YAClC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;YAC1B,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,CAAC;aAAM,CAAC;YACN,OAAO,CAAC,KAAK,CAAC,uCAAuC,CAAC,CAAC;QACzD,CAAC;IACH,CAAC;IAED,YAAY;QACV,SAAS,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,EAAE;YAC3D,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE;gBACzC,OAAO,CAAC,CAAC,IAAI,KAAK,YAAY,CAAC;YACjC,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE;gBACzC,OAAO,CAAC,CAAC,IAAI,KAAK,YAAY,CAAC;YACjC,CAAC,CAAC,CAAC;YAEH,IAAI,SAAS,GAAG,KAAK,CAAC;YAEtB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,MAAM;gBACxC,IAAI,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,IAAI,EAAE,EAAE,CAAC;oBACvC,SAAS,GAAG,IAAI,CAAC;gBACnB,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,SAAS,EAAE,CAAC;gBACf,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;gBAC9B,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;YAChC,CAAC;YAED,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC;IAEQ,iBAAiB;QACxB,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,IAAI,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;YAC3C,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAChC,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QACjC,CAAC;IACH,CAAC;IAED,gBAAgB,CAAC,QAAkB;QACjC,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;QAChC,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED,iBAAiB,CAAC,QAA8B;QAC9C,QAAQ,CAAC;QACT,IAAI,QAAQ,EAAE,CAAC;YACb,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBAC/B,IAAI,CAAC,aAAc,CAAC,QAAQ,GAAG,IAAI,CAAC,qBAAqB,CAAC;YAC5D,CAAC;YAED,MAAM,WAAW,GAAG;gBAClB,KAAK,EAAE,IAAI,CAAC,qBAAqB;oBAC/B,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,qBAAqB,EAAE;oBAC1C,CAAC,CAAC,IAAI;gBACR,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,SAAS;aAC5D,CAAC;YAEF,SAAS,CAAC,YAAY;iBACnB,YAAY,CAAC,WAAW,CAAC;iBACzB,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;gBACf,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,UAAU,KAAK;oBACxC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,CAAC;gBACxC,CAAC,CAAC,CAAC;gBACH,QAAQ,CAAC,MAAM,CAAC,CAAC;YACnB,CAAC,CAAC;iBACD,KAAK,CAAC,UAAU,KAAK;gBACpB,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACrB,uBAAuB;gBACvB,QAAQ,CAAC,IAAI,CAAC,CAAC;YACjB,CAAC,CAAC,CAAC;QACP,CAAC;IACH,CAAC;IAED,KAAK,CAAC,IAAI,CAAC,OAMV;QACC,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,CAAC;QACjD,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;QACvB,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;QAC7C,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;QAC7C,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;QACnC,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAC;QACrD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC;QAExC,oCAAoC;QACpC,IAAI,CAAC,QAAQ;YACX,sBAAsB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;gBAChD,MAAM,CAAC,UAAU,CAAC,oCAAoC,CAAC,CAAC,OAAO,CAAC;QAElE,gDAAgD;QAChD,IAAI,CAAC,WAAW;YACd,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC;QAEpE,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC;QAE3B,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACxB,0BAA0B;YACzB,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAY,CAAC,IAAI,GAAG,IAAI,CAAC;QACpD,CAAC;aAAM,CAAC;YACN,2CAA2C;YAC1C,IAAI,CAAC,EAAE,CAAC,SAAS,CAAY,CAAC,IAAI,GAAG,IAAI,CAAC;YAC3C,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;IACH,CAAC;IAED,qBAAqB;QACnB,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;YAClB,MAAM,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5D,IAAI,KAAK,GAAG,EAAE,CAAC;YACf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;gBAAE,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YACrE,OAAO,KAAK,CAAC;QACf,CAAC;aAAM,CAAC;YACN,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;iBAC1C,QAAQ,CAAC,EAAE,CAAC;iBACZ,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QACxB,CAAC;IACH,CAAC;IAED,eAAe;QACb,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;YACtB,IAAI,CAAC,QAAS,CAAC,cAAc,EAAE,CAAC;YAChC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC;YACxC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAiB,CAAC,SAAS,GAAG,WAAW,CAAC;YACnE,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC;IACH,CAAC;IAED,cAAc;QACX,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAiB,CAAC,SAAS,GAAG,EAAE,CAAC;QAC1D,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,QAAS,CAAC,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAChE,IAAI,CAAC,EAAE,CAAC,cAAc,CAAiB,CAAC,SAAS,GAAG,EAAE,CAAC;IAC1D,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,QAAS,CAAC,KAAK,EAAE,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;QAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC;QACvC,IAAI,CAAC,EAAE,CAAC,cAAc,CAAiB,CAAC,SAAS,GAAG,EAAE,CAAC;QACvD,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAiB,CAAC,SAAS,GAAG,EAAE,CAAC;IAC5D,CAAC;IAED,kBAAkB;QAChB,MAAM,IAAI,GAAG,IAAI,CAAC,QAAS,CAAC,OAAO,EAAE,CAAC;QACtC,IAAI,QAAQ,CAAC;QAEb,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACxB,MAAM,YAAY,GAAG,IAAI,CAAC,UAAW,CAAC,aAAa,CACjD,gBAAgB,CACG,CAAC;YACtB,MAAM,cAAc,GAAG,IAAI,CAAC,UAAW,CAAC,aAAa,CACnD,iBAAiB,CACE,CAAC;YACtB,QAAQ,GAAG,IAAI,CAAC,qBAAqB,EAAE,GAAG,OAAO,CAAC;YAClD,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE;gBAC7C,IAAI,EAAE,YAAY;aACnB,CAAC,CAAC;YACH,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,QAAS,CAAC,KAAK,EAAE,CAAC;YACvB,cAAc,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACnE,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC5B,CAAC;aAAM,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YAC/B,MAAM,YAAY,GAAG,IAAI,CAAC,UAAW,CAAC,aAAa,CACjD,gBAAgB,CACG,CAAC;YACtB,MAAM,cAAc,GAAG,IAAI,CAAC,UAAW,CAAC,aAAa,CACnD,iBAAiB,CACE,CAAC;YACtB,QAAQ,GAAG,IAAI,CAAC,qBAAqB,EAAE,GAAG,MAAM,CAAC;YACjD,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE;gBAC7C,IAAI,EAAE,WAAW;aAClB,CAAC,CAAC;YACH,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC7B,YAAY,CAAC,KAAK,EAAE,CAAC;YACrB,cAAc,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACnE,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC5B,CAAC;IACH,CAAC;IAED,eAAe;QACb,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;YACrB,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;oBACrB,IAAI,IAAI,CAAC,iBAAiB,GAAG,CAAC,EAAE,CAAC;wBAC/B,IAAI,CAAC,eAAe,EAAE,CAAC;oBACzB,CAAC;yBAAM,CAAC;wBACN,IAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,CAAC;oBACD,IAAI,IAAI,CAAC,iBAAiB,GAAG,CAAC;wBAAE,IAAI,CAAC,iBAAiB,IAAI,CAAC,CAAC;oBAC5D,IAAI,IAAI,CAAC,iBAAiB,IAAI,CAAC,EAAE,CAAC;wBAC/B,IAAI,CAAC,EAAE,CAAC,cAAc,CAAiB,CAAC,SAAS;4BAChD,eAAe,CAAC;oBACpB,CAAC;gBACH,CAAC;YACH,CAAC,EAAE,IAAI,CAAC,CAAC;QACX,CAAC;aAAM,CAAC;YACN,OAAO,CAAC,KAAK,CAAC,kDAAkD,CAAC,CAAC;QACpE,CAAC;IACH,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC;QACxC,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACxB,MAAM,YAAY,GAAG,IAAI,CAAC,UAAW,CAAC,aAAa,CACjD,gBAAgB,CACG,CAAC;YAEtB,IAAI,CAAC,gBAAgB,CAAC,CAAC,MAAmB,EAAE,EAAE;gBAC5C,IAAI,MAAM,EAAE,CAAC;oBACX,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;oBAC1B,IAAI,CAAC;wBACH,YAAY,CAAC,SAAS,GAAG,MAAM,CAAC;oBAClC,CAAC;oBAAC,OAAO,KAAK,EAAE,CAAC;wBACf,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;wBACrB,YAAY,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,MAAa,CAAC,CAAC;oBAC/D,CAAC;oBACD,YAAY,CAAC,IAAI,EAAE,CAAC;oBACpB,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC;oBAC1B,YAAY,CAAC,QAAQ,GAAG,KAAK,CAAC;oBAE9B,YAAY;oBACZ,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,MAAM,EAAE;wBAChC,IAAI,EAAE,OAAO;qBACd,CAAC,CAAC;gBACL,CAAC;qBAAM,CAAC;oBACN,OAAO,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;oBAClC,IAAI,CAAC,EAAE,CAAC,YAAY,CAAY,CAAC,IAAI,GAAG,IAAI,CAAC;oBAC7C,IAAI,CAAC,EAAE,CAAC,mBAAmB,CAAiB,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;gBACrE,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;aAAM,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YAC/B,MAAM,YAAY,GAAG,IAAI,CAAC,UAAW,CAAC,aAAa,CACjD,gBAAgB,CACG,CAAC;YAEtB,IAAI,CAAC,gBAAgB,CAAC,CAAC,MAAmB,EAAE,EAAE;gBAC5C,IAAI,MAAM,EAAE,CAAC;oBACX,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;oBAC1B,IAAI,CAAC;wBACH,YAAY,CAAC,SAAS,GAAG,MAAM,CAAC;oBAClC,CAAC;oBAAC,OAAO,KAAK,EAAE,CAAC;wBACf,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;wBACrB,YAAY,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,MAAa,CAAC,CAAC;oBAC/D,CAAC;oBACD,YAAY,CAAC,IAAI,EAAE,CAAC;oBACpB,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC;oBAC1B,YAAY,CAAC,QAAQ,GAAG,KAAK,CAAC;oBAC9B,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC;wBAC9B,SAAS,EAAE,IAAI,CAAC,EAAE,CAAC,WAAW,CAAgB;wBAC9C,SAAS,EAAE,SAAS;wBACpB,aAAa,EAAE,SAAS;wBACxB,WAAW,EAAE,CAAC;wBACd,OAAO,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;qBAC/D,CAAC,CAAC;oBAEF,IAAI,CAAC,MAAO,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAS,CAAC,IAAI,EAAE,CAAC;oBAEnD,IAAI,CAAC,QAAQ,GAAG,IAAI,SAAS,CAAC,MAAM,EAAE;wBACpC,IAAI,EAAE,OAAO;qBACd,CAAC,CAAC;gBACL,CAAC;qBAAM,CAAC;oBACN,OAAO,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;oBAClC,IAAI,CAAC,EAAE,CAAC,YAAY,CAAY,CAAC,IAAI,GAAG,IAAI,CAAC;oBAC7C,IAAI,CAAC,EAAE,CAAC,mBAAmB,CAAiB,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;gBACrE,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QACD,UAAU,CAAC,GAAG,EAAE;YACd,yCAAyC;YACzC,0CAA0C;QAC5C,CAAC,CAAC,CAAC;IACL,CAAC;CACF,CAAA;AA33BC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;iDACK;AAGhC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;oDACU;AAGrC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;sDACY;AAGvC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;uDACL;AAGvB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;uDACL;AAGvB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;kDACb;AAGd;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;qDACI;AAG/B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;0DACF;AAG1B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;oDACR;AAGpB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;uDACL;AAGvB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;sDACN;AAGtB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;yDACY;AAGvC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;wDACW;AAGtC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;2DACc;AAGzC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;6DACgB;AAG3C;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;8CACD;AAG1B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;0DACW;AAGtC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;0DACL;AAGtB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;qDACuB;AAGjD;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;qDACuB;AAGjD;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;mDACqB;AAG/C;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;qDACM;AAGjC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;+CACI;AAG/B;IADC,KAAK,EAAE;oDACiB;AAEG;IAA3B,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;uDAAyB;AACvB;IAA5B,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;sDAAuB;AACtB;IAA5B,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;iDAAkB;AA3EnC,eAAe;IAD3B,aAAa,CAAC,mBAAmB,CAAC;GACtB,eAAe,CA63B3B","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { property, customElement, state } from \"lit/decorators.js\";\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\nimport \"@material/web/button/filled-button.js\";\nimport \"@material/web/radio/radio.js\";\n\nimport * as RecordRTC from \"recordrtc\";\nimport * as WaveSurfer from \"wavesurfer.js\";\nimport * as RecorderPlugin from \"wavesurfer.js/dist/plugin/wavesurfer.microphone.min.js\";\n\nimport \"@material/web/dialog/dialog.js\";\nimport \"@material/web/checkbox/checkbox.js\";\nimport \"@material/web/radio/radio.js\";\n\nimport { Checkbox } from \"@material/web/checkbox/internal/checkbox.js\";\nimport { Dialog } from \"@material/web/dialog/internal/dialog.js\";\n\n@customElement(\"yp-media-recorder\")\nexport class YpMediaRecorder extends YpBaseElement {\n  @property({ type: Object })\n  recorder: RecordRTC | undefined;\n\n  @property({ type: Object })\n  mediaStream: MediaStream | undefined;\n\n  @property({ type: Object })\n  captureStream: MediaStream | undefined;\n\n  @property({ type: Boolean })\n  audioRecording = false;\n\n  @property({ type: Boolean })\n  videoRecording = false;\n\n  @property({ type: Number })\n  maxLength = 5;\n\n  @property({ type: Object })\n  recordedData: File | undefined;\n\n  @property({ type: Boolean })\n  recordingFinished = false;\n\n  @property({ type: Boolean })\n  isRecording = false;\n\n  @property({ type: Boolean })\n  rememberDevice = false;\n\n  @property({ type: Boolean })\n  previewActive = false;\n\n  @property({ type: Object })\n  callbackFunction: Function | undefined;\n\n  @property({ type: Object })\n  captureCallback: Function | undefined;\n\n  @property({ type: Object })\n  uploadFileFunction: Function | undefined;\n\n  @property({ type: Object })\n  selectDeviceFunction: Function | undefined;\n\n  @property({ type: String })\n  error: string | undefined;\n\n  @property({ type: String })\n  selectDeviceTitle: string | undefined;\n\n  @property({ type: Number })\n  recordSecondsLeft = 0;\n\n  @property({ type: Array })\n  audioDevices: Array<MediaDeviceInfo> | undefined;\n\n  @property({ type: Array })\n  videoDevices: Array<MediaDeviceInfo> | undefined;\n\n  @property({ type: Array })\n  allDevices: Array<MediaDeviceInfo> | undefined;\n\n  @property({ type: Object })\n  videoOptions: object | undefined;\n\n  @property({ type: Object })\n  surfer: WaveSurfer | undefined;\n\n  @state()\n  videoAspect = \"portrait\";\n\n  @property({ type: String }) selectedCamera = \"user\";\n  @property({ type: Boolean }) hasFacingMode = false;\n  @property({ type: Boolean }) isMobile = false;\n\n  selectedAudioDeviceId: string | null = null;\n  selectedVideoDeviceId: string | null = null;\n\n  videoSettings:\n    | { width: number; height: number; deviceId?: string }\n    | undefined;\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        #dialog[audio-recording] {\n          width: 430px;\n        }\n\n        .checkboxContainer {\n          margin-bottom: 16px;\n          margin-top: 8px;\n        }\n\n        md-radio {\n          margin-left: 4px;\n        }\n\n        .mainbuttons {\n          width: 100%;\n          margin-top: 8px;\n          margin-bottom: 8px;\n        }\n\n        .videoAspectDescription {\n          margin-top: 24px;\n          margin-bottom: 12px;\n          font-size: 14px;\n        }\n\n        label {\n          padding: 8px;\n          margin-bottom: 8px;\n        }\n\n        .recording {\n          color: #f00;\n          animation-name: pulse;\n          animation-duration: 1.3s;\n          animation-iteration-count: infinite;\n          animation-timing-function: linear;\n        }\n\n        .recordingTime {\n          color: #f00;\n          animation-name: pulse;\n          animation-duration: 1s;\n          animation-iteration-count: infinite;\n          animation-timing-function: linear;\n        }\n\n        @keyframes pulse {\n          from {\n            opacity: 1;\n          }\n          to {\n            opacity: 0.5;\n          }\n        }\n\n        .buttonText {\n          margin-left: 6px;\n        }\n\n        .actionButton {\n        }\n\n        .iconButtons {\n          margin-top: 2px;\n        }\n\n        #secondsLeft {\n          margin-top: 12px;\n          margin-left: 4px;\n          margin-right: 4px;\n        }\n\n        .mainContainer {\n          padding: 0 24px;\n        }\n\n        @media (max-width: 640px) {\n          #dialog {\n            padding: 0;\n            margin: 0;\n          }\n          .mainContainer {\n            padding: 0 0;\n          }\n\n          .mainbuttons {\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n          }\n\n          #dialog {\n            min-height: 242px;\n            min-width: 320px;\n            width: 100%;\n          }\n        }\n\n        @media (max-width: 360px) {\n          .uploadFileText {\n            display: none;\n          }\n        }\n\n        .rememberBox {\n          margin-top: 8px;\n        }\n\n        #checkBox {\n          margin-left: 6px;\n        }\n\n        .header {\n          font-weight: bold;\n          font-size: 18px;\n          margin-bottom: 10px;\n        }\n\n        #waveform {\n          height: 128px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      `,\n    ];\n  }\n\n  _closeMediaStream() {\n    if (this.mediaStream) {\n      this.mediaStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n      this.mediaStream = undefined;\n    }\n    if (this.surfer) {\n      (this.surfer.getActivePlugins()[0] as any).stop();\n      this.surfer.destroy();\n      this.surfer = undefined;\n    }\n    this.previewActive = false;\n  }\n\n  private _uploadFileThroughPhoneCamera() {\n    // Close any open dialogs or media streams before starting the upload process\n    this._close();\n\n    // Assuming `uploadFileFunction` is a method passed via properties that handles the file upload,\n    // and `videoAspect` is a property that determines the aspect ratio of the video to be uploaded.\n    if (this.uploadFileFunction) {\n      this.uploadFileFunction(this.videoAspect, true);\n    } else {\n      console.error(\"Upload file function is not defined\");\n    }\n  }\n\n  private async _openRecorderDialog() {\n    if (this.videoRecording && this.isMobile) {\n      this._uploadFileThroughPhoneCamera();\n    } else if (this.videoRecording) {\n      const videoElement = this.shadowRoot!.querySelector(\n        \"#videoRecorder\"\n      ) as HTMLVideoElement;\n      const videoPreviewElement = this.shadowRoot!.querySelector(\n        \"#videoPreviewer\"\n      ) as HTMLVideoElement;\n      let width: number, height: number;\n\n      if (window.innerHeight > window.innerWidth) {\n        this.videoSettings = { width: 720, height: 1280 };\n        height = Math.min(1280, Math.abs(window.innerHeight));\n        width = Math.min(720, Math.abs(height * 0.5625));\n        console.info(\n          `Portrait - width: ${width} height: ${height} video width: 720 height: 1280`\n        );\n      } else {\n        this.videoSettings = { width: 1280, height: 720 };\n        let scaleFactor = 0.8;\n        if (window.innerHeight < 700) scaleFactor = 0.7;\n        if (window.innerHeight < 500) scaleFactor = 0.6;\n        height = Math.min(720, Math.abs(window.innerHeight * scaleFactor));\n        width = Math.min(1280, Math.abs(height * 1.77777777778));\n        console.info(`Landscape - width: ${width} height: ${height}`);\n      }\n      videoElement.style.height = `${height}px`;\n      videoElement.style.width = `${width}px`;\n      videoPreviewElement.style.height = `${height * 0.8}px`;\n      videoPreviewElement.style.width = `${width * 0.8}px`;\n    }\n\n    if (this.audioRecording || !this.isMobile) {\n      await this.updateComplete;\n      (this.shadowRoot!.querySelector(\"#dialog\") as Dialog).open = true;\n      this.setupRecorders();\n    }\n  }\n\n  //TODO: Get WebRTC working again, it almost does\n  override render() {\n    return html`\n      <md-dialog id=\"optionsDialog\" modal>\n        <div class=\"layout vertical center-center\" slot=\"content\">\n          <div class=\"layout vertical center-center optionsButtons\">\n            <div hidden class=\"layout horizontal center-center\">\n              <md-filled-button\n                raised\n                dialogAction=\"confirm\"\n                class=\"uploadFileButton\"\n                @click=\"${this._openRecorderDialog}\"\n              >\n                <md-icon>fiber_manual_record</md-icon>\n                <div class=\"buttonText\">${this.t(\"record\")}</div>\n              </md-filled-button>\n            </div>\n            <div class=\"layout horizontal center-center\">\n              <md-filled-button\n                raised\n                dialogAction=\"confirm\"\n                class=\"uploadFileButton\"\n                @click=\"${this._uploadFile}\"\n              >\n                <md-icon>file_upload</md-icon>\n                <div class=\"buttonText\">${this.t(\"upload\")}</div>\n              </md-filled-button>\n            </div>\n          </div>\n          <div class=\"videoAspectDescription\">${this.t(\"videoFormat\")}</div>\n          <div ?hidden=\"${this.audioRecording}\" class=\"checkboxContainer\">\n            <label>\n              Landscape\n              <md-radio\n                @click=\"${this._setVideoAspect}\"\n                checked\n                value=\"landscape\"\n                ><md-icon>landscape</md-icon></md-radio\n              >\n            </label>\n            <label\n              >Portrait\n              <md-radio value=\"portrait\" @click=\"${this._setVideoAspect}\"\n                ><md-icon>portrait</md-icon></md-radio\n              >\n            </label>\n          </div>\n          <div class=\"layout horizontal center-center\" slot=\"actions\">\n            <md-text-button dialogAction=\"close\"\n              >${this.t(\"cancel\")}</md-text-button\n            >\n          </div>\n        </div>\n      </md-dialog>\n      <md-dialog id=\"dialog\" modal ?audioRecording=\"${this.audioRecording}\">\n        <div class=\"layout vertical no-padding mainContainer\">\n          ${this.videoRecording\n            ? html`\n                <video\n                  id=\"videoRecorder\"\n                  class=\"videoRecorder\"\n                  ?hidden=\"${this.previewActive}\"\n                ></video>\n                <video\n                  id=\"videoPreviewer\"\n                  preload=\"auto\"\n                  class=\"videoRecorder\"\n                  ?hidden=\"${!this.previewActive}\"\n                ></video>\n              `\n            : nothing}\n          ${this.audioRecording\n            ? html`\n                <div class=\"layout vertical center-center\">\n                  <div class=\"layout horizontal center-center header\">\n                    ${this.t(\"voiceRecorder\")}\n                  </div>\n                  <div\n                    id=\"waveform\"\n                    ?hidden=\"${this.recordedData != null}\"\n                  ></div>\n                  <audio\n                    id=\"audioRecorder\"\n                    class=\"audioRecorder\"\n                    ?hidden\n                  ></audio>\n                  <audio\n                    id=\"audioPreviewer\"\n                    controls\n                    preload=\"auto\"\n                    class=\"audioRecorder\"\n                    ?hidden=\"${!this.previewActive}\"\n                  ></audio>\n                </div>\n              `\n            : nothing}\n\n          <div class=\"layout horizontal mainbuttons\">\n            <md-icon-button @click=\"${this._close}\">\n              <md-icon>clear</md-icon>\n            </md-icon-button>\n            <div class=\"layout horizontal\" ?hidden=\"${!this.recorder}\">\n              <md-icon-button\n                @click=\"${this._deleteRecording}\"\n                ?hidden=\"${!this.recordedData}\"\n              >\n                <md-icon>delete</md-icon>\n              </md-icon-button>\n              <md-text-button\n                @click=\"${this._startRecording}\"\n                ?hidden=\"${this.recordedData != null}\"\n              >\n                <md-icon>fiber_manual_record</md-icon>\n                ${this.t(\"record\")}\n              </md-text-button>\n              <div id=\"secondsLeft\" ?hidden=\"${this.recordedData != null}\">\n                ${this.recordSecondsLeft} ${this.t(\"seconds\")}\n              </div>\n              <md-text-button\n                @click=\"${this._stopRecording}\"\n                ?hidden=\"${!this.isRecording}\"\n              >\n                <md-icon>stop</md-icon>\n                ${this.t(\"stop\")}\n              </md-text-button>\n            </div>\n            <span ?hidden=\"${this.isRecording || this.audioRecording}\">\n              <div class=\"layout horizontal\">\n                <md-text-button\n                  id=\"uploadFileButton\"\n                  @click=\"${this._uploadFile}\"\n                  ?hidden=\"${this.recordedData != null}\"\n                >\n                  <md-icon>file_upload</md-icon>\n                  ${this.t(\"uploadFile\")}\n                </md-text-button>\n                <label>\n                  <md-radio\n                    name=\"videoAspect\"\n                    @change=\"${this._setVideoAspect}\"\n                    value=\"landscape\"\n                  >\n                  </md-radio>\n                  landscape\n                </label>\n                <label>\n                  <md-radio\n                    name=\"videoAspect\"\n                    @change=\"${this._setVideoAspect}\"\n                    value=\"portrait\"\n                  >\n                  </md-radio>\n                  portrait\n                </label>\n              </div>\n            </span>\n            <md-text-button\n              @click=\"${this._sendBack}\"\n              ?hidden=\"${!this.recordedData}\"\n            >\n              <md-icon>send</md-icon>\n              ${this.t(\"send\")}\n            </md-text-button>\n          </div>\n        </div>\n        <div ?hidden=\"${!this.error}\">${this.error}</div>\n      </md-dialog>\n      ${this.allDevices\n        ? html`\n            <md-dialog id=\"selectDevices\" modal>\n              <div slot=\"headline\">${this.selectDeviceTitle}</div>\n              <md-select id=\"deviceListBox\">\n                ${this.allDevices.map(\n                  (item) => html`\n                    <md-select-option\n                      @click=\"${this.selectDeviceFunction}\"\n                      value=\"${item.deviceId}\"\n                    >\n                      ${item.label}\n                    </md-select-option>\n                  `\n                )}\n              </md-select>\n              <div class=\"layout horizontal rememberBox\">\n                <div>${this.t(\"rememberDevice\")}</div>\n                <md-checkbox id=\"checkBox\"></md-checkbox>\n              </div>\n            </md-dialog>\n          `\n        : nothing}\n      <md-dialog id=\"noDevices\">\n        <div slot=\"headline\">${this.t(\"noDevicesFound\")}</div>\n        <div class=\"button layout horizontal center-center\">\n          <md-text-button\n            slot=\"actions\"\n            raised\n            @click=\"${() => (this.$$(\"#noDevices\") as Dialog).close()}\"\n          >\n            ${this.t(\"ok\")}\n          </md-text-button>\n        </div>\n      </md-dialog>\n    `;\n  }\n\n  _setVideoAspect(event: CustomEvent) {\n    debugger;\n    this.videoAspect = (event.target as HTMLInputElement).value as string;\n    debugger;\n  }\n\n  _selectAudioDevice(event: CustomEvent) {\n    const target = event.target as HTMLElement;\n    if (target.id) {\n      this.selectedAudioDeviceId = target.id;\n    }\n\n    if ((this.$$(\"#checkBox\") as Checkbox).checked) {\n      localStorage.setItem(\n        \"selectedAudioDeviceId\",\n        this.selectedAudioDeviceId!\n      );\n    }\n\n    (this.$$(\"#selectDevices\") as Dialog).open = false;\n    this._openMediaSession(this.captureCallback);\n  }\n\n  _selectVideoDevice(event: CustomEvent) {\n    if ((event.target as HTMLElement).id) {\n      this.selectedVideoDeviceId = (event.target as HTMLElement).id;\n    }\n\n    if ((this.$$(\"#checkBox\") as Checkbox).checked) {\n      localStorage.setItem(\n        \"selectedVideoDeviceId\",\n        this.selectedVideoDeviceId!\n      );\n    }\n\n    (this.$$(\"#selectDevices\") as Dialog).open = false;\n    this._checkAudioDevices();\n  }\n\n  async _checkAudioDevices() {\n    if (this.audioDevices && this.audioDevices.length > 1) {\n      if (localStorage.getItem(\"selectedAudioDeviceId\")) {\n        this.selectedAudioDeviceId = localStorage.getItem(\n          \"selectedAudioDeviceId\"\n        );\n        this._openMediaSession(this.captureCallback);\n      } else {\n        this.selectDeviceTitle = this.t(\"selectAudioDevice\");\n        this.selectDeviceFunction = this._selectAudioDevice.bind(this);\n        this.allDevices = this.audioDevices;\n        //TODO: Fix this back in\n        //this.$$('#deviceListBox').selected = null;\n        await this.updateComplete;\n        (this.$$(\"#checkBox\") as Checkbox).checked = false;\n        (this.$$(\"#selectDevices\") as Dialog).open = true;\n      }\n    } else {\n      this._openMediaSession(this.captureCallback);\n    }\n  }\n\n  async _checkVideoDevices() {\n    if (\n      this.videoRecording &&\n      this.videoDevices &&\n      this.videoDevices.length > 1\n    ) {\n      if (localStorage.getItem(\"selectedVideoDeviceId\")) {\n        this.selectedVideoDeviceId = localStorage.getItem(\n          \"selectedVideoDeviceId\"\n        );\n        await this._checkAudioDevices();\n      } else {\n        this.selectDeviceTitle = this.t(\"selectVideoDevice\");\n        this.rememberDevice = false;\n        this.selectDeviceFunction = this._selectVideoDevice.bind(this);\n        this.allDevices = this.videoDevices;\n        //TODO: Fix this back in\n        //this.$$('#deviceListBox').selected = null;\n        await this.updateComplete;\n        (this.$$(\"#checkBox\") as Checkbox).checked = false;\n        (this.$$(\"#selectDevices\") as Dialog).open = true;\n      }\n    } else {\n      await this._checkAudioDevices();\n    }\n  }\n\n  _close() {\n    if (this.mediaStream) {\n      this.mediaStream.getTracks().forEach(function (track) {\n        track.stop();\n      });\n    }\n    if (this.surfer) {\n      (this.surfer.getActivePlugins()[0] as any).stop();\n      this.surfer.destroy();\n    }\n    this.previewActive = false;\n    (this.$$(\"#optionsDialog\") as Dialog).open = false;\n  }\n\n  _uploadFile() {\n    this._close();\n    this.uploadFileFunction!(this.videoAspect);\n  }\n\n  _sendBack() {\n    if (this.callbackFunction && this.recorder) {\n      this.callbackFunction(this.recordedData);\n      this.recordedData = undefined;\n      this.recorder.clearRecordedData();\n      this.recorder.reset();\n      this.recorder = undefined;\n      this._close();\n    } else {\n      console.error(\"No callback function for media player\");\n    }\n  }\n\n  checkDevices() {\n    navigator.mediaDevices.enumerateDevices().then((devicesIn) => {\n      this.audioDevices = devicesIn.filter((d) => {\n        return d.kind === \"audioinput\";\n      });\n\n      this.videoDevices = devicesIn.filter((d) => {\n        return d.kind === \"videoinput\";\n      });\n\n      let hasLabels = false;\n\n      this.videoDevices.forEach(function (device) {\n        if (device.label && device.label != \"\") {\n          hasLabels = true;\n        }\n      });\n\n      if (!hasLabels) {\n        this.videoDevices = undefined;\n        this.audioDevices = undefined;\n      }\n\n      this._checkVideoDevices();\n    });\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    if (window.innerHeight > window.innerWidth) {\n      this.videoAspect = \"portrait\";\n    } else {\n      this.videoAspect = \"landscape\";\n    }\n  }\n\n  captureUserMedia(callback: Function) {\n    this.captureCallback = callback;\n    this.checkDevices();\n  }\n\n  _openMediaSession(callback: Function | undefined) {\n    debugger;\n    if (callback) {\n      if (this.selectedVideoDeviceId) {\n        this.videoSettings!.deviceId = this.selectedVideoDeviceId;\n      }\n\n      const constraints = {\n        audio: this.selectedAudioDeviceId\n          ? { deviceId: this.selectedAudioDeviceId }\n          : true,\n        video: this.videoRecording ? this.videoSettings : undefined,\n      };\n\n      navigator.mediaDevices\n        .getUserMedia(constraints)\n        .then((stream) => {\n          stream.getTracks().forEach(function (track) {\n            console.info(track.getCapabilities());\n          });\n          callback(stream);\n        })\n        .catch(function (error) {\n          console.error(error);\n          //TODO: Fire user error\n          callback(null);\n        });\n    }\n  }\n\n  async open(options: {\n    callbackFunction: Function | undefined;\n    videoRecording: boolean;\n    audioRecording: boolean;\n    maxLength: number;\n    uploadFileFunction: Function | undefined;\n  }) {\n    this.callbackFunction = options.callbackFunction;\n    this.recordingFinished = false;\n    this.error = undefined;\n    this.audioRecording = options.audioRecording;\n    this.videoRecording = options.videoRecording;\n    this.maxLength = options.maxLength;\n    this.uploadFileFunction = options.uploadFileFunction;\n    this.recordSecondsLeft = this.maxLength;\n\n    // Determine if the device is mobile\n    this.isMobile =\n      /Android|iPhone|iPad/i.test(navigator.userAgent) ||\n      window.matchMedia(\"only screen and (max-width: 480px)\").matches;\n\n    // Set the video aspect based on the orientation\n    this.videoAspect =\n      window.innerHeight > window.innerWidth ? \"portrait\" : \"landscape\";\n\n    await this.requestUpdate();\n\n    if (this.videoRecording) {\n      // Open the options dialog\n      (this.$$(\"#optionsDialog\") as Dialog).open = true;\n    } else {\n      // Open the dialog and set up the recorders\n      (this.$$(\"#dialog\") as Dialog).open = true;\n      this.setupRecorders();\n    }\n  }\n\n  _generateRandomString() {\n    if (window.crypto) {\n      const a = window.crypto.getRandomValues(new Uint32Array(3));\n      let token = \"\";\n      for (let i = 0, l = a.length; i < l; i++) token += a[i].toString(36);\n      return token;\n    } else {\n      return (Math.random() * new Date().getTime())\n        .toString(36)\n        .replace(/\\./g, \"\");\n    }\n  }\n\n  _startRecording() {\n    if (!this.isRecording) {\n      this.recorder!.startRecording();\n      this.recordSecondsLeft = this.maxLength;\n      this.isRecording = true;\n      (this.$$(\"#recordingIcon\") as HTMLElement).className = \"recording\";\n      this._recordingTimer();\n    } else {\n      this._stopRecording();\n    }\n  }\n\n  _stopRecording() {\n    (this.$$(\"#recordingIcon\") as HTMLElement).className = \"\";\n    this.isRecording = false;\n    this.recorder!.stopRecording(this._storeRecordedData.bind(this));\n    (this.$$(\"#secondsLeft\") as HTMLElement).className = \"\";\n  }\n\n  _deleteRecording() {\n    this.recorder!.reset();\n    this.previewActive = false;\n    this.recordedData = undefined;\n    this.recordSecondsLeft = this.maxLength;\n    (this.$$(\"#secondsLeft\") as HTMLElement).className = \"\";\n    (this.$$(\"#recordingIcon\") as HTMLElement).className = \"\";\n  }\n\n  _storeRecordedData() {\n    const blob = this.recorder!.getBlob();\n    let fileName;\n\n    if (this.videoRecording) {\n      const videoElement = this.shadowRoot!.querySelector(\n        \"#videoRecorder\"\n      ) as HTMLVideoElement;\n      const videoPreviewer = this.shadowRoot!.querySelector(\n        \"#videoPreviewer\"\n      ) as HTMLVideoElement;\n      fileName = this._generateRandomString() + \".webm\";\n      this.recordedData = new File([blob], fileName, {\n        type: \"video/webm\",\n      });\n      videoElement.controls = true;\n      this.recorder!.reset();\n      videoPreviewer.src = window.URL.createObjectURL(this.recordedData);\n      videoPreviewer.controls = true;\n      this.previewActive = true;\n    } else if (this.audioRecording) {\n      const audioElement = this.shadowRoot!.querySelector(\n        \"#audioRecorder\"\n      ) as HTMLAudioElement;\n      const audioPreviewer = this.shadowRoot!.querySelector(\n        \"#audioPreviewer\"\n      ) as HTMLAudioElement;\n      fileName = this._generateRandomString() + \".mp3\";\n      this.recordedData = new File([blob], fileName, {\n        type: \"audio/mp3\",\n      });\n      audioElement.controls = true;\n      audioElement.pause();\n      audioPreviewer.src = window.URL.createObjectURL(this.recordedData);\n      audioPreviewer.controls = true;\n      this.previewActive = true;\n    }\n  }\n\n  _recordingTimer() {\n    if (this.isRecording) {\n      setTimeout(() => {\n        if (this.isRecording) {\n          if (this.recordSecondsLeft > 0) {\n            this._recordingTimer();\n          } else {\n            this._stopRecording();\n          }\n          if (this.recordSecondsLeft > 0) this.recordSecondsLeft -= 1;\n          if (this.recordSecondsLeft <= 5) {\n            (this.$$(\"#secondsLeft\") as HTMLElement).className =\n              \"recordingTime\";\n          }\n        }\n      }, 1000);\n    } else {\n      console.error(\"_recordingTimer called without in recording mode\");\n    }\n  }\n\n  setupRecorders() {\n    this.recordSecondsLeft = this.maxLength;\n    if (this.videoRecording) {\n      const videoElement = this.shadowRoot!.querySelector(\n        \"#videoRecorder\"\n      ) as HTMLVideoElement;\n\n      this.captureUserMedia((stream: MediaStream) => {\n        if (stream) {\n          this.mediaStream = stream;\n          try {\n            videoElement.srcObject = stream;\n          } catch (error) {\n            console.error(error);\n            videoElement.src = window.URL.createObjectURL(stream as any);\n          }\n          videoElement.play();\n          videoElement.muted = true;\n          videoElement.controls = false;\n\n          //@ts-ignore\n          this.recorder = RecordRTC(stream, {\n            type: \"video\",\n          });\n        } else {\n          console.error(\"Can't find stream\");\n          (this.$$(\"#noDevices\") as Dialog).open = true;\n          (this.$$(\"#uploadFileButton\") as HTMLElement).style.color = \"#F00\";\n        }\n      });\n    } else if (this.audioRecording) {\n      const audioElement = this.shadowRoot!.querySelector(\n        \"#audioRecorder\"\n      ) as HTMLAudioElement;\n\n      this.captureUserMedia((stream: MediaStream) => {\n        if (stream) {\n          this.mediaStream = stream;\n          try {\n            audioElement.srcObject = stream;\n          } catch (error) {\n            console.error(error);\n            audioElement.src = window.URL.createObjectURL(stream as any);\n          }\n          audioElement.play();\n          audioElement.muted = true;\n          audioElement.controls = false;\n          this.surfer = WaveSurfer.create({\n            container: this.$$(\"#waveform\") as HTMLElement,\n            waveColor: \"#ff3d00\",\n            progressColor: \"#ff3d00\",\n            cursorWidth: 0,\n            plugins: [RecorderPlugin.create({ stream: this.mediaStream })],\n          });\n\n          (this.surfer!.getActivePlugins()[0] as any).play();\n\n          this.recorder = new RecordRTC(stream, {\n            type: \"audio\",\n          });\n        } else {\n          console.error(\"Can't find stream\");\n          (this.$$(\"#noDevices\") as Dialog).open = true;\n          (this.$$(\"#uploadFileButton\") as HTMLElement).style.color = \"#F00\";\n        }\n      });\n    }\n    setTimeout(() => {\n      //TODO: Check this and add back if needed\n      //(this.$$('#dialog') as Dialog).center();\n    });\n  }\n}\n"]}