{"version":3,"file":"setup-app.js","sourceRoot":"","sources":["../../../src/common/test/setup-app.ts"],"names":[],"mappings":"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","sourcesContent":["import { YpServerApi } from '../YpServerApi.js';\nimport { YpAppGlobals } from '../../yp-app/YpAppGlobals.js';\nimport { YpAppUser } from '../../yp-app/YpAppUser.js';\nimport i18next from 'i18next';\nimport HttpApi from 'i18next-http-backend';\nimport { html } from 'lit';\nimport fetchMock from 'fetch-mock';\n\nexport class YpTestHelpers {\n  static async setupApp() {\n    window.serverApi = new YpServerApi();\n    window.appGlobals = new YpAppGlobals(window.serverApi);\n    window.appUser = new YpAppUser(window.serverApi);\n    await i18next.use(HttpApi).init({\n      lng: 'en',\n      fallbackLng: 'en',\n      backend: { loadPath: '/locales/{{lng}}/{{ns}}.json' },\n    });\n\n    window.appGlobals.locale = 'en';\n    window.appGlobals.i18nTranslation = i18next;\n    window.appGlobals.haveLoadedLanguages = true;\n  }\n\n  static get fetchMockConfig() {\n    return { headers: {\n      'Content-Type': 'application/json',\n  }};\n  }\n\n  static getDomain() {\n    return {\n      id: 1,\n      name: 'Betri Reykjavik Test',\n      description: '',\n      counter_posts: 10,\n      counter_points: 11,\n      counter_users: 12,\n      Communities: [\n        {\n          id: 1,\n          name: 'BEE',\n          description: '',\n          counter_posts: 10,\n          counter_points: 11,\n          counter_users: 12,\n          configuration: {\n\n          }\n        } as YpCommunityData\n      ]\n    } as YpDomainData\n  }\n\n  static getCommunity() {\n    return {\n     id: 1,\n      name: 'Betri Reykjavik Test',\n      description: '',\n      counter_posts: 10,\n      counter_points: 11,\n      counter_users: 12,\n      configuration: {\n\n      },\n      Groups: [\n        {\n          id: 1,\n          name: 'Betri Reykjavik Test',\n          objectives: '',\n          counter_posts: 10,\n          counter_points: 11,\n          counter_users: 12,\n          configuration: {\n          }\n        } as YpGroupData\n      ]\n    } as YpCommunityData;\n  }\n\n  static getPost() {\n    return {\n      id: 1,\n      location:{\n        latitude: 2,\n        longitude: 3,\n      },\n      name: 'Robert',\n      group_id: 1,\n      description: 'Post-Test',\n      counter_endorsements_up: 2,\n      counter_endorsements_down: 4,\n      counter_points: 5,\n      Group: {\n        id: 1,\n        name: 'Alexi',\n        community_id: 1,\n        counter_points: 1,\n        counter_users: 2,\n        counter_posts: 1,\n        configuration: {\n          makeMapViewDefault: false\n        }\n      }\n    } as YpPostData;\n  }\n\n  static getPoint() {\n    return {\n      id: 1,\n      public_data: {},\n      created_at: new Date(),\n      counter_quality_up: 3,\n      counter_quality_down: 2,\n      content: 'Betri-Alexander',\n      value: 1,\n      PointRevisions: [\n        {\n          id: 1,\n          content: \"Blah\",\n          User: {\n            id: 1,\n            email: \"blah@blah.is\",\n            name: \"bluh\"\n          }\n        }\n      ],\n    } as YpPointData;\n  }\n\n\n  static getUser() {\n    return {\n      id: 1,\n      name: 'YURR'\n    } as YpUserData\n  }\n\n  static getGroup() {\n    return {\n      id: 1,\n      name: 'Betri Reykjavik Test',\n      objectives: '',\n      counter_posts: 10,\n      counter_points: 11,\n      counter_users: 12,\n      configuration: {\n        makeMapViewDefault: false\n      }\n    } as YpGroupData\n  }\n\n  static getGroupResults() {\n    return {\n      group: YpTestHelpers.getGroup(),\n      hasNonOpenPosts: true\n    }\n  }\n\n  static getImages() {\n    return [{\n      description: 'Tekinn af ',\n      photographer_name: 'Alexander',\n      id: 2,\n      formats: '[\"https://yrpri6-production.s3.amazonaws.com/5dddb81c-6023-4636-aae6-29e013e084d4-desktop-retina.png\",\"https://yrpri6-production.s3.amazonaws.com/5dddb81c-6023-4636-aae6-29e013e084d4-mobile-retina.png\",\"https://yrpri6-production.s3.amazonaws.com/5dddb81c-6023-4636-aae6-29e013e084d4-thumb.png\"]',\n      user_id: 2,\n    }] as Array<YpImageData>\n  }\n\n  static getFetchMock() {\n    return fetchMock.get('/api/domains', { domain: YpTestHelpers.getDomain() }, YpTestHelpers.fetchMockConfig).\n      get('/api/videos/hasVideoUploadSupport', { hasTranscriptSupport: true, hasVideoUploadSupport: true }, YpTestHelpers.fetchMockConfig).\n      get('/api/audios/hasAudioUploadSupport', { hasAudioUploadSupport: true }, YpTestHelpers.fetchMockConfig).\n      get('/api/users/loggedInUser/isloggedin', { notLoggedIn: true }, YpTestHelpers.fetchMockConfig).\n      get('/api/users/loggedInUser/memberships', { GroupUsers: [], CommunityUsers: [], DomainUsers: []}, YpTestHelpers.fetchMockConfig).\n      get('/api/users/has/AutoTranslation', { hasAutoTranslation: true }, YpTestHelpers.fetchMockConfig).\n      get('/api/users/loggedInUser/adminRights', 0, YpTestHelpers.fetchMockConfig)\n  }\n\n  static renderCommonHeader() {\n    return html`\n      <link\n        href=\"https://fonts.googleapis.com/css?family=Material+Icons&display=block\"\n        rel=\"stylesheet\"\n      />\n      <link\n        href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500\"\n        rel=\"stylesheet\"\n      />\n\n      <base href=\"/\" />\n\n      <style>\n        html,\n        body {\n          margin: 0;\n          padding: 0;\n        }\n      </style>\n    `;\n  }\n}\n"]}