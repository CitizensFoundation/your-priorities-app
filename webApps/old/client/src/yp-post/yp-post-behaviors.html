<link rel="import" href="../../bower_components/polymer/polymer.html">

<script>
  /**
   * @polymerBehavior Polymer.YpPostBehavior
   */
  Polymer.YpPostBehavior = {

    properties: {
      post: {
        type: Object,
        notify: true
      },

      endorseMode: {
        type: String
      },

      image: {
        type: Boolean,
        value: true
      },

      elevation: {
        type: Number,
        value: 1
      },

      postName: {
        type: String,
        computed: 'postNameFunc(post)'
      },

      postDescription: {
        type: String,
        computed: 'postDescriptionFunc(post)'
      },

      getCategoryImagePath: {
        type: String,
        computed: '_getCategoryImagePath(post)'
      },

      fullPostUrl: {
          type: String,
          computed: '_fullPostUrl(post)'
      },
    },

      _fullPostUrl: function (post) {
      if (post) {
        return encodeURIComponent("https://"+window.location.host+"/post/"+post.id);
      } else {
        console.warn("Can't find post for action");
        return "";
      }
    },

    postNameFunc: function (post) {
      if (post && post.name) {
        return this.truncate(this.trim(post.name), 100);
      } else if (post) {
        return post.short_name;
      } else {
        return "";
      }
    },

    postDescriptionFunc: function (post) {
      if (post && post.description) {
        return this.truncate(this.trim(post.description), 500, '...');
      } else if (post && post.Points && post.Points[0]) {
        return  this.truncate(this.trim(post.Points[0].content), 500, '...');
      } else {
        return '';
      }
    },

    _getCategoryImagePath: function (post) {
      if (post && post.Category && post.Category.CategoryIconImages) {
        return this.getImageFormatUrl(post.Category.CategoryIconImages, 0);
      } else {
        return "";
      }
    }
  }
</script>
