{"version":3,"file":"pl-pages.js","sourceRoot":"","sources":["../../../../../src/analytics-and-promotion/pl-components/stats/pages/pl-pages.ts"],"names":[],"mappings":"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","sourcesContent":["import { customElement, property } from 'lit/decorators.js';\nimport { html, nothing } from 'lit';\n\nimport * as storage from '../../util/storage.js';\nimport * as url from '../../util/url.js';\nimport * as api from '../../api.js';\nimport './../reports/pl-list-report.js';\n\nimport './pl-top-pages.js';\nimport './pl-entry-pages.js';\nimport './pl-exit-pages.js';\n\nimport { PlausibleBaseElement } from '../../pl-base-element.js';\nimport { PlausibleBaseElementWithState } from '../../pl-base-element-with-state.js';\n\n@customElement('pl-pages')\nexport class PlausablePages extends PlausibleBaseElementWithState {\n  @property({ type: String })\n  tabKey!: string;\n\n  @property({ type: String })\n  storedTab: string | undefined;\n\n  @property({ type: String })\n  mode: string | undefined;\n\n override connectedCallback() {\n    super.connectedCallback();\n    this.tabKey = `pageTab__${this.site.domain}`;\n    this.mode = this.storedTab || 'pages';\n  }\n\n  setMode(mode: string) {\n    storage.setItem(this.tabKey, mode);\n    this.mode = mode;\n  }\n\n  labelFor = {\n    pages: 'Top Pages',\n    'entry-pages': 'Entry Pages',\n    'exit-pages': 'Exit Pages',\n  };\n\n  renderContent() {\n    switch (this.mode) {\n      case 'entry-pages':\n        return html`<pl-entry-pages\n          .site=${this.site}\n          .query=${this.query}\n          .timer=${this.timer}\n          .proxyUrl=\"${this.proxyUrl}\"\n        ></pl-entry-pages>`;\n      case 'exit-pages':\n        return html`<pl-exit-pages\n          .site=${this.site}\n          .query=${this.query}\n          .timer=${this.timer}\n          .proxyUrl=\"${this.proxyUrl}\"\n        ></pl-exit-pages>`;\n      case 'pages':\n      default:\n        return html`<pl-top-pages\n          .site=${this.site}\n          .query=${this.query}\n          .timer=${this.timer}\n          .proxyUrl=\"${this.proxyUrl}\"\n        ></pl-top-pages>`;\n    }\n  }\n\n  renderPill(name: string, mode: string) {\n    const isActive = this.mode === mode;\n\n    if (isActive) {\n      return html`\n        <li\n          class=\"inline-block h-5 text-indigo-700 dark:text-indigo-500 font-bold active-prop-heading\"\n        >\n          ${this.t(name)}\n        </li>\n      `;\n    } else {\n      return html`\n        <li\n          class=\"hover:text-indigo-600 cursor-pointer\"\n          @click=${() => this.setMode(mode)}\n        >\n          ${this.t(name)}\n        </li>\n      `;\n    }\n  }\n\n  override render() {\n    if (this.site) {\n      return html`\n        <div\n          class=\"stats-item flex flex-col w-full mt-6 stats-item--has-header\"\n        >\n          <div\n            class=\"stats-item-header flex flex-col flex-grow bg-white dark:bg-gray-825 shadow-xl rounded p-4 relative\"\n          >\n            <div class=\"w-full flex justify-between\" style=\"max-height: 40px !important\">\n              <h3 class=\"font-bold dark:text-gray-100\">\n                ${\n                  //@ts-ignore\n                  this.t(this.labelFor[this.mode]) || this.t('Page Visits')\n                }\n              </h3>\n              <div class=\"flex\"></div>\n              <ul\n                class=\"flex font-medium text-xs text-gray-500 dark:text-gray-400 space-x-2\"\n              >\n                ${this.renderPill('Top Pages', 'pages')}\n                ${this.renderPill('Entry Pages', 'entry-pages')}\n                ${this.renderPill('Exit Pages', 'exit-pages')}\n              </ul>\n            </div>\n            ${this.renderContent()}\n          </div>\n        </div>\n      `;\n    } else {\n      return nothing;\n    }\n  }\n}\n"]}