{"version":3,"file":"pl-sources-list.js","sourceRoot":"","sources":["../../../../../src/analytics-and-promotion/pl-components/stats/sources/pl-sources-list.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAmB,IAAI,EAAW,MAAM,KAAK,CAAC;AACrD,OAAO,EAAE,QAAQ,EAAE,aAAa,EAAE,MAAM,mBAAmB,CAAC;AAC5D,OAAO,KAAK,OAAO,MAAM,uBAAuB,CAAC;AACjD,OAAO,EAAE,6BAA6B,EAAE,MAAM,kCAAkC,CAAC;AAEjF,OAAO,qBAAqB,CAAC;AAC7B,OAAO,qBAAqB,CAAC;AAC7B,OAAO,2BAA2B,CAAC;AAG5B,IAAM,oBAAoB,GAA1B,MAAM,oBAAqB,SAAQ,6BAA6B;IAAhE;;QAQL,oBAAe,GAAG,KAAK,CAAC;IA4D1B,CAAC;IA1DS,iBAAiB;QACvB,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,IAAI,CAAC,MAAM,GAAG,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,MAAO,CAAC;QAChD,MAAM,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAA+B,CAAC;QAC7E,IAAI,CAAC,GAAG,GAAG,SAAS,IAAI,KAAK,CAAC;IAChC,CAAC;IAED,UAAU,CAAC,CAAc;QACvB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC;QACpB,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC;YACb,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAEQ,MAAM;QACb,IACE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC;YAC5B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,eAAe,EAChD,CAAC;YACD,OAAO,IAAI,CAAA;;iBAEA,IAAI,CAAC,GAAG;sBACH,IAAI,CAAC,QAAQ;kCACD,IAAI,CAAC,mBAAmB;mBACvC,IAAI,CAAC,KAAK;kBACX,IAAI,CAAC,IAAI;8BACG,IAAI,CAAC,eAAe;oBAC9B,IAAI,CAAC,KAAK;yBACL,IAAI,CAAC,UAAU;;OAEjC,CAAC;QACJ,CAAC;aAAM,IAAI,IAAI,CAAC,GAAG,KAAK,KAAK,EAAE,CAAC;YAC9B,OAAO,IAAI,CAAA;;iBAEA,IAAI,CAAC,GAAG;sBACH,IAAI,CAAC,QAAQ;kCACD,IAAI,CAAC,mBAAmB;mBACvC,IAAI,CAAC,KAAK;kBACX,IAAI,CAAC,IAAI;8BACG,IAAI,CAAC,eAAe;oBAC9B,IAAI,CAAC,KAAK;yBACL,IAAI,CAAC,UAAU;;OAEjC,CAAC;QACJ,CAAC;aAAM,CAAC;YACN,OAAO,IAAI,CAAA;;iBAEA,IAAI,CAAC,GAAG;sBACH,IAAI,CAAC,QAAQ;kCACD,IAAI,CAAC,mBAAmB;mBACvC,IAAI,CAAC,KAAK;kBACX,IAAI,CAAC,IAAI;oBACP,IAAI,CAAC,KAAK;yBACL,IAAI,CAAC,UAAU;;OAEjC,CAAC;QACJ,CAAC;IACH,CAAC;CACF,CAAA;AAlEC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;oDACX;AAGhB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;iDACM;AAGjC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;6DACJ;AARb,oBAAoB;IADhC,aAAa,CAAC,iBAAiB,CAAC;GACpB,oBAAoB,CAoEhC","sourcesContent":["import { LitElement, css, html, nothing } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\nimport * as storage from '../../util/storage.js';\nimport { PlausibleBaseElementWithState } from '../../pl-base-element-with-state';\n\nimport './pl-sources-all.js';\nimport './pl-sources-utm.js';\nimport './pl-sources-referrers.js';\n\n@customElement('pl-sources-list')\nexport class PlausibleSourcesList extends PlausibleBaseElementWithState {\n  @property({ type: String })\n  tabKey!: string;\n\n  @property({ type: String })\n  tab!: PlausibleSourcesTabOptions;\n\n  @property({ type: Boolean })\n  alwaysShowNoRef = false;\n\n override connectedCallback() {\n    super.connectedCallback();\n    this.tabKey = 'sourceTab__' + this.site.domain!;\n    const storedTab = storage.getItem(this.tabKey) as PlausibleSourcesTabOptions;\n    this.tab = storedTab || 'all';\n  }\n\n  tabChanged(e: CustomEvent) {\n    this.tab = e.detail;\n    if (this.tab) {\n      storage.setItem(this.tabKey, this.tab);\n    }\n  }\n\n  override render() {\n    if (\n      this.query.filters['source'] &&\n      this.query.filters['source'] !== 'Direct / None'\n    ) {\n      return html`\n        <pl-sources-referrers\n          .tab=${this.tab}\n          .proxyUrl=${this.proxyUrl}\n          .proxyFaviconBaseUrl=\"${this.proxyFaviconBaseUrl}\"\n          .query=${this.query}\n          .site=${this.site}\n          .alwaysShowNoRef=\"${this.alwaysShowNoRef}\"\n          .timer=\"${this.timer}\"\n          @tab-changed=${this.tabChanged}\n        ></pl-sources-referrers>\n      `;\n    } else if (this.tab === 'all') {\n      return html`\n        <pl-sources-all\n          .tab=${this.tab}\n          .proxyUrl=${this.proxyUrl}\n          .proxyFaviconBaseUrl=\"${this.proxyFaviconBaseUrl}\"\n          .query=${this.query}\n          .site=${this.site}\n          .alwaysShowNoRef=\"${this.alwaysShowNoRef}\"\n          .timer=\"${this.timer}\"\n          @tab-changed=${this.tabChanged}\n        ></pl-sources-all>\n      `;\n    } else {\n      return html`\n        <pl-sources-utm\n          .tab=${this.tab}\n          .proxyUrl=${this.proxyUrl}\n          .proxyFaviconBaseUrl=\"${this.proxyFaviconBaseUrl}\"\n          .query=${this.query}\n          .site=${this.site}\n          .timer=\"${this.timer}\"\n          @tab-changed=${this.tabChanged}\n        ></pl-sources-utm>\n      `;\n    }\n  }\n}\n"]}