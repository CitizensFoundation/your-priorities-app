{"version":3,"file":"yp-page-dialog.js","sourceRoot":"","sources":["../../src/yp-page/yp-page-dialog.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from \"lit\";\nimport { property, customElement } from \"lit/decorators.js\";\n\nimport { YpBaseElement } from \"../common/yp-base-element.js\";\nimport \"@material/web/dialog/dialog.js\";\nimport \"@material/web/button/text-button.js\";\nimport \"@material/web/button/text-button.js\";\nimport \"@material/web/button/outlined-button.js\";\nimport \"@material/web/icon/icon.js\";\n\nimport { Dialog } from \"@material/web/dialog/internal/dialog.js\";\n\n@customElement(\"yp-page-dialog\")\nexport class YpPageDialog extends YpBaseElement {\n  @property({ type: String })\n  dialogTitle: string | undefined;\n\n  @property({ type: Object })\n  page: YpHelpPageData | undefined;\n\n  @property({ type: String })\n  textButtonText: string | undefined;\n\n  @property({ type: Boolean })\n  modal = false\n\n  closeFunction: Function | undefined;\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        :host {\n          --md-dialog-container-color: var(--md-sys-color-surface);\n        }\n\n        md-text-button {\n          font-weight: bold;\n        }\n\n        .fab {\n          text-align: center;\n        }\n\n        #content {\n          padding: 16px;\n        }\n\n        #dialog[slot=\"footer\"] {\n          display: flex;\n          align-items: center;\n          flex-direction: row-reverse;\n          text-align: center;\n        }\n\n        #dialog {\n        }\n\n        .languageButton {\n          text-align: left;\n          align-items: flex-start;\n        }\n\n        md-dialog {\n         // height: 100%;\n        }\n\n        md-dialog[open][is-safari] {\n          //height: 100%;\n        }\n\n        @media (max-width: 1100px) {\n        }\n\n        @media (max-width: 600px) {\n          #content {\n            padding: 0;\n          }\n\n          .headline {\n            text-align: center;\n            padding-top: 8px;\n            padding-bottom: 8px;\n          }\n\n          .startButton {\n            padding-bottom: 8px;\n            margin-bottom: 8px;\n          }\n\n\n        }\n\n        md-dialog[rtl] {\n          direction: rtl;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      `,\n    ];\n  }\n\n  override scrimDisableAction(event: CustomEvent<any>): void {\n    if (this.modal) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n\n  override render() {\n    return html`\n      <md-dialog\n        @cancel=\"${this.scrimDisableAction}\"\n        id=\"dialog\"\n        ?is-safari=\"${this.isSafari}\"\n        ?rtl=\"${this.rtl}\"\n      >\n        <md-icon slot=\"icon\">help</md-icon>\n        <span slot=\"headline\" class=\"headline\">${this.pageTitle}</span>\n        <div\n          id=\"content\"\n          slot=\"content\"\n          style=\"text-align: left\"\n          class=\"layout vertical center-center\"\n        ></div>\n\n        <div slot=\"actions\">\n          ${this.textButtonText\n            ? html`\n                <md-text-button class=\"startButton\" @click=\"${this._close}\"\n                  >${this.textButtonText}</md-text-button\n                >\n              `\n            : html`\n\n          <div class=\"flex\"></div>\n\n          <md-text-button\n            class=\"startButton\"\n            autofocus\n            @click=\"${this._close}\"\n            >${this.t(\"close\")}</md-text-button\n          >\n\n        </div>\n\n\n        `}\n        </div>\n      </md-dialog>\n    `;\n  }\n\n  _switchLanguage() {\n    const locale = this.language == \"en\" ? \"is\" : \"en\";\n    window.appGlobals.changeLocaleIfNeeded(locale, true);\n    localStorage.setItem(\"yp-user-locale\", locale);\n    console.info(\"Saving locale\");\n    if (window.appUser && window.appUser.user) {\n      window.appUser.setLocale(locale);\n    }\n    window.appGlobals.activity(\"click\", \"changeLanguage\", locale);\n  }\n\n  get pageTitle(): string {\n    if (this.page) {\n      return this.page!.title[this.language];\n    } else {\n      return \"\";\n    }\n  }\n\n  async open(\n    page: YpHelpPageData,\n    language: string,\n    closeFunction: Function | undefined = undefined,\n    textButtonText: string | undefined = undefined,\n    modal = false\n  ) {\n    this.modal = modal;\n    if (closeFunction) {\n      this.closeFunction = closeFunction;\n    } else {\n      this.closeFunction = undefined;\n    }\n    if (textButtonText) {\n      this.textButtonText = textButtonText;\n    } else {\n      this.textButtonText = undefined;\n    }\n    this.page = page;\n    this.language = language;\n    await this.updateComplete;\n    const contentEl = this.$$(\"#content\") as HTMLElement;\n    contentEl.innerHTML = this.page.content[this.language];\n    (this.$$(\"#dialog\") as Dialog).show();\n  }\n\n  _close() {\n    (this.$$(\"#dialog\") as Dialog).close();\n    (this.$$(\"#content\") as HTMLElement).innerHTML = \"\";\n    window.appGlobals.activity(\"close\", \"pages\");\n    if (this.closeFunction) {\n      this.closeFunction();\n    }\n  }\n}\n"]}