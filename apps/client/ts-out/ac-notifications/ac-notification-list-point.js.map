{"version":3,"file":"ac-notification-list-point.js","sourceRoot":"","sources":["../../src/ac-notifications/ac-notification-list-point.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,KAAK,CAAC;AACzC,OAAO,EAAE,QAAQ,EAAE,aAAa,EAAE,MAAM,mBAAmB,CAAC;AAE5D,OAAO,4BAA4B,CAAC;AAEpC,OAAO,mCAAmC,CAAC;AAC3C,OAAO,6BAA6B,CAAC;AAErC,OAAO,EAAE,aAAa,EAAE,MAAM,8BAA8B,CAAC;AAC7D,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AAEzD,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AACzD,OAAO,EAAE,mBAAmB,EAAE,MAAM,kCAAkC,CAAC;AAGhE,IAAM,uBAAuB,GAA7B,MAAM,uBAAwB,SAAQ,aAAa;IA+B/C,OAAO,CAAC,iBAAyD;QACxE,KAAK,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QAEjC,IAAI,iBAAiB,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAC;YAC1C,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC9B,CAAC;IACH,CAAC;IAED,MAAM,KAAc,MAAM;QACxB,OAAO;YACL,KAAK,CAAC,MAAM;YACZ,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OA8DF;SACF,CAAC;IACJ,CAAC;IAEQ,MAAM;QACb,OAAO,IAAI,CAAA;;;kBAGG,IAAI,CAAC,QAAQ;mBACZ,CAAC,IAAI,CAAC,IAAI;;;cAGf,IAAI,CAAC,IAAI;YACT,CAAC,CAAC,IAAI,CAAA;gDAC4B,IAAI,CAAC,IAAI;iBACxC;YACH,CAAC,CAAC,OAAO;;4BAEK,CAAC,IAAI,CAAC,YAAY;;;4BAGlB,IAAI,CAAC,YAAY;;;;;;+BAMd,IAAI,CAAC,YAAY;;gBAEhC,IAAI,CAAC,YAAY;;sDAEqB,CAAC,IAAI,CAAC,YAAY;;uCAEjC,IAAI,CAAC,YAAY;;sDAEF,CAAC,IAAI,CAAC,cAAc;;sCAEpC,IAAI,CAAC,cAAc;;oCAErB,IAAI,CAAC,iBAAiB;;;;KAIrD,CAAC;IACJ,CAAC;IAED,IAAI,iBAAiB;QACnB,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YAClB,OAAO,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QACzD,CAAC;aAAM,CAAC;YACN,OAAO,EAAE,CAAC;QACZ,CAAC;IACH,CAAC;IAED,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;IAC5C,CAAC;IAED,QAAQ;QACN,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;YACd,IAAI,OAAO,GAAG,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;YACtC,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;gBACf,OAAO,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;YACjC,CAAC;YACD,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;YACpD,UAAU,CAAC,GAAG,EAAE;gBACd,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;gBACjC,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;YACrC,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,oBAAoB;QAClB,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;YACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YACrD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACnD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAEnD,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;gBACf,IAAI,CAAC,YAAY,GAAG,mBAAmB,CAAC,QAAQ,CAC9C,IAAI,CAAC,KAAK,CAAC,OAAO,EAClB,EAAE,CACH,CAAC;YACJ,CAAC;YACD,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,wBAAwB,EAAE,CAAC;gBACvD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YAC3B,CAAC;iBAAM,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,4BAA4B,EAAE,CAAC;gBAClE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC/B,CAAC;QACH,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;YAC9B,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;YAChC,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;YAC9B,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;QAC/B,CAAC;IACH,CAAC;IAED,qBAAqB;QACnB,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,IAAI,UAAU,GAAG,EAAE,CAAC;QAEpB,IAAI,CAAC,YAAa,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YACjD,IAAI,QAAQ,CAAC,IAAI,IAAI,4BAA4B,EAAE,CAAC;gBAClD,IAAI,CAAC,QAAQ,EAAE,CAAC;oBACd,QAAQ,GAAG,EAAE,CAAC;gBAChB,CAAC;gBACD,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9D,CAAC;iBAAM,IAAI,QAAQ,CAAC,IAAI,IAAI,8BAA8B,EAAE,CAAC;gBAC3D,IAAI,CAAC,UAAU,EAAE,CAAC;oBAChB,UAAU,GAAG,EAAE,CAAC;gBAClB,CAAC;gBACD,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAClE,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,QAAQ,IAAI,QAAQ,IAAI,EAAE,EAAE,CAAC;YAC/B,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAC,QAAQ,CAAC,CAAC;QACjD,CAAC;QAED,IAAI,UAAU,IAAI,UAAU,IAAI,EAAE,EAAE,CAAC;YACnC,IAAI,CAAC,cAAc,GAAG,gBAAgB,CAAC,UAAU,CAAC,CAAC;QACrD,CAAC;IACH,CAAC;IAED,aAAa,CAAC,IAAY,EAAE,KAAa;QACvC,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,IAAI,IAAI,EAAE,EAAE,CAAC;YACf,UAAU,IAAI,IAAI,GAAG,GAAG,CAAC;QAC3B,CAAC;QACD,OAAO,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;CACF,CAAA;AA1OC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;6DACkB;AAG7C;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;6DACM;AAGjC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;+DACQ;AAGnC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;6DACM;AAGlC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;4DACK;AAGjC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;sDACI;AAG/B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;6DACM;AAGjC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;qDACE;AAG7B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;qDACE;AAG7B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;yDACE;AA7BlB,uBAAuB;IADnC,aAAa,CAAC,4BAA4B,CAAC;GAC/B,uBAAuB,CA4OnC","sourcesContent":["import { html, css, nothing } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\n\nimport \"@material/web/icon/icon.js\";\n\nimport '../yp-magic-text/yp-magic-text.js';\nimport '../yp-user/yp-user-image.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\nimport { YpNavHelpers } from '../common/YpNavHelpers.js';\n\nimport { truncateNameList } from './TruncateNameList.js';\nimport { YpFormattingHelpers } from '../common/YpFormattingHelpers.js';\n\n@customElement('ac-notification-list-point')\nexport class AcNotificationListPoint extends YpBaseElement {\n  @property({ type: Object })\n  notification: AcNotificationData | undefined;\n\n  @property({ type: String })\n  helpfulsText: string | undefined;\n\n  @property({ type: String })\n  unhelpfulsText: string | undefined;\n\n  @property({ type: Boolean })\n  newPointMode: boolean | undefined;\n\n  @property({ type: Boolean })\n  qualityMode: boolean | undefined;\n\n  @property({ type: Object })\n  point: YpPointData | undefined;\n\n  @property({ type: String })\n  pointContent: string | undefined;\n\n  @property({ type: Object })\n  user: YpUserData | undefined;\n\n  @property({ type: Object })\n  post: YpPostData | undefined;\n\n  @property({ type: String })\n  postName: string | undefined;\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has('notification')) {\n      this._notificationChanged();\n    }\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        .pointerCursor {\n          cursor: pointer;\n        }\n\n        .endorsers {\n        }\n\n        .opposers {\n        }\n\n        .chatIcon {\n          min-width: 24px;\n          min-height: 24px;\n          max-width: 24px;\n          max-height: 24px;\n          margin: 6px;\n          margin-bottom: 0;\n          padding-bottom: 0;\n        }\n\n        .thumbsIcon {\n          margin-top: 0;\n          padding-top: 0;\n          min-width: 20px;\n          min-height: 20px;\n          max-width: 20px;\n          max-height: 20px;\n        }\n\n        .smallIcons {\n          max-width: 16px;\n          max-height: 16px;\n          min-width: 16px;\n          min-height: 16px;\n          padding-top: 2px;\n          padding-right: 2px;\n        }\n\n        .postName {\n          padding-top: 4px;\n          padding-bottom: 0;\n          font-style: italic;\n        }\n\n        .postName[point-value-up] {\n        }\n\n        .pointContent {\n          padding-bottom: 4px;\n        }\n\n        .pointContent[point-value-up] {\n        }\n\n        .leftContainer {\n          margin-right: 8px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      `,\n    ];\n  }\n\n  override render() {\n    return html`\n      <div\n        class=\"layout vertical pointerCursor\"\n        @click=\"${this.goToPost}\"\n        ?hidden=\"${!this.post}\">\n        <div class=\"layout horizontal\">\n          <div class=\"layout vertical center-center self-start leftContainer\">\n            ${this.user\n              ? html`\n                  <yp-user-image small .user=\"${this.user}\"></yp-user-image>\n                `\n              : nothing}\n            <md-icon class=\"chatIcon\">chat_bubble_outline</md-icon>\n            <div ?hidden=\"${!this.pointValueUp}\">\n              <md-icon class=\"chatIcon thumbsIcon\">thumb_up</md-icon>\n            </div>\n            <div ?hidden=\"${this.pointValueUp}\">\n              <md-icon class=\"chatIcon thumbsIcon\">thumb_down</md-icon>\n            </div>\n          </div>\n          <div class=\"layout vertical\">\n            <div\n              .pointValueUp=\"${this.pointValueUp}\"\n              class=\"layout horizontal pointContent\">\n              ${this.pointContent}\n            </div>\n            <div class=\"layout horizontal\" ?hidden=\"${!this.helpfulsText}\">\n              <md-icon class=\"smallIcons endorsers\">arrow_upward</md-icon>\n              <div class=\"endorsers\">${this.helpfulsText}</div>\n            </div>\n            <div class=\"layout horizontal\" ?hidden=\"${!this.unhelpfulsText}\">\n              <md-icon class=\"smallIcons opposers\">arrow_downward</md-icon>\n              <div class=\"opposers\">${this.unhelpfulsText}</div>\n            </div>\n            <div class=\"postName\">${this.postNameTruncated}</div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  get postNameTruncated() {\n    if (this.postName) {\n      return YpFormattingHelpers.truncate(this.postName, 42);\n    } else {\n      return '';\n    }\n  }\n\n  get pointValueUp() {\n    return this.point && this.point.value > 0;\n  }\n\n  goToPost() {\n    if (this.post) {\n      let postUrl = '/post/' + this.post.id;\n      if (this.point) {\n        postUrl += '/' + this.point.id;\n      }\n      window.appGlobals.activity('open', 'post', postUrl);\n      setTimeout(() => {\n        YpNavHelpers.redirectTo(postUrl);\n        this.fire('yp-close-right-drawer');\n      });\n    }\n  }\n\n  _notificationChanged() {\n    if (this.notification) {\n      this.point = this.notification.AcActivities[0].Point;\n      this.post = this.notification.AcActivities[0].Post;\n      this.user = this.notification.AcActivities[0].User;\n\n      if (this.point) {\n        this.pointContent = YpFormattingHelpers.truncate(\n          this.point.content,\n          72\n        );\n      }\n      if (this.notification.type == 'notification.point.new') {\n        this.newPointMode = true;\n      } else if (this.notification.type == 'notification.point.quality') {\n        this.qualityMode = true;\n        this._createQualityStrings();\n      }\n    } else {\n      this.helpfulsText = undefined;\n      this.unhelpfulsText = undefined;\n      this.newPointMode = undefined;\n      this.qualityMode = undefined;\n    }\n  }\n\n  _createQualityStrings() {\n    let helpfuls = '';\n    let unhelpfuls = '';\n\n    this.notification!.AcActivities.forEach(activity => {\n      if (activity.type == 'activity.point.helpful.new') {\n        if (!helpfuls) {\n          helpfuls = '';\n        }\n        helpfuls = this._addWithComma(helpfuls, activity.User.name);\n      } else if (activity.type == 'activity.point.unhelpful.new') {\n        if (!unhelpfuls) {\n          unhelpfuls = '';\n        }\n        unhelpfuls = this._addWithComma(unhelpfuls, activity.User.name);\n      }\n    });\n\n    if (helpfuls && helpfuls != '') {\n      this.helpfulsText = truncateNameList(helpfuls);\n    }\n\n    if (unhelpfuls && unhelpfuls != '') {\n      this.unhelpfulsText = truncateNameList(unhelpfuls);\n    }\n  }\n\n  _addWithComma(text: string, toAdd: string) {\n    let returnText = '';\n    if (text != '') {\n      returnText += text + ',';\n    }\n    return returnText + toAdd;\n  }\n}\n"]}