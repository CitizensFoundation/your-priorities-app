{"version":3,"file":"ac-notification-list-post.js","sourceRoot":"","sources":["../../src/ac-notifications/ac-notification-list-post.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,KAAK,CAAC;AACzC,OAAO,EAAE,QAAQ,EAAE,aAAa,EAAE,MAAM,mBAAmB,CAAC;AAG5D,OAAO,4BAA4B,CAAC;AAEpC,OAAO,mCAAmC,CAAC;AAC3C,OAAO,6BAA6B,CAAC;AAErC,OAAO,EAAE,aAAa,EAAE,MAAM,8BAA8B,CAAC;AAC7D,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AAEzD,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AAGlD,IAAM,sBAAsB,GAA5B,MAAM,sBAAuB,SAAQ,aAAa;IAyB9C,OAAO,CAAC,iBAAyD;QACxE,KAAK,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QAEjC,IAAI,iBAAiB,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAC;YAC1C,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC9B,CAAC;IACH,CAAC;IAED,MAAM,KAAc,MAAM;QACxB,OAAO;YACL,KAAK,CAAC,MAAM;YACZ,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAkDF;SACF,CAAC;IACJ,CAAC;IAEQ,MAAM;QACb,OAAO,IAAI,CAAC,IAAI;YACd,CAAC,CAAC,IAAI,CAAA;;;sBAGU,IAAI,CAAC,SAAS;uBACb,CAAC,IAAI,CAAC,IAAI;;;;kBAIf,IAAI,CAAC,IAAI;gBACT,CAAC,CAAC,IAAI,CAAA;oDAC4B,IAAI,CAAC,IAAI;qBACxC;gBACH,CAAC,CAAC,OAAO;qCACU,IAAI,CAAC,WAAW;;;;;gCAKrB,CAAC,IAAI,CAAC,gBAAgB;;;6CAGT,IAAI,CAAC,gBAAgB;;;gCAGlC,CAAC,IAAI,CAAC,eAAe;;;;;4CAKT,IAAI,CAAC,eAAe;;;;;;;;wCAQxB,IAAI,CAAC,IAAI,CAAC,QAAQ;gCAC1B,IAAI,CAAC,IAAI,CAAC,IAAI;kCACZ,IAAI,CAAC,IAAI,CAAC,EAAE;;;gCAGd,CAAC,IAAI,CAAC,WAAW;oBAC7B,IAAI,CAAC,QAAQ;;;;;SAKxB;YACH,CAAC,CAAC,OAAO,CAAC;IACd,CAAC;IAED,SAAS;QACP,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;YACd,MAAM,OAAO,GAAG,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;YACxC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;YACpD,UAAU,CAAC,GAAG,EAAE;gBACd,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;gBACjC,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;YACrC,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,oBAAoB;QAClB,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;YACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACnD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;YAC5D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACnD,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,uBAAuB,EAAE,CAAC;gBACtD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YAC1B,CAAC;iBAAM,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,+BAA+B,EAAE,CAAC;gBACrE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;gBACzB,IAAI,CAAC,yBAAyB,EAAE,CAAC;YACnC,CAAC;QACH,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;YAClC,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;YACjC,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;YAC7B,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;YAC7B,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;YAC1B,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;QACxB,CAAC;IACH,CAAC;IAED,yBAAyB;QACvB,IAAI,YAAY,GAAG,EAAE,CAAC;QACtB,IAAI,WAAW,GAAG,EAAE,CAAC;QAErB,IAAI,CAAC,YAAa,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YACjD,IAAI,QAAQ,CAAC,IAAI,IAAI,+BAA+B,EAAE,CAAC;gBACrD,IAAI,CAAC,YAAY,EAAE,CAAC;oBAClB,YAAY,GAAG,EAAE,CAAC;gBACpB,CAAC;gBACD,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACtE,CAAC;iBAAM,IAAI,QAAQ,CAAC,IAAI,IAAI,8BAA8B,EAAE,CAAC;gBAC3D,IAAI,CAAC,WAAW,EAAE,CAAC;oBACjB,WAAW,GAAG,EAAE,CAAC;gBACnB,CAAC;gBACD,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACpE,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,YAAY,IAAI,YAAY,IAAI,EAAE,EAAE,CAAC;YACvC,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC,YAAY,CAAC,CAAC;QACzD,CAAC;QAED,IAAI,WAAW,IAAI,WAAW,IAAI,EAAE,EAAE,CAAC;YACrC,IAAI,CAAC,eAAe,GAAG,gBAAgB,CAAC,WAAW,CAAC,CAAC;QACvD,CAAC;IACH,CAAC;IAED,aAAa,CAAC,IAAY,EAAE,KAAa;QACvC,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,IAAI,IAAI,EAAE,EAAE,CAAC;YACf,UAAU,IAAI,IAAI,GAAG,GAAG,CAAC;QAC3B,CAAC;QACD,OAAO,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;CACF,CAAA;AAjNC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;4DACkB;AAG7C;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;gEACU;AAGrC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;+DACS;AAGpC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;2DACK;AAGjC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;2DACK;AAGjC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;wDACE;AAG7B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;oDACE;AAG7B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;oDACE;AAvBlB,sBAAsB;IADlC,aAAa,CAAC,2BAA2B,CAAC;GAC9B,sBAAsB,CAmNlC","sourcesContent":["import { html, css, nothing } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\n\n\nimport \"@material/web/icon/icon.js\";\n\nimport '../yp-magic-text/yp-magic-text.js';\nimport '../yp-user/yp-user-image.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\nimport { YpNavHelpers } from '../common/YpNavHelpers.js';\n\nimport { truncateNameList } from './TruncateNameList.js';\n\n@customElement('ac-notification-list-post')\nexport class AcNotificationListPost extends YpBaseElement {\n  @property({ type: Object })\n  notification: AcNotificationData | undefined;\n\n  @property({ type: String })\n  endorsementsText: string | undefined;\n\n  @property({ type: String })\n  oppositionsText: string | undefined;\n\n  @property({ type: Boolean })\n  newPostMode: boolean | undefined;\n\n  @property({ type: Boolean })\n  endorseMode: boolean | undefined;\n\n  @property({ type: String })\n  userName: string | undefined;\n\n  @property({ type: Object })\n  user: YpUserData | undefined;\n\n  @property({ type: Object })\n  post: YpPostData | undefined;\n\n  override updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has('notification')) {\n      this._notificationChanged();\n    }\n  }\n\n  static override get styles() {\n    return [\n      super.styles,\n      css`\n        .pointerCursor {\n          cursor: pointer;\n        }\n\n        .bulb-icon {\n          min-width: 26px;\n          min-height: 26px;\n          max-width: 26px;\n          max-height: 26px;\n          margin: 6px;\n        }\n\n        .bulb-icon[new-post] {\n          min-width: 30px;\n          min-height: 30px;\n          max-width: 30px;\n          max-height: 30px;\n        }\n\n        .smallIcons {\n          max-width: 16px;\n          max-height: 16px;\n          min-width: 16px;\n          min-height: 16px;\n          padding-top: 2px;\n          padding-right: 4px;\n          color: var(--primary-love-color-up, rgba(168, 0, 0, 0.65));\n        }\n\n        .postName {\n          padding-top: 4px;\n        }\n\n        .postName {\n          padding-top: 4px;\n          padding-bottom: 0;\n        }\n\n        .userName {\n          font-style: bold;\n        }\n\n        .leftContainer {\n          margin-right: 8px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      `,\n    ];\n  }\n\n  override render() {\n    return this.post\n      ? html`\n          <div\n            class=\"layout vertical pointerCursor\"\n            @click=\"${this._goToPost}\"\n            ?hidden=\"${!this.post}\">\n            <div class=\"layout horizontal\">\n              <div\n                class=\"layout vertical center-center self-start leftContainer\">\n                ${this.user\n                  ? html`\n                      <yp-user-image small .user=\"${this.user}\"></yp-user-image>\n                    `\n                  : nothing}\n                <md-icon .newPost=\"${this.newPostMode}\" class=\"bulb-icon\"\n                  >lightbulb_outline</md-icon\n                >\n              </div>\n              <div class=\"layout vertical\">\n                <div ?hidden=\"${!this.endorsementsText}\">\n                  <div class=\"layout horizontal\">\n                    <md-icon class=\"smallIcons endorsers\">favorite</md-icon>\n                    <div class=\"endorsers\">${this.endorsementsText}</div>\n                  </div>\n                </div>\n                <div ?hidden=\"${!this.oppositionsText}\">\n                  <div class=\"layout horizontal\">\n                    <md-icon class=\"smallIcons opposers\"\n                      >do_not_disturb</md-icon\n                    >\n                    <div class=\"opposers\">${this.oppositionsText}</div>\n                  </div>\n                </div>\n                <div class=\"postName\">\n                  <yp-magic-text\n                    class=\"postName\"\n                    textOnly\n                    textType=\"postName\"\n                    .contentLanguage=\"${this.post.language}\"\n                    .content=\"${this.post.name}\"\n                    .contentId=\"${this.post.id}\">\n                  </yp-magic-text>\n                </div>\n                <div ?hidden=\"${!this.newPostMode}\" class=\"userName\">\n                  ${this.userName}\n                </div>\n              </div>\n            </div>\n          </div>\n        `\n      : nothing;\n  }\n\n  _goToPost() {\n    if (this.post) {\n      const postUrl = '/post/' + this.post.id;\n      window.appGlobals.activity('open', 'post', postUrl);\n      setTimeout(() => {\n        YpNavHelpers.redirectTo(postUrl);\n        this.fire('yp-close-right-drawer');\n      });\n    }\n  }\n\n  _notificationChanged() {\n    if (this.notification) {\n      this.post = this.notification.AcActivities[0].Post;\n      this.userName = this.notification.AcActivities[0].User.name;\n      this.user = this.notification.AcActivities[0].User;\n      if (this.notification.type == 'notification.post.new') {\n        this.newPostMode = true;\n      } else if (this.notification.type == 'notification.post.endorsement') {\n        this.endorseMode = true;\n        this.newPostMode = false;\n        this._createEndorsementStrings();\n      }\n    } else {\n      this.endorsementsText = undefined;\n      this.oppositionsText = undefined;\n      this.newPostMode = undefined;\n      this.endorseMode = undefined;\n      this.userName = undefined;\n      this.user = undefined;\n    }\n  }\n\n  _createEndorsementStrings() {\n    let endorsements = '';\n    let oppositions = '';\n\n    this.notification!.AcActivities.forEach(activity => {\n      if (activity.type == 'activity.post.endorsement.new') {\n        if (!endorsements) {\n          endorsements = '';\n        }\n        endorsements = this._addWithComma(endorsements, activity.User.name);\n      } else if (activity.type == 'activity.post.opposition.new') {\n        if (!oppositions) {\n          oppositions = '';\n        }\n        oppositions = this._addWithComma(oppositions, activity.User.name);\n      }\n    });\n\n    if (endorsements && endorsements != '') {\n      this.endorsementsText = truncateNameList(endorsements);\n    }\n\n    if (oppositions && oppositions != '') {\n      this.oppositionsText = truncateNameList(oppositions);\n    }\n  }\n\n  _addWithComma(text: string, toAdd: string) {\n    let returnText = '';\n    if (text != '') {\n      returnText += text + ',';\n    }\n    return returnText + toAdd;\n  }\n}\n"]}