System.register(["./nomodule-df367cf3.js","./nomodule-c020c03f.js"],(function(t,e){var i,n,o,s,r,a,d,l,c,p,h,u,g,m,v,f,y,_,w,b,x,k,I,C,S,P,z,T,A,M,D,L,V,U,F,G,R,E,$,N,B,O,H,X,j,q,J,W,Q,Y,K,Z,tt,et,it,nt,ot,st,rt,at,dt,lt,ct,pt,ht,ut,gt,mt,vt,ft,yt,_t,wt,bt,xt,kt,It,Ct,St,Pt,zt,Tt,At,Mt,Dt,Lt,Vt,Ut,Ft,Gt,Rt,Et,$t,Nt,Bt,Ot,Ht,Xt,jt,qt,Jt,Wt,Qt,Yt,Kt,Zt,te,ee,ie,ne,oe,se,re,ae,de,le;function ce(){return(ce=l(c.mark((function t(){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Xt||pe());case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pe(){return he.apply(this,arguments)}function he(){return(he=l(c.mark((function t(){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ht=window.EventTarget,t.prev=1,new Ht,t.next=10;break;case 5:return t.prev=5,t.t0=t.catch(1),t.next=9,e.import("./nomodule-3eeb5c26.js");case 9:Ht=t.sent.EventTarget;case 10:return t.abrupt("return",Xt=Ht);case 11:case"end":return t.stop()}}),t,null,[[1,5]])})))).apply(this,arguments)}function ue(t){return"horizontal"===t?"width":"height"}function ge(t){return"horizontal"===t?"height":"width"}function me(t){return"horizontal"===t?"marginLeft":"marginTop"}function ve(t){return"horizontal"===t?"marginRight":"marginBottom"}function fe(t,e){var i=[t,e].sort();return i[1]<=0?Math.min.apply(Math,u(i)):i[0]>=0?Math.max.apply(Math,u(i)):i[0]+i[1]}function ye(t){return"horizontal"===t?"row":"column"}return{setters:[function(t){i=t.createSuper,n=t.inherits,o=t.getPrototypeOf,s=t.get,r=t.createClass,a=t.classCallCheck,d=t.taggedTemplateLiteral,l=t.asyncToGenerator,c=t.regeneratorRuntime,p=t.createForOfIteratorHelper,h=t.defineProperty,u=t.toConsumableArray,g=t.slicedToArray},function(t){m=t._,v=t.i,f=t.e,y=t.b,_=t.t,w=t.s,b=t.p,x=t.o,k=t.c,I=t.l,C=t.r,S=t.n,P=t.a,z=t.T,T=t.d,A=t.S}],execute:function(){$t=function(t){n(g,t);var e,h,u=i(g);function g(){var t;return a(this,g),(t=u.apply(this,arguments)).indeterminate=!1,t.progress=0,t.buffer=1,t.reverse=!1,t.closed=!1,t.stylePrimaryHalf="",t.stylePrimaryFull="",t.styleSecondaryQuarter="",t.styleSecondaryHalf="",t.styleSecondaryFull="",t.animationReady=!0,t.closedAnimationOff=!1,t.resizeObserver=null,t}return r(g,[{key:"connectedCallback",value:function(){s(o(g.prototype),"connectedCallback",this).call(this),this.rootEl&&this.attachResizeObserver()}},{key:"render",value:function(){var t={"mdc-linear-progress--closed":this.closed,"mdc-linear-progress--closed-animation-off":this.closedAnimationOff,"mdc-linear-progress--indeterminate":this.indeterminate,"mdc-linear-progress--animation-ready":this.animationReady},e={"--mdc-linear-progress-primary-half":this.stylePrimaryHalf,"--mdc-linear-progress-primary-half-neg":""!==this.stylePrimaryHalf?"-".concat(this.stylePrimaryHalf):"","--mdc-linear-progress-primary-full":this.stylePrimaryFull,"--mdc-linear-progress-primary-full-neg":""!==this.stylePrimaryFull?"-".concat(this.stylePrimaryFull):"","--mdc-linear-progress-secondary-quarter":this.styleSecondaryQuarter,"--mdc-linear-progress-secondary-quarter-neg":""!==this.styleSecondaryQuarter?"-".concat(this.styleSecondaryQuarter):"","--mdc-linear-progress-secondary-half":this.styleSecondaryHalf,"--mdc-linear-progress-secondary-half-neg":""!==this.styleSecondaryHalf?"-".concat(this.styleSecondaryHalf):"","--mdc-linear-progress-secondary-full":this.styleSecondaryFull,"--mdc-linear-progress-secondary-full-neg":""!==this.styleSecondaryFull?"-".concat(this.styleSecondaryFull):""},i={"flex-basis":this.indeterminate?"100%":"".concat(100*this.buffer,"%")},n={transform:this.indeterminate?"scaleX(1)":"scaleX(".concat(this.progress,")")};return b(M||(M=d(['\n      <div\n          role="progressbar"\n          class="mdc-linear-progress ','"\n          style="','"\n          dir="','"\n          aria-label="','"\n          aria-valuemin="0"\n          aria-valuemax="1"\n          aria-valuenow="','"\n        @transitionend="','">\n        <div class="mdc-linear-progress__buffer">\n          <div\n            class="mdc-linear-progress__buffer-bar"\n            style=','>\n          </div>\n          <div class="mdc-linear-progress__buffer-dots"></div>\n        </div>\n        <div\n            class="mdc-linear-progress__bar mdc-linear-progress__primary-bar"\n            style=','>\n          <span class="mdc-linear-progress__bar-inner"></span>\n        </div>\n        <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">\n          <span class="mdc-linear-progress__bar-inner"></span>\n        </div>\n      </div>'])),x(t),k(e),I(this.reverse?"rtl":void 0),I(this.ariaLabel),I(this.indeterminate?void 0:this.progress),this.syncClosedState,k(i),k(n))}},{key:"update",value:function(t){!t.has("closed")||this.closed&&void 0!==t.get("closed")||this.syncClosedState(),s(o(g.prototype),"update",this).call(this,t)}},{key:"firstUpdated",value:(h=l(c.mark((function t(e){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s(o(g.prototype),"firstUpdated",this).call(this,e),this.attachResizeObserver();case 2:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"syncClosedState",value:function(){this.closedAnimationOff=this.closed}},{key:"updated",value:function(t){!t.has("indeterminate")&&t.has("reverse")&&this.indeterminate&&this.restartAnimation(),t.has("indeterminate")&&void 0!==t.get("indeterminate")&&this.indeterminate&&window.ResizeObserver&&this.calculateAndSetAnimationDimensions(this.rootEl.offsetWidth),s(o(g.prototype),"updated",this).call(this,t)}},{key:"disconnectedCallback",value:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),s(o(g.prototype),"disconnectedCallback",this).call(this)}},{key:"attachResizeObserver",value:function(){var t=this;if(window.ResizeObserver)return this.resizeObserver=new window.ResizeObserver((function(e){if(t.indeterminate){var i,n=p(e);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(o.contentRect){var s=o.contentRect.width;t.calculateAndSetAnimationDimensions(s)}}}catch(t){n.e(t)}finally{n.f()}}})),void this.resizeObserver.observe(this.rootEl);this.resizeObserver=null}},{key:"calculateAndSetAnimationDimensions",value:function(t){var e=.8367142*t,i=2.00611057*t,n=.37651913*t,o=.84386165*t,s=1.60277782*t;this.stylePrimaryHalf="".concat(e,"px"),this.stylePrimaryFull="".concat(i,"px"),this.styleSecondaryQuarter="".concat(n,"px"),this.styleSecondaryHalf="".concat(o,"px"),this.styleSecondaryFull="".concat(s,"px"),this.restartAnimation()}},{key:"restartAnimation",value:(e=l(c.mark((function t(){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationReady=!1,t.next=3,this.updateComplete;case 3:return t.next=5,new Promise(requestAnimationFrame);case 5:return this.animationReady=!0,t.next=8,this.updateComplete;case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"open",value:function(){this.closed=!1}},{key:"close",value:function(){this.closed=!0}}]),g}(w),m([v(".mdc-linear-progress")],$t.prototype,"rootEl",void 0),m([f({type:Boolean,reflect:!0})],$t.prototype,"indeterminate",void 0),m([f({type:Number})],$t.prototype,"progress",void 0),m([f({type:Number})],$t.prototype,"buffer",void 0),m([f({type:Boolean,reflect:!0})],$t.prototype,"reverse",void 0),m([f({type:Boolean,reflect:!0})],$t.prototype,"closed",void 0),m([y,f({attribute:"aria-label"})],$t.prototype,"ariaLabel",void 0),m([_()],$t.prototype,"stylePrimaryHalf",void 0),m([_()],$t.prototype,"stylePrimaryFull",void 0),m([_()],$t.prototype,"styleSecondaryQuarter",void 0),m([_()],$t.prototype,"styleSecondaryHalf",void 0),m([_()],$t.prototype,"styleSecondaryFull",void 0),m([_()],$t.prototype,"animationReady",void 0),m([_()],$t.prototype,"closedAnimationOff",void 0),Nt=C(D||(D=d(["@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%);transform:translateX(var(--mdc-linear-progress-primary-half, 83.67142%))}100%{transform:translateX(200.611057%);transform:translateX(var(--mdc-linear-progress-primary-full, 200.611057%))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%);transform:translateX(var(--mdc-linear-progress-secondary-quarter, 37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%);transform:translateX(var(--mdc-linear-progress-secondary-half, 84.386165%))}100%{transform:translateX(160.277782%);transform:translateX(var(--mdc-linear-progress-secondary-full, 160.277782%))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(-10px)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%);transform:translateX(var(--mdc-linear-progress-primary-half-neg, -83.67142%))}100%{transform:translateX(-200.611057%);transform:translateX(var(--mdc-linear-progress-primary-full-neg, -200.611057%))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg, -37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%);transform:translateX(var(--mdc-linear-progress-secondary-half-neg, -84.386165%))}100%{transform:translateX(-160.277782%);transform:translateX(var(--mdc-linear-progress-secondary-full-neg, -160.277782%))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;height:4px;transform:translateZ(0);outline:1px solid transparent;overflow:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar{position:absolute;width:100%;height:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top:4px solid}.mdc-linear-progress__buffer{display:flex;position:absolute;width:100%;height:100%}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;background-size:10px 4px;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}.mdc-linear-progress__bar-inner{border-color:#6200ee;border-color:var(--mdc-theme-primary, #6200ee)}.mdc-linear-progress__buffer-dots{background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E\")}.mdc-linear-progress__buffer-bar{background-color:#e6e6e6}:host{display:block}.mdc-linear-progress__buffer-bar{background-color:#e6e6e6;background-color:var(--mdc-linear-progress-buffer-color, #e6e6e6)}.mdc-linear-progress__buffer-dots{background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E\");background-image:var(--mdc-linear-progress-buffering-dots-image, url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E\"))}"]))),(Bt=function(t){n(o,t);var e=i(o);function o(){return a(this,o),e.apply(this,arguments)}return r(o)}($t)).styles=[Nt],Bt=m([S("mwc-linear-progress")],Bt),Ot=function(){function t(e){a(this,t),this._map=new Map,this._roundAverageSize=!0,this.totalSize=0,!1===(null==e?void 0:e.roundAverageSize)&&(this._roundAverageSize=!1)}return r(t,[{key:"set",value:function(t,e){var i=this._map.get(t)||0;this._map.set(t,e),this.totalSize+=e-i}},{key:"averageSize",get:function(){if(this._map.size>0){var t=this.totalSize/this._map.size;return this._roundAverageSize?Math.round(t):t}return 0}},{key:"getSize",value:function(t){return this._map.get(t)}},{key:"clear",value:function(){this._map.clear(),this.totalSize=0}}]),t}(),jt=function(){function t(e){var i=this;a(this,t),this._latestCoords={left:0,top:0},this._direction=null,this._viewportSize={width:0,height:0},this._pendingReflow=!1,this._pendingLayoutUpdate=!1,this._scrollToIndex=-1,this._scrollToAnchor=0,this._firstVisible=0,this._lastVisible=0,this._eventTargetPromise=function(){return ce.apply(this,arguments)}().then((function(t){i._eventTarget=new t})),this._physicalMin=0,this._physicalMax=0,this._first=-1,this._last=-1,this._sizeDim="height",this._secondarySizeDim="width",this._positionDim="top",this._secondaryPositionDim="left",this._scrollPosition=0,this._scrollError=0,this._totalItems=0,this._scrollSize=1,this._overhang=1e3,this._eventTarget=null,Promise.resolve().then((function(){return i.config=e||i._defaultConfig}))}var e,i,n;return r(t,[{key:"_defaultConfig",get:function(){return{direction:"vertical"}}},{key:"config",get:function(){return{direction:this.direction}},set:function(t){Object.assign(this,Object.assign({},this._defaultConfig,t))}},{key:"totalItems",get:function(){return this._totalItems},set:function(t){var e=Number(t);e!==this._totalItems&&(this._totalItems=e,this._scheduleReflow())}},{key:"direction",get:function(){return this._direction},set:function(t){(t="horizontal"===t?t:"vertical")!==this._direction&&(this._direction=t,this._sizeDim="horizontal"===t?"width":"height",this._secondarySizeDim="horizontal"===t?"height":"width",this._positionDim="horizontal"===t?"left":"top",this._secondaryPositionDim="horizontal"===t?"top":"left",this._triggerReflow())}},{key:"viewportSize",get:function(){return this._viewportSize},set:function(t){var e=this._viewDim1,i=this._viewDim2;Object.assign(this._viewportSize,t),i!==this._viewDim2?this._scheduleLayoutUpdate():e!==this._viewDim1&&this._checkThresholds()}},{key:"viewportScroll",get:function(){return this._latestCoords},set:function(t){Object.assign(this._latestCoords,t);var e=this._scrollPosition;this._scrollPosition=this._latestCoords[this._positionDim],e!==this._scrollPosition&&(this._scrollPositionChanged(e,this._scrollPosition),this._updateVisibleIndices({emit:!0})),this._checkThresholds()}},{key:"reflowIfNeeded",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(t||this._pendingReflow)&&(this._pendingReflow=!1,this._reflow())}},{key:"scrollToIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";if(Number.isFinite(t)){switch(t=Math.min(this.totalItems,Math.max(0,t)),this._scrollToIndex=t,"nearest"===e&&(e=t>this._first+this._num/2?"end":"start"),e){case"start":this._scrollToAnchor=0;break;case"center":this._scrollToAnchor=.5;break;case"end":this._scrollToAnchor=1;break;default:throw new TypeError("position must be one of: start, center, end, nearest")}this._scheduleReflow()}}},{key:"dispatchEvent",value:(n=l(c.mark((function t(e){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._eventTargetPromise;case 2:this._eventTarget.dispatchEvent(e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"addEventListener",value:(i=l(c.mark((function t(e,i,n){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._eventTargetPromise;case 2:this._eventTarget.addEventListener(e,i,n);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"removeEventListener",value:(e=l(c.mark((function t(e,i,n){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._eventTargetPromise;case 2:this._eventTarget.removeEventListener(e,i,n);case 3:case"end":return t.stop()}}),t,this)}))),function(t,i,n){return e.apply(this,arguments)})},{key:"_updateLayout",value:function(){}},{key:"_viewDim1",get:function(){return this._viewportSize[this._sizeDim]}},{key:"_viewDim2",get:function(){return this._viewportSize[this._secondarySizeDim]}},{key:"_scheduleReflow",value:function(){this._pendingReflow=!0}},{key:"_scheduleLayoutUpdate",value:function(){this._pendingLayoutUpdate=!0,this._scheduleReflow()}},{key:"_triggerReflow",value:function(){var t=this;this._scheduleLayoutUpdate(),Promise.resolve().then((function(){return t.reflowIfNeeded()}))}},{key:"_reflow",value:function(){this._pendingLayoutUpdate&&(this._updateLayout(),this._pendingLayoutUpdate=!1),this._updateScrollSize(),this._getActiveItems(),this._scrollIfNeeded(),this._updateVisibleIndices(),this._emitScrollSize(),this._emitRange(),this._emitChildPositions(),this._emitScrollError()}},{key:"_scrollIfNeeded",value:function(){if(-1!==this._scrollToIndex){var t=this._scrollToIndex,e=this._scrollToAnchor,i=this._getItemPosition(t)[this._positionDim],n=this._getItemSize(t)[this._sizeDim],o=this._scrollPosition+this._viewDim1*e,s=i+n*e,r=Math.floor(Math.min(this._scrollSize-this._viewDim1,Math.max(0,this._scrollPosition-o+s)));this._scrollError+=this._scrollPosition-r,this._scrollPosition=r}}},{key:"_emitRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=Object.assign({first:this._first,last:this._last,num:this._num,stable:!0,firstVisible:this._firstVisible,lastVisible:this._lastVisible},t);this.dispatchEvent(new CustomEvent("rangechange",{detail:e}))}},{key:"_emitScrollSize",value:function(){var t=h({},this._sizeDim,this._scrollSize);this.dispatchEvent(new CustomEvent("scrollsizechange",{detail:t}))}},{key:"_emitScrollError",value:function(){if(this._scrollError){var t,e=(h(t={},this._positionDim,this._scrollError),h(t,this._secondaryPositionDim,0),t);this.dispatchEvent(new CustomEvent("scrollerrorchange",{detail:e})),this._scrollError=0}}},{key:"_emitChildPositions",value:function(){for(var t={},e=this._first;e<=this._last;e++)t[e]=this._getItemPosition(e);this.dispatchEvent(new CustomEvent("itempositionchange",{detail:t}))}},{key:"_num",get:function(){return-1===this._first||-1===this._last?0:this._last-this._first+1}},{key:"_checkThresholds",value:function(){if(0===this._viewDim1&&this._num>0)this._scheduleReflow();else{var t=Math.max(0,this._scrollPosition-this._overhang),e=Math.min(this._scrollSize,this._scrollPosition+this._viewDim1+this._overhang);(this._physicalMin>t||this._physicalMax<e)&&this._scheduleReflow()}}},{key:"_updateVisibleIndices",value:function(t){if(-1!==this._first&&-1!==this._last){for(var e=this._first;e<this._last&&Math.round(this._getItemPosition(e)[this._positionDim]+this._getItemSize(e)[this._sizeDim])<=Math.round(this._scrollPosition);)e++;for(var i=this._last;i>this._first&&Math.round(this._getItemPosition(i)[this._positionDim])>=Math.round(this._scrollPosition+this._viewDim1);)i--;e===this._firstVisible&&i===this._lastVisible||(this._firstVisible=e,this._lastVisible=i,t&&t.emit&&this._emitRange())}}},{key:"_scrollPositionChanged",value:function(t,e){var i=this._scrollSize-this._viewDim1;(t<i||e<i)&&(this._scrollToIndex=-1)}}]),t}(),qt=function(t){return Object.assign({type:Wt},t)},Jt=function(){function t(){a(this,t),this._childSizeCache=new Ot,this._marginSizeCache=new Ot,this._metricsCache=new Map}return r(t,[{key:"update",value:function(t,e){var i,n,o=this,s=new Set;Object.keys(t).forEach((function(i){var n=Number(i);o._metricsCache.set(n,t[n]),o._childSizeCache.set(n,t[n][ue(e)]),s.add(n),s.add(n+1)}));var r,a=p(s);try{for(a.s();!(r=a.n()).done;){var d=r.value,l=(null===(i=this._metricsCache.get(d))||void 0===i?void 0:i[me(e)])||0,c=(null===(n=this._metricsCache.get(d-1))||void 0===n?void 0:n[ve(e)])||0;this._marginSizeCache.set(d,fe(l,c))}}catch(t){a.e(t)}finally{a.f()}}},{key:"averageChildSize",get:function(){return this._childSizeCache.averageSize}},{key:"totalChildSize",get:function(){return this._childSizeCache.totalSize}},{key:"averageMarginSize",get:function(){return this._marginSizeCache.averageSize}},{key:"totalMarginSize",get:function(){return this._marginSizeCache.totalSize}},{key:"getLeadingMarginValue",value:function(t,e){var i;return(null===(i=this._metricsCache.get(t))||void 0===i?void 0:i[me(e)])||0}},{key:"getChildSize",value:function(t){return this._childSizeCache.getSize(t)}},{key:"getMarginSize",value:function(t){return this._marginSizeCache.getSize(t)}},{key:"clear",value:function(){this._childSizeCache.clear(),this._marginSizeCache.clear(),this._metricsCache.clear()}}]),t}(),t("F",Wt=function(t){n(d,t);var e=i(d);function d(){var t;return a(this,d),(t=e.apply(this,arguments))._itemSize={width:100,height:100},t._physicalItems=new Map,t._newPhysicalItems=new Map,t._metricsCache=new Jt,t._anchorIdx=null,t._anchorPos=null,t._stable=!0,t._needsRemeasure=!1,t._measureChildren=!0,t._estimate=!0,t}return r(d,[{key:"measureChildren",get:function(){return this._measureChildren}},{key:"updateItemSizes",value:function(t){this._metricsCache.update(t,this.direction),this._scheduleReflow()}},{key:"_getPhysicalItem",value:function(t){var e;return null!==(e=this._newPhysicalItems.get(t))&&void 0!==e?e:this._physicalItems.get(t)}},{key:"_getSize",value:function(t){return this._getPhysicalItem(t)&&this._metricsCache.getChildSize(t)}},{key:"_getAverageSize",value:function(){return this._metricsCache.averageChildSize||this._itemSize[this._sizeDim]}},{key:"_getPosition",value:function(t){var e,i=this._getPhysicalItem(t),n=this._metricsCache.averageMarginSize;return 0===t?null!==(e=this._metricsCache.getMarginSize(0))&&void 0!==e?e:n:i?i.pos:n+t*(n+this._getAverageSize())}},{key:"_calculateAnchor",value:function(t,e){return t<=0?0:e>this._scrollSize-this._viewDim1?this._totalItems-1:Math.max(0,Math.min(this._totalItems-1,Math.floor((t+e)/2/this._delta)))}},{key:"_getAnchor",value:function(t,e){if(0===this._physicalItems.size)return this._calculateAnchor(t,e);if(this._first<0)return console.error("_getAnchor: negative _first"),this._calculateAnchor(t,e);if(this._last<0)return console.error("_getAnchor: negative _last"),this._calculateAnchor(t,e);var i=this._getPhysicalItem(this._first),n=this._getPhysicalItem(this._last),o=i.pos;if(n.pos+this._metricsCache.getChildSize(this._last)<t)return this._calculateAnchor(t,e);if(o>e)return this._calculateAnchor(t,e);for(var s=this._firstVisible-1,r=-1/0;r<t;){r=this._getPhysicalItem(++s).pos+this._metricsCache.getChildSize(s)}return s}},{key:"_getActiveItems",value:function(){0===this._viewDim1||0===this._totalItems?this._clearItems():this._getItems()}},{key:"_clearItems",value:function(){this._first=-1,this._last=-1,this._physicalMin=0,this._physicalMax=0;var t=this._newPhysicalItems;this._newPhysicalItems=this._physicalItems,this._newPhysicalItems.clear(),this._physicalItems=t,this._stable=!0}},{key:"_getItems",value:function(){var t,e,i,n,o=this._newPhysicalItems;if(this._stable=!0,this._scrollToIndex>=0&&(this._anchorIdx=Math.min(this._scrollToIndex,this._totalItems-1),this._anchorPos=this._getPosition(this._anchorIdx),this._scrollIfNeeded()),i=this._scrollPosition-this._overhang,(n=this._scrollPosition+this._viewDim1+this._overhang)<0||i>this._scrollSize)this._clearItems();else{null!==this._anchorIdx&&null!==this._anchorPos||(this._anchorIdx=this._getAnchor(i,n),this._anchorPos=this._getPosition(this._anchorIdx));var s=this._getSize(this._anchorIdx);void 0===s&&(this._stable=!1,s=this._getAverageSize());var r=null!==(t=this._metricsCache.getMarginSize(this._anchorIdx))&&void 0!==t?t:this._metricsCache.averageMarginSize,a=null!==(e=this._metricsCache.getMarginSize(this._anchorIdx+1))&&void 0!==e?e:this._metricsCache.averageMarginSize;0===this._anchorIdx&&(this._anchorPos=r),this._anchorIdx===this._totalItems-1&&(this._anchorPos=this._scrollSize-a-s);var d=0;for(this._anchorPos+s+a<i&&(d=i-(this._anchorPos+s+a)),this._anchorPos-r>n&&(d=n-(this._anchorPos-r)),d&&(this._scrollPosition-=d,i-=d,n-=d,this._scrollError+=d),o.set(this._anchorIdx,{pos:this._anchorPos,size:s}),this._first=this._last=this._anchorIdx,this._physicalMin=this._anchorPos,this._physicalMax=this._anchorPos+s;this._physicalMin>i&&this._first>0;){var l=this._getSize(--this._first);void 0===l&&(this._stable=!1,l=this._getAverageSize());var c=this._metricsCache.getMarginSize(this._first+1);void 0===c&&(this._stable=!1,c=this._metricsCache.averageMarginSize),this._physicalMin-=l+c;var p=this._physicalMin;if(o.set(this._first,{pos:p,size:l}),!1===this._stable&&!1===this._estimate)break}for(;this._physicalMax<n&&this._last<this._totalItems-1;){var h=this._metricsCache.getMarginSize(++this._last);void 0===h&&(this._stable=!1,h=this._metricsCache.averageMarginSize);var u=this._getSize(this._last);void 0===u&&(this._stable=!1,u=this._getAverageSize());var g=this._physicalMax+h;if(o.set(this._last,{pos:g,size:u}),this._physicalMax+=h+u,!1===this._stable&&!1===this._estimate)break}var m=this._calculateError();m&&(this._physicalMin-=m,this._physicalMax-=m,this._anchorPos-=m,this._scrollPosition-=m,o.forEach((function(t){return t.pos-=m})),this._scrollError+=m),this._stable&&(this._newPhysicalItems=this._physicalItems,this._newPhysicalItems.clear(),this._physicalItems=o)}}},{key:"_calculateError",value:function(){var t,e,i=this._metricsCache.averageMarginSize;return 0===this._first?this._physicalMin-(null!==(t=this._metricsCache.getMarginSize(0))&&void 0!==t?t:i):this._physicalMin<=0?this._physicalMin-this._first*this._delta:this._last===this._totalItems-1?this._physicalMax+(null!==(e=this._metricsCache.getMarginSize(this._totalItems))&&void 0!==e?e:i)-this._scrollSize:this._physicalMax>=this._scrollSize?this._physicalMax-this._scrollSize+(this._totalItems-1-this._last)*this._delta:0}},{key:"_reflow",value:function(){var t=this._first,e=this._last,i=this._scrollSize;this._updateScrollSize(),this._getActiveItems(),this._scrollSize!==i&&this._emitScrollSize(),this._updateVisibleIndices(),this._emitRange(),-1===this._first&&-1===this._last?this._resetReflowState():this._first!==t||this._last!==e||this._needsRemeasure?(this._emitChildPositions(),this._emitScrollError()):(this._emitChildPositions(),this._emitScrollError(),this._resetReflowState())}},{key:"_resetReflowState",value:function(){this._anchorIdx=null,this._anchorPos=null,this._stable=!0}},{key:"_updateScrollSize",value:function(){var t=this._metricsCache.averageMarginSize;this._scrollSize=Math.max(1,this._totalItems*(t+this._getAverageSize())+t)}},{key:"_delta",get:function(){var t=this._metricsCache.averageMarginSize;return this._getAverageSize()+t}},{key:"_getItemPosition",value:function(t){var e,i;return h(e={},this._positionDim,this._getPosition(t)),h(e,this._secondaryPositionDim,0),h(e,"horizontal"===this.direction?"xOffset":"yOffset",-(null!==(i=this._metricsCache.getLeadingMarginValue(t,this.direction))&&void 0!==i?i:this._metricsCache.averageMarginSize)),e}},{key:"_getItemSize",value:function(t){var e,i;return h(e={},this._sizeDim,(this._getSize(t)||this._getAverageSize())+(null!==(i=this._metricsCache.getMarginSize(t+1))&&void 0!==i?i:this._metricsCache.averageMarginSize)),h(e,this._secondarySizeDim,this._itemSize[this._secondarySizeDim]),e}},{key:"_viewDim2Changed",value:function(){this._needsRemeasure=!0,this._scheduleReflow()}},{key:"_emitRange",value:function(){var t=this._needsRemeasure,e=this._stable;this._needsRemeasure=!1,s(o(d.prototype),"_emitRange",this).call(this,{remeasure:t,stable:e})}}]),d}(jt)),t("f",Object.freeze({__proto__:null,flow:qt,FlowLayout:Wt})),t("G",Qt=function(t){n(d,t);var e=i(d);function d(){var t;return a(this,d),(t=e.apply(this,arguments))._metrics=null,t.flex=null,t.justify=null,t}return r(d,[{key:"_defaultConfig",get:function(){return Object.assign({},s(o(d.prototype),"_defaultConfig",this),{flex:!1,justify:"start"})}},{key:"gap",set:function(t){this._setGap(t)}},{key:"_updateLayout",value:function(){var t=this,e=this.justify,i=g(this._padding1,2),n=i[0],o=i[1],s=g(this._padding2,2),r=s[0],a=s[1];["_gap1","_gap2"].forEach((function(i){var n=t[i];if(n===1/0&&!["space-between","space-around","space-evenly"].includes(e))throw new Error("grid layout: gap can only be set to 'auto' when justify is set to 'space-between', 'space-around' or 'space-evenly'");if(n===1/0&&"_gap2"===i)throw new Error("grid layout: ".concat(ye(t.direction),"-gap cannot be set to 'auto' when direction is set to ").concat(t.direction))}));var d={rolumns:-1,itemSize1:-1,itemSize2:-1,gap1:this._gap1===1/0?-1:this._gap1,gap2:this._gap2,padding1:{start:n===1/0?this._gap1:n,end:o===1/0?this._gap1:o},padding2:{start:r===1/0?this._gap2:r,end:a===1/0?this._gap2:a},positions:[]},l=this._viewDim2;this.flex||["start","center","end"].includes(e)?(l-=d.padding2.start,l-=d.padding2.end):"space-between"===e?l+=d.gap2:"space-evenly"===e&&(l-=d.gap2);var c,p,h=l/(this._idealSize2+d.gap2);if(this.flex)switch(d.rolumns=Math.round(h),d.itemSize2=Math.round((l-d.gap2*(d.rolumns-1))/d.rolumns),!0===this.flex?"area":this.flex.preserve){case"aspect-ratio":d.itemSize1=Math.round(this._idealSize1/this._idealSize2*d.itemSize2);break;case ue(this.direction):d.itemSize1=Math.round(this._idealSize1);break;case"area":default:d.itemSize1=Math.round(this._idealSize1*this._idealSize2/d.itemSize2)}else d.itemSize1=this._idealSize1,d.itemSize2=this._idealSize2,d.rolumns=Math.floor(h);if(this.flex||["start","center","end"].includes(e)){var u=d.rolumns*d.itemSize2+(d.rolumns-1)*d.gap2;c=this.flex||"start"===e?d.padding2.start:"end"===e?this._viewDim2-d.padding2.end-u:Math.round(this._viewDim2/2-u/2),p=d.gap2}else{var m=l-d.rolumns*d.itemSize2;"space-between"===e?(p=Math.round(m/(d.rolumns-1)),c=0):"space-around"===e?(p=Math.round(m/d.rolumns),c=Math.round(p/2)):c=p=Math.round(m/(d.rolumns+1)),this._gap1===1/0&&(d.gap1=p,n===1/0&&(d.padding1.start=c),o===1/0&&(d.padding1.end=c))}for(var v=0;v<d.rolumns;v++)d.positions.push(c),c+=d.itemSize2+p;this._metrics=d}},{key:"_delta",get:function(){return this._metrics.itemSize1+this._metrics.gap1}},{key:"_getItemSize",value:function(t){var e;return h(e={},this._sizeDim,this._metrics.itemSize1),h(e,this._secondarySizeDim,this._metrics.itemSize2),e}},{key:"_getActiveItems",value:function(){var t=this._metrics.padding1,e=Math.max(0,this._scrollPosition-this._overhang),i=Math.min(this._scrollSize,this._scrollPosition+this._viewDim1+this._overhang),n=Math.max(0,Math.floor((e-t.start)/this._delta)),o=Math.max(0,Math.ceil((i-t.start)/this._delta));this._first=n*this._metrics.rolumns,this._last=Math.min(o*this._metrics.rolumns-1,this._totalItems-1),this._physicalMin=t.start+this._delta*n,this._physicalMax=t.start+this._delta*o}},{key:"_getItemPosition",value:function(t){var e,i=this._metrics,n=i.rolumns,o=i.padding1,s=i.positions,r=i.itemSize1,a=i.itemSize2;return h(e={},this._positionDim,o.start+Math.floor(t/n)*this._delta),h(e,this._secondaryPositionDim,s[t%n]),h(e,ue(this.direction),r),h(e,ge(this.direction),a),e}},{key:"_updateScrollSize",value:function(){this._scrollSize=Math.max(1,Math.ceil(this._totalItems/this._metrics.rolumns)*this._delta+this._gap)}}]),d}(function(t){n(d,t);var e=i(d);function d(){var t;return a(this,d),(t=e.apply(this,arguments))._itemSize={},t._gaps={},t._padding={},t}return r(d,[{key:"_defaultConfig",get:function(){return Object.assign({},s(o(d.prototype),"_defaultConfig",this),{itemSize:{width:"300px",height:"300px"},gap:"8px",padding:"match-gap"})}},{key:"_gap",get:function(){return this._gaps.row}},{key:"_idealSize",get:function(){return this._itemSize[ue(this.direction)]}},{key:"_idealSize1",get:function(){return this._itemSize[ue(this.direction)]}},{key:"_idealSize2",get:function(){return this._itemSize[ge(this.direction)]}},{key:"_gap1",get:function(){return this._gaps[(t=this.direction,"horizontal"===t?"column":"row")];var t}},{key:"_gap2",get:function(){return this._gaps[ye(this.direction)]}},{key:"_padding1",get:function(){var t=this._padding,e="horizontal"===this.direction?["left","right"]:["top","bottom"],i=g(e,2),n=i[0],o=i[1];return[t[n],t[o]]}},{key:"_padding2",get:function(){var t=this._padding,e="horizontal"===this.direction?["top","bottom"]:["left","right"],i=g(e,2),n=i[0],o=i[1];return[t[n],t[o]]}},{key:"itemSize",set:function(t){var e=this._itemSize,i=parseInt(t.width),n=parseInt(t.height);i!==e.width&&(e.width=i,this._triggerReflow()),n!==e.height&&(e.height=n,this._triggerReflow())}},{key:"_setGap",value:function(t){var e=t.split(" ").map((function(t){return function(t){return"auto"===t?1/0:parseInt(t)}(t)})),i=this._gaps;e[0]!==i.row&&(i.row=e[0],this._triggerReflow()),void 0===e[1]?e[0]!==i.column&&(i.column=e[0],this._triggerReflow()):e[1]!==i.column&&(i.column=e[1],this._triggerReflow())}},{key:"padding",set:function(t){var e=this._padding,i=t.split(" ").map((function(t){return function(t){return"match-gap"===t?1/0:parseInt(t)}(t)}));1===i.length?e.top=e.right=e.bottom=e.left=i[0]:2===i.length?(e.top=e.bottom=i[0],e.right=e.left=i[1]):3===i.length?(e.top=i[0],e.right=e.left=i[1],e.bottom=i[2]):4===i.length&&["top","right","bottom","left"].forEach((function(t,n){return e[t]=i[n]}))}}]),d}(jt))),t("Y",Yt=function(){function t(){a(this,t)}return r(t,null,[{key:"_checkVideoLongPlayTimeAndReset",value:function(t,e){var i=e.getAttribute("data-id");if(t.playStartedAt&&i){var n=((new Date).getTime()-t.playStartedAt.getTime())/1e3;n>5&&window.appGlobals.sendLongVideoView(i),window.appGlobals.activity("completed","video",n),t.playStartedAt=void 0}else t.playStartedAt&&(console.error("Got long view check without id"),t.playStartedAt=void 0)}},{key:"_checkAudioLongPlayTimeAndReset",value:function(t,e){var i=e.getAttribute("data-id");if(t.playStartedAt&&i){var n=((new Date).getTime()-t.playStartedAt.getTime())/1e3;n>5&&window.appGlobals.sendLongAudioListen(i),window.appGlobals.activity("completed","audio",n),t.playStartedAt=void 0}else t.playStartedAt&&(console.error("Got long view check without audio id"),t.playStartedAt=void 0)}},{key:"getImageFormatUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t&&t.length>0))return"";var i=JSON.parse(t[t.length-1].formats);return i&&i.length>0?i[e]:void 0}},{key:"setupTopHeaderImage",value:function(t,e){var i;t.wide&&(i=e?"url("+this.getImageFormatUrl(e,0)+")":"none",window.appGlobals.theme.updateStyles({"--top-area-background-image":i}))}},{key:"attachMediaListeners",value:function(t){var e=this;setTimeout((function(){var i=t.$$("#videoPlayer"),n=t.$$("#audioPlayer");if(i){var o=i.getAttribute("data-id");o&&(t.videoPlayListener=function(){t.playStartedAt=new Date,window.appGlobals.sendVideoView(parseInt(o))},t.videoPauseListener=function(){e._checkVideoLongPlayTimeAndReset(t,i)},t.videoEndedListener=function(){e._checkVideoLongPlayTimeAndReset(t,i)},i.addEventListener("play",t.videoPlayListener.bind(t)),i.addEventListener("pause",t.videoPauseListener.bind(t)),i.addEventListener("ended",t.videoEndedListener.bind(t)))}if(n){var s=n.getAttribute("data-id");s&&(t.audioPlayListener=function(){t.playStartedAt=new Date,window.appGlobals.sendAudioListen(s)},t.audioPauseListener=function(){e._checkAudioLongPlayTimeAndReset(t,n)},t.audioEndedListener=function(){e._checkAudioLongPlayTimeAndReset(t,n)},n.addEventListener("play",t.audioPlayListener.bind(t)),n.addEventListener("pause",t.audioPauseListener.bind(t)),n.addEventListener("ended",t.audioEndedListener.bind(t)))}}),200)}},{key:"detachMediaListeners",value:function(t){var e=t.$$("#videoPlayer"),i=t.$$("#audioPlayer");e&&(t.videoPlayListener&&(e.removeEventListener("play",t.videoPlayListener),t.videoPlayListener=void 0),t.videoPauseListener&&(e.removeEventListener("pause",t.videoPauseListener),t.videoPauseListener=void 0),t.videoEndedListener&&(e.removeEventListener("ended",t.videoEndedListener),t.videoEndedListener=void 0),this._checkVideoLongPlayTimeAndReset(t,e)),i&&(t.audioPlayListener&&(i.removeEventListener("play",t.audioPlayListener),t.audioPlayListener=void 0),t.audioPauseListener&&(i.removeEventListener("pause",t.audioPauseListener),t.audioPauseListener=void 0),t.audioEndedListener&&(i.removeEventListener("ended",t.audioEndedListener),t.audioEndedListener=void 0),this._checkVideoLongPlayTimeAndReset(t,i))}},{key:"pauseMediaPlayback",value:function(t){var e=t.$$("#videoPlayer"),i=t.$$("#audioPlayer");e&&e.pause(),i&&i.pause()}},{key:"getVideoURL",value:function(t){return t&&t.length>0&&t[0].formats&&t[0].formats.length>0?t[0].formats[0]:null}},{key:"isPortraitVideo",value:function(t){return!!(t&&t.length>0&&t[0].formats&&t[0].formats.length>0)&&!(!t[0].public_meta||!t[0].public_meta.aspect||"portrait"!==t[0].public_meta.aspect)}},{key:"getAudioURL",value:function(t){return t&&t.length>0&&t[0].formats&&t[0].formats.length>0?t[0].formats[0]:null}},{key:"getVideoPosterURL",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t&&t.length>0&&t[0].VideoImages&&t[0].VideoImages.length>0?(t[0].public_meta&&t[0].public_meta.selectedVideoFrameIndex&&(i=t[0].public_meta.selectedVideoFrameIndex),i>t[0].VideoImages.length-1&&(i=0),-2===i&&e?this.getImageFormatUrl(e,0):(i<0&&(i=0),JSON.parse(t[0].VideoImages[i].formats)[0])):null}}]),t}()),Kt=function(t){n(l,t);var e=i(l);function l(){var t;return a(this,l),(t=e.apply(this,arguments)).src="",t.alt=void 0,t.crossorigin=void 0,t.preventLoad=!1,t.sizing=void 0,t.position="center",t.preload=!1,t.placeholder=void 0,t.fade=!1,t.loaded=!1,t.loading=!1,t.error=!1,t.width=void 0,t.height=void 0,t._resolvedSrc=void 0,t.ABS_URL=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/,t.workingURL=void 0,t.resolveDoc=void 0,t}return r(l,[{key:"render",value:function(){return b(L||(L=d(['\n      <a id="baseURIAnchor" href="#"></a>\n      <div\n        id="sizedImgDiv"\n        role="img"\n        ?hidden="','"\n        aria-hidden="','"\n        aria-label="','"></div>\n      <img\n        id="img"\n        alt="','"\n        ?hidden="','"\n        crossorigin="','"\n        @load="','"\n        @error="','" />\n      <div\n        id="placeholder"\n        ?hidden="','"\n        class="','"></div>\n    '])),this._computeImgDivHidden,this._computeImgDivARIAHidden,I(this._computeImgDivARIALabel),this.alt?this.alt:"",this._computeImgHidden,I(this.crossorigin),this._imgOnLoad,this._imgOnError,this.computePlaceholderHidden,this._computePlaceholderClassName)}},{key:"$$",value:function(t){return this.shadowRoot?this.shadowRoot.querySelector(t):null}},{key:"connectedCallback",value:function(){s(o(l.prototype),"connectedCallback",this).call(this),this._resolvedSrc=""}},{key:"_imgOnLoad",value:function(){this.$$("img").src===this._resolveSrc(this.src)&&(this.loading=!1,this.loaded=!0,this.error=!1)}},{key:"_imgOnError",value:function(){this.$$("img").src===this._resolveSrc(this.src)&&(this.$$("img").removeAttribute("src"),this.$$("#sizedImgDiv").style.backgroundImage="",this.loading=!1,this.loaded=!1,this.error=!0)}},{key:"computePlaceholderHidden",get:function(){return!this.preload||!this.fade&&!this.loading&&this.loaded}},{key:"_computePlaceholderClassName",value:function(){return this.preload&&this.fade&&!this.loading&&this.loaded?"faded-out":""}},{key:"_computeImgDivHidden",get:function(){return!this.sizing}},{key:"_computeImgDivARIAHidden",get:function(){return""===this.alt}},{key:"_computeImgDivARIALabel",get:function(){if(null!==this.alt)return this.alt;if(""===this.src)return"";var t=this._resolveSrc(this.src);return t?t.replace(/[?|#].*/g,"").split("/").pop():""}},{key:"_computeImgHidden",get:function(){return!!this.sizing}},{key:"_widthChanged",value:function(){this.width&&(this.style.width=this.width+"px")}},{key:"_heightChanged",value:function(){this.style.height=this.height+"px"}},{key:"_loadStateObserver",value:function(){var t=this._resolveSrc(this.src);t!==this._resolvedSrc&&(this._resolvedSrc="",this.$$("img").removeAttribute("src"),this.$$("#sizedImgDiv").style.backgroundImage="",""===this.src||this.preventLoad?(this.loading=!1,this.loaded=!1,this.error=!1):(this._resolvedSrc=t,this._resolvedSrc&&(this.$$("img").src=this._resolvedSrc),this.$$("#sizedImgDiv").style.backgroundImage='url("'+this._resolvedSrc+'")',this.loading=!0,this.loaded=!1,this.error=!1))}},{key:"_placeholderChanged",value:function(){this.$$("#placeholder").style.backgroundImage=this.placeholder?'url("'+this.placeholder+'")':""}},{key:"_transformChanged",value:function(){var t=this.$$("#sizedImgDiv").style,e=this.$$("#placeholder").style;this.sizing&&(t.backgroundSize=e.backgroundSize=this.sizing),t.backgroundPosition=e.backgroundPosition=this.sizing?this.position:"",t.backgroundRepeat=e.backgroundRepeat=this.sizing?"no-repeat":""}},{key:"_resolveSrc",value:function(t){var e=this.resolveUrl(t,this.$$("#baseURIAnchor").href);return e&&e.length>=2&&"/"===e[0]&&"/"!==e[1]&&(e=(location.origin||location.protocol+"//"+location.host)+e),e}},{key:"resolveUrl",value:function(t,e){if(t&&this.ABS_URL.test(t))return t;if("//"===t)return t;if(void 0===this.workingURL){this.workingURL=!1;try{var i=new URL("b","http://a");i.pathname="c%20d",this.workingURL="http://a/c%20d"===i.href}catch(t){}}if(e||(e=document.baseURI||window.location.href),this.workingURL)try{return new URL(t,e).href}catch(e){return t}}},{key:"updated",value:function(t){s(o(l.prototype),"updated",this).call(this,t),t.has("placeHolder")&&this._placeholderChanged(),t.has("width")&&this._widthChanged(),t.has("height")&&this._widthChanged(),(t.has("sizing")||t.has("position"))&&this._transformChanged(),(t.has("src")||t.has("preventLoad"))&&this._loadStateObserver()}}],[{key:"styles",get:function(){return[C(V||(V=d(["\n        :host {\n          display: inline-block;\n          overflow: hidden;\n          position: relative;\n        }\n\n        #baseURIAnchor {\n          display: none;\n        }\n\n        #sizedImgDiv {\n          position: absolute;\n          top: 0px;\n          right: 0px;\n          bottom: 0px;\n          left: 0px;\n\n          display: none;\n        }\n\n        #img {\n          display: block;\n          width: var(--yp-image-width, auto);\n          height: var(--yp-image-height, auto);\n        }\n\n        :host([sizing]) #sizedImgDiv {\n          display: block;\n        }\n\n        :host([sizing]) #img {\n          display: none;\n        }\n\n        #placeholder {\n          position: absolute;\n          top: 0px;\n          right: 0px;\n          bottom: 0px;\n          left: 0px;\n\n          background-color: inherit;\n          opacity: 1;\n        }\n\n        #placeholder.faded-out {\n          transition: opacity 0.5s linear;\n          opacity: 0;\n        }\n      "])))]}}]),l}(w),m([f({type:String})],Kt.prototype,"src",void 0),m([f({type:String})],Kt.prototype,"alt",void 0),m([f({type:String})],Kt.prototype,"crossorigin",void 0),m([f({type:Boolean})],Kt.prototype,"preventLoad",void 0),m([f({type:String,reflect:!0})],Kt.prototype,"sizing",void 0),m([f({type:String})],Kt.prototype,"position",void 0),m([f({type:Boolean})],Kt.prototype,"preload",void 0),m([f({type:String})],Kt.prototype,"placeholder",void 0),m([f({type:Boolean})],Kt.prototype,"fade",void 0),m([f({type:Boolean})],Kt.prototype,"loaded",void 0),m([f({type:Boolean})],Kt.prototype,"loading",void 0),m([f({type:Boolean})],Kt.prototype,"error",void 0),m([f({type:String})],Kt.prototype,"width",void 0),m([f({type:String})],Kt.prototype,"height",void 0),Kt=m([S("yp-image")],Kt),Zt=function(t){n(g,t);var e,p,h=i(g);function g(){var t;return a(this,g),(t=h.apply(this,arguments)).filter="newest",t.subTitle="",t.showFilter=!0,t.allPostCount=0,t}return r(g,[{key:"render",value:function(){var t=this;return b(U||(U=d(['\n      <div class="layout horizontal center-center mainContainer wrap">\n        ',"\n        ","\n      </div>\n    "])),this.showFilter?b(F||(F=d(['\n              <div>\n                <mwc-select\n                  id="mainListMenu"\n                  icon="reorder"\n                  outlined\n                  index="1"\n                  @selected="','">\n                  <mwc-list-item\n                    graphic="icon"\n                    value="top">\n                    <span>','</span>\n                  </mwc-list-item>\n                  <mwc-list-item value="newest" graphic="icon">\n                    <span>','</span>\n                  </mwc-list-item>\n                  <mwc-list-item value="most_debated" graphic="icon">\n                    <span>','</span>\n                  </mwc-list-item>\n                  <mwc-list-item value="random" graphic="icon">\n                    <span>',"</span>\n                  </mwc-list-item>\n                </mwc-select>\n              </div>\n            "])),this._changeFilter,this.t("post.top"),this.t("post.newest"),this.t("post.most_debated"),this.t("post.random")):z,this.categoriesWithCount?b(G||(G=d(['\n              <div class="layout vertical">\n                <mwc-select\n                  id="categoriesMenu"\n                  outlined\n                  @selected="','"\n                  class="dropdown-content wrap categoriesDropdownMenu">\n                  <mwc-list-item data-category-id="-1" name="-1">\n                    <mwc-icon icon="select-all" class="filterIcon"></mwc-icon>\n                    <span\n                      >',"\n                      (",")</span\n                    >\n                  </mwc-list-item>\n\n                  ","\n                </mwc-select>\n              </div>\n            "])),this._changeCategory,this.t("categories.the_all"),this.allPostCount,this.categoriesWithCount.map((function(e){return b(R||(R=d(['\n                      <mwc-list-item\n                        data-category-id="','"\n                        data-category-name="','">\n                        <yp-image\n                          sizing="cover"\n                          class="catImage"\n                          height="24"\n                          width="24"\n                          src="','"></yp-image>\n                        '," (",")\n                      </mwc-list-item>\n                    "])),e.id,e.name,t._categoryImageSrc(e),e.name,e.count)}))):z)}},{key:"_getCategoryCount",value:function(t,e){var i=e.find((function(e){return e.category_id==t}));return i?i.count:0}},{key:"_oldCategory",value:function(t){return!t||t.id<804}},{key:"_openDropDown",value:function(){var t=this.$$("#dropDownTrigger");t&&t.click()}},{key:"openFilter",value:function(){window.appGlobals.activity("open","filter")}},{key:"_languageEvent",value:function(t){s(o(g.prototype),"_languageEvent",this).call(this,t),this._updateTitle()}},{key:"searchFor",value:function(t){this.searchingFor=t;var e="/group/"+this.group.id+"/open/"+this.group.name+"/search/"+this.searchingFor;window.appGlobals.activity("change","filter",e),T.redirectTo(e),this.fire("refresh-group")}},{key:"_updateTitle",value:function(){if(this.searchingFor)this.subTitle=this.t("post.searchingFor")+this.searchingFor;else if(this.filterName){var t,e=this.t(this.filterName);t=this.categoryName?this.categoryName:this.t("categories.the_all"),this.t("short_word.in"),this._ifCategories()?this.subTitle=e+" - "+t:this.subTitle=e}}},{key:"_changeFilter",value:(p=l(c.mark((function t(e){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.detail.index,t.next=0===t.t0?3:1===t.t0?5:2===t.t0?7:3===t.t0?9:11;break;case 3:return this.filter="top",t.abrupt("break",11);case 5:return this.filter="newest",t.abrupt("break",11);case 7:return this.filter="most_debated",t.abrupt("break",11);case 9:return this.filter="random",t.abrupt("break",11);case 11:return t.next=13,this.updateComplete;case 13:this._updateAfterFiltering();case 14:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"_changeCategory",value:function(t){var e=this.categoryId,i=t.detail.index;if(this.categoriesWithCount){var n=0==i?-1:this.categoriesWithCount[i-1].id;-1!=n?(this.categoryId=n,this.categoryName=this.categoriesWithCount[i-1].name):(this.categoryId=void 0,this.categoryName=void 0,this.resetSelection()),this.fire("yp-filter-category-change",this.categoryId?this.categoryId:null),this._updateTitle(),e!==this.categoryId&&this._updateAfterFiltering()}else console.error("Trying to change category without one")}},{key:"buildPostsUrlPath",value:function(){var t="/group/"+this.group.id+"/"+this.tabName;return this.filter&&(t+="/posts/"+this.filter),this.categoryId&&(t+="/"+this.categoryId+"/"+this.categoryName),t}},{key:"_updateAfterFiltering",value:function(){var t=this.buildPostsUrlPath();window.appGlobals.activity("change","filter",t),this.fire("refresh-group")}},{key:"_ifCategories",value:function(){return!!this.group&&(this.group.Categories&&this.group.Categories.length>0)}},{key:"resetSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this.$$("#categoryMenu");e&&(this.$$("#categoryMenu").value=t||"")}},{key:"_setupCategories",value:(e=l(c.mark((function t(){var e,i,n,o,s=this;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.categoriesWithCount=void 0,t.next=3,window.serverApi.getCategoriesCount(this.group.id,this.tabName);case 3:(i=t.sent)&&(n=i.categoriesCount,this.allPostCount=i.allPostCount,(o=[]).push({id:-1,name:this.t("categories.the_all"),count:this.allPostCount}),null===(e=this.group.Categories)||void 0===e||e.forEach((function(t){t.count=s._getCategoryCount(t.id,n),t.count>0&&o.push(t)})),o.length>1?(this.categoriesWithCount=o,setTimeout((function(){s.resetSelection(s.categoryId?s.categoryId.toString():"")}))):console.error("Unexpected categories count"));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_updateMainListMenuValue",value:function(){var t=this;this.$$("#mainListMenu")?setTimeout((function(){t.$$("#mainListMenu").value=t.filter,t.$$("#mainListMenu").layout()}),20):console.error("Cant find mainListMenu menu")}},{key:"updated",value:function(t){s(o(g.prototype),"updated",this).call(this,t),t.has("group")&&this.group&&(this.categoriesWithCount=void 0,this.allPostCount=0,this._updateTitle(),this.group.Categories&&this.group.Categories.length>0&&this._setupCategories(),this.resetSelection()),t.has("filter")&&this.filter&&(this.filterName="post."+this.filter,this._updateTitle(),this._updateMainListMenuValue()),t.has("categoryId")&&this.categoryId&&this._updateTitle(),t.has("filter")&&this.filter&&this.fire("yp-filter-changed",this.filter),t.has("searchingFor")&&(this.searchingFor,this.showFilter=!0)}},{key:"chunk",value:function(t,e){return t.reduce((function(t,i,n){return n%e==0?[].concat(u(t),[[i]]):[].concat(u(t.slice(0,-1)),[[].concat(u(t.slice(-1)[0]),[i])])}),[])}},{key:"_categoryItems",value:function(){return this.group.Categories?this.chunk(this.group.Categories,7):[]}},{key:"_categoryImageSrc",value:function(t){return Yt.getImageFormatUrl(t.CategoryIconImages,0)}}],[{key:"styles",get:function(){return[s(o(g),"styles",this),C(E||(E=d(["\n        :host {\n          padding-bottom: 0 !important;\n          margin-bottom: 0 !important;\n        }\n\n        .filterIcon {\n          padding-right: 8px;\n        }\n\n        .filterIconTransform {\n          -moz-transform: scaleY(-1);\n          -o-transform: scaleY(-1);\n          -webkit-transform: scaleY(-1);\n          transform: scaleY(-1);\n          filter: FlipV;\n          -ms-filter: 'FlipV';\n        }\n\n        .dropdown-trigger {\n          margin-bottom: 16px;\n          margin-left: 16px;\n        }\n\n        .clear-search-trigger {\n          width: 55px;\n          height: 55px;\n          margin-bottom: 16px;\n        }\n\n        mwc-list-item {\n          min-height: 32px;\n        }\n\n        .subTitle {\n          font-size: 22px;\n          margin-top: 10px;\n          margin-right: 8px;\n        }\n\n        #filterDropdown {\n          padding-left: 0;\n          margin-left: 0;\n        }\n\n        #dropDownTrigger {\n          background-color: #fff;\n          margin-left: 16px;\n          color: #111;\n        }\n\n        @media (max-width: 600px) {\n          .subTitle {\n            font-size: 17px;\n            padding-top: 0;\n            margin-top: 16px;\n          }\n\n          .dropdown-trigger {\n            padding-left: 0;\n            margin-left: 0;\n            margin-bottom: 0;\n            margin-top: 0;\n          }\n\n          .clear-search-trigger {\n            width: 50px;\n            height: 50px;\n            margin-top: 5px;\n            margin-bottom: 0;\n            margin-top: 0;\n          }\n\n          #dropDownTrigger {\n            margin-left: 0;\n            margin-right: 0;\n          }\n        }\n\n        mwc-select {\n          padding-left: 8px;\n          padding-right: 8px;\n        }\n\n        .filterHeader {\n          margin-top: 16px;\n          padding-bottom: 0;\n          margin-bottom: 0;\n          font-weight: bold;\n          font-size: 18px;\n        }\n\n        .categoriesDropdownMenu {\n          padding-left: 16px;\n          padding-right: 16px;\n        }\n\n        .dropdownIcon {\n          color: #000;\n          margin-right: 8px;\n          margin-left: 8px;\n        }\n\n        .catImage {\n          width: 24px;\n          height: 24px;\n          margin-right: 8px;\n        }\n\n        .filterText {\n          margin-right: 8px;\n        }\n\n        .dropDownContent,\n        #mainListMenu,\n        .categoriesDropdownMenu,\n        .catDropDown {\n          background-color: #fff !important;\n        }\n      "])))]}}]),g}(P),m([f({type:Object})],Zt.prototype,"group",void 0),m([f({type:String})],Zt.prototype,"filterName",void 0),m([f({type:String})],Zt.prototype,"filter",void 0),m([f({type:Number})],Zt.prototype,"categoryId",void 0),m([f({type:String})],Zt.prototype,"categoryName",void 0),m([f({type:String})],Zt.prototype,"subTitle",void 0),m([f({type:String})],Zt.prototype,"searchingFor",void 0),m([f({type:Boolean})],Zt.prototype,"showFilter",void 0),m([f({type:Number})],Zt.prototype,"postsCount",void 0),m([f({type:Number})],Zt.prototype,"allPostCount",void 0),m([f({type:String})],Zt.prototype,"tabName",void 0),m([f({type:Object})],Zt.prototype,"category",void 0),m([f({type:Array})],Zt.prototype,"categoriesWithCount",void 0),Zt=m([S("yp-posts-filter")],Zt),te=function(t){n(l,t);var e=i(l);function l(){var t;return a(this,l),(t=e.apply(this,arguments)).topRadius=!1,t.topLeftRadius=!1,t.headerMode=!1,t.disableMaps=!1,t.mapActivated=!1,t.streetViewActivated=!1,t.tiny=!1,t.staticMapsApiKey="AIzaSyBYy8UvdDD650mz7k1pY0j2hBFQmCPVnxA",t.defaultPostImageEnabled=!1,t.showVideo=!1,t.showAudio=!1,t.portraitVideo=!1,t}return r(l,[{key:"connectedCallback",value:function(){s(o(l.prototype),"connectedCallback",this).call(this),this.headerMode&&(Yt.attachMediaListeners(this),this.addGlobalListener("yp-pause-media-playback",Yt.pauseMediaPlayback.bind(this)))}},{key:"disconnectedCallback",value:function(){s(o(l.prototype),"connectedCallback",this).call(this),this.headerMode&&(Yt.attachMediaListeners(this),this.removeGlobalListener("yp-pause-media-playback",Yt.pauseMediaPlayback.bind(this)))}},{key:"updated",value:function(t){s(o(l.prototype),"updated",this).call(this,t),t.has("post")&&(this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.uploadedDefaultPostImageId?(this.uploadedDefaultPostImageId=this.post.Group.configuration.uploadedDefaultPostImageId,this.defaultImageGroupId=this.post.Group.id,this.defaultPostImageEnabled=!0):(this.defaultPostImageEnabled=!1,this.defaultImageGroupId=void 0,this.uploadedDefaultPostImageId=void 0)),t.has("headerMode")&&this.headerMode&&(this.mapActivated=!0,this.streetViewActivated=!0)}},{key:"render",value:function(){var t,e;return b($||($=d(['\n      <div\n        class="topContainer"\n        top-radius="','"\n        top-left-radius="','">\n        ',"\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n      </div>\n    "])),this.topRadius,this.topLeftRadius,this.isNoneActive?b(N||(N=d(['\n              <yp-image\n                ?header-mode="','"\n                sizing="cover"\n                ?hidden="','"\n                class="main-image pointer"\n                src="https://i.imgur.com/sdsFAoT.png"\n                @click="','"></yp-image>\n\n              ',"\n            "])),this.headerMode,this.defaultPostImageEnabled,this._goToPost,this.activeDefaultImageUrl?b(B||(B=d(['\n                    <yp-image\n                      ?headerMode="','"\n                      alt="','"\n                      sizing="cover"\n                      class="main-image pointer"\n                      src="','"\n                      @click="','"></yp-image>\n                  '])),this.headerMode,I(this.altTag),this.activeDefaultImageUrl,this._goToPost):z):z,this.isCategoryActive?b(O||(O=d(['\n              <div id="categoryImageId" class="layout horizontal center-center">\n                <yp-image\n                  ?header-mode="','"\n                  alt="','"\n                  ?tiny="','"\n                  @click="','"\n                  class="category-icon pointer"\n                  title="','"\n                  sizing="contain"\n                  src="','"></yp-image>\n              </div>\n            '])),this.headerMode,I(this.altTag),this.tiny,this._goToPost,I(null===(t=this.post.Category)||void 0===t?void 0:t.name),this.categoryImagePath):z,this.isCategoryLargeActive?b(H||(H=d(['\n              <yp-image\n                ?header-mode="','"\n                alt="','"\n                large\n                @click="','"\n                class="category-icon pointer"\n                title="','"\n                sizing="cover"\n                src="','"></yp-image>\n            '])),this.headerMode,I(this.altTag),this._goToPost,I(null===(e=this.post.Category)||void 0===e?void 0:e.name),this.categoryImagePath):z,this.isImageActive?b(X||(X=d(['\n              <yp-image\n                .header-mode="','"\n                @click="','"\n                .sizing="','"\n                class="main-image pointer"\n                src="','"></yp-image>\n            '])),this.headerMode,this._goToPost,this.sizingMode,this.postImagePath):z,this.isVideoActive?b(j||(j=d(["\n              ","\n            "])),this.showVideo?b(q||(q=d(['\n                    <video\n                      id="videoPlayer"\n                      ?portrait="','"\n                      data-id="','"\n                      ?header-mode="','"\n                      controls\n                      @click="','"\n                      preload="metadata"\n                      class="pointer"\n                      src="','"\n                      playsinline\n                      poster="','"></video>\n                  '])),this.portraitVideo,I(this.postVideoId),this.headerMode,this._goToPost,I(this.postVideoPath),this.postVideoPosterPath):b(J||(J=d(['\n                    <div\n                      class="layout vertical center-center videoPreviewContainer"\n                      .portrait="','">\n                      <yp-image\n                        id="videoPreviewImage layout-self-center"\n                        .portrait="','"\n                        ?headerMode="','"\n                        @click="','"\n                        sizing="cover"\n                        class="main-image pointer"\n                        src="','"></yp-image>\n                    </div>\n                    <mwc-icon\n                      class="videoCamStatic">videocam</mwc-icon>\n                  '])),this.portraitVideo,this.portraitVideo,this.headerMode,this._goToPost,this.postVideoPosterPath)):z,this.showAudio?b(W||(W=d(['\n              <div class="layout vertical center-center">\n                <audio\n                  id="audioPlayer"\n                  data-id="','"\n                  ?header-mode="','"\n                  controls\n                  preload="metadata"\n                  class="pointer"\n                  src="','"\n                  ?hidden="','"\n                  playsinline></audio>\n              </div>\n            '])),I(this.postAudioId),this.headerMode,I(this.postAudioPath),!this.postAudioPath):z,this.isAudioActive?b(Q||(Q=d(['\n              <div class="layout vertical center-center">\n                <audio\n                  id="audioPlayer"\n                  .data-id="','"\n                  .header-mode="','"\n                  controls\n                  preload="metadata"\n                  class="pointer"\n                  src="','"\n                  ?hidden="','"\n                  playsinline></audio>\n              </div>\n              <div\n                ?hidden="','"\n                class="layout horizontal center-center pointer"\n                @click="','">\n                <mwc-icon class="voiceIcon">keyboard_voice</mwc-icon>\n              </div>\n            '])),this.postAudioId,this.headerMode,I(this.postAudioPath),!this.postAudioPath,this.showAudio,this._goToPost):z,this.disableMaps?z:b(Y||(Y=d(["\n              ","\n              ","\n            "])),this.isStreetViewActive?b(K||(K=d(['\n                    <yp-image\n                      @click="','"\n                      class="main-image pointer"\n                      sizing="cover"\n                      src="https://maps.googleapis.com/maps/api/staticmap?center=',",","&amp;zoom=","&amp;size=432x243&amp;maptype=hybrid&amp;markers=color:red%7Clabel:%7C",",","&amp;key=",'"\n                      ?hidden="','"></yp-image>\n\n                    ',"\n                  "])),this._goToPost,this.latitude,this.longitude,this.zoomLevel,this.latitude,this.longitude,this.staticMapsApiKey,this.streetViewActivated,this.streetViewActivated?b(Z||(Z=d(['\n                          <google-streetview-pano\n                            .position="','"\n                            heading="330"\n                            api-key="AIzaSyDkF_kak8BVZA5zfp5R4xRnrX8HP3hjiL0"\n                            pitch="2"\n                            zoom="0.8"\n                            disable-default-ui=""></google-streetview-pano>\n                        '])),this.mapPosition):z):z,this.isMapActive?b(tt||(tt=d(['\n                    <yp-image\n                      @click="','"\n                      class="main-image pointer"\n                      ?hidden="','"\n                      sizing="cover"\n                      src="https://maps.googleapis.com/maps/api/staticmap?center=',",","&amp;size=432x243&amp;zoom=","&amp;maptype=","&amp;markers=color:red%7Clabel:%7C",",","&amp;key=",'"></yp-image>\n\n                    ',"\n                  "])),this._goToPost,this.mapActivated,this.latitude,this.longitude,this.zoomLevel,this.mapType,this.latitude,this.longitude,this.staticMapsApiKey,this.mapActivated?b(et||(et=d(['\n                          <google-map\n                            additional-map-options="{keyboardShortcuts:false}"\n                            id="coverMediaMap"\n                            class="map"\n                            libraries="places"\n                            fit-to-markers\n                            .zoom="','"\n                            .map-type="','"\n                            api-key="AIzaSyDkF_kak8BVZA5zfp5R4xRnrX8HP3hjiL0">\n                            <google-map-marker\n                              slot="markers"\n                              .latitude="','"\n                              .longitude="','"></google-map-marker>\n                          </google-map>\n                        '])),this.zoomLevel,this.mapType,this.latitude,this.longitude):z):z))}},{key:"sizingMode",get:function(){return this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.useContainImageMode?"contain":"cover"}},{key:"activeDefaultImageUrl",get:function(){return this.defaultPostImageEnabled&&this.defaultImageGroupId&&this.uploadedDefaultPostImageId?"/api/groups/"+this.defaultImageGroupId+"/default_post_image/"+this.uploadedDefaultPostImageId:void 0}},{key:"_goToPost",value:function(){this.post&&this.post.Group.configuration&&this.post.Group.configuration.resourceLibraryLinkMode||(this.post?this.headerMode?T.goToPost(this.post.id):T.goToPost(this.post.id,void 0,void 0,this.post):console.error("No post in post cover media on goToPost"))}},{key:"latitude",get:function(){return this.post.location?this.post.location.latitude:0}},{key:"longitude",get:function(){return this.post.location?this.post.location.longitude:0}},{key:"isNoneActive",get:function(){return!!this._withCoverMediaType(this.post,"none")}},{key:"isCategoryActive",get:function(){return!!(this.post&&this._withCoverMediaType(this.post,"category")&&this.post.id<=11e3&&this._isDomainWithOldCategories())}},{key:"_isDomainWithOldCategories",value:function(){var t=window.location.hostname;return t.indexOf("betrireykjavik.is")>-1||t.indexOf("betraisland.is")>-1||t.indexOf("yrpri.org")>-1}},{key:"isCategoryLargeActive",get:function(){return!(!this.post||!this._withCoverMediaType(this.post,"category")||!(this.post.id>11e3)&&this._isDomainWithOldCategories())}},{key:"isImageActive",get:function(){return!!this._withCoverMediaType(this.post,"image")}},{key:"isVideoActive",get:function(){return!!this._withCoverMediaType(this.post,"video")}},{key:"isAudioActive",get:function(){return!!this._withCoverMediaType(this.post,"audio")}},{key:"isMapActive",get:function(){return!!(this.post&&this.post.location&&this.post.location.latitude&&this._withCoverMediaType(this.post,"map"))}},{key:"isStreetViewActive",get:function(){return!!(this.post&&this.post.location&&this.post.location.latitude&&this._withCoverMediaType(this.post,"streetView"))}},{key:"zoomLevel",get:function(){return this.post.location&&this.post.location.map_zoom?this.post.location.map_zoom:"10"}},{key:"mapType",get:function(){return this.post.location&&this.post.location.mapType&&""!=this.post.location.mapType?this.post.location.mapType:"roadmap"}},{key:"_withCoverMediaType",value:function(t,e){return t?"none"==e?!(t.Category||t.cover_media_type&&"none"!=t.cover_media_type):!("category"!=e||!t.Category||t.cover_media_type&&"none"!=t.cover_media_type)||t&&t.cover_media_type==e:(console.info("No post for "+e),!1)}},{key:"mapPosition",get:function(){return this.post.location?{lat:this.post.location.latitude,lng:this.post.location.longitude}:{lat:0,lng:0}}},{key:"postImagePath",get:function(){return this.post?Yt.getImageFormatUrl(this.post.PostHeaderImages,0):""}},{key:"postVideoPath",get:function(){if(this.post&&this.post.PostVideos){var t=Yt.getVideoURL(this.post.PostVideos);return this.portraitVideo=Yt.isPortraitVideo(this.post.PostVideos),t?(this.postVideoId=this.post.PostVideos[0].id,t):void 0}}},{key:"postAudioPath",get:function(){if(this.post&&this.post.PostAudios){var t=Yt.getAudioURL(this.post.PostAudios);return t?(this.postAudioId=this.post.PostAudios[0].id,t):void 0}}},{key:"postVideoPosterPath",get:function(){if(this.post&&this.post.PostVideos){var t=Yt.getVideoPosterURL(this.post.PostVideos,this.post.PostHeaderImages);return t||void 0}}},{key:"categoryImagePath",get:function(){return this.post&&this.post.Category&&this.post.Category.CategoryIconImages?Yt.getImageFormatUrl(this.post.Category.CategoryIconImages,0):""}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),C(it||(it=d(["\n        :host {\n          display: block;\n        }\n\n        .topContainer {\n          height: 100%;\n        }\n\n        .topContainer[top-radius] > yp-image,\n        #videoPreviewImage {\n          border-top-right-radius: 4px;\n          border-top-left-radius: 4px;\n        }\n\n        video {\n          outline: none !important;\n        }\n\n        .topContainer[top-left-radius] > yp-image,\n        #videoPreviewImage,\n        google-streetview-pano,\n        google-map {\n          border-top-left-radius: 4px;\n        }\n\n        .topContainer[top-left-radius] > video {\n          border-top-left-radius: 4px;\n        }\n\n        google-streetview-pano {\n          width: 100%;\n          height: 100%;\n          margin: 0;\n          padding: 0;\n        }\n\n        google-map {\n          width: 100%;\n          height: 100%;\n          margin: 0;\n          padding: 0;\n        }\n\n        .main-image,\n        video {\n          width: 100%;\n          height: 100%;\n          margin: 0;\n          padding: 0;\n        }\n\n        .mapCanvas {\n          width: 100%;\n          height: 100%;\n        }\n\n        .category-icon {\n          width: 200px;\n          height: 200px;\n          padding-top: 32px;\n        }\n\n        .category-icon[tiny] {\n          width: 100px;\n          height: 100px;\n          padding-top: 24px;\n        }\n\n        .category-icon[large] {\n          width: 100%;\n          height: 100%;\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n\n        @media (max-width: 960px) {\n          .topContainer[top-left-radius] > yp-image {\n            border-top-left-radius: 0;\n          }\n        }\n\n        @media (max-width: 600px) {\n          .category-icon {\n            width: 130px;\n            height: 130px;\n          }\n\n          .category-icon[large] {\n            width: 100%;\n            height: 100%;\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n\n          .main-image[header-mode] {\n            height: 100%;\n          }\n\n          video {\n            height: 100%;\n          }\n        }\n\n        .pointer {\n          cursor: pointer;\n        }\n\n        .pointer[header-mode] {\n          cursor: default;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        .videoCamStatic {\n          width: 32px;\n          height: 32px;\n          color: var(--primary-background-color);\n          margin-top: -68px;\n          margin-left: 8px;\n        }\n\n        .voiceIcon {\n          height: 42px;\n          width: 42px;\n          color: #333;\n          margin-top: 96px;\n        }\n\n        @media (max-width: 600px) {\n          .voiceIcon {\n            height: 42px;\n            width: 42px;\n            color: #333;\n            margin-top: 35px;\n          }\n        }\n\n        audio {\n          margin-top: 16px;\n          margin-bottom: 8px;\n        }\n\n        .playInfo {\n          font-style: italic;\n        }\n\n        @media (max-width: 960px) {\n          .voiceIcon {\n            margin-top: 35px;\n          }\n        }\n\n        @media (max-width: 430px) {\n          .voiceIcon {\n            margin-top: 28px;\n          }\n        }\n\n        video {\n          background-color: #777;\n        }\n\n        #videoPlayer[portrait] {\n          width: 100% !important;\n          height: 100%;\n        }\n\n        .topContainer[portrait] {\n          background-color: #777;\n        }\n\n        #videoPreviewImage[portrait] {\n          width: 40%;\n        }\n\n        .videoPreviewContainer {\n          width: 100%;\n          height: 100%;\n        }\n\n        .videoPreviewContainer[portrait] {\n          background-color: #777;\n        }\n      "])))]}}]),l}(P),m([f({type:Object})],te.prototype,"post",void 0),m([f({type:Boolean})],te.prototype,"topRadius",void 0),m([f({type:Boolean})],te.prototype,"topLeftRadius",void 0),m([f({type:String})],te.prototype,"altTag",void 0),m([f({type:Number})],te.prototype,"postAudioId",void 0),m([f({type:Number})],te.prototype,"postVideoId",void 0),m([f({type:Boolean})],te.prototype,"headerMode",void 0),m([f({type:Boolean})],te.prototype,"disableMaps",void 0),m([f({type:Boolean})],te.prototype,"mapActivated",void 0),m([f({type:Boolean})],te.prototype,"streetViewActivated",void 0),m([f({type:Boolean})],te.prototype,"tiny",void 0),m([f({type:String})],te.prototype,"staticMapsApiKey",void 0),m([f({type:Number})],te.prototype,"uploadedDefaultPostImageId",void 0),m([f({type:Number})],te.prototype,"defaultImageGroupId",void 0),m([f({type:Boolean})],te.prototype,"defaultPostImageEnabled",void 0),m([f({type:Boolean})],te.prototype,"showVideo",void 0),m([f({type:Boolean})],te.prototype,"showAudio",void 0),m([f({type:Boolean})],te.prototype,"portraitVideo",void 0),te=m([S("yp-post-cover-media")],te),t("a",ee=function(){function t(){a(this,t)}return r(t,null,[{key:"number",value:function(t){return t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"}},{key:"removeClass",value:function(t,e){var i="";if(t){for(var n=t.className.split(" "),o=0;o<n.length;o++)n[o]!==e&&(i+=n[o]+" ");t.className=i}else console.error("Trying to remove class from a non exisisting element")}},{key:"truncate",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(e=e||255,t.length<=e)return t;if(i)t=t.substring(0,e);else{var o=t.lastIndexOf(" ",e);-1===o&&(o=e),t=t.substring(0,o)}return t+=null!=n?n:"..."}},{key:"trim",value:function(t){return t.replace(/^\s*|\s*$/g,"")}}]),t}()),ie=function(t){n(h,t);var e,p=i(h);function h(){var t;return a(this,h),(t=p.apply(this,arguments)).endorsementButtons="hearts",t.headerMode=!1,t.forceSmall=!1,t.endorseValue=0,t.allDisabled=!1,t.floating=!1,t.votingDisabled=!1,t.smallerIcons=!1,t.forceShowDebate=!1,t}return r(h,[{key:"connectedCallback",value:function(){s(o(h.prototype),"connectedCallback",this).call(this),this.addGlobalListener("yp-got-endorsements-and-qualities",this._updateEndorsementsFromSignal.bind(this))}},{key:"disconnectedCallback",value:function(){s(o(h.prototype),"disconnectedCallback",this).call(this),this.removeGlobalListener("yp-got-endorsements-and-qualities",this._updateEndorsementsFromSignal.bind(this))}},{key:"firstUpdated",value:function(t){s(o(h.prototype),"firstUpdated",this).call(this,t),this.endorsementButtons&&(this.$$("#actionDown").className+=" default-buttons-color",this.$$("#actionUp").className+=" default-buttons-color")}},{key:"render",value:function(){return b(nt||(nt=d(['\n      <div\n        ?rtl="','"\n        title="','"\n        floating="','"\n        class="action-bar layout horizontal"\n      >\n        <div\n          id="actionUp"\n          ?only-up-vote-showing="','"\n          class="action-up layout horizontal layout start justified"\n        >\n          <mwc-icon-button\n            id="iconUpButton"\n            .smaller-icons="','"\n            ?disabled="','"\n            .title="','"\n            icon="','"\n            class="action-icon up-vote-icon largeButton"\n            @click="','"\n          ></mwc-icon-button>\n          <div\n            ?rtl="','"\n            class="action-text up-text"\n            ?hidden="','"\n          >\n            ','\n          </div>\n        </div>\n\n        <div\n          class="action-debate layout horizontal"\n          ?hidden="','"\n        >\n          <mwc-icon-button\n            ?disabled="','"\n            title="','"\n            icon="chat_bubble_outline"\n            class="action-icon debate-icon mainIcons debateIcon"\n            @click="','"\n          ></mwc-icon-button>\n          <div class="action-text debate-text">\n            ','\n          </div>\n        </div>\n\n        <div\n          id="actionDown"\n          class="action-down layout horizontal layout center justified"\n          ?hidden="','"\n        >\n          <mwc-icon-button\n            smaller-icons="','"\n            ?disabled="','"\n            title="','"\n            icon="','"\n            class="action-icon down-vote-icon mainIcons"\n            @click="','"\n          ></mwc-icon-button>\n          <div\n            class="action-text down-text"\n            ?hidden="','"\n          >\n            ',"\n          </div>\n        </div>\n      </div>\n    "])),this.rtl,I(this.disabledTitle),this.floating,this.onlyUpVoteShowing,this.smallerIcons,this.votingStateDisabled,this.customVoteUpHoverText,I(this.endorseModeIcon(this.endorsementButtons,"up")),this.upVote,this.rtl,this.post.Group.configuration.hideVoteCount,ee.number(this.post.counter_endorsements_up),this.hideDebate,this.allDisabled,this.t("post.debate"),this._goToPostIfNotHeader,ee.number(this.post.counter_points),this.post.Group.configuration.hideDownVoteForPost,this.smallerIcons,this.votingStateDisabled,this.customVoteDownHoverText,I(this.endorseModeIconDown),this.downVote,this.post.Group.configuration.hideVoteCount,ee.number(this.post.counter_endorsements_down))}},{key:"isEndorsed",get:function(){return this.endorseValue>0}},{key:"votingStateDisabled",get:function(){return!!this.allDisabled||!(this.isEndorsed||!this.maxNumberOfGroupVotes||!this.numberOfGroupVotes)&&this.maxNumberOfGroupVotes<=this.numberOfGroupVotes}},{key:"onlyUpVoteShowing",get:function(){return!!(this.post&&this.post.Group&&this.post.Group.configuration)&&(this.post.Group.configuration.hideDownVoteForPost&&this.post.Group.configuration.hideDebateIcon)}},{key:"endorseModeIconUp",get:function(){return this.endorseModeIcon(this.endorsementButtons,"up")}},{key:"endorseModeIconDown",get:function(){return this.endorseModeIcon(this.endorsementButtons,"down")}},{key:"customVoteUpHoverText",get:function(){return this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.customVoteUpHoverText?this.post.Group.configuration.customVoteUpHoverText:this.t("post.up_vote")}},{key:"customVoteDownHoverText",get:function(){return this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.customVoteDownHoverText?this.post.Group.configuration.customVoteDownHoverText:this.t("post.down_vote")}},{key:"_goToPostIfNotHeader",value:function(){this.headerMode||T.goToPost(this.post.id)}},{key:"hideDebate",get:function(){return!this.forceShowDebate&&(!this.wide||this.forceSmall||this.headerMode||this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.hideDebateIcon)}},{key:"updated",value:function(t){s(o(h.prototype),"updated",this).call(this,t),t.has("post")&&this.post&&(ee.removeClass(this.$$("#actionUp"),"hearts-up-selected"),ee.removeClass(this.$$("#actionDown"),"hearts-down-selected"),ee.removeClass(this.$$("#actionUp"),"default-buttons-up-selected"),ee.removeClass(this.$$("#actionDown"),"default-buttons-down-selected"),this.endorseValue=0,this.post.Group.configuration&&null!=this.post.Group.configuration.canVote&&0==this.post.Group.configuration.canVote?(this.votingDisabled=!0,this.allDisabled=!0,this.disabledTitle=this.t("votingDisabled")):(this.votingDisabled=!1,this.allDisabled=!1),this.post.Group.configuration&&null!=this.post.Group.configuration.endorsementButtons?this.endorsementButtons=this.post.Group.configuration.endorsementButtons:this.endorsementButtons="hearts",this.post.Group.configuration&&(this.post.Group.configuration.originalHideVoteCount=this.post.Group.configuration.hideVoteCount,this.post.Group.configuration.hideVoteCountUntilVoteCompleted&&(this.post.Group.configuration.hideVoteCount=!0,this.requestUpdate())),this.post.Group.configuration.maxNumberOfGroupVotes?(this.maxNumberOfGroupVotes=this.post.Group.configuration.maxNumberOfGroupVotes,this.numberOfGroupVotes=window.appUser.groupCurrentVoteCountIndex[this.post.Group.id]):(this.maxNumberOfGroupVotes=void 0,this.numberOfGroupVotes=void 0),this._updateEndorsements())}},{key:"_updateEndorsementsFromSignal",value:function(t){this.post&&this._updateEndorsements(t)}},{key:"_updateEndorsements",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(window.appUser&&window.appUser.loggedIn()&&window.appUser.user&&window.appUser.user.Endorsements){var e=window.appUser.endorsementPostsIndex[this.post.id];e?this._setEndorsement(e.value):this._setEndorsement(0),t&&t.detail&&t.detail.maxGroupId===this.post.Group.id&&(this.numberOfGroupVotes=t.detail.groupCurrentVoteCount)}}},{key:"endorseModeIcon",value:function(t,e){return this.smallerIcons="hearts"!=t&&"hats"!=t,"thumbs"==t&&"up"==e?"thumb_up":"thumbs"==t&&"down"==e?"thumb_down":"hearts"==t&&"up"==e?"favorite_border":"hearts"==t&&"down"==e?"do_not_disturb":"hats"==t&&"up"==e?"keyboard_arrow_up":"hats"==t&&"down"==e?"keyboard_arrow_down":"arrows"==t&&"up"==e?"arrow_upward":"arrows"==t&&"down"==e?"arrow_downward":void 0}},{key:"_setEndorsement",value:function(t){this.endorseValue=t,0!==t&&this.post.Group.configuration&&this.post.Group.configuration.hideVoteCount&&!this.post.Group.configuration.originalHideVoteCount&&(this.post.Group.configuration.hideVoteCount=!1),"hearts"==this.endorsementButtons?t>0?(this.$$("#actionUp").className+=" hearts-up-selected",ee.removeClass(this.$$("#actionDown"),"hearts-down-selected"),this.$$("#iconUpButton").icon="favorite"):t<0?(this.$$("#actionDown").className+=" hearts-down-selected",ee.removeClass(this.$$("#actionUp"),"hearts-up-selected"),this.$$("#iconUpButton").icon="favoriate_border"):(ee.removeClass(this.$$("#actionUp"),"hearts-up-selected"),ee.removeClass(this.$$("#actionDown"),"hearts-down-selected"),this.$$("#iconUpButton").icon="favorite_border"):t>0?(this.$$("#actionUp").className+=" default-buttons-up-selected",ee.removeClass(this.$$("#actionDown"),"default-buttons-down-selected")):t<0?(this.$$("#actionDown").className+=" default-buttons-down-selected",ee.removeClass(this.$$("#actionUp"),"default-buttons-up-selected")):(ee.removeClass(this.$$("#actionUp"),"default-buttons-up-selected"),ee.removeClass(this.$$("#actionDown"),"default-buttons-down-selected"))}},{key:"_enableVoting",value:function(){this.votingDisabled||(this.allDisabled=!1)}},{key:"generateEndorsementFromLogin",value:function(t){window.appUser.endorsementPostsIndex[this.post.id]||this.generateEndorsement(t)}},{key:"generateEndorsement",value:(e=l(c.mark((function t(e){var i,n,o,s;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==window.appUser.loggedIn()){t.next=8;break}return i=this.endorseValue===e?"DELETE":"POST",t.next=4,window.serverApi.endorsePost(this.post.id,i,{post_id:this.post.id,value:e});case 4:(n=t.sent)&&(this._enableVoting(),o=n.endorsement,s=n.oldEndorsementValue,window.appUser.updateEndorsementForPost(this.post.id,o,this.post.Group),this._setEndorsement(o.value),s&&(s>0?this.post.counter_endorsements_up=this.post.counter_endorsements_up-1:s<0&&(this.post.counter_endorsements_down=this.post.counter_endorsements_down-1)),o.value>0?this.post.counter_endorsements_up=this.post.counter_endorsements_up+1:o.value<0&&(this.post.counter_endorsements_down=this.post.counter_endorsements_down+1)),t.next=10;break;case 8:this._enableVoting(),window.appUser.loginForEndorse(this,{value:e});case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"upVote",value:function(){this.allDisabled=!0,this.generateEndorsement(1),window.appGlobals.activity("clicked","endorse_up",this.post?this.post.id:-1),this._setVoteHidingStatus()}},{key:"downVote",value:function(){this.allDisabled=!0,this.generateEndorsement(-1),window.appGlobals.activity("clicked","endorse_down",this.post?this.post.id:-1),this._setVoteHidingStatus()}},{key:"_setVoteHidingStatus",value:function(){this.post.Group.configuration&&this.post.Group.configuration.hideVoteCountUntilVoteCompleted&&!this.post.Group.configuration.originalHideVoteCount&&(this.post.Group.configuration.hideVoteCount=!1,this.requestUpdate())}}],[{key:"styles",get:function(){return[s(o(h),"styles",this),C(ot||(ot=d(["\n        :host {\n          display: block;\n        }\n\n        .action-bar {\n          position: absolute;\n          background-color: #fff;\n        }\n\n        .action-bar[floating] {\n          position: relative;\n          background-color: #fff;\n        }\n\n        .action-bar-small {\n          margin-top: 8px;\n          position: absolute;\n          width: 100%;\n          bottom: -32px;\n          vertical-align: bottom !important;\n        }\n\n        .action-text {\n          font-size: 16px;\n          text-align: left;\n          vertical-align: bottom;\n          padding-top: 8px;\n          margin-top: 4px;\n        }\n\n        .action-icon {\n        }\n\n        .action-up {\n          color: var(--primary-up-color-lighter, rgba(0, 153, 0, 0.55));\n        }\n\n        .action-down {\n          color: var(--primary-down-color-lighter, rgba(153, 0, 0, 0.55));\n        }\n\n        .default-buttons-color {\n          color: var(--default-endorsement-buttons-color, #656565);\n        }\n\n        .default-buttons-up-selected {\n          color: var(--accent-color, rgba(0, 0, 0, 1));\n        }\n\n        .default-buttons-down-selected {\n          color: var(--accent-color, rgba(0, 0, 0, 1));\n        }\n\n        .hearts-up-selected {\n          color: var(--primary-hearts-color-up, rgba(168, 0, 0, 0.72));\n        }\n\n        .hearts-down-selected {\n          color: var(--primary-hearts-color-up, rgba(168, 0, 0, 0.72));\n        }\n\n        .action-debate {\n          color: #757575;\n        }\n\n        .debate-text {\n          padding-top: 10px;\n          padding-right: 6px;\n          color: #757575;\n        }\n\n        .down-text {\n          padding-right: 0px;\n          padding-top: 10px;\n        }\n\n        .up-text {\n          padding-top: 10px;\n          margin-right: 8px;\n        }\n\n        .up-text[rtl] {\n          margin-right: -8px;\n        }\n\n        .down-vote-icon {\n          margin-right: 0px;\n        }\n\n        mwc-icon-button.mainIcons {\n          width: 48px;\n          height: 48px;\n        }\n\n        mwc-icon-button.debateIcon {\n          width: 46px;\n          height: 46px;\n          margin-top: 2px;\n        }\n\n        mwc-icon-button[smaller-icons] {\n          height: 48px;\n          width: 48px;\n        }\n\n        .debate-icon {\n          color: #757575;\n        }\n\n        .up-vote-icon {\n          margin-left: 8px;\n        }\n\n        @media (max-width: 320px) {\n          :host {\n            width: 250px;\n          }\n        }\n\n        .shareButtonContainer {\n          position: absolute;\n          bottom: 55px;\n          right: -32px;\n          padding: 0;\n          margin: 0;\n          margin-bottom: 8px;\n        }\n\n        .shareButton {\n          padding: 2px;\n        }\n\n        .shareShare {\n          padding: 0;\n          margin: 0;\n          background-color: #fff;\n        }\n\n        @media screen and (-ms-high-contrast: active),\n          (-ms-high-contrast: none) {\n          .action-debate {\n            display: none;\n          }\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        div[rtl] {\n          direction: rtl;\n        }\n\n        action-up[only-up-vote-showing] {\n          margin-right: -16px;\n        }\n      "])))]}}]),h}(P),m([f({type:Object})],ie.prototype,"post",void 0),m([f({type:String})],ie.prototype,"endorsementButtons",void 0),m([f({type:Boolean})],ie.prototype,"headerMode",void 0),m([f({type:Boolean})],ie.prototype,"forceSmall",void 0),m([f({type:Number})],ie.prototype,"endorseValue",void 0),m([f({type:Boolean})],ie.prototype,"allDisabled",void 0),m([f({type:String})],ie.prototype,"disabledTitle",void 0),m([f({type:Boolean})],ie.prototype,"floating",void 0),m([f({type:Boolean})],ie.prototype,"votingDisabled",void 0),m([f({type:Boolean})],ie.prototype,"smallerIcons",void 0),m([f({type:Number})],ie.prototype,"maxNumberOfGroupVotes",void 0),m([f({type:Number})],ie.prototype,"numberOfGroupVotes",void 0),m([f({type:Boolean})],ie.prototype,"forceShowDebate",void 0),ie=m([S("yp-post-actions")],ie),ne=function(t){n(l,t);var e=i(l);function l(){var t;return a(this,l),(t=e.apply(this,arguments)).autoTranslate=!1,t}return r(l,[{key:"render",value:function(){var t,e=this;return b(st||(st=d(['\n      <div class="tagContainer wrap">\n        ','\n      </div>\n\n      <yp-magic-text\n        id="postTagsTranslations"\n        hidden\n        content-id="','"\n        text-only\n        content="','"\n        content-language="','"\n        @new-translation="','"\n        text-type="postTags"\n      >\n      </yp-magic-text>\n    '])),this.postTags.map((function(t,i){return b(rt||(rt=d(['\n            <span class="tagItem">','</span\n            ><span\n              class="middleDot"\n              ?hidden="','"\n              >&#9679;</span\n            >\n          '])),e._trimmedItem(t),e.computeSpanHidden(e.postTags,i))})),this.post.id,I(null===(t=this.post.public_data)||void 0===t?void 0:t.tags),I(this.post.language),this._newTranslation)}},{key:"_trimmedItem",value:function(t){return t?t.trim():""}},{key:"_autoTranslateEvent",value:function(t){this.autoTranslate=t.detail}},{key:"computeSpanHidden",value:function(t,e){return t.length-1===e}},{key:"_newTranslation",value:function(){var t=this;setTimeout((function(){var e=t.$$("#postTagsTranslations");e&&e.finalContent&&(t.translatedTags=e.finalContent)}))}},{key:"postTags",get:function(){return this.translatedTags&&this.autoTranslate?this.translatedTags.split(","):this.post&&this.post.public_data&&this.post.public_data.tags?this.post.public_data.tags.split(","):[]}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),A,C(at||(at=d(["\n        .tagContainer {\n          max-width: 480px;\n          font-size: 14px;\n          margin-left: 8px;\n          vertical-align: middle;\n          padding-left: 16px;\n          color: var(--app-tags-text-color, #111) !important;\n          font-weight: var(--app-tags-font-weight, 500);\n        }\n\n        .middleDot {\n          padding-left: 2px;\n          padding-right: 2px;\n          vertical-align: middle;\n          color: var(--app-tags-color, #656565);\n        }\n\n        .tagItem {\n          vertical-align: middle;\n        }\n\n        @media (max-width: 800px) {\n          .middleDot {\n            font-size: 14px;\n            margin-bottom: 8px;\n          }\n\n          .tagContainer {\n            font-size: 17px;\n            padding-left: 16px;\n            padding-right: 16px;\n            padding-bottom: 16px;\n          }\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      "])))]}}]),l}(P),m([f({type:Object})],ne.prototype,"post",void 0),m([f({type:String})],ne.prototype,"translatedTags",void 0),m([f({type:Boolean})],ne.prototype,"autoTranslate",void 0),ne=m([S("yp-post-tags")],ne),oe=function(t){n(l,t);var e=i(l);function l(){var t;return a(this,l),(t=e.apply(this,arguments)).mini=!1,t.isAudioCover=!1,t}return r(l,[{key:"renderDescription",value:function(){var t;return b(dt||(dt=d(["\n      ","\n    "])),(null===(t=this.post.public_data)||void 0===t?void 0:t.structuredAnswersJson)?b(ct||(ct=d(['\n            <yp-magic-text\n              id="description"\n              textType="postContent"\n              .contentLanguage="','"\n              ?hidden="','"\n              .content="','"\n              .contentId="','"\n              class="description"\n              truncate="120"\n            >\n            </yp-magic-text>\n          '])),this.post.language,this.hideDescription,this.structuredAnswersFormatted,this.post.id):b(lt||(lt=d(['\n            <yp-magic-text\n              class="description layout horizontal"\n              ?hasCustomRatings="','"\n              ?hidden="','"\n              textType="postContent"\n              .contentLanguage="','"\n              text-only\n              .content="','"\n              .contentId="','"\n              truncate="220"\n            >\n            </yp-magic-text>\n          '])),this.post.Group.configuration.customRatings,this.hideDescription,this.post.language,this.post.description,this.post.id))}},{key:"renderTags",value:function(){return b(pt||(pt=d([' <yp-post-tags .post="','"></yp-post-tags> '])),this.post)}},{key:"render",value:function(){var t,e;return this.post?b(ht||(ht=d(['\n          <div class="layout vertical center-center">\n            <div\n              ?mini="','"\n              .hide-post-cover="','"\n              .hide-description="','"\n              ?hide-actions="','"\n              audio-cover="','"\n              class="card postCard layout vertical shadow-elevation-2dp shadow-transition"\n              animated\n            >\n              <div class="layout vertical">\n                <a\n                  href="','"\n                  @click="','"\n                  id="mainArea"\n                >\n                  <yp-post-cover-media\n                    ?mini="','"\n                    top-radius\n                    ?audioCover="','"\n                    .altTag="','"\n                    .post="','"\n                    ?hidden="','"\n                  ></yp-post-cover-media>\n                  <div class="postNameContainer">\n                    <div\n                      class="post-name"\n                      ?mini="','"\n                      id="postName"\n                      ?largeFont="','"\n                    >\n                      <yp-magic-text\n                        id="postNameMagicText"\n                        textType="postName"\n                        ?largeFont="','"\n                        .contentLanguage="','"\n                        text-only\n                        .content="','"\n                        .contentId="','"\n                      >\n                      </yp-magic-text>\n                    </div>\n                  </div>\n                  ','\n                </a>\n                <div\n                  ?hidden="','"\n                  @click="','"\n                >\n                  ',"\n                </div>\n              </div>\n            </div>\n          </div>\n        "])),this.mini,this.post.Group.configuration.hidePostCover,this.post.Group.configuration.hidePostDescription,this.post.Group.configuration.hidePostActionsInGrid,this.isAudioCover,I(this._getPostLink(this.post)),this.goToPostIfNotHeader,this.mini,this.isAudioCover,this.post.name,this.post,this.post.Group.configuration.hidePostCover,this.mini,this.largeFont,this.largeFont,this.post.language,this.post.name,this.post.id,(null===(t=this.post.Group.configuration)||void 0===t?void 0:t.usePostTagsForPostCards)?this.renderTags():this.renderDescription(),this.post.Group.configuration.hidePostActionsInGrid,this._onBottomClick,this.mini?z:b(ut||(ut=d(['\n                        <div class="layout horizontal">\n                          ',"\n                          ","\n                        </div>\n                      "])),(null===(e=this.post.Group.configuration)||void 0===e?void 0:e.hideSharing)?z:b(gt||(gt=d(['\n                        <div class="share">\n                          <mwc-icon-button\n                            icon="share" .label="','"\n                            @click="','"></mwc-icon-button>\n                          </mwc-icon-button>\n                        </div>\n\n                        '])),this.t("post.shareInfo"),this._shareTap),this.post.Group.configuration.customRatings?b(mt||(mt=d(['\n                                <yp-post-ratings-info\n                                  class="customRatings"\n                                  .post="','"\n                                ></yp-post-ratings-info>\n                              '])),this.post):b(vt||(vt=d(['\n                                <yp-post-actions\n                                  class="postActions"\n                                  .post="','"\n                                  .forceShowDebate="','"\n                                  ?hidden="','"\n                                >\n                                </yp-post-actions>\n                              '])),this.post,this.post.Group.configuration.forceShowDebateCountOnPost,this.mini))):z}},{key:"_sharedContent",value:function(t){var e=t.detail;window.appGlobals.activity("postShared",e.social,this.post?this.post.id:-1)}},{key:"_fullPostUrl",get:function(){return encodeURIComponent("https://"+window.location.host+"/post/"+this.post.id)}},{key:"structuredAnswersFormatted",get:function(){if(this.post&&this.post.public_data&&this.post.public_data.structuredAnswersJson&&this.post.Group.configuration&&this.post.Group.configuration.structuredQuestionsJson){var t={},e="";this.post.Group.configuration.structuredQuestionsJson.forEach((function(e){e.uniqueId&&(t[e.uniqueId]=e)}));for(var i=0;i<this.post.public_data.structuredAnswersJson.length;i++){var n=this.post.public_data.structuredAnswersJson[i];if(n&&n.value){var o=t[n.uniqueId];if(o&&(e+=o.text+": ",e+=n.value+" "),e.length>120)break}}return e}return""}},{key:"_onBottomClick",value:function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"clickOnA",value:function(){var t;null===(t=this.$$("#mainArea"))||void 0===t||t.click()}},{key:"_getPostLink",value:function(t){if(t)return t.Group.configuration&&t.Group.configuration.disablePostPageLink?"#":t.Group.configuration&&t.Group.configuration.resourceLibraryLinkMode?t.description.trim():"/post/"+t.id;console.warn("Trying to get empty post link")}},{key:"_shareTap",value:function(t){var e=this;window.appGlobals.activity("postShareCardOpen",t.detail.brand,this.post?this.post.id:-1),window.appDialogs.getDialogAsync("shareDialog",(function(t){t.open(e._fullPostUrl,e.t("post.shareInfo"),e._sharedContent)}))}},{key:"hideDescription",get:function(){return this.mini||this.post&&this.post.Group.configuration&&this.post.Group.configuration.hidePostDescription}},{key:"goToPostIfNotHeader",value:function(t){t.preventDefault(),this.post.Group.configuration&&this.post.Group.configuration.disablePostPageLink?console.log("goToPostDisabled"):this.post.Group.configuration&&this.post.Group.configuration.resourceLibraryLinkMode||T.goToPost(this.post.id),this.post&&!this.mini&&(window.appGlobals.cache.cachedPostItem=this.post)}},{key:"updated",value:function(t){s(o(l.prototype),"updated",this).call(this,t),t.has("post")&&this.post&&("audio"===this.post.cover_media_type?this.isAudioCover=!0:this.isAudioCover=!1)}},{key:"updateDescriptionIfEmpty",value:function(t){this.post.description&&""!=this.post.description||(this.post.description=t)}},{key:"_refresh",value:function(){var t=this;window.appDialogs.getDialogAsync("postEdit",(function(e){e.selected=0,t.fire("refresh")}))}},{key:"_openReport",value:function(){var t=this;window.appGlobals.activity("open","post.report"),window.appDialogs.getDialogAsync("apiActionDialog",(function(e){e.setup("/api/posts/"+t.post.id+"/report",t.t("reportConfirmation"),t._onReport.bind(t),t.t("post.report"),"PUT"),e.open()}))}},{key:"_onReport",value:function(){window.appGlobals.notifyUserViaToast(this.t("post.report")+": "+this.post.name)}}],[{key:"propersties",get:function(){return{post:{type:Object,observer:"_postChanged"}}}},{key:"styles",get:function(){return[s(o(l),"styles",this),A,C(ft||(ft=d(["\n        .post-name {\n          margin: 0;\n          padding: 16px;\n          padding-top: 20px;\n          padding-bottom: 14px;\n          cursor: pointer;\n          vertical-align: middle !important;\n          font-size: 20px;\n          background-color: #fff;\n          color: #000;\n          font-weight: 500;\n        }\n\n        .post-name[largefont] {\n          font-size: 19px;\n        }\n\n        .postCardCursor {\n          cursor: pointer;\n        }\n\n        .postCard {\n          background-color: #fff;\n          width: 420px;\n        }\n\n        :host {\n          display: block;\n        }\n\n        .postCard {\n          width: 416px;\n          border-radius: 4px;\n        }\n\n        .postCard[hide-post-cover] {\n          height: 190px;\n        }\n\n        .postCard[hide-post-cover][hide-actions] {\n          height: 165px;\n        }\n\n        .postCard[hide-post-cover][hide-description] {\n          height: 140px;\n        }\n\n        .postCard[hide-description] {\n          height: 372px;\n        }\n\n        .postCard[hide-description][hide-actions] {\n          height: 331px;\n        }\n\n        .postCard[hide-description][hide-post-cover][hide-actions] {\n          height: 110px;\n        }\n\n        .postCard[hide-actions] {\n          height: 402px;\n        }\n\n        .postCard[mini] {\n          width: 210px;\n          height: 100%;\n          margin: 0;\n          padding-top: 0;\n          padding-bottom: 0;\n        }\n\n        yp-post-cover-media {\n          width: 416px;\n          height: 234px;\n        }\n\n        yp-post-cover-media[mini] {\n          width: 210px;\n          height: 118px;\n          min-height: 118px;\n        }\n\n        .post-name[mini] {\n          padding: 16px;\n        }\n\n        .description {\n          font-size: 17px;\n          padding: 16px;\n          padding-top: 0;\n          cursor: pointer;\n          color: #555;\n        }\n\n        .description[widetext] {\n          font-size: 16px;\n          line-height: 1.3;\n        }\n\n        .description[largefont] {\n          font-size: 15px;\n        }\n\n        .postActions {\n        }\n\n        .shareIcon {\n          position: absolute;\n          left: 8px;\n          bottom: 2px;\n          text-align: right;\n          width: 48px;\n          height: 48px;\n        }\n\n        .customRatings {\n          position: absolute;\n          bottom: 10px;\n          right: 6px;\n        }\n\n        :host {\n          width: 100%;\n        }\n\n        @media (max-width: 960px) {\n          .customRatings {\n            bottom: 12px;\n          }\n\n          :host {\n            width: 100%;\n            max-width: 423px;\n          }\n\n          .description[has-custom-ratings] {\n            padding-bottom: 28px;\n          }\n\n          .postCard {\n            margin-left: 0;\n            margin-right: 0;\n            padding-left: 0;\n            padding-right: 0;\n            width: 100%;\n            height: 100%;\n          }\n\n          .postCard[mini] {\n            width: 210px;\n            height: 100%;\n          }\n\n          .card {\n            margin-left: 0;\n            margin-right: 0;\n            padding-left: 0;\n            padding-right: 0;\n            width: 100%;\n            height: 100%;\n          }\n\n          .card[mini] {\n            width: 210px;\n            height: 100%;\n          }\n\n          yp-post-cover-media {\n            width: 100%;\n            height: 230px;\n          }\n\n          yp-post-cover-media[mini] {\n            width: 210px;\n            height: 118px;\n            min-height: 118px;\n          }\n\n          .card {\n            height: 100%;\n            padding-bottom: 48px;\n          }\n\n          .postCard {\n            height: 100% !important;\n          }\n\n          yp-post-cover-media[audio-cover] {\n            width: 100%;\n            height: 100px;\n          }\n        }\n\n        @media (max-width: 420px) {\n          yp-post-cover-media {\n            height: 225px;\n          }\n          yp-post-cover-media[audio-cover] {\n            height: 100px;\n          }\n        }\n\n        @media (max-width: 375px) {\n          yp-post-cover-media {\n            height: 207px;\n          }\n          yp-post-cover-media[audio-cover] {\n            height: 100px;\n          }\n        }\n\n        @media (max-width: 360px) {\n          yp-post-cover-media {\n            height: 200px;\n          }\n          yp-post-cover-media[audio-cover] {\n            height: 90px;\n          }\n        }\n\n        @media (max-width: 320px) {\n          yp-post-cover-media {\n            height: 180px;\n          }\n          yp-post-cover-media[audio-cover] {\n            height: 90px;\n          }\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        a {\n          text-decoration: none;\n        }\n\n        .share[mini] {\n          display: none;\n        }\n      "])))]}}]),l}(P),m([f({type:String})],oe.prototype,"selectedMenuItem",void 0),m([f({type:Boolean})],oe.prototype,"mini",void 0),m([f({type:Boolean})],oe.prototype,"isAudioCover",void 0),m([f({type:Object})],oe.prototype,"post",void 0),oe=m([S("yp-post-card")],oe),se=function(t){n(m,t);var e,p,h,u,g=i(m);function m(){var t;return a(this,m),(t=g.apply(this,arguments)).filter="newest",t.statusFilter="open",t.noPosts=!1,t.showSearchIcon=!1,t.grid=!0,t.moreToLoad=!1,t.moreFromScrollTriggerActive=!1,t.skipIronListWidth=!1,t}return r(m,[{key:"_searchKey",value:function(t){13===t.keyCode&&this._search(),this.showSearchIcon=!0}},{key:"render",value:function(){return b(yt||(yt=d(['\n      <div class="layout vertical center-center topMost">\n        ','\n        <div\n          class="searchContainer layout horizontal center-center wrap"\n          ?hidden="','"\n        >\n          <div class="layout horizontal center-center">\n            <yp-posts-filter\n              @click="','"\n              .subTitle="','"\n              class="filter"\n              id="postsFilter"\n              .tabName="','"\n              @refresh-group="','"\n              .group="','"\n              .filter="','"\n              .statusFilter="','"\n              .searchingFor="','"\n              .categoryId="','"\n              .postsCount="','"\n            >\n            </yp-posts-filter>\n          </div>\n          <div class="layout horizontal center-center">\n            ','\n            <mwc-textfield\n              id="searchInput"\n              @keydown="','"\n              .label="','"\n              .value="','"\n              class="searchBox"\n            >\n            </mwc-textfield>\n            <mwc-icon-button\n              .label="','"\n              icon="search"\n              @click="','"\n              ?hidden="','"\n            ></mwc-icon-button>\n          </div>\n        </div>\n        ',"\n      </div>\n    "])),this.noPosts?b(_t||(_t=d(['\n              <div class="layout horiztonal center-center">\n                <div\n                  class="noIdeas layout horizontal center-center shadow-elevation-6dp shadow-transition"\n                  ?hidden="','"\n                >\n                  <div class="noIdeasText">',"</div>\n                </div>\n              </div>\n            "])),this.group.configuration.allPostsBlockedByDefault,this.t("noIdeasHere")):z,this.group.configuration.hidePostFilterAndSearch||this.noPosts,this._tapOnFilter,this.subTitle?this.subTitle:"",this.statusFilter,this.refreshGroupFromFilter,this.group,this.filter,this.statusFilter,this.searchingFor,this.categoryId,this.postsCount,this.searchingFor?b(wt||(wt=d(['\n                  <mwc-icon-button\n                    aria-label="','"\n                    icon="clear"\n                    @click="','"\n                    class="clear-search-trigger"\n                  ></mwc-icon-button>\n                '])),this.t("clearSearchInput"),this._clearSearch):z,this._searchKey,this.t("searchFor"),this.searchingFor?this.searchingFor:"",this.t("startSearch"),this._search,!this.showSearchIcon,this.posts?b(bt||(bt=d(['\n              <lit-virtualizer\n                id="list"\n                .items=','\n                .layout="','"\n                .scrollTarget="','"\n                .renderItem=',"\n                @rangeChanged=","\n              ></lit-virtualizer>\n            "])),this.posts,this.grid?{type:Qt,itemSize:{width:"424px",height:"435px"},flex:{preserve:"aspect-ratio"},justify:"space-around",padding:"0"}:Wt,window,this.renderPostItem.bind(this),this.scrollEvent):z)}},{key:"renderPostItem",value:function(t,e){var i=void 0!==e?e+1:0;return b(xt||(xt=d(['\n        <yp-post-card\n          aria-label="','"\n          ?is-last-item="','"\n          @keypress="','"\n          @click="','"\n          tabindex="','"\n          id="postCard','"\n          class="csard"\n          .post="','"\n        >\n        </yp-post-card>\n      '])),t.name,this._isLastItem(e),this._keypress.bind(this),this._selectedItemChanged.bind(this),i,t.id,t)}},{key:"desktopListFormat",get:function(){return this.wide&&null!=this.group&&null!=this.posts}},{key:"wideNotListFormat",get:function(){return this.wide&&!this.desktopListFormat&&null!=this.group&&null!=this.posts}},{key:"_isLastItem",value:function(t){return this.posts&&t>=this.posts.length-1}},{key:"_keypress",value:function(t){13==t.keyCode&&this._selectedItemChanged(t)}},{key:"_categoryChanged",value:function(t){t.detail?this.categoryId=t.detail:this.categoryId=void 0}},{key:"_filterChanged",value:function(t){this.filter=t.detail}},{key:"firstUpdated",value:function(t){s(o(m.prototype),"firstUpdated",this).call(this,t)}},{key:"_clearSearch",value:function(){this.searchingFor=void 0,this.filter="newest",this.$$("#postsFilter")._updateAfterFiltering()}},{key:"scrollEvent",value:function(t){this.posts&&!this.moreFromScrollTriggerActive&&-1!=t.last&&t.last<this.posts.length&&t.last+5>=this.posts.length&&(this.moreFromScrollTriggerActive=!0,this._loadMoreData())}},{key:"connectedCallback",value:(u=l(c.mark((function t(){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s(o(m.prototype),"connectedCallback",this).call(this),this.addListener("yp-filter-category-change",this._categoryChanged),this.addListener("yp-filter-changed",this._filterChanged),this.addListener("refresh",this._refreshPost),this.posts&&(void 0!==window.appGlobals.cache.cachedPostItem&&(this.scrollToPost(window.appGlobals.cache.cachedPostItem),window.appGlobals.cache.cachedPostItem=void 0),window.appGlobals.groupLoadNewPost&&(window.appGlobals.groupLoadNewPost=!1,this.refreshGroupFromFilter()));case 5:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"disconnectedCallback",value:function(){s(o(m.prototype),"disconnectedCallback",this).call(this),this.removeListener("yp-filter-category-change",this._categoryChanged),this.removeListener("yp-filter-changed",this._filterChanged),this.removeListener("refresh",this._refreshPost)}},{key:"_selectedItemChanged",value:function(t){t.target.clickOnA()}},{key:"_refreshPost",value:(h=l(c.mark((function t(e){var i,n,o;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.detail.id)){t.next=19;break}return t.next=4,window.serverApi.getPost(i);case 4:if(!(n=t.sent)||!this.posts){t.next=19;break}o=0;case 7:if(!(o<this.posts.length)){t.next=19;break}if(this.posts[o].id!=n.id){t.next=16;break}return this.posts[o]=n,window.appGlobals.cache.updatePostInCache(n),this.requestUpdate,t.next=14,this.updateComplete;case 14:return setTimeout((function(){})),t.abrupt("break",19);case 16:o++,t.next=7;break;case 19:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"_getPostLink",value:function(t){if(t)return t.Group&&t.Group.configuration&&t.Group.configuration.disablePostPageLink?"#":t.Group&&t.Group.configuration&&t.Group.configuration.resourceLibraryLinkMode?t.description.trim():"/post/"+t.id;console.warn("Trying to get empty post link")}},{key:"scrollOffset",get:function(){var t=this.$$("ironList");if(t){var e=t.offsetTop;return e-=75,t.offsetTop>0&&e>0?(console.info("Post list scroll offset: "+e),e):(e=this.wide?550:700,this.group&&this.group.configuration&&(this.group.configuration.hideAllTabs&&(e-=60),this.group.configuration.hideNewPost&&(e-=100),this.group.configuration.hidePostFilterAndSearch&&(e-=100)),console.info("Post list (manual) scroll offset: "+e),e)}return console.warn("No list for scroll offset"),null}},{key:"_tapOnFilter",value:function(){window.appGlobals.activity("click","filter")}},{key:"_search",value:function(){window.appGlobals.activity("click","search"),this.searchingFor=this.$$("#searchInput").value,this.searchingFor&&""!=this.searchingFor&&this.refreshGroupFromFilter()}},{key:"buildPostsUrlPath",value:function(){return this.$$("#postsFilter").buildPostsUrlPath()}},{key:"scrollToPost",value:(p=l(c.mark((function t(e){var i;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!this.posts){t.next=13;break}console.info("Scrolling to post: "+e.id),i=0;case 3:if(!(i<this.posts.length)){t.next=10;break}if(this.posts[i]!=e){t.next=7;break}return this.$$("#list").scrollToIndex(i),t.abrupt("break",10);case 7:i++,t.next=3;break;case 10:this.fireGlobal("yp-refresh-activities-scroll-threshold"),t.next=14;break;case 13:console.error("No post id on goToPostId");case 14:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"updated",value:function(t){if(s(o(m.prototype),"updated",this).call(this,t),t.has("statusFilter")&&this.group&&this.statusFilter){this.randomSeed=Math.random(),this.posts=void 0,this.noPosts=!1,this.group&&(this.moreToLoad=!0,window.appGlobals.originalQueryParameters&&window.appGlobals.originalQueryParameters.categoryId?(this.categoryId=window.appGlobals.originalQueryParameters.categoryId,window.appGlobals.originalQueryParameters.categoryId=void 0):this.categoryId=void 0,this.group.configuration&&this.group.configuration.forcePostSortMethodAs&&["oldest","newest","top","most_debated","random","alphabetical"].indexOf(this.group.configuration.forcePostSortMethodAs)>-1?this.filter=this.group.configuration.forcePostSortMethodAs:this.group.configuration&&null!=this.group.configuration.canAddNewPosts?!0===this.group.configuration.canAddNewPosts?this.filter="newest":!1===this.group.configuration.canAddNewPosts&&!1===this.group.configuration.canVote?this.filter="top":this.filter="random":this.filter||(this.filter="newest"),console.info("LOADMORE FOR CONTAINER"),this._loadMoreData())}else this.group&&t.has("filter")&&this.filter||this.group&&t.has("categoryId")&&this.categoryId&&this._loadMoreData();t.has("searchingFor")&&(this.searchingFor&&""!=this.searchingFor?(this.moreToLoad=!0,this.showSearchIcon=!0):this.showSearchIcon=!1)}},{key:"refreshGroupFromFilter",value:function(){this.posts=void 0,this.moreToLoad=!0,this._loadMoreData()}},{key:"_loadMoreData",value:(e=l(c.mark((function t(){var e,i,n,o,s,r,a=this;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.moreToLoad||!this.group){t.next=12;break}return this.moreToLoad=!1,this.noPosts=!1,this.userId?(e=this.userId+"/posts",i="users"):(e="".concat(this.group.id),i="groups"),this.searchingFor?n="/api/"+i+"/"+e+"/search/"+this.searchingFor:(n="/api/"+i+"/"+e+"/posts/"+this.filter,this.categoryId?n+="/"+this.categoryId:n+="/null",n+="/"+this.statusFilter),o=this.posts?this.posts.length:0,n+="?offset="+o,"random"==this.filter&&this.randomSeed&&(n+="&randomSeed="+this.randomSeed),t.next=10,window.serverApi.getGroupPosts(n);case 10:if(s=t.sent){if(this.postsCount=s.totalPostsCount,this.fire("yp-post-count",{type:this.statusFilter,count:this.postsCount}),this.posts)for(r=0;r<s.posts.length;r++)this.posts.push(s.posts[r]);else this.posts=s.posts;0==s.posts.length&&0==this.posts.length&&(this.noPosts=!0),(s.posts.length>0||this.searchingFor&&""!=this.searchingFor)&&(this.noPosts=!1),setTimeout((function(){var t=a.$$("#postsFilter");t&&t._updateTitle()}),20),s.posts.length>0&&s.posts.length!=this.postsCount&&(this.moreToLoad=!0),this.fireGlobal("yp-refresh-activities-scroll-threshold"),this._processCategories(),this._checkForMultipleLanguages(s.posts),window.appGlobals.cache.addPostsToCacheLater(s.posts),this.requestUpdate()}case 12:this.moreFromScrollTriggerActive=!1;case 13:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_checkForMultipleLanguages",value:function(t){if(!localStorage.getItem("dontPromptForAutoTranslation")&&!sessionStorage.getItem("dontPromptForAutoTranslation")){var e,i=!1;t.forEach((function(t){t.language&&!i&&(e||"??"===t.language?e&&e!==t.language&&"??"!==t.language&&(i=!0,console.info("Multiple post languages: "+e+" and "+t.language)):e=t.language)}))}}},{key:"_processCategories",value:function(){if(this.categoryId&&this.group.Categories)for(var t=0;t<this.group.Categories.length;t++)this.group.Categories[t].id==this.categoryId&&(this.selectedCategoryName=this.group.Categories[t].name);else this.selectedCategoryName="categories.all"}}],[{key:"styles",get:function(){return[s(o(m),"styles",this),A,C(kt||(kt=d(["\n        .cardContainer {\n          width: 100%;\n          margin: 8px;\n        }\n\n        .postsFilter {\n          padding-left: 16px;\n          height: 36px;\n        }\n\n        .objectives {\n          padding-bottom: 40px;\n          max-width: 432px;\n        }\n\n        .description {\n          padding: 12px;\n        }\n\n        yp-post-card {\n          padding-bottom: 52px;\n        }\n\n        #outerRegion {\n          position: relative;\n        }\n\n        #scrollableRegion {\n        }\n\n        lit-virtualizer {\n          height: 100vh;\n          width: 100vw;\n          overflow: hidden;\n        }\n\n        yp-posts-filter {\n          margin-bottom: 8px;\n          margin-left: 8px;\n          margin-top: 16px;\n        }\n\n        #ironList {\n        }\n\n        .searchButton {\n          padding: 8px;\n          margin: 8px;\n        }\n\n        .searchContainer {\n          margin-top: 8px;\n        }\n\n        yp-posts-filter {\n          padding-right: 16px;\n        }\n\n        .half {\n          width: 50%;\n        }\n\n        .searchBox {\n          margin-bottom: 22px;\n          margin-right: 8px;\n        }\n\n        .card {\n          margin-left: 0;\n          margin-right: 0;\n          padding-left: 0;\n          padding-right: 0;\n          height: 435px !important;\n          width: 416px !important;\n          border-radius: 4px;\n        }\n\n        yp-post-card {\n          height: 435px !important;\n          width: 416px !important;\n        }\n\n        .card[mini] {\n          width: 210px;\n          height: 100%;\n        }\n\n        .card[wide-padding] {\n          padding: 16px !important;\n        }\n\n        .card[desktop-list] {\n          padding: 0 !important;\n          padding-top: 16px !important;\n        }\n\n        .card[is-last-item] {\n          padding-bottom: 128px;\n        }\n\n\n\n        @media (max-width: 800px) {\n          .searchBox {\n            margin-bottom: 8px;\n          }\n\n          .searchBox {\n            margin-top: 8px;\n          }\n\n          .half {\n            width: 100%;\n          }\n\n          .searchContainer {\n            margin-top: 0;\n          }\n\n          .postsFilter {\n            padding-left: 16px;\n            width: 215px !important;\n          }\n        }\n\n        .noIdeas {\n          background-color: #fff;\n          max-width: 200px;\n          padding: 16px;\n          margin: 16px;\n          margin-top: 32px;\n        }\n\n        .noIdeasText {\n          font-weight: bold;\n        }\n\n        .card {\n          padding: 0;\n          padding-top: 8px;\n        }\n\n        yp-post-cover-media {\n          width: 100%;\n          height: 230px;\n        }\n\n        #searchInput {\n          margin-left: 8px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        :focus {\n        }\n\n        .largeAjax {\n          position: absolute;\n          bottom: 32px;\n        }\n\n        a {\n          text-decoration: none;\n        }\n      "])))]}}]),m}(P),m([f({type:String})],se.prototype,"searchingFor",void 0),m([f({type:String})],se.prototype,"subTitle",void 0),m([f({type:String})],se.prototype,"filter",void 0),m([f({type:String})],se.prototype,"statusFilter",void 0),m([f({type:Array})],se.prototype,"posts",void 0),m([f({type:Number})],se.prototype,"userId",void 0),m([f({type:Object})],se.prototype,"group",void 0),m([f({type:Number})],se.prototype,"categoryId",void 0),m([f({type:Number})],se.prototype,"postsCount",void 0),m([f({type:String})],se.prototype,"selectedCategoryName",void 0),m([f({type:Number})],se.prototype,"selectedGroupTab",void 0),m([f({type:Boolean})],se.prototype,"noPosts",void 0),m([f({type:Boolean})],se.prototype,"showSearchIcon",void 0),m([f({type:Boolean,reflect:!0})],se.prototype,"grid",void 0),m([_()],se.prototype,"randomSeed",void 0),se=m([S("yp-posts-list")],se),re=function(t){n(o,t);var e=i(o);function o(){return a(this,o),e.apply(this,arguments)}return r(o,[{key:"render",value:function(){return b(It||(It=d(['\n      <mwc-icon-button\n        .label="','"\n        id="trigger"\n        icon="sentiment_satisfied_alt"\n        @click="','"></mwc-icon-button>\n    '])),this.t("addEmoji"),this.togglePicker)}},{key:"togglePicker",value:function(){var t=this;window.appDialogs.getDialogAsync("emojiDialog",(function(e){e.open(t.$$("#trigger"),t.inputTarget)}))}}]),o}(P),m([f({type:Object})],re.prototype,"inputTarget",void 0),re=m([S("yp-emoji-selector")],re),ae=function(t){n(l,t);var e=i(l);function l(){var t;return a(this,l),(t=e.apply(this,arguments)).disableNewPosts=!1,t}return r(l,[{key:"render",value:function(){return this.group?b(Ct||(Ct=d(['\n          <div\n            ?disabled="','"\n            class="postCard shadow-elevation-8dp shadow-transaction layout vertical center-center"\n            aria-disabled="','"\n            role="button"\n            aria-label="','"\n            tabindex="0"\n            @keydown="','"\n            @click="','">\n            <div class="layout horizontal center-center addNewIdeaText">\n              <mwc-icon>lightbulb_outline</mwc-icon>\n              ',"\n            </div>\n          </div>\n        "])),this.disableNewPosts,this.disableNewPosts,this.t("post.add_new"),this._keyDown,this._newPost,this.disableNewPosts?b(St||(St=d(['\n                    <div class="flex addText closed">\n                      ',"\n                    </div>\n                  "])),this.group.configuration.alternativeTextForNewIdeaButtonClosed?b(zt||(zt=d(['\n                            <yp-magic-text\n                              .contentId="','"\n                              .extraId="','"\n                              text-only\n                              .content="','"\n                              .contentLanguage="','"\n                              class="ratingName"\n                              textType="alternativeTextForNewIdeaButtonClosed"></yp-magic-text>\n                          '])),this.group.id,this.index,this.group.configuration.alternativeTextForNewIdeaButtonClosed,this.group.language):b(Pt||(Pt=d([" "," "])),this.t("closedForNewPosts"))):b(Tt||(Tt=d(['\n                    <div class="flex addText">\n                      ',"\n                    </div>\n                  "])),this.group.configuration.alternativeTextForNewIdeaButtonClosed?b(Mt||(Mt=d(['\n                            <yp-magic-text\n                              .contentId="','"\n                              .extraId="','"\n                              text-only\n                              .content="','"\n                              .contentLanguage="','"\n                              class="ratingName"\n                              textType="alternativeTextForNewIdeaButton"></yp-magic-text>\n                          '])),this.group.id,this.index,this.group.configuration.alternativeTextForNewIdeaButton,this.group.language):b(At||(At=d([" "," "])),this.t("post.add_new")))):z}},{key:"_keyDown",value:function(t){13===t.keyCode&&this._newPost()}},{key:"_newPost",value:function(){this.disableNewPosts||this.fire("new-post")}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),A,C(Dt||(Dt=d(["\n        :host {\n          margin-top: 8px;\n          margin-bottom: 8px;\n          width: 100%;\n        }\n\n        .postCard {\n          width: 100%;\n          min-height: 75px;\n          margin-top: 8px;\n          padding: 16px;\n          background-color: var(--mdc-theme-secondary);\n          color: var(--mdc-theme-on-secondary);\n          font-size: var(--mdc-typography-headline1-font-size);\n          cursor: pointer;\n          margin-bottom: 8px;\n          text-align: center;\n          max-width: 310px;\n        }\n\n        mwc-icon {\n          --mdc-icon-size: 64px;\n          color: var(--mdc-theme-on-secondary);\n        }\n\n        .header {\n          padding: 0;\n          margin: 0;\n          padding-top: 16px;\n        }\n\n        .half {\n          width: 50%;\n        }\n\n        .addText {\n          padding-left: 0;\n          padding-right: 8px;\n        }\n\n        mwc-icon {\n          width: 64px;\n          height: 64px;\n          margin-right: 8px;\n          margin-left: 0;\n        }\n\n        .addNewIdeaText {\n          font-size: 26px;\n        }\n\n        .closed {\n          font-size: 22px;\n        }\n\n        div[disabled] {\n          background-color: #888;\n          cursor: initial;\n        }\n\n        mwc-icon[disabled] {\n        }\n\n        @media (max-width: 420px) {\n          :host {\n            margin-top: 0;\n          }\n\n          .postCard {\n            width: 100%;\n            margin-left: 0;\n            margin-right: 0;\n            margin-bottom: 4px;\n            padding: 16px;\n          }\n\n          .addNewIdeaText {\n            font-size: 24px;\n            width: auto;\n          }\n\n          mwc-icon {\n            height: 48px;\n            width: 48px;\n          }\n\n          .closed {\n            font-size: 20px;\n          }\n        }\n\n        @media (max-width: 420px) {\n          .postCard {\n            max-width: 300px;\n          }\n        }\n\n        .container {\n          width: 100%;\n        }\n      "])))]}}]),l}(P),m([f({type:Boolean})],ae.prototype,"disableNewPosts",void 0),m([f({type:Object})],ae.prototype,"group",void 0),m([f({type:Number})],ae.prototype,"index",void 0),ae=m([S("yp-post-card-add")],ae),de=function(t){n(h,t);var e,p=i(h);function h(){var t;return a(this,h),(t=p.apply(this,arguments)).selectedVideoCoverIndex=0,t.useMainPhotoForVideoCover=!1,t.noDefaultCoverImage=!1,t}return r(h,[{key:"render",value:function(){var t=this;return this.videoImages?b(Lt||(Lt=d(['\n          <video\n            hidden\n            controls\n            class="previewVideo"\n            .url="','"></video>\n          <div class="layout horizontal videoImages videoPreviewContainer">\n            <div style="white-space: nowrap">\n              ','\n\n              <div\n                class="layout horizontal mainPhotoCheckbox"\n                ?hidden="','">\n                <mwc-formfield .label="','">\n                  <mwc-radio\n                    @click="','"\n                    name="useMainPhoto"></mwc-radio>\n                </mwc-formfield>\n              </div>\n            </div>\n          </div>\n\n        '])),this.previewVideoUrl,this.videoImages.map((function(e,i){return b(Vt||(Vt=d(['\n                  <img\n                    .class="','"\n                    data-index="','"\n                    @click="','"\n                    sizing="cover"\n                    class="previewFrame"\n                    src="','" />\n                '])),t._classFromImageIndex(i),i,t._selectVideoCover,e)})),this.noDefaultCoverImage,this.t("useMainPhoto"),this._selectVideoCoverMainPhoto):z}},{key:"_classFromImageIndex",value:function(t){return t==this.selectedVideoCoverIndex?"selectedCover":"coverImage"}},{key:"updated",value:function(t){s(o(h.prototype),"updated",this).call(this,t),t.has("videoId")&&this._getVideoMeta()}},{key:"_getVideoMeta",value:(e=l(c.mark((function t(){var e;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.videoId){t.next=7;break}return t.next=3,window.serverApi.getVideoFormatsAndImages(this.videoId);case 3:(e=t.sent).previewVideoUrl&&e.videoImages&&(this.previewVideoUrl=e.previewVideoUrl,this.videoImages=e.videoImages),t.next=8;break;case 7:console.error("_getVideoImages no video id");case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_selectVideoCover",value:function(t){var e=t.target.getAttribute("data-index");this.fire("set-cover",e),this.fire("set-default-cover",!1),window.serverApi.setVideoCover(this.videoId,{frameIndex:e})}},{key:"_selectVideoCoverMainPhoto",value:function(){var t=this;setTimeout((function(){t.$$("#useMainPhotoId").checked?(window.serverApi.setVideoCover(t.videoId,{frameIndex:-2}),t.fire("set-default-cover",!0)):t.fire("set-default-cover",!1)}))}}],[{key:"styles",get:function(){return[s(o(h),"styles",this),C(Ut||(Ut=d(["\n        .previewFrame {\n          max-height: 50px;\n          max-width: 89px;\n          height: 50px;\n          width: 89px;\n          cursor: pointer;\n        }\n\n        .videoImages {\n          overflow-x: auto;\n          width: 200px;\n          max-height: 70px;\n          height: 70px;\n        }\n\n        .selectedCover {\n          border-top: 2px solid var(--accent-color);\n          max-height: 50px;\n          max-width: 89px;\n          white-space: nowrap;\n        }\n\n        .coverImage {\n          max-height: 50px;\n          max-width: 89px;\n          white-space: nowrap;\n        }\n\n        .limitInfo {\n          margin-top: 0;\n          color: #656565;\n          text-align: center;\n          font-size: 14px;\n        }\n\n        .mainPhotoCheckbox {\n          margin-top: 4px;\n          margin-bottom: 4px;\n        }\n      "])))]}}]),h}(P),m([f({type:Number})],de.prototype,"videoId",void 0),m([f({type:String})],de.prototype,"previewVideoUrl",void 0),m([f({type:Array})],de.prototype,"videoImages",void 0),m([f({type:Number})],de.prototype,"selectedVideoCoverIndex",void 0),m([f({type:Boolean})],de.prototype,"useMainPhotoForVideoCover",void 0),m([f({type:Boolean})],de.prototype,"noDefaultCoverImage",void 0),de=m([S("yp-set-video-cover")],de),le=function(t){n(h,t);var e,p=i(h);function h(){var t;return a(this,h),(t=p.apply(this,arguments)).target="",t.progressHidden=!1,t.droppable=!1,t.dropText="",t.multi=!1,t.files=[],t.method="PUT",t.raised=!1,t.noink=!1,t.headers={},t.retryText="Retry Upload",t.removeText="Remove",t.successText="Success",t.errorText="Error uploading file...",t.noDefaultCoverImage=!1,t.shownDropText=!1,t.videoUpload=!1,t.audioUpload=!1,t.attachmentUpload=!1,t.transcodingComplete=!1,t.isPollingForTranscoding=!1,t.indeterminateProgress=!1,t.accept="image/*",t.capture=!1,t.selectedVideoCoverIndex=0,t.useMainPhotoForVideoCover=!1,t.buttonText="",t.buttonIcon="file_upload",t}return r(h,[{key:"render",value:function(){var t=this;return b(Ft||(Ft=d(['\n\n      <div class="layout vertical center-center mainContainer">\n        <div class="layout vertical center-center">\n          <div class="layout horizontal center-center">\n            <mwc-button\n              id="button"\n              .icon="','"\n              class="blue"\n              ?raised="','"\n              .label="','"\n              @click="','">\n            </mwc-button>\n            <mwc-icon-button\n              .ariaLabel="','"\n              class="removeButton layout self-start"\n              icon="delete"\n              @click="','"\n              ?hidden="','"></mwc-icon-button>\n          </div>\n          <div class="subText" ?hidden="','">','</div>\n          <div\n            ?hidden="','"\n            class="limitInfo layout horizontal center-center">\n            <em ?hidden="','"\n              >'," ",'</em\n            >\n          </div>\n        </div>\n        <div id="UploadBorder">\n          ',"\n        </div>\n        ",'\n      </div>\n      <input\n        type="file"\n        id="fileInput"\n        ?capture="','"\n        @change="','"\n        .accept="','"\n        hidden\n        ?multiple="','" />\n    '])),this.buttonIcon,this.raised,this.buttonText,this._fileClick,this.t("deleteFile"),this.clear,!this.currentFile,!this.subText,this.subText,!this.uploadLimitSeconds,null!=this.currentFile,this.uploadLimitSeconds,this.t("seconds"),this.files.map((function(e){return b(Gt||(Gt=d(['\n              <div class="file">\n                <div class="name">\n                  <span>','</span>\n                  <div class="commands">\n                    <mwc-icon\n                      .title="','"\n                      @click="','"\n                      ?hidden="','"\n                      >autorenew</mwc-icon\n                    >\n                    <mwc-icon\n                      icon="cancel"\n                      .title="','"\n                      @click="','"\n                      ?hidden="','"\n                      >cancel</mwc-icon\n                    >\n                    <mwc-icon\n                      icon="check_circle"\n                      .title="','"\n                      ?hidden="','"\n                      >check_circle</mwc-icon\n                    >\n                  </div>\n                </div>\n                <div class="error" ?hidden="','">\n                  ','\n                </div>\n                <div ?hidden="','">\n                  <mwc-linear-progress\n                    .value="','"\n                    ?indeterminate="','"\n                    .error="','"></mwc-linear-progress>\n                </div>\n              </div>\n            '])),t.uploadStatus,t.retryText,t._retryUpload,!e.error,t.removeText,t._cancelUpload,e.complete,t.successText,!e.complete,!e.error,t.errorText,e.complete,e.progress,t.indeterminateProgress,e.error)})),this.currentVideoId&&this.transcodingComplete?b(Rt||(Rt=d(['<yp-set-video-cover\n              .noDefaultCoverImage="','"\n              .videoId="','"\n              @set-cover="','"\n              @set-default-cover="','"></yp-set-video-cover> '])),this.noDefaultCoverImage,this.currentVideoId,this._setVideoCover,this._setDefaultImageAsVideoCover):z,this.capture,this._fileChange,this.accept,this.multi)}},{key:"clear",value:function(){this.files=[],this._showDropText(),this.uploadStatus=void 0,this.currentVideoId=void 0,this.currentAudioId=void 0,this.currentFile=void 0,this.transcodingJobId=void 0,this.indeterminateProgress=!1,this.transcodingComplete=!1,this.capture=!1,this.isPollingForTranscoding=!1,this.useMainPhotoForVideoCover=!1;var t=this.$$("#fileInput");t&&(t.value=""),this.videoUpload?this.fire("success",{detail:null,videoId:null}):this.audioUpload&&this.fire("success",{detail:null,audioId:null})}},{key:"connectedCallback",value:function(){var t;s(o(h.prototype),"connectedCallback",this).call(this),this.raised&&(null===(t=this.$$("#button"))||void 0===t||t.toggleAttribute("raised",!0)),this.droppable&&(this._showDropText(),this.setupDrop()),this.videoUpload?(this.accept="video/*",this.capture=!0):this.audioUpload&&(this.accept="audio/*",this.capture=!0),this.uploadLimitSeconds||!this.videoUpload&&!this.audioUpload||(this.uploadLimitSeconds=600)}},{key:"setupDrop",value:function(){var t=this;this.$$("#UploadBorder"),this.ondragover=function(t){return t.stopPropagation(),!1},this.ondragleave=function(){return!1},this.ondrop=function(e){if(e.preventDefault(),e.dataTransfer)for(var i=e.dataTransfer.files.length,n=0;n<i;n++){var o=e.dataTransfer.files[n];o.progress=0,o.error=!1,o.complete=!1,t.files.push(o),t.uploadFile(o)}}}},{key:"_hasRecorderApp",value:function(){var t=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e=/Android/.test(navigator.userAgent)&&!window.MSStream;return this.videoUpload?!(!t&&!e):!this.audioUpload}},{key:"_fileClick",value:function(){var t=/firefox/.test(navigator.userAgent.toLowerCase())&&!window.MSStream,e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),i=!!e&&parseInt(e[2],10),n=/SamsungBrowser/.test(navigator.userAgent),o=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;this._hasRecorderApp()?this._openFileInput():o&&this.audioUpload||t||i&&!n?this._openMediaRecorder():this._openFileInput()}},{key:"_openFileInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t&&(this.videoAspect=t);var e=this.$$("#fileInput");if(e&&document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!1),e.dispatchEvent(i)}}},{key:"_openMediaRecorder",value:function(){var t=this;window.appGlobals.activity("open","mediaRecorder"),window.appDialogs.getMediaRecorderAsync((function(e){e.open({callbackFunction:t._dataFromMediaRecorder.bind(t),videoRecording:t.videoUpload,audioRecording:t.audioUpload,uploadFileFunction:t._openFileInput.bind(t),maxLength:t.uploadLimitSeconds||600})}))}},{key:"_dataFromMediaRecorder",value:function(t){t.progress=0,t.error=!1,t.complete=!1,this.files.push(t),this.uploadFile(t)}},{key:"_fileChange",value:function(t){for(var e=t.target.files.length,i=0;i<e;i++){var n=t.target.files[i];n.progress=0,n.error=!1,n.complete=!1,this.files.push(n),this.uploadFile(n)}}},{key:"cancel",value:function(t){t&&t.xhr&&(t.xhr.abort(),this.files.splice(this.files.indexOf(t),1),this._showDropText())}},{key:"_cancelUpload",value:function(t){this.cancel(t.model.__data__.item)}},{key:"_retryUpload",value:function(t){var e=this;t.model.item.error=!1,t.model.item.progress=0,setTimeout((function(){e.uploadFile(t.model.__data__.item)}),50)}},{key:"_showDropText",value:function(){this.shownDropText=!this.files.length&&this.droppable}},{key:"uploadFile",value:(e=l(c.mark((function t(e){var i,n,o;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.videoUpload||this.audioUpload||this.attachmentUpload)){t.next=38;break}if(this.indeterminateProgress=!0,this.currentFile=e,n={},!this.videoUpload){t.next=11;break}window.appGlobals.activity("starting","videoUpload"),this.uploadStatus=this.t("uploadingVideo"),this.headers={"Content-Type":"video/mp4"},i=this.group?"/api/videos/"+this.group.id+"/createAndGetPreSignedUploadUrl":"/api/videos/createAndGetPreSignedUploadUrlLoggedIn",t.next=28;break;case 11:if(!this.audioUpload){t.next=18;break}window.appGlobals.activity("starting","audioUpload"),this.uploadStatus=this.t("uploadingAudio"),this.headers={"Content-Type":"audio/mp4"},i=this.group?"/api/audios/"+this.group.id+"/createAndGetPreSignedUploadUrl":"/api/audios/createAndGetPreSignedUploadUrlLoggedIn",t.next=28;break;case 18:if(!this.attachmentUpload){t.next=28;break}if(window.appGlobals.activity("starting","attachmentUpload"),this.uploadStatus=this.t("attachmentUpload"),!this.group){t.next=26;break}n={filename:e.name,contentType:e.type},i="/api/groups/"+this.group.id+"/getPresignedAttachmentURL",t.next=28;break;case 26:return console.error("No group for attachment upload"),t.abrupt("return");case 28:return t.next=30,window.serverApi.createPresignUrl(i,n);case 30:o=t.sent,this.target=o.presignedUrl,this.videoUpload?this.currentVideoId=o.videoId:this.currentAudioId=o.audioId,this.method="PUT",this.indeterminateProgress=!1,this.reallyUploadFile(this.currentFile),t.next=41;break;case 38:window.appGlobals.activity("starting","imageUpload"),this.uploadStatus=this.t("uploadingImage"),this.reallyUploadFile(e);case 41:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_checkTranscodingJob",value:function(t){var e=this;setTimeout(l(c.mark((function i(){var n,o,s,r;return c.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.videoUpload?(n="videos",o=e.currentVideoId):(n="audios",o=e.currentAudioId),!o){i.next=8;break}return i.next=4,window.serverApi.getTranscodingJobStatus(n,o,t);case 4:s=i.sent,e.currentFile?(r=e.files.indexOf(e.currentFile),"Complete"===s.status?(e.files[r].complete=!0,e.uploadStatus=e.t("uploadCompleted"),e.transcodingComplete=!0,e.videoUpload?(e.fire("success",{detail:s,videoId:e.currentVideoId}),e.uploadStatus=e.t("selectCoverImage")):e.fire("success",{detail:s,audioId:e.currentAudioId}),e.fire("file-upload-complete"),window.appGlobals.activity("complete","mediaTranscoding")):s.error?(e.files[r].error=!0,e.files[r].complete=!1,e.files[r].progress=100,e.requestUpdate(),e.fire("error",{xhr:event}),e.fire("file-upload-complete"),window.appGlobals.activity("error","mediaTranscoding")):e._checkTranscodingJob(t)):console.error("Trying to process non file"),i.next=9;break;case 8:console.error("No media edit for transcoding check");case 9:case"end":return i.stop()}}),i)}))),1e3)}},{key:"_setVideoCover",value:function(t){this.selectedVideoCoverIndex=t.detail}},{key:"_setDefaultImageAsVideoCover",value:function(t){this.useMainPhotoForVideoCover=t.detail}},{key:"reallyUploadFile",value:function(t){var e=this;if(t){var i=this.videoAspect;i||(i=window.innerHeight>window.innerWidth?"portrait":"landscape"),this.fire("file-upload-starting"),this._showDropText();var n=this.files.indexOf(t),o=t.xhr=new XMLHttpRequest;o.upload.onprogress=function(t){var i=t.loaded,o=t.total;e.files[n].progress=Math.floor(i/o*1e3)/10};var s=this.target.replace("<name>",t.name);for(var r in o.open(this.method,s,!0),this.headers)this.headers.hasOwnProperty(r)&&o.setRequestHeader(r,this.headers[r]);if(o.onload=l(c.mark((function s(){var r,a,d,l,p,h;return c.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(200!==o.status){s.next=31;break}if(!e.videoUpload||!e.currentVideoId){s.next=15;break}return e.indeterminateProgress=!0,e.uploadStatus=e.t("transcodingVideo"),r=e.group?"startTranscoding":"startTranscodingLoggedIn",(a="posts"===e.containerType&&e.group?{videoPostUploadLimitSec:e.group.configuration.videoPostUploadLimitSec,aspect:""}:"points"===e.containerType&&e.group?{videoPointUploadLimitSec:e.group.configuration.videoPointUploadLimitSec,aspect:""}:{}).aspect=i,s.next=9,window.serverApi.startTranscoding("videos",e.currentVideoId,r,a);case 9:d=s.sent,e._checkTranscodingJob(d.transcodingJobId),window.appGlobals.activity("complete","videoUpload"),window.appGlobals.activity("start","mediaTranscoding"),s.next=29;break;case 15:if(!e.audioUpload||!e.currentAudioId){s.next=28;break}return e.indeterminateProgress=!0,e.uploadStatus=e.t("transcodingAudio"),l=e.group?"startTranscoding":"startTranscodingLoggedIn",p="posts"===e.containerType&&e.group?{audioPostUploadLimitSec:e.group.configuration.audioPostUploadLimitSec}:"points"===e.containerType&&e.group?{audioPointUploadLimitSec:e.group.configuration.audioPointUploadLimitSec}:{},s.next=22,window.serverApi.startTranscoding("audios",e.currentAudioId,l,p);case 22:h=s.sent,e._checkTranscodingJob(h.transcodingJobId),window.appGlobals.activity("complete","audioUpload"),window.appGlobals.activity("start","mediaTranscoding"),s.next=29;break;case 28:e.attachmentUpload?(e.uploadStatus=e.t("uploadCompleted"),e.fire("file-upload-complete"),e.files[n].complete=!0,e.fire("success",{xhr:o,filename:t.name}),window.appGlobals.activity("complete","attachmentUpload")):(e.uploadStatus=e.t("uploadCompleted"),e.fire("file-upload-complete"),e.files[n].complete=!0,e.fire("success",{xhr:o,videoId:e.currentVideoId}),window.appGlobals.activity("complete","imageUpload"));case 29:s.next=38;break;case 31:e.fire("file-upload-complete"),e.files[n].error=!0,e.files[n].complete=!1,e.files[n].progress=100,e.requestUpdate(),e.fire("error",{xhr:o}),window.appGlobals.activity("error","mediaUpload");case 38:case"end":return s.stop()}}),s)}))),this.videoUpload||this.audioUpload||this.attachmentUpload)o.send(t);else{var a=new FormData;a.append("file",t,t.name),o.send(a)}}}}],[{key:"styles",get:function(){return[s(o(h),"styles",this),C(Et||(Et=d(["\n        .enabled {\n          border: 1px dashed #555;\n        }\n\n        .hover {\n          opacity: 0.7;\n          border: 1px dashed #111;\n        }\n\n        #UploadBorder {\n          vertical-align: middle;\n          color: #555;\n          padding: 8px;\n          padding-right: 16px;\n          max-height: 200px;\n          overflow-y: auto;\n          display: inline-block;\n        }\n\n        #dropArea {\n          text-align: center;\n        }\n\n        mwc-button {\n          margin-bottom: 8px;\n        }\n\n        .file {\n          padding: 10px 0px;\n        }\n\n        .commands {\n          float: right;\n        }\n\n        .commands iron-icon:not([icon='check-circle']) {\n          cursor: pointer;\n          opacity: 0.9;\n        }\n\n        .commands iron-icon:hover {\n          opacity: 1;\n        }\n\n        [hidden] {\n          display: none;\n        }\n\n        .error {\n          color: #f40303;\n          font-size: 11px;\n          margin: 2px 0px -3px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n        ::slotted(iron-icon) {\n          padding-right: 6px;\n        }\n\n        .mainContainer {\n          width: 100%;\n        }\n\n        .removeButton {\n          margin-bottom: 18px;\n        }\n\n        .limitInfo {\n          margin-top: 0;\n          color: #656565;\n          text-align: center;\n          font-size: 14px;\n        }\n\n        mwc-button {\n          min-width: 100px;\n        }\n\n        .subText {\n          font-size: 12px;\n          font-style: italic;\n        }\n      "])))]}}]),h}(P),m([f({type:String})],le.prototype,"target",void 0),m([f({type:Number})],le.prototype,"uploadLimitSeconds",void 0),m([f({type:Boolean})],le.prototype,"progressHidden",void 0),m([f({type:Boolean})],le.prototype,"droppable",void 0),m([f({type:String})],le.prototype,"dropText",void 0),m([f({type:Boolean})],le.prototype,"multi",void 0),m([f({type:Array})],le.prototype,"files",void 0),m([f({type:String})],le.prototype,"method",void 0),m([f({type:Boolean})],le.prototype,"raised",void 0),m([f({type:String})],le.prototype,"subText",void 0),m([f({type:Boolean})],le.prototype,"noink",void 0),m([f({type:Object})],le.prototype,"headers",void 0),m([f({type:String})],le.prototype,"retryText",void 0),m([f({type:String})],le.prototype,"removeText",void 0),m([f({type:String})],le.prototype,"successText",void 0),m([f({type:String})],le.prototype,"errorText",void 0),m([f({type:Boolean})],le.prototype,"noDefaultCoverImage",void 0),m([f({type:Boolean})],le.prototype,"shownDropText",void 0),m([f({type:Boolean})],le.prototype,"videoUpload",void 0),m([f({type:Boolean})],le.prototype,"audioUpload",void 0),m([f({type:Boolean})],le.prototype,"attachmentUpload",void 0),m([f({type:Number})],le.prototype,"currentVideoId",void 0),m([f({type:Number})],le.prototype,"currentAudioId",void 0),m([f({type:Number})],le.prototype,"transcodingJobId",void 0),m([f({type:Boolean})],le.prototype,"transcodingComplete",void 0),m([f({type:Object})],le.prototype,"currentFile",void 0),m([f({type:Boolean})],le.prototype,"isPollingForTranscoding",void 0),m([f({type:Boolean})],le.prototype,"indeterminateProgress",void 0),m([f({type:String})],le.prototype,"uploadStatus",void 0),m([f({type:String})],le.prototype,"accept",void 0),m([f({type:Object})],le.prototype,"group",void 0),m([f({type:Boolean})],le.prototype,"capture",void 0),m([f({type:String})],le.prototype,"containerType",void 0),m([f({type:Number})],le.prototype,"selectedVideoCoverIndex",void 0),m([f({type:Boolean})],le.prototype,"videoAspect",void 0),m([f({type:Boolean})],le.prototype,"useMainPhotoForVideoCover",void 0),m([f({type:String})],le.prototype,"buttonText",void 0),m([f({type:String})],le.prototype,"buttonIcon",void 0),le=m([S("yp-file-upload")],le)}}}));
