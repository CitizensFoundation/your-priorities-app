System.register(["./nomodule-1afcfdd8.js","./nomodule-1e7cdb19.js"],(function(e,t){var i,n,r,o,a,s,c,u,d,l,f,h,p,v,m,g,y,b,w,k,A,R,C,P,x,S,M,T,O,E,D,j;return{setters:[function(e){i=e.typeof,n=e.createSuper,r=e.inherits,o=e.getPrototypeOf,a=e.get,s=e.createClass,c=e.classCallCheck,u=e.taggedTemplateLiteral,d=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){f=e.H,h=e.I,p=e.a,v=e.r,m=e.p,g=e.T,y=e._,b=e.e,w=e.t,k=e.n}],execute:function(){O=f((function(e){function t(e,i){if(!e)throw"First parameter is required.";i=new n(e,i=i||{type:"video"});var o=this;function a(t){t&&(i.initCallback=function(){t(),t=i.initCallback=null});var n=new r(e,i);(h=new n(e,i)).record(),f("recording"),i.disableLogs||console.log("Initialized recorderType:",h.constructor.name,"for output-type:",i.type)}function s(e){if(e=e||function(){},h){if("paused"===o.state)return o.resumeRecording(),void setTimeout((function(){s(e)}),1);"recording"===o.state||i.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',o.state),i.disableLogs||console.log("Stopped recording "+i.type+" stream."),"gif"!==i.type?h.stop(t):(h.stop(),t()),f("stopped")}else v();function t(t){if(h){Object.keys(h).forEach((function(e){"function"!=typeof h[e]&&(o[e]=h[e])}));var n=h.blob;if(!n){if(!t)throw"Recording failed.";h.blob=n=t}if(n&&!i.disableLogs&&console.log(n.type,"->",b(n.size)),e){var r;try{r=l.createObjectURL(n)}catch(e){}"function"==typeof e.call?e.call(o,r):e(r)}i.autoWriteToDisk&&u((function(e){var t={};t[i.type+"Blob"]=e,E.Store(t)}))}else"function"==typeof e.call?e.call(o,""):e("")}}function c(e){postMessage((new FileReaderSync).readAsDataURL(e))}function u(e,t){if(!e)throw"Pass a callback function over getDataURL.";var n=t?t.blob:(h||{}).blob;if(!n)return i.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){u(e,t)}),1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var r=new FileReader;r.readAsDataURL(n),r.onload=function(t){e(t.target.result)}}else{var o=function(e){try{var t=l.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(t);return l.revokeObjectURL(t),i}catch(e){}}(c);o.onmessage=function(t){e(t.data)},o.postMessage(n)}}function d(e){e=e||0,"paused"!==o.state?"stopped"!==o.state&&(e>=o.recordingDuration?s(o.onRecordingStopped):(e+=1e3,setTimeout((function(){d(e)}),1e3))):setTimeout((function(){d(e)}),1e3)}function f(e){o&&(o.state=e,"function"==typeof o.onStateChanged.call?o.onStateChanged.call(o,e):o.onStateChanged(e))}var h,p='It seems that recorder is destroyed or "startRecording" is not invoked for '+i.type+" recorder.";function v(){!0!==i.disableLogs&&console.warn(p)}var m={startRecording:function(t){return i.disableLogs||console.log("RecordRTC version: ",o.version),t&&(i=new n(e,t)),i.disableLogs||console.log("started recording "+i.type+" stream."),h?(h.clearRecordedData(),h.record(),f("recording"),o.recordingDuration&&d(),o):(a((function(){o.recordingDuration&&d()})),o)},stopRecording:s,pauseRecording:function(){h?"recording"===o.state?(f("paused"),h.pause(),i.disableLogs||console.log("Paused recording.")):i.disableLogs||console.warn("Unable to pause the recording. Recording state: ",o.state):v()},resumeRecording:function(){h?"paused"===o.state?(f("recording"),h.resume(),i.disableLogs||console.log("Resumed recording.")):i.disableLogs||console.warn("Unable to resume the recording. Recording state: ",o.state):v()},initRecorder:a,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return o.recordingDuration=e,o.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){o.onRecordingStopped=e}}},clearRecordedData:function(){h?(h.clearRecordedData(),i.disableLogs||console.log("Cleared old recorded data.")):v()},getBlob:function(){if(h)return h.blob;v()},getDataURL:u,toURL:function(){if(h)return l.createObjectURL(h.blob);v()},getInternalRecorder:function(){return h},save:function(e){h?w(h.blob,e):v()},getFromDisk:function(e){h?t.getFromDisk(i.type,e):v()},setAdvertisementArray:function(e){i.advertisement=[];for(var t=e.length,n=0;n<t;n++)i.advertisement.push({duration:n,image:e[n]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==o.state||i.disableLogs||console.warn("Stop an active recorder."),h&&"function"==typeof h.clearRecordedData&&h.clearRecordedData(),h=null,f("inactive"),o.blob=null},onStateChanged:function(e){i.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return o.state},destroy:function(){var e=i.disableLogs;i={disableLogs:!0},o.reset(),f("destroyed"),m=o=null,C.AudioContextConstructor&&(C.AudioContextConstructor.close(),C.AudioContextConstructor=null),i.disableLogs=e,i.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return o=m,m;for(var g in m)this[g]=m[g];return o=this,m}function n(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===T||t.recorderType===M||t.recorderType===B?t.type="video":t.recorderType===D?t.type="gif":t.recorderType===S?t.type="audio":t.recorderType===x&&(A(e,"audio").length&&A(e,"video").length||!A(e,"audio").length&&A(e,"video").length?t.type="video":A(e,"audio").length&&!A(e,"video").length&&(t.type="audio"))),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function r(e,t){var i;return(m||f||p)&&(i=S),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!m&&(i=x),"video"===t.type&&(m||p)&&(i=T,"undefined"!=typeof ReadableStream&&(i=B)),"gif"===t.type&&(i=D),"canvas"===t.type&&(i=M),P()&&i!==M&&i!==D&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(A(e,"video").length||A(e,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(i=x):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(i=x)),e instanceof Array&&e.length&&(i=L),t.recorderType&&(i=t.recorderType),!t.disableLogs&&i&&i.name&&console.log("Using recorderType:",i.name||i.constructor.name),!i&&g&&(i=x),i}function o(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var i,n=this.mediaType,r=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof n.audio&&P()&&!A(e,"audio").length&&(n.audio=!1),"function"!=typeof n.video&&P()&&!A(e,"video").length&&(n.video=!1),"function"!=typeof n.gif&&P()&&!A(e,"video").length&&(n.gif=!1),!n.audio&&!n.video&&!n.gif)throw"MediaStream must have either audio or video tracks.";if(n.audio&&(i=null,"function"==typeof n.audio&&(i=n.audio),this.audioRecorder=new t(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:i,mimeType:r.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.video||this.audioRecorder.startRecording()),n.video){i=null,"function"==typeof n.video&&(i=n.video);var o=e;if(P()&&n.audio&&"function"==typeof n.audio){var a=A(e,"video")[0];v?((o=new y).addTrack(a),i&&i===T&&(i=x)):(o=new y).addTrack(a)}this.videoRecorder=new t(o,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:i,mimeType:r.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),n.audio||this.videoRecorder.startRecording()}if(n.audio&&n.video){var s=this,c=!0===P();(n.audio instanceof S&&n.video||!0!==n.audio&&!0!==n.video&&n.audio!==n.video)&&(c=!1),!0===c?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder((function(){s.audioRecorder.initRecorder((function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()}))}))}n.gif&&(i=null,"function"==typeof n.gif&&(i=n.gif),this.gifRecorder=new t(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:i,mimeType:r.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!=typeof Worker){var i=function(e){var t,i=l.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(i);if(void 0!==l)t=l;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(i),n}((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}));i.onmessage=function(e){t(e.data)},i.postMessage(e)}else{var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){t(e.target.result)}}}this.getBlob((function(i){i.audio&&i.video?t(i.audio,(function(n){t(i.video,(function(t){e({audio:n,video:t})}))})):i.audio?t(i.audio,(function(t){e({audio:t})})):i.video&&t(i.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){t.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}t.version="5.6.2",e.exports=t,t.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),E.Fetch((function(i,n){"all"!==e&&n===e+"Blob"&&t&&t(i),"all"===e&&t&&t(i,n.replace("Blob",""))}))},t.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(i){e.gif.getDataURL((function(e){E.Store({audioBlob:t,videoBlob:i,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){E.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){E.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){E.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){E.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){E.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){E.Store({gifBlob:e})}))},o.getFromDisk=t.getFromDisk,o.writeToDisk=t.writeToDisk,t.MRecordRTC=o;var a;(a=void 0!==h?h:null)&&"undefined"==typeof window&&void 0!==h&&(h.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},h.console||(h.console={}),void 0!==h.console.log&&void 0!==h.console.error||(h.console.error=h.console.log=h.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(a.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},a.HTMLVideoElement=function(){}),"undefined"==typeof location&&(a.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(a.screen={width:0,height:0}),void 0===l&&(a.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),a.window=h);var s=window.requestAnimationFrame;if(void 0===s)if("undefined"!=typeof webkitRequestAnimationFrame)s=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)s=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)s=msRequestAnimationFrame;else if(void 0===s){var c=0;s=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-c)),r=setTimeout((function(){e(i+n)}),n);return c=i+n,r}}var u=window.cancelAnimationFrame;void 0===u&&("undefined"!=typeof webkitCancelAnimationFrame?u=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?u=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?u=msCancelAnimationFrame:void 0===u&&(u=function(e){clearTimeout(e)}));var d=window.AudioContext;void 0===d&&("undefined"!=typeof webkitAudioContext&&(d=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(d=mozAudioContext));var l=window.URL;void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var f=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),p=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),v=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),m=!p&&!f&&!!navigator.webkitGetUserMedia||k()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);g&&!m&&-1!==navigator.userAgent.indexOf("CriOS")&&(g=!1,m=!0);var y=window.MediaStream;function b(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function w(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var i=(e.type||"video/webm").split("/")[1];if(-1!==i.indexOf(";")&&(i=i.split(";")[0]),t&&-1!==t.indexOf(".")){var n=t.split(".");t=n[0],i=n[1]}var r=(t||Math.round(9999999999*Math.random())+888888888)+"."+i;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,r);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,r);var o=document.createElement("a");o.href=l.createObjectURL(e),o.download=r,o.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(o),"function"==typeof o.click?o.click():(o.target="_blank",o.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),l.revokeObjectURL(o.href)}function k(){return"undefined"!=typeof window&&"object"===i(window.process)&&"renderer"===window.process.type||(!("undefined"==typeof process||"object"!==i(process.versions)||!process.versions.electron)||"object"===("undefined"==typeof navigator?"undefined":i(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function A(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function R(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}void 0===y&&"undefined"!=typeof webkitMediaStream&&(y=webkitMediaStream),void 0!==y&&void 0===y.prototype.stop&&(y.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),t.invokeSaveAsDialog=w,t.getTracks=A,t.getSeekableBlob=function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var i=new EBML.Reader,n=new EBML.Decoder,r=EBML.tools,o=new FileReader;o.onload=function(e){n.decode(this.result).forEach((function(e){i.read(e)})),i.stop();var o=r.makeMetadataSeekable(i.metadatas,i.duration,i.cues),a=this.result.slice(i.metadataSize),s=new Blob([o,a],{type:"video/webm"});t(s)},o.readAsArrayBuffer(e)},t.bytesToSize=b,t.isElectron=k;var C={};function P(){if(v||g||f)return!0;var e,t,i=navigator.userAgent,n=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return(m||p)&&(e=i.indexOf("Chrome"),n=i.substring(e+7)),-1!==(t=n.indexOf(";"))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(" "))&&(n=n.substring(0,t)),r=parseInt(""+n,10),isNaN(r)&&(n=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),r>=49}function x(e,t){var i=this;if(void 0===e)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if("audio"===(t=t||{mimeType:"video/webm"}).type){var n;if(A(e,"video").length&&A(e,"audio").length)navigator.mozGetUserMedia?(n=new y).addTrack(A(e,"audio")[0]):n=new y(A(e,"audio")),e=n;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=m?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var r,o=[];function a(){i.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(i.timestamps[i.timestamps.length-1],i.timestamps)}function s(e){return r&&r.mimeType?r.mimeType:e.mimeType||"video/webm"}function c(){o=[],r=null,i.timestamps=[]}this.getArrayOfBlobs=function(){return o},this.record=function(){i.blob=null,i.clearRecordedData(),i.timestamps=[],u=[],o=[];var n=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",n),r&&(r=null),m&&!P()&&(n="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&n.mimeType&&(MediaRecorder.isTypeSupported(n.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType),n.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{r=new MediaRecorder(e,n),t.mimeType=n.mimeType}catch(t){r=new MediaRecorder(e)}n.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in r&&!1===r.canRecordMimeType(n.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType)),r.ondataavailable=function(e){if(e.data&&u.push("ondataavailable: "+b(e.data.size)),"number"!=typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||i.blob?i.recordingCallback&&(i.recordingCallback(new Blob([],{type:s(n)})),i.recordingCallback=null):(i.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:s(n)}),i.recordingCallback&&(i.recordingCallback(i.blob),i.recordingCallback=null));else if(e.data&&e.data.size&&(o.push(e.data),a(),"function"==typeof t.ondataavailable)){var r=t.getNativeBlob?e.data:new Blob([e.data],{type:s(n)});t.ondataavailable(r)}},r.onstart=function(){u.push("started")},r.onpause=function(){u.push("paused")},r.onresume=function(){u.push("resumed")},r.onstop=function(){u.push("stopped")},r.onerror=function(e){e&&(e.name||(e.name="UnknownError"),u.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",n.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!i.manuallyStopped&&r&&"inactive"===r.state)return delete t.timeslice,void r.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==r.state&&"stopped"!==r.state&&r.stop())},"number"==typeof t.timeSlice?(a(),r.start(t.timeSlice)):r.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},i.manuallyStopped=!0,r&&(this.recordingCallback=e,"recording"===r.state&&r.stop(),"number"==typeof t.timeSlice&&setTimeout((function(){i.blob=new Blob(o,{type:s(t)}),i.recordingCallback(i.blob)}),100))},this.pause=function(){r&&"recording"===r.state&&r.pause()},this.resume=function(){r&&"paused"===r.state&&r.resume()},this.clearRecordedData=function(){r&&"recording"===r.state&&i.stop(c),c()},this.getInternalRecorder=function(){return r},this.blob=null,this.getState=function(){return r&&r.state||"inactive"};var u=[];this.getAllStates=function(){return u},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);i=this;!function n(){if(r&&!1!==t.checkForInactiveTracks)return!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),void i.stop()):void setTimeout(n,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function S(e,i){if(!A(e,"audio").length)throw"Your stream has no audio tracks.";var n,r=this,o=[],a=[],s=!1,c=0,u=2,d=(i=i||{}).desiredSampRate;function f(){if(!1===i.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function h(e,t){function i(e,t){var i,n=e.numberOfAudioChannels,r=e.leftBuffers.slice(0),o=e.rightBuffers.slice(0),a=e.sampleRate,s=e.internalInterleavedLength,c=e.desiredSampRate;function u(e,t,i){var n=Math.round(e.length*(t/i)),r=[],o=Number((e.length-1)/(n-1));r[0]=e[0];for(var a=1;a<n-1;a++){var s=a*o,c=Number(Math.floor(s)).toFixed(),u=Number(Math.ceil(s)).toFixed(),l=s-c;r[a]=d(e[c],e[u],l)}return r[n-1]=e[e.length-1],r}function d(e,t,i){return e+(t-e)*i}function l(e,t){for(var i=new Float64Array(t),n=0,r=e.length,o=0;o<r;o++){var a=e[o];i.set(a,n),n+=a.length}return i}function f(e,t,i){for(var n=i.length,r=0;r<n;r++)e.setUint8(t+r,i.charCodeAt(r))}2===n&&(r=l(r,s),o=l(o,s),c&&(r=u(r,c,a),o=u(o,c,a))),1===n&&(r=l(r,s),c&&(r=u(r,c,a))),c&&(a=c),2===n&&(i=function(e,t){for(var i=e.length+t.length,n=new Float64Array(i),r=0,o=0;o<i;)n[o++]=e[r],n[o++]=t[r],r++;return n}(r,o)),1===n&&(i=r);var h=i.length,p=new ArrayBuffer(44+2*h),v=new DataView(p);f(v,0,"RIFF"),v.setUint32(4,36+2*h,!0),f(v,8,"WAVE"),f(v,12,"fmt "),v.setUint32(16,16,!0),v.setUint16(20,1,!0),v.setUint16(22,n,!0),v.setUint32(24,a,!0),v.setUint32(28,a*n*2,!0),v.setUint16(32,2*n,!0),v.setUint16(34,16,!0),f(v,36,"data"),v.setUint32(40,2*h,!0);for(var m=h,g=44,y=0;y<m;y++)v.setInt16(g,32767*i[y],!0),g+=2;if(t)return t({buffer:p,view:v});postMessage({buffer:p,view:v})}if(e.noWorker)i(e,(function(e){t(e.buffer,e.view)}));else{var n,r,o,a=(n=i,r=l.createObjectURL(new Blob([n.toString(),";this.onmessage =  function (eee) {"+n.name+"(eee.data);}"],{type:"application/javascript"})),(o=new Worker(r)).workerURL=r,o);a.onmessage=function(e){t(e.data.buffer,e.data.view),l.revokeObjectURL(a.workerURL),a.terminate()},a.postMessage(e)}}!0===i.leftChannel&&(u=1),1===i.numberOfAudioChannels&&(u=1),(!u||u<1)&&(u=2),i.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+u),void 0===i.checkForInactiveTracks&&(i.checkForInactiveTracks=!0),this.record=function(){if(!1===f())throw"Please make sure MediaStream is active.";w(),R=b=!1,s=!0,void 0!==i.timeSlice&&P()},this.stop=function(e){e=e||function(){},s=!1,h({desiredSampRate:d,sampleRate:y,numberOfAudioChannels:u,internalInterleavedLength:c,leftBuffers:o,rightBuffers:1===u?[]:a,noWorker:i.noWorker},(function(t,i){r.blob=new Blob([i],{type:"audio/wav"}),r.buffer=new ArrayBuffer(i.buffer.byteLength),r.view=i,r.sampleRate=d||y,r.bufferSize=g,r.length=c,R=!1,e&&e(r.blob)}))},void 0===t.Storage&&(t.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),t.Storage.AudioContextConstructor&&"closed"!==t.Storage.AudioContextConstructor.state||(t.Storage.AudioContextConstructor=new t.Storage.AudioContext);var p=t.Storage.AudioContextConstructor,v=p.createMediaStreamSource(e),m=[0,256,512,1024,2048,4096,8192,16384],g=void 0===i.bufferSize?4096:i.bufferSize;if(-1===m.indexOf(g)&&(i.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(m,null,"\t"))),p.createJavaScriptNode)n=p.createJavaScriptNode(g,u,u);else{if(!p.createScriptProcessor)throw"WebAudio API has no support on this browser.";n=p.createScriptProcessor(g,u,u)}v.connect(n),i.bufferSize||(g=n.bufferSize);var y=void 0!==i.sampleRate?i.sampleRate:p.sampleRate||44100;(y<22050||y>96e3)&&(i.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),i.disableLogs||i.desiredSampRate&&console.log("Desired sample-rate: "+i.desiredSampRate);var b=!1;function w(){o=[],a=[],c=0,R=!1,s=!1,b=!1,p=null,r.leftchannel=o,r.rightchannel=a,r.numberOfAudioChannels=u,r.desiredSampRate=d,r.sampleRate=y,r.recordingLength=c,C={left:[],right:[],recordingLength:0}}function k(){n&&(n.onaudioprocess=null,n.disconnect(),n=null),v&&(v.disconnect(),v=null),w()}this.pause=function(){b=!0},this.resume=function(){if(!1===f())throw"Please make sure MediaStream is active.";if(!s)return i.disableLogs||console.log("Seems recording has been restarted."),void this.record();b=!1},this.clearRecordedData=function(){i.checkForInactiveTracks=!1,s&&this.stop(k),k()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var R=!1;n.onaudioprocess=function(e){if(!b)if(!1===f()&&(i.disableLogs||console.log("MediaStream seems stopped."),n.disconnect(),s=!1),s){R||(R=!0,i.onAudioProcessStarted&&i.onAudioProcessStarted(),i.initCallback&&i.initCallback());var t=e.inputBuffer.getChannelData(0),d=new Float32Array(t);if(o.push(d),2===u){var l=e.inputBuffer.getChannelData(1),h=new Float32Array(l);a.push(h)}c+=g,r.recordingLength=c,void 0!==i.timeSlice&&(C.recordingLength+=g,C.left.push(d),2===u&&C.right.push(h))}else v&&(v.disconnect(),v=null)},p.createMediaStreamDestination?n.connect(p.createMediaStreamDestination()):n.connect(p.destination),this.leftchannel=o,this.rightchannel=a,this.numberOfAudioChannels=u,this.desiredSampRate=d,this.sampleRate=y,r.recordingLength=c;var C={left:[],right:[],recordingLength:0};function P(){s&&"function"==typeof i.ondataavailable&&void 0!==i.timeSlice&&(C.left.length?(h({desiredSampRate:d,sampleRate:y,numberOfAudioChannels:u,internalInterleavedLength:C.recordingLength,leftBuffers:C.left,rightBuffers:1===u?[]:C.right},(function(e,t){var n=new Blob([t],{type:"audio/wav"});i.ondataavailable(n),setTimeout(P,i.timeSlice)})),C={left:[],right:[],recordingLength:0}):setTimeout(P,i.timeSlice))}}function M(e,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var i=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(i=!0)}));var n,r,o,a=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),s=50,c=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(a&&c&&c[2]&&(s=parseInt(c[2],10)),a&&s<52&&(i=!1),t.useWhammyRecorder&&(i=!1),i)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)n=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";n=e.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(o=!0,i&&!t.useWhammyRecorder){var e;"captureStream"in n?e=n.captureStream(25):"mozCaptureStream"in n?e=n.mozCaptureStream(25):"webkitCaptureStream"in n&&(e=n.webkitCaptureStream(25));try{var a=new y;a.addTrack(A(e,"video")[0]),e=a}catch(e){}if(!e)throw"captureStream API are NOT available.";(r=new x(e,{mimeType:t.mimeType||"video/webm"})).record()}else h.frames=[],f=(new Date).getTime(),l();t.initCallback&&t.initCallback()},this.getWebPImages=function(i){if("canvas"===e.nodeName.toLowerCase()){var n=h.frames.length;h.frames.forEach((function(e,i){var r=n-i;t.disableLogs||console.log(r+"/"+n+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(r,n);var o=e.image.toDataURL("image/webp",1);h.frames[i].image=o})),t.disableLogs||console.log("Generating WebM"),i()}else i()},this.stop=function(e){o=!1;var n=this;i&&r?r.stop(e):this.getWebPImages((function(){h.compile((function(i){t.disableLogs||console.log("Recording finished!"),n.blob=i,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),e&&e(n.blob),h.frames=[]}))}))};var u=!1;function d(){h.frames=[],o=!1,u=!1}function l(){if(u)return f=(new Date).getTime(),setTimeout(l,500);if("canvas"===e.nodeName.toLowerCase()){var i=(new Date).getTime()-f;return f=(new Date).getTime(),h.frames.push({image:(n=document.createElement("canvas"),r=n.getContext("2d"),n.width=e.width,n.height=e.height,r.drawImage(e,0,0),n),duration:i}),void(o&&setTimeout(l,t.frameInterval))}var n,r;html2canvas(e,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(e){var i=(new Date).getTime()-f;if(!i)return setTimeout(l,t.frameInterval);f=(new Date).getTime(),h.frames.push({image:e.toDataURL("image/webp",1),duration:i}),o&&setTimeout(l,t.frameInterval)}})}this.pause=function(){u=!0,r instanceof x&&r.pause()},this.resume=function(){u=!1,r instanceof x?r.resume():o||this.record()},this.clearRecordedData=function(){o&&this.stop(d),d()},this.name="CanvasRecorder",this.toString=function(){return this.name};var f=(new Date).getTime(),h=new O.Video(100)}function T(e,t){function i(e){e=void 0!==e?e:10;var t=(new Date).getTime()-c;return t?o?(c=(new Date).getTime(),setTimeout(i,100)):(c=(new Date).getTime(),s.paused&&s.play(),l.drawImage(s,0,0,d.width,d.height),u.frames.push({duration:t,image:d.toDataURL("image/webp")}),void(r||setTimeout(i,e,e))):setTimeout(i,e,e)}function n(e,t,i,n,r){var o=document.createElement("canvas");o.width=d.width,o.height=d.height;var a,s,c,u=o.getContext("2d"),l=[],f=-1===t,h=t&&t>0&&t<=e.length?t:e.length,p=0,v=0,m=0,g=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),y=i&&i>=0&&i<=1?i:0,b=n&&n>=0&&n<=1?n:0,w=!1;s=-1,c=(a={length:h,functionToLoop:function(t,i){var n,r,o,a=function(){!w&&o-n<=o*b||(f&&(w=!0),l.push(e[i])),t()};if(w)a();else{var s=new Image;s.onload=function(){u.drawImage(s,0,0,d.width,d.height);var e=u.getImageData(0,0,d.width,d.height);n=0,r=e.data.length,o=e.data.length/4;for(var t=0;t<r;t+=4){var i={r:e.data[t],g:e.data[t+1],b:e.data[t+2]};Math.sqrt(Math.pow(i.r-p,2)+Math.pow(i.g-v,2)+Math.pow(i.b-m,2))<=g*y&&n++}a()},s.src=e[i].image}},callback:function(){(l=l.concat(e.slice(h))).length<=0&&l.push(e[e.length-1]),r(l)}}).length,function e(){++s!==c?setTimeout((function(){a.functionToLoop(e,s)}),1):a.callback()}()}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),d.width=t.canvas.width||320,d.height=t.canvas.height||240,l=d.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):(s=document.createElement("video"),R(e,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),c=(new Date).getTime(),u=new O.Video,t.disableLogs||(console.log("canvas resolutions",d.width,"*",d.height),console.log("video width/height",s.width||d.width,"*",s.height||d.height)),i(t.frameInterval)};var r=!1;this.stop=function(e){e=e||function(){},r=!0;var i=this;setTimeout((function(){n(u.frames,-1,null,null,(function(n){u.frames=n,t.advertisement&&t.advertisement.length&&(u.frames=t.advertisement.concat(u.frames)),u.compile((function(t){i.blob=t,i.blob.forEach&&(i.blob=new Blob([],{type:"video/webm"})),e&&e(i.blob)}))}))}),10)};var o=!1;function a(){u.frames=[],r=!0,o=!1}this.pause=function(){o=!0},this.resume=function(){o=!1,r&&this.record()},this.clearRecordedData=function(){r||this.stop(a),a()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,c,u,d=document.createElement("canvas"),l=d.getContext("2d")}void 0!==d?C.AudioContext=d:"undefined"!=typeof webkitAudioContext&&(C.AudioContext=webkitAudioContext),t.Storage=C,t.MediaStreamRecorder=x,t.StereoAudioRecorder=S,t.CanvasRecorder=M,t.WhammyRecorder=T;var O=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){function t(e,t,i){return[{data:e,id:231}].concat(i.map((function(e){var i=function(e){var t=0;e.keyframe&&(t|=128);e.invisible&&(t|=8);e.lacing&&(t|=e.lacing<<1);e.discardable&&(t|=1);if(e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:i,id:163}})))}function n(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function r(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var i=0;i<e.length;i+=8)t.push(parseInt(e.substr(i,8),2));return new Uint8Array(t)}function o(e){for(var t=[],a=0;a<e.length;a++){var s=e[a].data;"object"===i(s)&&(s=o(s)),"number"==typeof s&&(s=r(s.toString(2))),"string"==typeof s&&(s=new Uint8Array(s.split("").map((function(e){return e.charCodeAt(0)}))));var c=s.size||s.byteLength||s.length,u=Math.ceil(Math.ceil(Math.log(c)/Math.log(2))/8),d=c.toString(2),l=new Array(7*u+7+1-d.length).join("0")+d,f=new Array(u).join("0")+"1"+l;t.push(n(e[a].id)),t.push(r(f)),t.push(s)}return new Blob(t,{type:"video/webm"})}function a(e,t){return parseInt(e.substr(t+4,4).split("").map((function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t})).join(""),2)}function s(e){for(var t=0,i={};t<e.length;){var n=e.substr(t,4),r=a(e,t),o=e.substr(t+4+4,r);t+=8+r,i[n]=i[n]||[],"RIFF"===n||"LIST"===n?i[n].push(s(o)):i[n].push(o)}return i}var c=new function(e){var i=function(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=e[0].width,i=e[0].height,n=e[0].duration,r=1;r<e.length;r++)n+=e[r].duration;return{duration:n,width:t,height:i}}(e);if(!i)return[];for(var n,r=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(n=i.duration,[].slice.call(new Uint8Array(new Float64Array([n]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:i.width,id:176},{data:i.height,id:186}]}]}]}]}],a=0,s=0;a<e.length;){var c=[],u=0;do{c.push(e[a]),u+=e[a].duration,a++}while(a<e.length&&u<3e4);var d={id:524531317,data:t(s,0,c)};r[1].data.push(d),s+=u}return o(r)}(e.map((function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],i=t.indexOf("*"),n=0,r=[];n<4;n++)r[n]=t.charCodeAt(i+3+n);return{width:16383&(r[1]<<8|r[0]),height:16383&(r[3]<<8|r[2]),data:t,riff:e}}(s(atob(e.image.slice(23))));return t.duration=e.duration,t})));postMessage(c)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var i,n,r,o=(i=t,n=l.createObjectURL(new Blob([i.toString(),"this.onmessage =  function (eee) {"+i.name+"(eee.data);}"],{type:"application/javascript"})),r=new Worker(n),l.revokeObjectURL(n),r);o.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},o.postMessage(this.frames)},{Video:e}}();t.Whammy=O;var E={init:function(){var e=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var t,i=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),n=indexedDB.open(i,1);n.onerror=e.onError,n.onsuccess=function(){((t=n.result).onerror=e.onError,t.setVersion)?1!==t.version?t.setVersion(1).onsuccess=function(){r(t),o()}:o():o()},n.onupgradeneeded=function(e){r(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function r(t){t.createObjectStore(e.dataStoreName)}function o(){var i=t.transaction([e.dataStoreName],"readwrite");function n(t){i.objectStore(e.dataStoreName).get(t).onsuccess=function(i){e.callback&&e.callback(i.target.result,t)}}e.videoBlob&&i.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&i.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&i.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),n("audioBlob"),n("videoBlob"),n("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function D(e,t){if("undefined"==typeof GIFEncoder){var n=document.createElement("script");n.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}t=t||{};var r=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&d?(r||(t.width||(t.width=l.offsetWidth||320),t.height||(t.height=l.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),a.width=t.canvas.width||320,a.height=t.canvas.height||240,l.width=t.video.width||320,l.height=t.video.height||240),(h=new GIFEncoder).setRepeat(0),h.setDelay(t.frameRate||200),h.setQuality(t.quality||10),h.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),p=s((function e(n){if(!0!==v.clearedRecordedData){if(o)return setTimeout((function(){e(n)}),100);p=s(e),void 0===i(f)&&(f=n),n-f<90||(!r&&l.paused&&l.play(),r||c.drawImage(l,0,0,a.width,a.height),t.onGifPreview&&t.onGifPreview(a.toDataURL("image/png")),h.addFrame(c),f=n)}})),t.initCallback&&t.initCallback()):setTimeout(v.record,1e3)},this.stop=function(e){e=e||function(){},p&&u(p),this.blob=new Blob([new Uint8Array(h.stream().bin)],{type:"image/gif"}),e(this.blob),h.stream().bin=[]};var o=!1;this.pause=function(){o=!0},this.resume=function(){o=!1},this.clearRecordedData=function(){v.clearedRecordedData=!0,h&&(h.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var a=document.createElement("canvas"),c=a.getContext("2d");r&&(e instanceof CanvasRenderingContext2D?a=(c=e).canvas:e instanceof HTMLCanvasElement&&(c=e.getContext("2d"),a=e));var d=!0;if(!r){var l=document.createElement("video");l.muted=!0,l.autoplay=!0,l.playsInline=!0,d=!1,l.onloadedmetadata=function(){d=!0},R(e,l),l.play()}var f,h,p=null,v=this}function j(e,t){t=t||"multi-streams-mixer";var i=[],n=!1,r=document.createElement("canvas"),o=r.getContext("2d");r.style.opacity=0,r.style.position="absolute",r.style.zIndex=-1,r.style.top="-1000em",r.style.left="-1000em",r.className=t,(document.body||document.documentElement).appendChild(r),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var a=this,s=window.AudioContext;void 0===s&&("undefined"!=typeof webkitAudioContext&&(s=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(s=mozAudioContext));var c=window.URL;void 0===c&&"undefined"!=typeof webkitURL&&(c=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var u=window.MediaStream;void 0===u&&"undefined"!=typeof webkitMediaStream&&(u=webkitMediaStream),void 0!==u&&void 0===u.prototype.stop&&(u.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var d={};function l(){if(!n){var e=i.length,t=!1,o=[];if(i.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:o.push(e)})),t)r.width=t.stream.width,r.height=t.stream.height;else if(o.length){r.width=e>1?2*o[0].width:o[0].width;var s=1;3!==e&&4!==e||(s=2),5!==e&&6!==e||(s=3),7!==e&&8!==e||(s=4),9!==e&&10!==e||(s=5),r.height=o[0].height*s}else r.width=a.width||360,r.height=a.height||240;t&&t instanceof HTMLVideoElement&&f(t),o.forEach((function(e,t){f(e,t)})),setTimeout(l,a.frameInterval)}}function f(e,t){if(!n){var i=0,r=0,a=e.width,s=e.height;1===t&&(i=e.width),2===t&&(r=e.height),3===t&&(i=e.width,r=e.height),4===t&&(r=2*e.height),5===t&&(i=e.width,r=2*e.height),6===t&&(r=3*e.height),7===t&&(i=e.width,r=3*e.height),void 0!==e.stream.left&&(i=e.stream.left),void 0!==e.stream.top&&(r=e.stream.top),void 0!==e.stream.width&&(a=e.stream.width),void 0!==e.stream.height&&(s=e.stream.height),o.drawImage(e,i,r,a,s),"function"==typeof e.stream.onRender&&e.stream.onRender(o,i,r,a,s,t)}}function h(e){var i=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,i),i.className=t,i.muted=!0,i.volume=0,i.width=e.width||a.width||360,i.height=e.height||a.height||240,i.play(),i}function p(t){i=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=h(e);t.stream=e,i.push(t)}}))}void 0!==s?d.AudioContext=s:"undefined"!=typeof webkitAudioContext&&(d.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){l()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var n=new u;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var r=h(t);r.stream=t,i.push(r),n.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var o=a.audioContext.createMediaStreamSource(t);a.audioDestination=a.audioContext.createMediaStreamDestination(),o.connect(a.audioDestination),n.addTrack(a.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(n)}))},this.releaseStreams=function(){i=[],n=!0,a.gainNode&&(a.gainNode.disconnect(),a.gainNode=null),a.audioSources.length&&(a.audioSources.forEach((function(e){e.disconnect()})),a.audioSources=[]),a.audioDestination&&(a.audioDestination.disconnect(),a.audioDestination=null),a.audioContext&&a.audioContext.close(),a.audioContext=null,o.clearRect(0,0,r.width,r.height),r.stream&&(r.stream.stop(),r.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),p(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){n=!1;var t=function(){var e;p(),"captureStream"in r?e=r.captureStream():"mozCaptureStream"in r?e=r.mozCaptureStream():a.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new u;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),r.stream=t,t}(),i=function(){d.AudioContextConstructor||(d.AudioContextConstructor=new d.AudioContext);a.audioContext=d.AudioContextConstructor,a.audioSources=[],!0===a.useGainNode&&(a.gainNode=a.audioContext.createGain(),a.gainNode.connect(a.audioContext.destination),a.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var i=a.audioContext.createMediaStreamSource(e);!0===a.useGainNode&&i.connect(a.gainNode),a.audioSources.push(i)}})),!t)return;return a.audioDestination=a.audioContext.createMediaStreamDestination(),a.audioSources.forEach((function(e){e.connect(a.audioDestination)})),a.audioDestination.stream}();return i&&i.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas})),t}}function L(e,t){e=e||[];var i,n,r=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var r;i=new j(e,t.elementClass||"multi-streams-mixer"),(r=[],e.forEach((function(e){A(e,"video").forEach((function(e){r.push(e)}))})),r).length&&(i.frameInterval=t.frameInterval||10,i.width=t.video.width||360,i.height=t.video.height||240,i.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(i.getMixedStream()),(n=new x(i.getMixedStream(),t)).record()},this.stop=function(e){n&&n.stop((function(t){r.blob=t,e(t),r.clearRecordedData()}))},this.pause=function(){n&&n.pause()},this.resume=function(){n&&n.resume()},this.clearRecordedData=function(){n&&(n.clearRecordedData(),n=null),i&&(i.releaseStreams(),i=null)},this.addStreams=function(r){if(!r)throw"First parameter is required.";r instanceof Array||(r=[r]),e.concat(r),n&&i&&(i.appendStreams(r),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(i.getMixedStream()))},this.resetVideoStreams=function(e){i&&(!e||e instanceof Array||(e=[e]),i.resetVideoStreams(e))},this.getMixer=function(){return i},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function B(e,t){var i,n,r;function o(){return new ReadableStream({start:function(n){var r=document.createElement("canvas"),o=document.createElement("video"),a=!0;o.srcObject=e,o.muted=!0,o.height=t.height,o.width=t.width,o.volume=0,o.onplaying=function(){r.width=t.width,r.height=t.height;var e=r.getContext("2d"),s=1e3/t.frameRate,c=setInterval((function(){if(i&&(clearInterval(c),n.close()),a&&(a=!1,t.onVideoProcessStarted&&t.onVideoProcessStarted()),e.drawImage(o,0,0),"closed"!==n._controlledReadableStream.state)try{n.enqueue(e.getImageData(0,0,t.width,t.height))}catch(e){}}),s)},o.play()}})}function a(e,c){if(!t.workerPath&&!c)return i=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){a(e,t)}))}));if(!t.workerPath&&c instanceof ArrayBuffer){var u=new Blob([c],{type:"text/javascript"});t.workerPath=l.createObjectURL(u)}t.workerPath||console.error("workerPath parameter is missing."),(n=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),n.addEventListener("message",(function(e){"READY"===e.data?(n.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),o().pipeTo(new WritableStream({write:function(e){i?console.error("Got image, but recorder is finished!"):n.postMessage(e.data.buffer,[e.data.buffer])}}))):e.data&&(r||s.push(e.data))}))}"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){s=[],r=!1,this.blob=null,a(e),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){r=!0},this.resume=function(){r=!1};var s=[];this.stop=function(e){i=!0;var t=this;!function(e){n?(n.addEventListener("message",(function(t){null===t.data&&(n.terminate(),n=null,e&&e())})),n.postMessage(null)):e&&e()}((function(){t.blob=new Blob(s,{type:"video/webm"}),e(t.blob)}))},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){s=[],r=!1,this.blob=null},this.blob=null}t.DiskStorage=E,t.GifRecorder=D,t.MultiStreamRecorder=L,t.RecordRTCPromisesHandler=function(e,i){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var n=this;n.recordRTC=new t(e,i),this.startRecording=function(){return new Promise((function(e,t){try{n.recordRTC.startRecording(),e()}catch(e){t(e)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{n.recordRTC.stopRecording((function(i){n.blob=n.recordRTC.getBlob(),n.blob&&n.blob.size?e(i):t("Empty blob.",n.blob)}))}catch(e){t(e)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{n.recordRTC.pauseRecording(),e()}catch(e){t(e)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{n.recordRTC.resumeRecording(),e()}catch(e){t(e)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{n.recordRTC.getDataURL((function(t){e(t)}))}catch(e){t(e)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(n.recordRTC.getBlob())}catch(e){t(e)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(n.recordRTC.getInternalRecorder())}catch(e){t(e)}}))},this.reset=function(){return new Promise((function(e,t){try{e(n.recordRTC.reset())}catch(e){t(e)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(n.recordRTC.destroy())}catch(e){t(e)}}))},this.getState=function(){return new Promise((function(e,t){try{e(n.recordRTC.getState())}catch(e){t(e)}}))},this.blob=null,this.version="5.6.2"},t.WebAssemblyRecorder=B})),E=f((function(e,t){var i;self,i=function(){return e={"./src/drawer.canvasentry.js":function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i("./src/util/style.js")),r=o(i("./src/util/get-id.js"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,r.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}var t,i,o;return t=e,(i=[{key:"initWave",value:function(e){this.wave=e,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(e){this.progress=e,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(e,t,i,r){this.start=this.wave.offsetLeft/t||0,this.end=this.start+e/t,this.wave.width=i,this.wave.height=r;var o={width:e+"px"};(0,n.default)(this.wave,o),this.hasProgressCanvas&&(this.progress.width=i,this.progress.height=r,(0,n.default)(this.progress,o))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(e,t){this.waveCtx.fillStyle=e,this.hasProgressCanvas&&(this.progressCtx.fillStyle=t)}},{key:"applyCanvasTransforms",value:function(e){e&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(e,t,i,n,r){this.fillRectToContext(this.waveCtx,e,t,i,n,r),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,e,t,i,n,r)}},{key:"fillRectToContext",value:function(e,t,i,n,r,o){e&&(o?this.drawRoundedRect(e,t,i,n,r,o):e.fillRect(t,i,n,r))}},{key:"drawRoundedRect",value:function(e,t,i,n,r,o){0!==r&&(r<0&&(i-=r*=-1),e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+n-o,i),e.quadraticCurveTo(t+n,i,t+n,i+o),e.lineTo(t+n,i+r-o),e.quadraticCurveTo(t+n,i+r,t+n-o,i+r),e.lineTo(t+o,i+r),e.quadraticCurveTo(t,i+r,t,i+r-o),e.lineTo(t,i+o),e.quadraticCurveTo(t,i,t+o,i),e.closePath(),e.fill())}},{key:"drawLines",value:function(e,t,i,n,r,o){this.drawLineToContext(this.waveCtx,e,t,i,n,r,o),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,e,t,i,n,r,o)}},{key:"drawLineToContext",value:function(e,t,i,n,r,o,a){if(e){var s,c,u,d=t.length/2,l=Math.round(d*this.start),f=l,h=Math.round(d*this.end)+1,p=this.wave.width/(h-f-1),v=n+r,m=i/n;for(e.beginPath(),e.moveTo((f-l)*p,v),e.lineTo((f-l)*p,v-Math.round((t[2*f]||0)/m)),s=f;s<h;s++)c=t[2*s]||0,u=Math.round(c/m),e.lineTo((s-l)*p+this.halfPixel,v-u);for(var g=h-1;g>=f;g--)c=t[2*g+1]||0,u=Math.round(c/m),e.lineTo((g-l)*p+this.halfPixel,v-u);e.lineTo((f-l)*p,v-Math.round((t[2*f+1]||0)/m)),e.closePath(),e.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(e,t,i){var n=this;return"blob"===i?new Promise((function(i){n.wave.toBlob(i,e,t)})):"dataURL"===i?this.wave.toDataURL(e,t):void 0}}])&&a(t.prototype,i),o&&a(t,o),e}();t.default=s,e.exports=t.default},"./src/drawer.js":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=d(e);if(t){var r=d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return u(this,i)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,i,n,o=c(u);function u(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=o.call(this)).container=r.withOrientation(e,t.vertical),i.params=t,i.width=0,i.height=t.height*i.params.pixelRatio,i.lastPos=0,i.wrapper=null,i}return t=u,(i=[{key:"style",value:function(e,t){return r.style(e,t)}},{key:"createWrapper",value:function(){this.wrapper=r.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(e,t){!t&&e.preventDefault();var i,n=r.withOrientation(e.targetTouches?e.targetTouches[0]:e,this.params.vertical).clientX,o=this.wrapper.getBoundingClientRect(),a=this.width,s=this.getWidth(),c=this.getProgressPixels(o,n);return i=!this.params.fillParent&&a<s?c*(this.params.pixelRatio/a)||0:(c+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,r.clamp(i,0,1)}},{key:"getProgressPixels",value:function(e,t){return this.params.rtl?e.right-t:t-e.left}},{key:"setupWrapperEvents",value:function(){var e=this;this.wrapper.addEventListener("click",(function(t){var i=r.withOrientation(t,e.params.vertical),n=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!==n){var o=e.wrapper.getBoundingClientRect();if(i.clientY>=o.bottom-n)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))})),this.wrapper.addEventListener("dblclick",(function(t){e.params.interact&&e.fireEvent("dblclick",t,e.handleEvent(t))})),this.wrapper.addEventListener("scroll",(function(t){return e.fireEvent("scroll",t)}))}},{key:"drawPeaks",value:function(e,t,i,n){this.setWidth(t)||this.clearWave(),this.params.barWidth?this.drawBars(e,0,i,n):this.drawWave(e,0,i,n)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)}},{key:"recenterOnPosition",value:function(e,t){var i=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),r=this.wrapper.scrollWidth-this.wrapper.clientWidth,o=e-n,a=o-i;if(0!=r){if(!t&&-n<=a&&a<n){var s=this.params.autoCenterRate;s/=n,s*=r,o=i+(a=Math.max(-s,Math.min(s,a)))}(o=Math.max(0,Math.min(r,o)))!=i&&(this.wrapper.scrollLeft=o)}}},{key:"getScrollX",value:function(){var e=0;if(this.wrapper){var t=this.params.pixelRatio;if(e=Math.round(this.wrapper.scrollLeft*t),this.params.scrollParent){var i=~~(this.wrapper.scrollWidth*t-this.getWidth());e=Math.min(i,Math.max(0,e))}}return e}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(e){if(this.width==e)return!1;if(this.width=e,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var t=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:t})}return this.updateSize(),!0}},{key:"setHeight",value:function(e){return e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(e){var t=1/this.params.pixelRatio,i=Math.round(e*this.width)*t;if(i<this.lastPos||i-this.lastPos>=t){if(this.lastPos=i,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n,this.params.autoCenterImmediately)}this.updateProgress(i)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(e,t,i,n){}},{key:"drawWave",value:function(e,t,i,n){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(e){}}])&&a(t.prototype,i),n&&a(t,n),u}(r.Observer);t.default=l,e.exports=t.default},"./src/drawer.multicanvas.js":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(i("./src/drawer.js")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=s(t);if(i&&i.has(e))return i.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(r,a,c):r[a]=e[a]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js")),a=c(i("./src/drawer.canvasentry.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=h(e);if(t){var r=h(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,i,n,r=l(s);function s(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(i=r.call(this,e,t)).maxCanvasWidth=t.maxCanvasWidth,i.maxCanvasElementWidth=Math.round(t.maxCanvasWidth/t.pixelRatio),i.hasProgressCanvas=t.waveColor!=t.progressColor,i.halfPixel=.5/t.pixelRatio,i.canvases=[],i.progressWave=null,i.EntryClass=a.default,i.canvasContextAttributes=t.drawingContextAttributes,i.overlap=2*Math.ceil(t.pixelRatio/2),i.barRadius=t.barRadius||0,i.vertical=t.vertical,i}return t=s,(i=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=o.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var e=this,t=Math.round(this.width/this.params.pixelRatio),i=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<i;)this.addCanvas();for(;this.canvases.length>i;)this.removeCanvas();var n=this.maxCanvasWidth+this.overlap,r=this.canvases.length-1;this.canvases.forEach((function(t,i){i==r&&(n=e.width-e.maxCanvasWidth*r),e.updateDimensions(t,n,e.height),t.clearWave()}))}},{key:"addCanvas",value:function(){var e=new this.EntryClass;e.canvasContextAttributes=this.canvasContextAttributes,e.hasProgressCanvas=this.hasProgressCanvas,e.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length,i=o.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(i,{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),e.initWave(i),this.hasProgressCanvas){var n=o.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(n,{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}),e.initProgress(n)}this.canvases.push(e)}},{key:"removeCanvas",value:function(){var e=this.canvases[this.canvases.length-1];e.wave.parentElement.removeChild(e.wave.domElement),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress.domElement),e&&(e.destroy(),e=null),this.canvases.pop()}},{key:"updateDimensions",value:function(e,t,i){var n=Math.round(t/this.params.pixelRatio),r=Math.round(this.width/this.params.pixelRatio);e.updateDimensions(n,r,t,i),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var e=this;o.frame((function(){e.canvases.forEach((function(e){return e.clearWave()}))}))()}},{key:"drawBars",value:function(e,t,i,n){var r=this;return this.prepareDraw(e,t,i,n,(function(e){var t=e.absmax,o=e.hasMinVals;e.height;var a=e.offsetY,s=e.halfH,c=e.peaks,u=e.channelIndex;if(void 0!==i)for(var d=o?2:1,l=c.length/d,f=r.params.barWidth*r.params.pixelRatio,h=f+(null===r.params.barGap?Math.max(r.params.pixelRatio,~~(f/2)):Math.max(r.params.pixelRatio,r.params.barGap*r.params.pixelRatio)),p=l/r.width,v=n,m=i;m<v;m+=h){var g=c[Math.floor(m*p*d)]||0,y=Math.round(g/t*s);0==y&&r.params.barMinHeight&&(y=r.params.barMinHeight),r.fillRect(m+r.halfPixel,s-y+a,f+r.halfPixel,2*y,r.barRadius,u)}}))}},{key:"drawWave",value:function(e,t,i,n){var r=this;return this.prepareDraw(e,t,i,n,(function(e){var t=e.absmax,o=e.hasMinVals;e.height;var a=e.offsetY,s=e.halfH,c=e.peaks,u=e.channelIndex;if(!o){for(var d=[],l=c.length,f=0;f<l;f++)d[2*f]=c[f],d[2*f+1]=-c[f];c=d}void 0!==i&&r.drawLine(c,t,s,a,i,n,u),r.fillRect(0,s+a-r.halfPixel,r.width,r.halfPixel,r.barRadius,u)}))}},{key:"drawLine",value:function(e,t,i,n,r,o,a){var s=this,c=this.params.splitChannelsOptions.channelColors[a]||{},u=c.waveColor,d=c.progressColor;this.canvases.forEach((function(a,c){s.setFillStyles(a,u,d),s.applyCanvasTransforms(a,s.params.vertical),a.drawLines(e,t,i,n,r,o)}))}},{key:"fillRect",value:function(e,t,i,n,r,o){for(var a=Math.floor(e/this.maxCanvasWidth),s=Math.min(Math.ceil((e+i)/this.maxCanvasWidth)+1,this.canvases.length),c=a;c<s;c++){var u=this.canvases[c],d=c*this.maxCanvasWidth,l={x1:Math.max(e,c*this.maxCanvasWidth),y1:t,x2:Math.min(e+i,c*this.maxCanvasWidth+u.wave.width),y2:t+n};if(l.x1<l.x2){var f=this.params.splitChannelsOptions.channelColors[o]||{},h=f.waveColor,p=f.progressColor;this.setFillStyles(u,h,p),this.applyCanvasTransforms(u,this.params.vertical),u.fillRects(l.x1-d,l.y1,l.x2-l.x1,l.y2-l.y1,r)}}}},{key:"hideChannel",value:function(e){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(e)}},{key:"prepareDraw",value:function(e,t,i,n,r,a,s){var c=this;return o.frame((function(){if(e[0]instanceof Array){var u=e;if(c.params.splitChannels){var d,l=u.filter((function(e,t){return!c.hideChannel(t)}));return c.params.splitChannelsOptions.overlay||c.setHeight(Math.max(l.length,1)*c.params.height*c.params.pixelRatio),c.params.splitChannelsOptions&&c.params.splitChannelsOptions.relativeNormalization&&(d=o.max(u.map((function(e){return o.absMax(e)})))),u.forEach((function(e,t){return c.prepareDraw(e,t,i,n,r,l.indexOf(e),d)}))}e=u[0]}if(!c.hideChannel(t)){var f=1/c.params.barHeight;c.params.normalize&&(f=void 0===s?o.absMax(e):s);var h=[].some.call(e,(function(e){return e<0})),p=c.params.height*c.params.pixelRatio,v=p/2,m=p*a||0;return c.params.splitChannelsOptions&&c.params.splitChannelsOptions.overlay&&(m=0),r({absmax:f,hasMinVals:h,height:p,offsetY:m,halfH:v,peaks:e,channelIndex:t})}}))()}},{key:"setFillStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;e.setFillStyles(t,i)}},{key:"applyCanvasTransforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.applyCanvasTransforms(t)}},{key:"getImage",value:function(e,t,i){if("blob"===i)return Promise.all(this.canvases.map((function(n){return n.getImage(e,t,i)})));if("dataURL"===i){var n=this.canvases.map((function(n){return n.getImage(e,t,i)}));return n.length>1?n:n[0]}}},{key:"updateProgress",value:function(e){this.style(this.progressWave,{width:e+"px"})}}])&&u(t.prototype,i),n&&u(t,n),s}(r.default);t.default=p,e.exports=t.default},"./src/mediaelement-webaudio.js":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=d(e);if(t){var r=d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return u(this,i)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,i,n,r=c(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=r.call(this,e)).params=e,t.sourceMediaElement=null,t}return t=u,(i=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(e,t,i){a(d(u.prototype),"_load",this).call(this,e,t,i),this.createMediaElementSource(e)}},{key:"createMediaElementSource",value:function(e){this.sourceMediaElement=this.ac.createMediaElementSource(e),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(e,t){return this.resumeAudioContext(),a(d(u.prototype),"play",this).call(this,e,t)}},{key:"destroy",value:function(){a(d(u.prototype),"destroy",this).call(this),this.destroyWebAudio()}}])&&o(t.prototype,i),n&&o(t,n),u}(((r=i("./src/mediaelement.js"))&&r.__esModule?r:{default:r}).default);t.default=l,e.exports=t.default},"./src/mediaelement.js":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=i("./src/webaudio.js"))&&r.__esModule?r:{default:r},a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=s(t);if(i&&i.has(e))return i.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(r,a,c):r[a]=e[a]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=h(e);if(t){var r=h(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,i,n,r=l(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).params=e,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=e.mediaType.toLowerCase(),t.elementPosition=e.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return t=o,(i=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var e=this;this.mediaListeners.error=function(){e.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){e.fireEvent("canplay")},this.mediaListeners.ended=function(){e.fireEvent("finish")},this.mediaListeners.play=function(){e.fireEvent("play")},this.mediaListeners.pause=function(){e.fireEvent("pause")},this.mediaListeners.seeked=function(t){e.fireEvent("seek")},this.mediaListeners.volumechange=function(t){e.isMuted=e.media.muted,e.isMuted?e.volume=0:e.volume=e.media.volume,e.fireEvent("volume")},Object.keys(this.mediaListeners).forEach((function(t){e.media.removeEventListener(t,e.mediaListeners[t]),e.media.addEventListener(t,e.mediaListeners[t])}))}},{key:"createTimer",value:function(){var e=this;this.on("play",(function t(){e.isPaused()||(e.fireEvent("audioprocess",e.getCurrentTime()),a.frame(t)())})),this.on("pause",(function(){e.fireEvent("audioprocess",e.getCurrentTime())}))}},{key:"load",value:function(e,t,i,n){var r=document.createElement(this.mediaType);r.controls=this.params.mediaControls,r.autoplay=this.params.autoplay||!1,r.preload=null==n?"auto":n,r.src=e,r.style.width="100%";var o=t.querySelector(this.mediaType);o&&t.removeChild(o),t.appendChild(r),this._load(r,i,n)}},{key:"loadElt",value:function(e,t){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,t,e.preload)}},{key:"_load",value:function(e,t,i){if(!(e instanceof HTMLMediaElement)||void 0===e.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof e.load||t&&"none"==i||e.load(),this.media=e,this._setupMediaListeners(),this.peaks=t,this.onPlayEnd=null,this.buffer=null,this.isMuted=e.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()}},{key:"play",value:function(e,t){this.seekTo(e);var i=this.media.play();return t&&this.setPlayEnd(t),i}},{key:"pause",value:function(){var e;return this.media&&(e=this.media.pause()),this.clearPlayEnd(),e}},{key:"setPlayEnd",value:function(e){var t=this;this.clearPlayEnd(),this._onPlayEnd=function(i){i>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(e,t,i){return this.buffer?u(h(o.prototype),"getPeaks",this).call(this,e,t,i):this.peaks||[]}},{key:"setSinkId",value:function(e){return e?this.media.setSinkId?this.media.setSinkId(e):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.volume=e,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(e){this.isMuted=this.media.muted=e}},{key:"destroy",value:function(){var e=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach((function(t){e.media&&e.media.removeEventListener(t,e.mediaListeners[t])})),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&c(t.prototype,i),n&&c(t,n),o}(o.default);t.default=p,e.exports=t.default},"./src/peakcache.js":function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearPeakCache()}var t,n,r;return t=e,(n=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(e,t,i){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var n=[],r=0;r<this.peakCacheRanges.length&&this.peakCacheRanges[r]<t;)r++;for(r%2==0&&n.push(t);r<this.peakCacheRanges.length&&this.peakCacheRanges[r]<=i;)n.push(this.peakCacheRanges[r]),r++;r%2==0&&n.push(i),n=n.filter((function(e,t,i){return 0==t?e!=i[t+1]:t==i.length-1?e!=i[t-1]:e!=i[t-1]&&e!=i[t+1]})),this.peakCacheRanges=this.peakCacheRanges.concat(n),this.peakCacheRanges=this.peakCacheRanges.sort((function(e,t){return e-t})).filter((function(e,t,i){return 0==t?e!=i[t+1]:t==i.length-1?e!=i[t-1]:e!=i[t-1]&&e!=i[t+1]}));var o=[];for(r=0;r<n.length;r+=2)o.push([n[r],n[r+1]]);return o}},{key:"getCacheRanges",value:function(){var e,t=[];for(e=0;e<this.peakCacheRanges.length;e+=2)t.push([this.peakCacheRanges[e],this.peakCacheRanges[e+1]]);return t}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=n,e.exports=t.default},"./src/util/absMax.js":function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.default)(e),i=(0,r.default)(e);return-i>t?-i:t};var n=o(i("./src/util/max.js")),r=o(i("./src/util/min.js"));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},"./src/util/clamp.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){return Math.min(Math.max(t,e),i)},e.exports=t.default},"./src/util/fetch.js":function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new Error("fetch options missing");if(!e.url)throw new Error("fetch url missing");var t=new r.default,i=new Headers,n=new Request(e.url);t.controller=new AbortController,e&&e.requestHeaders&&e.requestHeaders.forEach((function(e){i.append(e.key,e.value)}));var o=e.responseType||"json",s={method:e.method||"GET",headers:i,mode:e.mode||"cors",credentials:e.credentials||"same-origin",cache:e.cache||"default",redirect:e.redirect||"follow",referrer:e.referrer||"client",signal:t.controller.signal};return fetch(n,s).then((function(e){t.response=e;var i=!0;e.body||(i=!1);var n=e.headers.get("content-length");return null===n&&(i=!1),i?(t.onProgress=function(e){t.fireEvent("progress",e)},new Response(new ReadableStream(new a(t,n,e)),s)):e})).then((function(e){var t;if(e.ok)switch(o){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:t="Unknown responseType: "+o}throw t||(t="HTTP error status: "+e.status),new Error(t)})).then((function(e){t.fireEvent("success",e)})).catch((function(e){t.fireEvent("error",e)})),t.fetchRequest=n,t};var n,r=(n=i("./src/util/observer.js"))&&n.__esModule?n:{default:n};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.instance._reader=n.body.getReader(),this.total=parseInt(i,10),this.loaded=0}var t,i,n;return t=e,(i=[{key:"start",value:function(e){var t=this;!function i(){t.instance._reader.read().then((function(n){var r=n.done,o=n.value;if(r)return 0===t.total&&t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!1}),void e.close();t.loaded+=o.byteLength,t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!(0===t.total)}),e.enqueue(o),i()})).catch((function(t){e.error(t)}))}()}}])&&o(t.prototype,i),n&&o(t,n),e}();e.exports=t.default},"./src/util/frame.js":function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(0,r.default)((function(){return e.apply(void 0,i)}))}};var n,r=(n=i("./src/util/request-animation-frame.js"))&&n.__esModule?n:{default:n};e.exports=t.default},"./src/util/get-id.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e="wavesurfer_"),e+Math.random().toString(32).substring(2)},e.exports=t.default},"./src/util/index.js":function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getId",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"absMax",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"style",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"frame",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"preventClick",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"withOrientation",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"ignoreSilenceMode",{enumerable:!0,get:function(){return m.default}});var n=g(i("./src/util/get-id.js")),r=g(i("./src/util/max.js")),o=g(i("./src/util/min.js")),a=g(i("./src/util/absMax.js")),s=g(i("./src/util/observer.js")),c=g(i("./src/util/style.js")),u=g(i("./src/util/request-animation-frame.js")),d=g(i("./src/util/frame.js")),l=g(i("./node_modules/debounce/index.js")),f=g(i("./src/util/prevent-click.js")),h=g(i("./src/util/fetch.js")),p=g(i("./src/util/clamp.js")),v=g(i("./src/util/orientation.js")),m=g(i("./src/util/silence-mode.js"));function g(e){return e&&e.__esModule?e:{default:e}}},"./src/util/max.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=-1/0;return Object.keys(e).forEach((function(i){e[i]>t&&(t=e[i])})),t},e.exports=t.default},"./src/util/min.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Number(1/0);return Object.keys(e).forEach((function(i){e[i]<t&&(t=e[i])})),t},e.exports=t.default},"./src/util/observer.js":function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disabledEventEmissions=[],this.handlers=null}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t){var i=this;this.handlers||(this.handlers={});var n=this.handlers[e];return n||(n=this.handlers[e]=[]),n.push(t),{name:e,callback:t,un:function(e,t){return i.un(e,t)}}}},{key:"un",value:function(e,t){if(this.handlers){var i,n=this.handlers[e];if(n)if(t)for(i=n.length-1;i>=0;i--)n[i]==t&&n.splice(i,1);else n.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(e,t){var i=this;return this.on(e,(function n(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];t.apply(i,o),setTimeout((function(){i.un(e,n)}),0)}))}},{key:"setDisabledEventEmissions",value:function(e){this._disabledEventEmissions=e}},{key:"_isDisabledEventEmission",value:function(e){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(e)}},{key:"fireEvent",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(this.handlers&&!this._isDisabledEventEmission(e)){var r=this.handlers[e];r&&r.forEach((function(e){e.apply(void 0,i)}))}}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=n,e.exports=t.default},"./src/util/orientation.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,i){return t[r]?t:new Proxy(t,{get:function(t,o,a){if(o===r)return!0;if("domElement"===o)return t;if("style"===o)return e(t.style,i);if("canvas"===o)return e(t.canvas,i);if("getBoundingClientRect"===o)return function(){return e(t.getBoundingClientRect.apply(t,arguments),i)};if("getContext"===o)return function(){return e(t.getContext.apply(t,arguments),i)};var s=t[n(o,i)];return"function"==typeof s?s.bind(t):s},set:function(e,t,r){return e[n(t,i)]=r,!0}})};var i={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function n(e,t){return Object.prototype.hasOwnProperty.call(i,e)&&t?i[e]:e}var r=Symbol("isProxy");e.exports=t.default},"./src/util/prevent-click.js":function(e,t){function i(e){e.stopPropagation(),document.body.removeEventListener("click",i,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){document.body.addEventListener("click",i,!0)},e.exports=t.default},"./src/util/request-animation-frame.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window);t.default=i,e.exports=t.default},"./src/util/silence-mode.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.createElement("div");e.innerHTML='<audio x-webkit-airplay="deny"></audio>';var t=e.children.item(0);t.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",t.preload="auto",t.type="audio/mpeg",t.disableRemotePlayback=!0,t.play(),t.remove(),e.remove()},e.exports=t.default},"./src/util/style.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.keys(t).forEach((function(i){e.style[i]!==t[i]&&(e.style[i]=t[i])})),e},e.exports=t.default},"./src/wavesurfer.js":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=l(t);if(i&&i.has(e))return i.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js")),o=d(i("./src/drawer.multicanvas.js")),a=d(i("./src/webaudio.js")),s=d(i("./src/mediaelement.js")),c=d(i("./src/peakcache.js")),u=d(i("./src/mediaelement-webaudio.js"));function d(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(l=function(e){return e?i:t})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p(this,i)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,i,n,d=h(l);function l(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=d.call(this)).defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:o.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},vertical:!1,waveColor:"#999",xhr:{}},t.backends={MediaElement:s.default,WebAudio:a.default,MediaElementWebAudio:u.default},t.util=r,t.params=Object.assign({},t.defaultParams,e),t.params.splitChannelsOptions=Object.assign({},t.defaultParams.splitChannelsOptions,e.splitChannelsOptions),t.container="string"==typeof e.container?document.querySelector(t.params.container):t.params.container,!t.container)throw new Error("Container element not found");if(null==t.params.mediaContainer?t.mediaContainer=t.container:"string"==typeof t.params.mediaContainer?t.mediaContainer=document.querySelector(t.params.mediaContainer):t.mediaContainer=t.params.mediaContainer,!t.mediaContainer)throw new Error("Media Container element not found");if(t.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(t.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===t.params.rtl&&(!0===t.params.vertical?r.style(t.container,{transform:"rotateX(180deg)"}):r.style(t.container,{transform:"rotateY(180deg)"})),t.params.backgroundColor&&t.setBackgroundColor(t.params.backgroundColor),t.savedVolume=0,t.isMuted=!1,t.tmpEvents=[],t.currentRequest=null,t.arraybuffer=null,t.drawer=null,t.backend=null,t.peakCache=null,"function"!=typeof t.params.renderer)throw new Error("Renderer parameter is invalid");t.Drawer=t.params.renderer,"AudioElement"==t.params.backend&&(t.params.backend="MediaElement"),"WebAudio"!=t.params.backend&&"MediaElementWebAudio"!==t.params.backend||a.default.prototype.supportsWebAudio.call(null)||(t.params.backend="MediaElement"),t.Backend=t.backends[t.params.backend],t.initialisedPluginList={},t.isDestroyed=!1,t.isReady=!1;var i=0;return t._onResize=r.debounce((function(){i==t.drawer.wrapper.clientWidth||t.params.scrollParent||(i=t.drawer.wrapper.clientWidth,t.drawer.fireEvent("redraw"))}),"number"==typeof t.params.responsive?t.params.responsive:100),p(t,v(t))}return t=l,n=[{key:"create",value:function(e){return new l(e).init()}}],(i=[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var t=this;return e.forEach((function(e){return t.addPlugin(e)})),e.forEach((function(e){e.deferInit||t.initPlugin(e.name)})),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var t=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach((function(i){t[i]=e.staticProps[i]}));var i=e.instance;return Object.getOwnPropertyNames(r.Observer.prototype).forEach((function(e){i.prototype[e]=r.Observer.prototype[e]})),this[e.name]=new i(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if("function"!=typeof this[e].destroy)throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach((function(t){return e.destroyPlugin(t)}))}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",(function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())})),this.drawer.on("click",(function(t,i){setTimeout((function(){return e.seekTo(i)}),0)})),this.drawer.on("scroll",(function(t){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",t)}))}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",(function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")})),this.backend.on("play",(function(){return e.fireEvent("play")})),this.backend.on("pause",(function(){return e.fireEvent("pause")})),this.backend.on("audioprocess",(function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",t)})),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",(function(){e.drawer.progress(e.backend.getPlayedPercents())})),this.backend.on("volume",(function(){var t=e.getVolume();e.fireEvent("volume",t),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))})))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new c.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,t){var i=this;return this.params.ignoreSilenceMode&&r.ignoreSilenceMode(),this.fireEvent("interaction",(function(){return i.play(e,t)})),this.backend.play(e,t)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var t=this.getDuration()||1,i=this.getCurrentTime()||0;i=Math.max(0,Math.min(t,i+(e||0))),this.seekAndCenter(i/t)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var t=this;if("number"!=typeof e||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",(function(){return t.seekTo(e)}));var i="WebAudio"===this.params.backend,n=this.backend.isPaused();i&&!n&&this.backend.pause();var r=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),i&&!n&&this.backend.play(),this.params.scrollParent=r,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){e!==this.isMuted?(this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(e){this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(e){this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,r.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e,t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),i=this.drawer.getWidth(),n=t,r=0,o=Math.max(r+i,n);if(this.params.fillParent&&(!this.params.scrollParent||t<i)&&(r=0,o=n=i),this.params.partialRender){var a,s=this.peakCache.addRangeToPeakCache(n,r,o);for(a=0;a<s.length;a++)e=this.backend.getPeaks(n,s[a][0],s[a][1]),this.drawer.drawPeaks(e,n,s[a][0],s[a][1])}else e=this.backend.getPeaks(n,r,o),this.drawer.drawPeaks(e,n,r,o);this.fireEvent("redraw",e,n)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var t=this;this.decodeArrayBuffer(e,(function(e){t.isDestroyed||t.loadDecodedBuffer(e)}))}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var t=this,i=new FileReader;i.addEventListener("progress",(function(e){return t.onProgress(e)})),i.addEventListener("load",(function(e){return t.loadArrayBuffer(e.target.result)})),i.addEventListener("error",(function(){return t.fireEvent("error","Error reading file")})),i.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,t,i,n){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),i){var r={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(i),"Peaks are not provided":!t,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},o=Object.keys(r).filter((function(e){return r[e]}));o.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+o.join("\n\t- ")),i=null)}switch("WebAudio"===this.params.backend&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,t,n);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,t,i,n)}}},{key:"loadBuffer",value:function(e,t,i){var n=this,r=function(t){return t&&n.tmpEvents.push(n.once("ready",t)),n.getArrayBuffer(e,(function(e){return n.loadArrayBuffer(e)}))};if(!t)return r();this.backend.setPeaks(t,i),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",r))}},{key:"loadMediaElement",value:function(e,t,i,n){var r=this,o=e;if("string"==typeof e)this.backend.load(o,this.mediaContainer,t,i);else{var a=e;this.backend.loadElt(a,t),o=a.src}this.tmpEvents.push(this.backend.once("canplay",(function(){r.backend.destroyed||(r.drawBuffer(),r.isReady=!0,r.fireEvent("ready"))})),this.backend.once("error",(function(e){return r.fireEvent("error",e)}))),t&&(this.backend.setPeaks(t,n),this.drawBuffer(),this.fireEvent("waveform-ready")),t&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(o,(function(e){r.decodeArrayBuffer(e,(function(e){r.backend.buffer=e,r.backend.setPeaks(null),r.drawBuffer(),r.fireEvent("waveform-ready")}))}))}},{key:"decodeArrayBuffer",value:function(e,t){var i=this;this.isDestroyed||(this.arraybuffer=e,this.backend.decodeArrayBuffer(e,(function(n){i.isDestroyed||i.arraybuffer!=e||(t(n),i.arraybuffer=null)}),(function(){return i.fireEvent("error","Error decoding audiobuffer")})))}},{key:"getArrayBuffer",value:function(e,t){var i=this,n=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),o=r.fetchFile(n);return this.currentRequest=o,this.tmpEvents.push(o.on("progress",(function(e){i.onProgress(e)})),o.on("success",(function(e){t(e),i.currentRequest=null})),o.on("error",(function(e){i.fireEvent("error",e),i.currentRequest=null}))),o}},{key:"onProgress",value:function(e){var t;t=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*t),e.target)}},{key:"exportPCM",value:function(e,t,i,n,r){e=e||1024,n=n||0,t=t||1e4,i=i||!1;var o=this.backend.getPeaks(e,n,r),a=[].map.call(o,(function(e){return Math.round(e*t)/t}));return new Promise((function(e,t){if(!i){var n=new Blob([JSON.stringify(a)],{type:"application/json;charset=utf-8"}),r=URL.createObjectURL(n);window.open(r),URL.revokeObjectURL(r)}e(a)}))}},{key:"exportImage",value:function(e,t,i){return e||(e="image/png"),t||(t=1),i||(i="dataURL"),this.drawer.getImage(e,t,i)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch((function(e){})),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach((function(e){return e.un()}))}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}])&&g(t.prototype,i),n&&g(t,n),l}(r.Observer);t.default=y,y.VERSION="5.2.0",y.util=r,e.exports=t.default},"./src/webaudio.js":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=l(e);if(t){var r=l(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d(this,i)}}function d(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f="playing",h="paused",p="finished",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,i,n,r=u(o);function o(e){var t,i,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this)).audioContext=null,n.offlineAudioContext=null,n.stateBehaviors=(a(t={},f,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),a(t,h,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),a(t,p,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),t),n.params=e,n.ac=e.audioContext||(n.supportsWebAudio()?n.getAudioContext():{}),n.lastPlay=n.ac.currentTime,n.startPosition=0,n.scheduledPause=null,n.states=(a(i={},f,Object.create(n.stateBehaviors.playing)),a(i,h,Object.create(n.stateBehaviors.paused)),a(i,p,Object.create(n.stateBehaviors.finished)),i),n.buffer=null,n.filters=[],n.gainNode=null,n.mergedPeaks=null,n.offlineAc=null,n.peaks=null,n.playbackRate=1,n.analyser=null,n.scriptNode=null,n.source=null,n.splitPeaks=[],n.state=null,n.explicitDuration=e.duration,n.destroyed=!1,n}return t=o,(i=[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(e){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(h),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach((function(e){e&&e.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.setFilters(t)}},{key:"setFilters",value:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce((function(e,t){return e.connect(t),t}),this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(o.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(o.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(p),e.fireEvent("pause")):t>=e.scheduledPause?e.pause():e.state===e.states.playing&&e.fireEvent("audioprocess",t)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(e){if(e){var t=new window.Audio;if(!t.setSinkId)return Promise.reject(new Error("setSinkId is not supported in your browser"));t.autoplay=!0;var i=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(i),t.srcObject=i.stream,t.setSinkId(e)}return Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"setVolume",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(e,t,i){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(e,(function(e){return t(e)}),i):this.offlineAc.decodeAudioData(e).then((function(e){return t(e)})).catch((function(e){return i(e)}))}},{key:"setPeaks",value:function(e,t){null!=t&&(this.explicitDuration=t),this.peaks=e}},{key:"setLength",value:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var t,i=this.buffer?this.buffer.numberOfChannels:1;for(t=0;t<i;t++)this.splitPeaks[t]=[],this.splitPeaks[t][2*(e-1)]=0,this.splitPeaks[t][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}}},{key:"getPeaks",value:function(e,t,i){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(t=t||0,i=i||e-1,this.setLength(e),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var n=this.createBuffer(1,4096,this.sampleRate);this.buffer=n.buffer}var r,o=this.buffer.length/e,a=~~(o/10)||1,s=this.buffer.numberOfChannels;for(r=0;r<s;r++){var c=this.splitPeaks[r],u=this.buffer.getChannelData(r),d=void 0;for(d=t;d<=i;d++){var l=~~(d*o),f=~~(l+o),h=u[l],p=h,v=void 0;for(v=l;v<f;v+=a){var m=u[v];m>p&&(p=m),m<h&&(h=m)}c[2*d]=p,c[2*d+1]=h,(0==r||p>this.mergedPeaks[2*d])&&(this.mergedPeaks[2*d]=p),(0==r||h<this.mergedPeaks[2*d+1])&&(this.mergedPeaks[2*d+1]=h)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states.playing}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(e,t){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states.finished&&this.setState(h),{start:e,end:t}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(e,t){if(this.buffer){this.createSource();var i=this.seekTo(e,t);e=i.start,t=i.end,this.scheduledPause=t,this.source.start(0,e),this.resumeAudioContext(),this.setState(f),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch(e){}this.setState(h),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(e){this.scheduledPause=e}}])&&s(t.prototype,i),n&&s(t,n),o}(r.Observer);t.default=v,v.scriptBufferSize=256,e.exports=t.default},"./node_modules/debounce/index.js":function(e){function t(e,t,i){var n,r,o,a,s;function c(){var u=Date.now()-a;u<t&&u>=0?n=setTimeout(c,t-u):(n=null,i||(s=e.apply(o,r),o=r=null))}null==t&&(t=100);var u=function(){o=this,r=arguments,a=Date.now();var u=i&&!n;return n||(n=setTimeout(c,t)),u&&(s=e.apply(o,r),o=r=null),s};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(s=e.apply(o,r),o=r=null,clearTimeout(n),n=null)},u}t.debounce=t,e.exports=t}},t={},function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}("./src/wavesurfer.js");var e,t},e.exports=i()})),D=f((function(e,t){self,e.exports=function(){var e={872:function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t,this.wavesurfer=i,this.active=!1,this.paused=!1,this.browser=this.detectBrowser(),this.reloadBufferFunction=function(e){return n.reloadBuffer(e)},void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e,t,i){var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return n?new Promise((function(t,i){n.call(navigator,e,t,i)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),this.constraints=this.params.constraints||{video:!1,audio:!0},this.bufferSize=this.params.bufferSize||4096,this.numberOfInputChannels=this.params.numberOfInputChannels||1,this.numberOfOutputChannels=this.params.numberOfOutputChannels||1,this._onBackendCreated=function(){n.micContext=n.wavesurfer.backend.getAudioContext()}}var t,n,r;return t=e,r=[{key:"create",value:function(t){return{name:"microphone",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,instance:e}}}],(n=[{key:"init",value:function(){this.wavesurfer.on("backend-created",this._onBackendCreated),this.wavesurfer.backend&&this._onBackendCreated()}},{key:"destroy",value:function(){this.paused=!0,this.wavesurfer.un("backend-created",this._onBackendCreated),this.stop()}},{key:"start",value:function(){var e=this;navigator.mediaDevices.getUserMedia(this.constraints).then((function(t){return e.gotStream(t)})).catch((function(t){return e.deviceError(t)}))}},{key:"togglePlay",value:function(){this.active?(this.paused=!this.paused,this.paused?this.pause():this.play()):this.start()}},{key:"play",value:function(){this.paused=!1,this.connect()}},{key:"pause",value:function(){this.paused=!0,this.disconnect()}},{key:"stop",value:function(){this.active&&(this.stopDevice(),this.wavesurfer.empty())}},{key:"stopDevice",value:function(){this.active=!1,this.disconnect(),this.stream&&this.stream.getTracks&&this.stream.getTracks().forEach((function(e){return e.stop()}))}},{key:"connect",value:function(){void 0!==this.stream&&("edge"===this.browser.browser&&(this.localAudioBuffer=this.micContext.createBuffer(this.numberOfInputChannels,this.bufferSize,this.micContext.sampleRate)),this.mediaStreamSource=this.micContext.createMediaStreamSource(this.stream),this.levelChecker=this.micContext.createScriptProcessor(this.bufferSize,this.numberOfInputChannels,this.numberOfOutputChannels),this.mediaStreamSource.connect(this.levelChecker),this.levelChecker.connect(this.micContext.destination),this.levelChecker.onaudioprocess=this.reloadBufferFunction)}},{key:"disconnect",value:function(){void 0!==this.mediaStreamSource&&this.mediaStreamSource.disconnect(),void 0!==this.levelChecker&&(this.levelChecker.disconnect(),this.levelChecker.onaudioprocess=void 0),void 0!==this.localAudioBuffer&&(this.localAudioBuffer=void 0)}},{key:"reloadBuffer",value:function(e){if(!this.paused)if(this.wavesurfer.empty(),"edge"===this.browser.browser){var t,i;for(t=0,i=Math.min(this.localAudioBuffer.numberOfChannels,e.inputBuffer.numberOfChannels);t<i;t++)this.localAudioBuffer.getChannelData(t).set(e.inputBuffer.getChannelData(t));this.wavesurfer.loadDecodedBuffer(this.localAudioBuffer)}else this.wavesurfer.loadDecodedBuffer(e.inputBuffer)}},{key:"gotStream",value:function(e){this.stream=e,this.active=!0,this.play(),this.fireEvent("deviceReady",e)}},{key:"deviceError",value:function(e){this.fireEvent("deviceError",e)}},{key:"extractVersion",value:function(e,t,i){var n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}},{key:"detectBrowser",value:function(){var e={browser:null,version:null,minVersion:null};return"undefined"!=typeof window&&window.navigator?navigator.mozGetUserMedia?(e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/(\d+)\./,1),e.minVersion=31,e):navigator.webkitGetUserMedia?(e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2),e.minVersion=38,e):navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),e.minVersion=10547,e):window.RTCPeerConnection&&navigator.userAgent.match(/AppleWebKit\/(\d+)\./)?(e.browser="safari",e.minVersion=11,e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/(\d+)\./,1),e):(e.browser="Not a supported browser.",e):(e.browser="Not a supported browser.",e)}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=n,e.exports=t.default}},t={};return function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}(872)}()})),e("YpMediaRecorder",j=function(e){r(p,e);var t,i,f,h=n(p);function p(){var e;return c(this,p),(e=h.apply(this,arguments)).audioRecording=!1,e.videoRecording=!1,e.maxLength=5,e.recordingFinished=!1,e.isRecording=!1,e.rememberDevice=!1,e.previewActive=!1,e.recordSecondsLeft=0,e.videoAspect="portrait",e.selectedAudioDeviceId=null,e.selectedVideoDeviceId=null,e}return s(p,[{key:"render",value:function(){var e=this;return m(A||(A=u(['\n      <mwc-dialog id="dialog" modal ?audioRecording="','">\n        <div class="layout vertical no-padding mainContainer">\n          ',"\n          ",'\n\n          <div\n            class="layout horizontal mainbuttons" slot="primaryAction"\n            >\n            <mwc-icon-button\n              .label="','"\n              icon="clear"\n              class="iconButtons"\n              @click="','"></mwc-icon-button>\n              <div class="layout layout horizontal" ?hidden="','">\n                <mwc-icon-button\n                .label="','"\n                icon="delete"\n                class="iconButtons"\n                @click="','"\n                ?hidden="','"></mwc-icon-button>\n                <mwc-button\n                  @click="','"\n                  class="buttonText"\n                  .label="','"\n                  ?hidden="','"\n                  icon="fiber_manual_record">\n                  <iron-icon id="recordingIcon"></iron-icon>\n                </mwc-button>\n                <div id="secondsLeft" ?hidden="','">\n                  '," ",'\n                </div>\n                <mwc-button\n                  @click="','"\n                  class="buttonText"\n                  .label="','"\n                  ?hidden="','"\n                  icon="stop">\n                </mwc-button>\n              </div>\n            <span ?hidden="','">\n              <div class="layout horizontal">\n                <mwc-button\n                  id="uploadFileButton"\n                  icon="file-upload"\n                  class="uploadFileButton"\n                  .label="','"\n                  @click="','"\n                  ?hidden="','">\n                  <div class="buttonText uploadFileText"></div>\n                </mwc-button>\n                <mwc-formfield label="landscape">\n                  <mwc-radio\n                    name="videoAspect"\n                    @change="','"\n                    value="landscape">\n                  </mwc-radio>\n                </mwc-formfield>\n                <mwc-formfield label="portrait">\n                  <mwc-radio\n                    name="videoAspect"\n                    @change="','"\n                    value="portrait">\n                  </mwc-radio>\n                </mwc-formfield>\n\n              </div>\n            </span>\n            <mwc-button\n              @click="','"\n              class="buttonText actionButton"\n              .label="','"\n              ?hidden="','"\n              icon="send">\n            </mwc-button>\n          </div>\n        </div>\n        <div ?hidden="','">\n          ',"\n        </div>\n      </mwc-dialog>\n      ",'\n      <mwc-dialog id="noDevices">\n        <h2>','</h2>\n        <div class="button layout horizontal center-center">\n          <mwc-button\n            slot="action"\n            raised\n            .label="','"></mwc-button>\n        </div>\n      </mwc-dialog>\n    '])),this.audioRecording,this.videoRecording?m(R||(R=u(['\n                <video\n                  id="videoRecorder"\n                  class="videoRecorder"\n                  ?hidden="','"></video>\n                <video\n                  id="videoPreviewer"\n                  preload="auto"\n                  class="videoRecorder"\n                  ?hidden="','"></video>\n              '])),this.previewActive,!this.previewActive):m(C||(C=u([""]))),this.audioRecording?m(P||(P=u(['\n                <div class="layout vertical center-center">\n                  <div class="layout horizontal center-center header">\n                    ','\n                  </div>\n                  <div\n                    id="waveform"\n                    ?hidden="','"></div>\n                  <audio\n                    id="audioRecorder"\n                    class="audioRecorder"\n                    ?hidden></audio>\n                  <audio\n                    id="audioPreviewer"\n                    controls\n                    preload="auto"\n                    class="audioRecorder"\n                    ?hidden="','"></audio>\n                </div>\n              '])),this.t("voiceRecorder"),null!=this.recordedData,!this.previewActive):m(x||(x=u([""]))),this.t("closeRecordingWindow"),this._close,!this.recorder,this.t("deleteRecordedMedia"),this._deleteRecording,!this.recordedData,this._startRecording,this.t("record"),null!=this.recordedData,null!=this.recordedData,this.recordSecondsLeft,this.t("seconds"),this._stopRecording,this.t("stop"),!this.isRecording,this.isRecording||this.audioRecording,this.t("uploadFile"),this._uploadFile,null!=this.recordedData,this._setVideoAspect,this._setVideoAspect,this._sendBack,this.t("send"),!this.recordedData,!this.error,this.error,this.allDevices?m(S||(S=u(['\n            <mwc-dialog id="selectDevices" modal>\n              <h2>','</h2>\n              <mwc-select id="deviceListBox">\n                ','\n              </mwc-select>\n              <div class="layout horizontal rememberBox">\n                <div>\n                  ','\n                </div>\n                <input id="checkBox" type="checkbox" />\n              </div>\n            </mwc-dialog>\n          '])),this.selectDeviceTitle,this.allDevices.map((function(t){return m(M||(M=u(['\n                    <mwc-list-item\n                      @click="','"\n                      id="','"\n                      >',"</mwc-list-item\n                    >\n                  "])),e.selectDeviceFunction,t.deviceId,t.label)})),this.t("rememberDevice")):g,this.t("noDevicesFound"),this.t("ok"))}},{key:"_setVideoAspect",value:function(e){this.videoAspect=e.target.value}},{key:"_selectAudioDevice",value:function(e){var t=e.target;t.id&&(this.selectedAudioDeviceId=t.id),this.$$("#checkBox").checked&&localStorage.setItem("selectedAudioDeviceId",this.selectedAudioDeviceId),this.$$("#selectDevices").open=!1,this._openMediaSession(this.captureCallback)}},{key:"_selectVideoDevice",value:function(e){e.target.id&&(this.selectedVideoDeviceId=e.target.id),this.$$("#checkBox").checked&&localStorage.setItem("selectedVideoDeviceId",this.selectedVideoDeviceId),this.$$("#selectDevices").open=!1,this._checkAudioDevices()}},{key:"_checkAudioDevices",value:(f=d(l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.audioDevices&&this.audioDevices.length>1)){e.next=15;break}if(!localStorage.getItem("selectedAudioDeviceId")){e.next=6;break}this.selectedAudioDeviceId=localStorage.getItem("selectedAudioDeviceId"),this._openMediaSession(this.captureCallback),e.next=13;break;case 6:return this.selectDeviceTitle=this.t("selectAudioDevice"),this.selectDeviceFunction=this._selectAudioDevice.bind(this),this.allDevices=this.audioDevices,e.next=11,this.updateComplete;case 11:this.$$("#checkBox").checked=!1,this.$$("#selectDevices").open=!0;case 13:e.next=16;break;case 15:this._openMediaSession(this.captureCallback);case 16:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"_checkVideoDevices",value:(i=d(l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.videoRecording&&this.videoDevices&&this.videoDevices.length>1)){e.next=17;break}if(!localStorage.getItem("selectedVideoDeviceId")){e.next=7;break}return this.selectedVideoDeviceId=localStorage.getItem("selectedVideoDeviceId"),e.next=5,this._checkAudioDevices();case 5:e.next=15;break;case 7:return this.selectDeviceTitle=this.t("selectVideoDevice"),this.rememberDevice=!1,this.selectDeviceFunction=this._selectVideoDevice.bind(this),this.allDevices=this.videoDevices,e.next=13,this.updateComplete;case 13:this.$$("#checkBox").checked=!1,this.$$("#selectDevices").open=!0;case 15:e.next=19;break;case 17:return e.next=19,this._checkAudioDevices();case 19:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_close",value:function(){this.mediaStream&&this.mediaStream.getTracks().forEach((function(e){e.stop()})),this.surfer&&(this.surfer.microphone.stop(),this.surfer.destroy()),this.previewActive=!1,this.$$("#dialog").open=!1}},{key:"_uploadFile",value:function(){this._close(),this.uploadFileFunction(this.videoAspect)}},{key:"_sendBack",value:function(){this.callbackFunction&&this.recorder?(this.callbackFunction(this.recordedData),this.recordedData=void 0,this.recorder.clearRecordedData(),this.recorder.reset(),this.recorder=void 0,this._close()):console.error("No callback function for media player")}},{key:"checkDevices",value:function(){var e=this;navigator.mediaDevices.enumerateDevices().then((function(t){e.audioDevices=t.filter((function(e){return"audioinput"===e.kind})),e.videoDevices=t.filter((function(e){return"videoinput"===e.kind}));var i=!1;e.videoDevices.forEach((function(e){e.label&&""!=e.label&&(i=!0)})),i||(e.videoDevices=void 0,e.audioDevices=void 0),e._checkVideoDevices()}))}},{key:"connectedCallback",value:function(){a(o(p.prototype),"connectedCallback",this).call(this),window.innerHeight>window.innerWidth?this.videoAspect="portrait":this.videoAspect="landscape"}},{key:"captureUserMedia",value:function(e){this.captureCallback=e,this.checkDevices()}},{key:"_openMediaSession",value:function(e){if(e){this.selectedVideoDeviceId&&(this.videoSettings.deviceId=this.selectedVideoDeviceId);var t={audio:!this.selectedAudioDeviceId||{deviceId:this.selectedAudioDeviceId},video:this.videoRecording?this.videoSettings:void 0};navigator.mediaDevices.getUserMedia(t).then((function(t){t.getTracks().forEach((function(e){console.info(e.getCapabilities())})),e(t)})).catch((function(t){console.error(t),e(null)}))}}},{key:"open",value:(t=d(l.mark((function e(t){var i,n,r,o,a,s=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.callbackFunction=t.callbackFunction,this.recordingFinished=!1,this.error=void 0,this.audioRecording=!1,this.videoRecording=!1,t.videoRecording?this.videoRecording=!0:t.audioRecording&&(this.audioRecording=!0),this.maxLength=t.maxLength,this.uploadFileFunction=t.uploadFileFunction,this.$$("#secondsLeft").className="",e.next=11,this.requestUpdate();case 11:this.videoRecording?(i=this.shadowRoot.querySelector("#videoRecorder"),n=this.shadowRoot.querySelector("#videoPreviewer"),window.innerHeight>window.innerWidth?(this.videoSettings={width:720,height:1280},o=Math.min(1280,Math.abs(window.innerHeight)).toFixed(),r=Math.min(720,Math.abs(.5625*parseInt(o))).toFixed(),console.info("Portrait - width: "+r+" height: "+o+" video width: 720 height: 1280")):(this.videoSettings={width:1280,height:720},a=.8,window.innerHeight<700&&(a=.7),window.innerHeight<500&&(a=.6),o=Math.min(720,Math.abs(window.innerHeight*a)).toFixed(),r=Math.min(1280,Math.abs(1.77777777778*parseInt(o))).toFixed(),console.info("Landscape - width: "+r+" height: "+o)),i.style.height=o+"px",i.style.width=r+"px",n.style.height=(.8*parseInt(o)).toFixed()+"px",n.style.width=(.8*parseInt(r)).toFixed()+"px",setTimeout((function(){s.$$("#dialog").open=!0}))):this.audioRecording&&setTimeout((function(){s.$$("#dialog").open=!0})),this.setupRecorders();case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_generateRandomString",value:function(){if(window.crypto){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),t="",i=0,n=e.length;i<n;i++)t+=e[i].toString(36);return t}return(Math.random()*(new Date).getTime()).toString(36).replace(/\./g,"")}},{key:"_startRecording",value:function(){this.isRecording?this._stopRecording():(this.recorder.startRecording(),this.recordSecondsLeft=this.maxLength,this.isRecording=!0,this.$$("#recordingIcon").className="recording",this._recordingTimer())}},{key:"_stopRecording",value:function(){this.$$("#recordingIcon").className="",this.isRecording=!1,this.recorder.stopRecording(this._storeRecordedData.bind(this)),this.$$("#secondsLeft").className=""}},{key:"_deleteRecording",value:function(){this.recorder.reset(),this.previewActive=!1,this.recordedData=void 0,this.recordSecondsLeft=this.maxLength,this.$$("#secondsLeft").className="",this.$$("#recordingIcon").className=""}},{key:"_storeRecordedData",value:function(){var e,t=this.recorder.getBlob();if(this.videoRecording){var i=this.shadowRoot.querySelector("#videoRecorder"),n=this.shadowRoot.querySelector("#videoPreviewer");e=this._generateRandomString()+".webm",this.recordedData=new File([t],e,{type:"video/webm"}),i.controls=!0,this.recorder.reset(),n.src=window.URL.createObjectURL(this.recordedData),n.controls=!0,this.previewActive=!0}else if(this.audioRecording){var r=this.shadowRoot.querySelector("#audioRecorder"),o=this.shadowRoot.querySelector("#audioPreviewer");e=this._generateRandomString()+".mp3",this.recordedData=new File([t],e,{type:"audio/mp3"}),r.controls=!0,r.pause(),o.src=window.URL.createObjectURL(this.recordedData),o.controls=!0,this.previewActive=!0}}},{key:"_recordingTimer",value:function(){var e=this;this.isRecording?setTimeout((function(){e.isRecording&&(e.recordSecondsLeft>0?e._recordingTimer():e._stopRecording(),e.recordSecondsLeft>0&&(e.recordSecondsLeft-=1),e.recordSecondsLeft<=5&&(e.$$("#secondsLeft").className="recordingTime"))}),1e3):console.error("_recordingTimer called without in recording mode")}},{key:"setupRecorders",value:function(){var e=this;if(this.recordSecondsLeft=this.maxLength,this.videoRecording){var t=this.shadowRoot.querySelector("#videoRecorder");this.captureUserMedia((function(i){if(i){e.mediaStream=i;try{t.srcObject=i}catch(e){console.error(e),t.src=window.URL.createObjectURL(i)}t.play(),t.muted=!0,t.controls=!1,e.recorder=new O(i,{type:"video"})}else console.error("Can't find stream"),e.$$("#noDevices").open=!0,e.$$("#uploadFileButton").style.color="#F00"}))}else if(this.audioRecording){var i=this.shadowRoot.querySelector("#audioRecorder");this.captureUserMedia((function(t){if(t){e.mediaStream=t;try{i.srcObject=t}catch(e){console.error(e),i.src=window.URL.createObjectURL(t)}i.play(),i.muted=!0,i.controls=!1,e.surfer=E.create({container:e.$$("#waveform"),waveColor:"#ff3d00",progressColor:"#ff3d00",cursorWidth:0,plugins:[D.create({stream:e.mediaStream})]}),e.surfer.microphone.play(),e.recorder=new O(t,{type:"audio"})}else console.error("Can't find stream"),e.$$("#noDevices").open=!0,e.$$("#uploadFileButton").style.color="#F00"}))}setTimeout((function(){}))}}],[{key:"styles",get:function(){return[a(o(p),"styles",this),v(T||(T=u(["\n        mwc-dialog {\n          background-color: #fff;\n        }\n\n        #dialog[audio-recording] {\n          width: 430px;\n        }\n\n        .mainbuttons {\n          width: 100%;\n          margin-top: 8px;\n          margin-bottom: 8px;\n        }\n\n        .recording {\n          color: #f00;\n          animation-name: pulse;\n          animation-duration: 1.3s;\n          animation-iteration-count: infinite;\n          animation-timing-function: linear;\n        }\n\n        .recordingTime {\n          color: #f00;\n          animation-name: pulse;\n          animation-duration: 1s;\n          animation-iteration-count: infinite;\n          animation-timing-function: linear;\n        }\n\n        @keyframes pulse {\n          from {\n            opacity: 1;\n          }\n          to {\n            opacity: 0.5;\n          }\n        }\n\n        .buttonText {\n          margin-left: 6px;\n        }\n\n        .actionButton {\n          color: var(--accent-color);\n        }\n\n        .iconButtons {\n          margin-top: 2px;\n        }\n\n        #secondsLeft {\n          margin-top: 12px;\n          margin-left: 4px;\n          margin-right: 4px;\n        }\n\n        .mainContainer {\n          padding: 0 24px;\n        }\n\n        @media (max-width: 640px) {\n          #dialog {\n            padding: 0;\n            margin: 0;\n          }\n          .mainContainer {\n            padding: 0 0;\n          }\n\n          .mainbuttons {\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            background-color: rgba(240, 240, 240, 0.5);\n          }\n\n          #dialog {\n            min-height: 242px;\n            min-width: 320px;\n            width: 100%;\n          }\n        }\n\n        @media (max-width: 360px) {\n          .uploadFileText {\n            display: none;\n          }\n        }\n\n        .rememberBox {\n          margin-top: 8px;\n        }\n\n        #checkBox {\n          margin-left: 6px;\n        }\n\n        .header {\n          font-weight: bold;\n          font-size: 18px;\n          margin-bottom: 10px;\n        }\n\n        #waveform {\n          height: 128px;\n        }\n\n        [hidden] {\n          display:none !important;\n        }\n      "])))]}}]),p}(p)),y([b({type:Object})],j.prototype,"recorder",void 0),y([b({type:Object})],j.prototype,"mediaStream",void 0),y([b({type:Object})],j.prototype,"captureStream",void 0),y([b({type:Boolean})],j.prototype,"audioRecording",void 0),y([b({type:Boolean})],j.prototype,"videoRecording",void 0),y([b({type:Number})],j.prototype,"maxLength",void 0),y([b({type:Object})],j.prototype,"recordedData",void 0),y([b({type:Boolean})],j.prototype,"recordingFinished",void 0),y([b({type:Boolean})],j.prototype,"isRecording",void 0),y([b({type:Boolean})],j.prototype,"rememberDevice",void 0),y([b({type:Boolean})],j.prototype,"previewActive",void 0),y([b({type:Object})],j.prototype,"callbackFunction",void 0),y([b({type:Object})],j.prototype,"captureCallback",void 0),y([b({type:Object})],j.prototype,"uploadFileFunction",void 0),y([b({type:Object})],j.prototype,"selectDeviceFunction",void 0),y([b({type:String})],j.prototype,"error",void 0),y([b({type:String})],j.prototype,"selectDeviceTitle",void 0),y([b({type:Number})],j.prototype,"recordSecondsLeft",void 0),y([b({type:Array})],j.prototype,"audioDevices",void 0),y([b({type:Array})],j.prototype,"videoDevices",void 0),y([b({type:Array})],j.prototype,"allDevices",void 0),y([b({type:Object})],j.prototype,"videoOptions",void 0),y([b({type:Object})],j.prototype,"surfer",void 0),y([w()],j.prototype,"videoAspect",void 0),e("YpMediaRecorder",j=y([k("yp-media-recorder")],j))}}}));
