System.register(["./nomodule-df367cf3.js","./nomodule-8c24b123.js","./nomodule-34ffe015.js","./nomodule-a2795b44.js"],(function(t,n){var e,i,o,s,a,r,c,l,d,p,h,u,m,y,g,v,f,b,x,w,k,_,C,T,I,P,A,z,L,S,N,G,E,O,R,D,F,B,U,M,V,$,H,j,q,Q,W,J,Z,K,Y,X,tt,nt,et,it,ot,st,at,rt,ct,lt,dt,pt,ht,ut,mt,yt,gt,vt,ft,bt,xt,wt,kt,_t,Ct,Tt,It,Pt,At,zt,Lt,St,Nt,Gt,Et,Ot,Rt,Dt,Ft,Bt,Ut,Mt,Vt,$t,Ht,jt,qt,Qt,Wt,Jt,Zt,Kt,Yt,Xt,tn,nn,en,on,sn,an,rn,cn,ln,dn,pn,hn,un,mn,yn,gn,vn,fn,bn,xn,wn,kn,_n,Cn,Tn,In,Pn,An,zn,Ln,Sn,Nn,Gn,En,On,Rn,Dn,Fn,Bn,Un,Mn,Vn,$n,Hn,jn,qn,Qn,Wn,Jn,Zn,Kn,Yn,Xn,te,ne,ee,ie,oe,se,ae,re,ce,le,de,pe,he,ue,me,ye,ge,ve,fe,be,xe,we,ke,_e,Ce,Te,Ie,Pe,Ae,ze,Le,Se,Ne,Ge,Ee,Oe,Re,De,Fe,Be,Ue,Me,Ve,$e,He,je,qe,Qe,We,Je,Ze,Ke,Ye,Xe,ti,ni,ei,ii,oi,si,ai,ri,ci,li,di,pi,hi,ui,mi,yi,gi,vi,fi,bi,xi,wi,ki,_i,Ci,Ti;function Ii(t,n,e,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(n,e,a):o(n,e))||a);return s>3&&a&&Object.defineProperty(n,e,a),a}function Pi(){return Ai.apply(this,arguments)}function Ai(){return(Ai=l(d.mark((function t(){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",li||zi());case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zi(){return Li.apply(this,arguments)}function Li(){return(Li=l(d.mark((function t(){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ci){t.next=6;break}return t.next=3,ci;case 3:return t.abrupt("return",t.sent.default);case 6:ci=window.ResizeObserver,t.prev=7,new ci((function(){})),t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(7),ci=n.import("./nomodule-ca2a8fa5.js"),t.next=16,ci;case 16:ci=t.sent.default;case 17:return t.abrupt("return",li=ci);case 18:case"end":return t.stop()}}),t,null,[[7,11]])})))).apply(this,arguments)}function Si(t){var n=t?parseFloat(t):NaN;return Number.isNaN(n)?0:n}function Ni(t){if(null!==t.parentElement)return t.parentElement;var n=t.parentNode;return n&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&n.host||null}function Gi(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=[],i=n?t:Ni(t);null!==i;)e.push(i),i=Ni(i);return e}function Ei(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Gi(t,n).filter((function(t){return"visible"!==getComputedStyle(t).overflow}))}return{setters:[function(t){e=t.createSuper,i=t.inherits,o=t.getPrototypeOf,s=t.get,a=t.createClass,r=t.classCallCheck,c=t.taggedTemplateLiteral,l=t.asyncToGenerator,d=t.regeneratorRuntime,p=t.objectSpread2,h=t.typeof,u=t.possibleConstructorReturn,m=t.createForOfIteratorHelper,y=t.slicedToArray,g=t.wrapNativeSuper,v=t.assertThisInitialized},function(t){f=t._,b=t.e,x=t.n,w=t.a,k=t.r,_=t.C,C=t.p,T=t.h,I=t.t,P=t.j,A=t.s,z=t.R,L=t.o,S=t.T,N=t.k,G=t.S,E=t.q,O=t.l,R=t.d,D=t.u,F=t.v,B=t.m,U=t.w,M=t.x,V=t.y,$=t.z,H=t.A,j=t.B,q=t.D,Q=t.E,W=t.F,J=t.G},function(t){Z=t.Y,K=t.a,Y=t.G,X=t.F},function(t){}],execute:function(){Ge=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"canvasSize",get:function(){return this.wide?135:190}},{key:"firstUpdated",value:function(t){s(o(l.prototype),"firstUpdated",this).call(this,t),this._drawCharts()}},{key:"formatAmount",value:function(t){return"$".concat(t,"m")}},{key:"_drawCharts",value:function(){var t=this.group.configuration.dataForVisualizationJson;this._drawChart("#overallTarget",t.overallTargetPercent,this.t("overall"),t.overallColor?t.overallColor:"#5bac51"),this._drawChart("#overallActual",t.overallActualPercent,this.t("actual"),t.overallColor?t.overallColor:"#5bac51"),this._drawChart("#yearTarget",t.yearTargetPercent,this.t("overall"),t.yearColor?t.yearColor:"#004f77"),this._drawChart("#yearActual",t.yearActualPercent,this.t("actual"),t.yearColor?t.yearColor:"#004f77")}},{key:"_drawChart",value:function(t,n,e,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];new _(this.$$(t).getContext("2d"),{type:"doughnut",data:{labels:[e,e],datasets:[{data:[n,n-100],borderColor:[o?"transparent":"#FFF",o?"transparent":"#FFF"],backgroundColor:[i,o?"transparent":"rgb(220,220,220)"]}]},options:{tooltips:!1,legend:{display:!1},toolstips:{callbacks:{label:function(t){return t.yLabel}}}}})}},{key:"render",value:function(){var t=this.group.configuration.dataForVisualizationJson;return C(tt||(tt=c(['\n      <div class="layout vertical center-center">\n        <div\n          class="layout vertical stage shadow-elevation-2dp center-center"\n          ?small-screen="','"\n          ?small="','"\n          ?not-small="','"\n        >\n          <div class="layout vertical" ?hidden="','">\n            <yp-magic-text\n              id="groupName"\n              class="groupName"\n              ?small-screen="','"\n              text-type="groupName"\n              .contentLanguage="','"\n              .disableTanslation="','"\n              textOnly\n              .content="','"\n              .contentId="','"\n            >\n            </yp-magic-text>\n          </div>\n          <div class="topHeader firstTopHeader" ?hidden="','">\n            ','\n          </div>\n          <div class="layout horizontal center-center">\n            <div>\n              <div\n                id="breakdownWrap"\n                class="wrapper"\n                ?small-screen="','"\n                ?small="','"\n              >\n                <div\n                  class="text"\n                  ?small-screen="','"\n                  ?small="','"\n                >\n                  ','%\n                </div>\n                <canvas\n                  id="overallTarget"\n                  width="','"\n                  height="','"\n                ></canvas>\n              </div>\n              <div\n                class="layout vertical targetText"\n                ?small-screen="','"\n                ?small="','"\n              >\n                ',":\n                ",'\n              </div>\n            </div>\n            <div>\n              <div\n                id="breakdownWrapTwo"\n                class="wrapper"\n                ?small-screen="','"\n                ?small="','"\n              >\n                <div\n                  class="text"\n                  ?small-screen="','"\n                  ?small="','"\n                >\n                  ','%\n                </div>\n                <canvas\n                  id="overallActual"\n                  width="','"\n                  height="','"\n                ></canvas>\n              </div>\n              <div\n                class="layout vertical targetText"\n                ?small-screen="','"\n                ?small="','"\n              >\n                ',":\n                ",'\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class="layout vertical stage shadow-elevation-2dp center-center"\n          ?small-screen="','"\n          ?small="','"\n          ?not-small="','"\n        >\n          <div class="layout vertical topHeader">','</div>\n          <div class="layout horizontal center-center">\n            <div>\n              <div\n                id="breakdownWrapA"\n                class="wrapper"\n                ?small-screen="','"\n                ?small="','"\n              >\n                <div\n                  class="text"\n                  ?small-screen="','"\n                  ?small="','"\n                >\n                  ','%\n                </div>\n                <canvas\n                  id="yearTarget"\n                  width="','"\n                  height="','"\n                ></canvas>\n              </div>\n              <div\n                class="layout vertical targetText"\n                ?small-screen="','"\n                ?small="','"\n              >\n                ',": ",'\n              </div>\n            </div>\n            <div>\n              <div\n                id="breakdownWrapTwoA"\n                class="wrapper"\n                ?small-screen="','"\n                ?small="','"\n              >\n                <div\n                  class="text"\n                  ?small-screen="','"\n                  ?small="','"\n                >\n                  ','%\n                </div>\n                <canvas\n                  id="yearActual"\n                  width="','"\n                  height="','"\n                ></canvas>\n              </div>\n              <div\n                class="layout vertical targetText"\n                ?small-screen="','"\n                ?small="','"\n              >\n                ',": ","\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    "])),!this.wide,!this.wide,this.wide,!this.wide,!this.wide,this.group.language,this.group.configuration.disableNameAutoTranslation,this.group.name,this.group.id,!this.wide,this.t("overall"),!this.wide,!this.wide,!this.wide,!this.wide,t.overallTargetPercent,this.canvasSize,this.canvasSize,!this.wide,!this.wide,this.t("target"),this.formatAmount(t.overallTargetAmount),!this.wide,!this.wide,!this.wide,!this.wide,t.overallActualPercent,this.canvasSize,this.canvasSize,!this.wide,!this.wide,this.t("actual"),this.formatAmount(t.overallActualAmount),!this.wide,!this.wide,this.wide,t.currentYear,!this.wide,!this.wide,!this.wide,!this.wide,t.yearTargetPercent,this.canvasSize,this.canvasSize,!this.wide,!this.wide,this.t("target"),this.formatAmount(t.yearTargetAmount),!this.wide,!this.wide,!this.wide,!this.wide,t.yearActualPercent,this.canvasSize,this.canvasSize,!this.wide,!this.wide,this.t("actual"),this.formatAmount(t.yearActualAmount))}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(nt||(nt=c(["\n        :host {\n          margin-top: 16px;\n        }\n\n        canvas {\n        }\n\n        .wrapper {\n          position: relative;\n          display: inline-block;\n          margin-left: 16px;\n          margin-right: 16px;\n        }\n\n        .wrapper[small] {\n          padding: 0;\n          margin-left: 14px;\n          margin-right: 14px;\n        }\n\n        .wrapper[small-screen] {\n          padding: 0;\n          margin-left: 14px;\n          margin-right: 14px;\n        }\n\n        .text {\n          position: absolute;\n          text-align: center;\n          width: 100%;\n          line-height: 190px;\n          font-size: 28px;\n          color: #000;\n        }\n\n        .text[small] {\n          line-height: 135px;\n          font-size: 20px;\n        }\n\n        .text[small-screen] {\n          line-height: 135px;\n          font-size: 20px;\n        }\n\n        canvas {\n          position: relative;\n          z-index: 1;\n        }\n\n        .header {\n          font-size: 28px;\n          margin-bottom: 8px;\n          margin-top: 16px;\n        }\n\n        .groupName {\n          font-size: 28px;\n          margin: 8px;\n          padding: 8px;\n          color: #222;\n          margin-top: 0;\n          padding-top: 0;\n        }\n\n        .groupName[small-screen] {\n          font-size: 20px;\n          margin-bottom: 16px;\n        }\n\n        .topHeader {\n          font-size: 22px;\n          margin: 8px;\n          margin-top: 0;\n          color: #111;\n        }\n\n        .firstTopHeader {\n          color: #333;\n        }\n\n        .targetText {\n          margin-top: 8px;\n          margin-bottom: 8px;\n          font-size: 22px;\n          text-align: center;\n          color: #111;\n        }\n\n        .targetText[small] {\n          font-size: 18px;\n        }\n\n        .targetText[small-screen] {\n          font-size: 18px;\n        }\n\n        .stage[not-small] {\n          box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\n            0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);\n        }\n\n        .stage {\n          background-color: #fefefe;\n          padding: 16px;\n          padding-top: 24px;\n          width: 520px;\n          margin: 16px;\n          margin-bottom: 8px;\n        }\n\n        .stage[small] {\n          width: 400px;\n          margin: 0;\n          padding: 8px;\n          padding-top: 32px;\n          padding-bottom: 16px;\n        }\n\n        .stage[small-screen] {\n          width: 300px;\n          padding: 8px;\n          padding-top: 32px;\n          padding-bottom: 16px;\n        }\n\n        .stageTop {\n          background-color: #fefefe;\n          padding: 16px;\n          width: 520px;\n          margin: 16px;\n          margin-bottom: 8px;\n          padding-top: 8px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      "])))]}}]),l}(w),f([b({type:Object})],Ge.prototype,"group",void 0),Ge=f([x("yp-data-visualization")],Ge),(Ee=function(t){i(o,t);var n=e(o);function o(){var t;return r(this,o),(t=n.apply(this,arguments)).mini=!1,t.exited=!1,t.disabled=!1,t.extended=!1,t.showIconAtEnd=!1,t.reducedTouchTarget=!1,t.icon="",t.label="",t.shouldRenderRipple=!1,t.useStateLayerCustomProperties=!1,t.rippleHandlers=new z((function(){return t.shouldRenderRipple=!0,t.ripple})),t}return a(o,[{key:"render",value:function(){var t=this.mini&&!this.reducedTouchTarget,n={"mdc-fab--mini":this.mini,"mdc-fab--touch":t,"mdc-fab--exited":this.exited,"mdc-fab--extended":this.extended,"icon-end":this.showIconAtEnd},e=this.label?this.label:this.icon;return C(et||(et=c(['<button\n          class="mdc-fab ','"\n          ?disabled="','"\n          aria-label="','"\n          @mouseenter=',"\n          @mouseleave=","\n          @focus=","\n          @blur=","\n          @mousedown=","\n          @touchstart=","\n          @touchend=","\n          @touchcancel=",">\x3c!--\n        --\x3e","\x3c!--\n        --\x3e","\x3c!--\n        --\x3e",'\x3c!--\n        --\x3e<span class="material-icons mdc-fab__icon">\x3c!--\n          --\x3e<slot name="icon">',"</slot>\x3c!--\n       --\x3e</span>\x3c!--\n        --\x3e","\x3c!--\n        --\x3e","\x3c!--\n      --\x3e</button>"])),L(n),this.disabled,e,this.handleRippleMouseEnter,this.handleRippleMouseLeave,this.handleRippleFocus,this.handleRippleBlur,this.handleRippleActivate,this.handleRippleStartPress,this.handleRippleDeactivate,this.handleRippleDeactivate,this.renderBeforeRipple(),this.renderRipple(),this.showIconAtEnd?this.renderLabel():"",this.icon,this.showIconAtEnd?"":this.renderLabel(),this.renderTouchTarget())}},{key:"renderIcon",value:function(){return C(it||(it=c([""])))}},{key:"renderTouchTarget",value:function(){var t=this.mini&&!this.reducedTouchTarget;return C(ot||(ot=c(["",""])),t?C(st||(st=c(['<div class="mdc-fab__touch"></div>']))):"")}},{key:"renderLabel",value:function(){var t=""!==this.label&&this.extended;return C(at||(at=c(["",""])),t?C(rt||(rt=c(['<span class="mdc-fab__label">',"</span>"])),this.label):"")}},{key:"renderBeforeRipple",value:function(){return C(ct||(ct=c([""])))}},{key:"renderRipple",value:function(){return this.shouldRenderRipple?C(lt||(lt=c(['<mwc-ripple class="ripple"\n        .internalUseStateLayerCustomProperties="','"\n         ></mwc-ripple>'])),this.useStateLayerCustomProperties):""}},{key:"handleRippleActivate",value:function(t){var n=this;window.addEventListener("mouseup",(function t(){window.removeEventListener("mouseup",t),n.handleRippleDeactivate()})),this.handleRippleStartPress(t)}},{key:"handleRippleStartPress",value:function(t){this.rippleHandlers.startPress(t)}},{key:"handleRippleDeactivate",value:function(){this.rippleHandlers.endPress()}},{key:"handleRippleMouseEnter",value:function(){this.rippleHandlers.startHover()}},{key:"handleRippleMouseLeave",value:function(){this.rippleHandlers.endHover()}},{key:"handleRippleFocus",value:function(){this.rippleHandlers.startFocus()}},{key:"handleRippleBlur",value:function(){this.rippleHandlers.endFocus()}}]),o}(A)).shadowRootOptions={mode:"open",delegatesFocus:!0},f([T("mwc-ripple")],Ee.prototype,"ripple",void 0),f([b({type:Boolean})],Ee.prototype,"mini",void 0),f([b({type:Boolean})],Ee.prototype,"exited",void 0),f([b({type:Boolean})],Ee.prototype,"disabled",void 0),f([b({type:Boolean})],Ee.prototype,"extended",void 0),f([b({type:Boolean})],Ee.prototype,"showIconAtEnd",void 0),f([b({type:Boolean})],Ee.prototype,"reducedTouchTarget",void 0),f([b()],Ee.prototype,"icon",void 0),f([b()],Ee.prototype,"label",void 0),f([I()],Ee.prototype,"shouldRenderRipple",void 0),f([I()],Ee.prototype,"useStateLayerCustomProperties",void 0),f([P({passive:!0})],Ee.prototype,"handleRippleStartPress",null),Oe=k(dt||(dt=c([':host .mdc-fab .material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:normal;font-style:normal;font-size:var(--mdc-icon-size, 24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}:host{outline:none;--mdc-ripple-color: currentcolor;user-select:none;-webkit-tap-highlight-color:transparent;display:inline-flex;-webkit-tap-highlight-color:transparent;display:inline-flex;outline:none;user-select:none}:host .mdc-touch-target-wrapper{display:inline}:host .mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:0;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:#fff;background-color:var(--mdc-elevation-overlay-color, #fff)}:host .mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}:host .mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}:host .mdc-fab::-moz-focus-inner{padding:0;border:0}:host .mdc-fab:hover{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}:host .mdc-fab.mdc-ripple-upgraded--background-focused,:host .mdc-fab:not(.mdc-ripple-upgraded):focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}:host .mdc-fab:active,:host .mdc-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0,0,0,.12)}:host .mdc-fab:active,:host .mdc-fab:focus{outline:none}:host .mdc-fab:hover{cursor:pointer}:host .mdc-fab>svg{width:100%}:host .mdc-fab--mini{width:40px;height:40px}:host .mdc-fab--extended{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-button-font-size, 0.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height, 2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight, 500);letter-spacing:0.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing, 0.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration, none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform, uppercase);border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}:host .mdc-fab--extended .mdc-fab__ripple{border-radius:24px}:host .mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] :host .mdc-fab--extended .mdc-fab__icon,:host .mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}:host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] :host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,:host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}:host .mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}:host .mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}:host .mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}:host .mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}:host .mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}:host .mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}:host .mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab{background-color:#018786;background-color:var(--mdc-theme-secondary, #018786);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0,0,0,.12)}:host .mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}:host .mdc-fab,:host .mdc-fab:not(:disabled) .mdc-fab__icon,:host .mdc-fab:not(:disabled) .mdc-fab__label,:host .mdc-fab:disabled .mdc-fab__icon,:host .mdc-fab:disabled .mdc-fab__label{color:#fff;color:var(--mdc-theme-on-secondary, #fff)}:host .mdc-fab:not(.mdc-fab--extended){border-radius:50%}:host .mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}:host .mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}:host .mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}:host .mdc-fab::-moz-focus-inner{padding:0;border:0}:host .mdc-fab:hover{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}:host .mdc-fab.mdc-ripple-upgraded--background-focused,:host .mdc-fab:not(.mdc-ripple-upgraded):focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0,0,0,.12)}:host .mdc-fab:active,:host .mdc-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0,0,0,.12)}:host .mdc-fab:active,:host .mdc-fab:focus{outline:none}:host .mdc-fab:hover{cursor:pointer}:host .mdc-fab>svg{width:100%}:host .mdc-fab--mini{width:40px;height:40px}:host .mdc-fab--extended{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto, sans-serif;font-family:var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));font-size:0.875rem;font-size:var(--mdc-typography-button-font-size, 0.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height, 2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight, 500);letter-spacing:0.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing, 0.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration, none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform, uppercase);border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}:host .mdc-fab--extended .mdc-fab__ripple{border-radius:24px}:host .mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] :host .mdc-fab--extended .mdc-fab__icon,:host .mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}:host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] :host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,:host .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}:host .mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}:host .mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}:host .mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid transparent;border-radius:inherit;content:"";pointer-events:none}:host .mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}:host .mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}:host .mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}:host .mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab .ripple{overflow:hidden}:host .mdc-fab:not(.mdc-fab--extended) .ripple{border-radius:50%}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:24px}:host .mdc-fab .mdc-fab__label{z-index:0}:host .mdc-fab .mdc-fab__icon ::slotted(*){width:inherit;height:inherit;font-size:inherit}:host .mdc-fab--extended.mdc-fab--exited .mdc-fab__icon ::slotted(*){transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}:host .mdc-fab{padding-top:0px;padding-top:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-right:0px;padding-right:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-bottom:0px;padding-bottom:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-left:0px;padding-left:max(0px, var(--mdc-fab-focus-outline-width, 0px));box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-fab-box-shadow, 0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12))}:host .mdc-fab:not(:disabled).mdc-ripple-upgraded--background-focused,:host .mdc-fab:not(:disabled):not(.mdc-ripple-upgraded):focus{border-color:initial;border-color:var(--mdc-fab-focus-outline-color, initial)}:host .mdc-fab:not(:disabled).mdc-ripple-upgraded--background-focused,:host .mdc-fab:not(:disabled):not(.mdc-ripple-upgraded):focus{border-style:solid;border-width:var(--mdc-fab-focus-outline-width, 0px);padding-top:0px;padding-top:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-right:0px;padding-right:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-bottom:0px;padding-bottom:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-left:0px;padding-left:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1))}:host .mdc-fab:hover,:host .mdc-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-fab-box-shadow, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}:host .mdc-fab:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12);box-shadow:var(--mdc-fab-box-shadow, 0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12))}:host .mdc-fab .ripple{overflow:hidden}:host .mdc-fab .mdc-fab__label{z-index:0}:host .mdc-fab:not(.mdc-fab--extended) .ripple{border-radius:50%}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:24px}:host .mdc-fab .mdc-fab__icon{width:24px;width:var(--mdc-icon-size, 24px);height:24px;height:var(--mdc-icon-size, 24px);font-size:24px;font-size:var(--mdc-icon-size, 24px);transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform;display:inline-flex;align-items:center;justify-content:center}:host .mdc-fab.mdc-fab--extended{padding-top:0px;padding-top:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-right:20px;padding-right:max(var(--mdc-fab-extended-label-padding, 20px), var(--mdc-fab-focus-outline-width, 0px));padding-bottom:0px;padding-bottom:max(0px, var(--mdc-fab-focus-outline-width, 0px));padding-left:20px;padding-left:max(var(--mdc-fab-extended-label-padding, 20px), var(--mdc-fab-focus-outline-width, 0px))}:host .mdc-fab.mdc-fab--extended:not(:disabled).mdc-ripple-upgraded--background-focused,:host .mdc-fab.mdc-fab--extended:not(:disabled):not(.mdc-ripple-upgraded):focus{border-style:solid;border-width:var(--mdc-fab-focus-outline-width, 0px);padding-top:0px;padding-top:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-right:20px;padding-right:max(calc(var(--mdc-fab-extended-label-padding, 20px) - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(var(--mdc-fab-extended-label-padding, 20px) - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-bottom:0px;padding-bottom:max(calc(0px - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(0px - var(--mdc-fab-focus-outline-width, 0px)) * -1));padding-left:20px;padding-left:max(calc(var(--mdc-fab-extended-label-padding, 20px) - var(--mdc-fab-focus-outline-width, 0px)), calc(calc(var(--mdc-fab-extended-label-padding, 20px) - var(--mdc-fab-focus-outline-width, 0px)) * -1))}:host .mdc-fab.mdc-fab--extended.icon-end .mdc-fab__icon{margin-left:12px;margin-left:var(--mdc-fab-extended-icon-padding, 12px);margin-right:calc(12px - 20px);margin-right:calc(var(--mdc-fab-extended-icon-padding, 12px) - var(--mdc-fab-extended-label-padding, 20px))}[dir=rtl] :host .mdc-fab.mdc-fab--extended.icon-end .mdc-fab__icon,:host .mdc-fab.mdc-fab--extended.icon-end .mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-left:calc(var(--mdc-fab-extended-icon-padding, 12px) - var(--mdc-fab-extended-label-padding, 20px));margin-right:12px;margin-right:var(--mdc-fab-extended-icon-padding, 12px)}']))),(Re=function(t){i(o,t);var n=e(o);function o(){return r(this,o),n.apply(this,arguments)}return a(o)}(Ee)).styles=[Oe],Re=f([x("mwc-fab")],Re),De=function(){function t(){r(this,t)}return a(t,null,[{key:"splitByStatus",value:function(t,n){if(n&&n.sortBySortOrder)try{t=t.sort((function(t){var n;return(null===(n=null==t?void 0:t.configuration)||void 0===n?void 0:n.optionalSortOrder)||1e5}))}catch(t){console.error(t)}return{active:t.filter((function(t){return"active"==t.status||"hidden"==t.status})),archived:t.filter((function(t){return"archived"==t.status})),featured:t.filter((function(t){return"featured"==t.status}))}}},{key:"logoImagePath",value:function(t,n){return Z.getImageFormatUrl(this.logoImages(t,n),0)}},{key:"logoImages",value:function(t,n){switch(t){case"domain":return n.DomainLogoImages;case"community":return n.CommunityLogoImages;case"groupCommunityLink":return n.CommunityLink.CommunityLogoImages;case"group":case"groupDataViz":return n.GroupLogoImages}}},{key:"nameTextType",value:function(t){switch(t){case"domain":return"domainName";case"community":case"groupCommunityLink":return"communityName";case"group":case"groupDataViz":return"groupName"}}},{key:"descriptionTextType",value:function(t){switch(t){case"domain":return"domainContent";case"community":case"groupCommunityLink":return"communityContent";case"group":return"groupContent"}}}]),t}(),Fe=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"render",value:function(){return this.collection?C(pt||(pt=c(['\n          <div class="stats layout horizontal end-justified">\n            <div class="layout horizontal">\n              <mwc-icon title="','" class="stats-icon bulb"\n                >lightbulb_outline</mwc-icon\n              >\n              <div title="','" class="stats-text">\n                ',"\n              </div>\n\n              ","\n              ",'\n\n              <mwc-icon\n                title="','"\n                icon="people"\n                class="stats-icon"\n                >comment</mwc-icon\n              >\n              <div title="','" class="stats-text">\n                ','\n              </div>\n\n              <mwc-icon\n                title="','"\n                icon="face"\n                class="stats-icon"\n                >person</mwc-icon\n              >\n              <div title="','" class="stats-text">\n                ',"\n              </div>\n            </div>\n          </div>\n        "])),this.t("stats.posts"),this.t("stats.posts"),K.number(this.collection.counter_posts),"community"===this.collectionType?C(ht||(ht=c(['\n                    <mwc-icon\n                      title="','"\n                      class="stats-icon"\n                      >groups</mwc-icon\n                    >\n                    <div title="','" class="stats-text">\n                      ',"\n                    </div>\n                  "])),this.t("stats.groups"),this.t("stats.groups"),K.number(this.collection.counter_groups)):S,"domain"===this.collectionType?C(ut||(ut=c(['\n                    <mwc-icon\n                      title="','"\n                      class="stats-icon"\n                      >groups</mwc-icon\n                    >\n                    <div\n                      title="','"\n                      class="stats-text">\n                      ',"\n                    </div>\n                  "])),this.t("stats.communities"),this.t("stats.communities"),K.number(this.collection.counter_communities)):S,this.t("statsPoints"),this.t("statsPoints"),K.number(this.collection.counter_points),this.t("stats.users"),this.t("stats.users"),K.number(this.collection.counter_users)):S}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(mt||(mt=c(["\n        :host {\n          display: block;\n          width: 100%;\n        }\n\n        .stats {\n          padding-top: 8px;\n          padding-bottom: 0;\n          color: var(--mdc-theme-on-surface-lighter);\n        }\n\n        .stats-text {\n          font-size: 18px;\n          text-align: right;\n          vertical-align: bottom;\n          margin-right: 8px;\n          color: var(--mdc-theme-on-surface-lighter);\n        }\n\n        .stats-icon {\n          margin-left: 8px;\n          margin-bottom: 8px;\n          margin-right: 8px;\n        }\n      "])))]}}]),l}(w),f([b({type:Object})],Fe.prototype,"collection",void 0),f([b({type:String})],Fe.prototype,"collectionType",void 0),Fe=f([x("yp-collection-stats")],Fe),Be=function(t){i(l,t);var n=e(l);function l(){var t;return r(this,l),(t=n.apply(this,arguments)).hideImage=!1,t}return a(l,[{key:"hasCollectionAccess",get:function(){switch(this.collectionType){case"domain":return N.checkDomainAccess(this.collection);case"community":return N.checkCommunityAccess(this.collection);case"group":return N.checkGroupAccess(this.collection);default:return!1}}},{key:"collectionVideos",get:function(){switch(this.collectionType){case"domain":return this.collection.DomainLogoVideos;case"community":return this.collection.CommunityLogoVideos;case"group":return this.collection.GroupLogoVideos}}},{key:"openMenuLabel",get:function(){switch(this.collectionType){case"domain":return this.t("openDomainMenu");case"community":return this.t("openCommunityMenu");case"group":return this.t("openGroupMenu");default:return"Open menu"}}},{key:"collectionHeaderImages",get:function(){switch(this.collectionType){case"domain":return this.collection.DomainHeaderImages;case"community":return this.collection.CommunityHeaderImages;case"group":return this.collection.GroupHeaderImages}}},{key:"collectionVideoURL",get:function(){if(this.collection&&this.collection.configuration&&this.collection.configuration.useVideoCover){var t=this.collectionVideos;if(t){var n=Z.getVideoURL(t);return n?(this.collectionVideoId=t[0].id,n):void 0}}}},{key:"collectionVideoPosterURL",get:function(){if(this.collection&&this.collection.configuration&&this.collection.configuration.useVideoCover){var t=Z.getVideoPosterURL(this.collectionVideos,De.logoImages(this.collectionType,this.collection));return t||void 0}}},{key:"collectionHeaderImagePath",get:function(){return Z.getImageFormatUrl(this.collectionHeaderImages,0)}},{key:"renderStats",value:function(){switch(this.collectionType){case"domain":return C(yt||(yt=c([""])));case"community":return C(gt||(gt=c([""])));case"group":return C(vt||(vt=c([""])));default:return S}}},{key:"renderFirstBoxContent",value:function(){var t,n;return(null===(n=null===(t=this.collection)||void 0===t?void 0:t.configuration)||void 0===n?void 0:n.welcomeHTML)?C(ft||(ft=c(['<div id="welcomeHTML">\n        ',"\n      </div>"])),E(this.collection.configuration.welcomeHTML)):this.collectionVideoURL?C(bt||(bt=c(['\n        <video\n          id="videoPlayer"\n          data-id="','"\n          controls\n          preload="metadata"\n          class="image"\n          src="','"\n          playsinline\n          poster="','"\n        ></video>\n      '])),O(this.collectionVideoId),this.collectionVideoURL,O(this.collectionVideoPosterURL)):this.collection?C(xt||(xt=c(['\n        <yp-image\n          class="image"\n          ?hidden="','"\n          .alt="','"\n          sizing="cover"\n          .src="','"\n        ></yp-image>\n      '])),this.hideImage,this.collection.name,De.logoImagePath(this.collectionType,this.collection)):S}},{key:"_openMenu",value:function(){this.$$("#menu").open=!0,this.requestUpdate()}},{key:"renderMenu",value:function(){return C(wt||(wt=c(['\n      <div>\n        <mwc-icon-button\n          id="menuButton"\n          icon="more_vert"\n          @click="','"\n          title="','"\n        >\n        </mwc-icon-button>\n        <mwc-menu id="adminMenu" @changed="','">\n          <mwc-list-item id="openAdminApp"\n            >','</mwc-list-item\n          >\n          <mwc-list-item id="openAnalyticsApp"\n            >',"</mwc-list-item\n          >\n        </mwc-menu>\n      </div>\n    "])),this._openMenu,this.openMenuLabel,this._menuSelection,this.t("openAdministration"),this.t("openAnalyticsApp"))}},{key:"renderFooter",value:function(){return C(kt||(kt=c(['\n      <div class="stats layout horizontal">\n        <yp-collection-stats\n          .collectionType="','"\n          .collection="','"\n        ></yp-collection-stats>\n      </div>\n    '])),this.collectionType,this.collection)}},{key:"render",value:function(){var t;return C(_t||(_t=c(["\n      ","\n    "])),this.collection?C(Ct||(Ct=c(['\n            <div class="layout horizontal wrap">\n              <div\n                is-video="','"\n                id="cardImage"\n                class="large-card imageCard top-card shadow-elevation-8dp shadow-transition"\n              >\n                ','\n              </div>\n              <div\n                id="card"\n                class="large-card textBox shadow-elevation-8dp shadow-transition layout horizontal"\n              >\n                <div class="layout vertical">\n                  <div class="descriptionContainer">\n                    <div>\n                      <yp-magic-text\n                        class="collection-name"\n                        role="heading"\n                        aria-level="1"\n                        ?largeFont="','"\n                        aria-label="','"\n                        .textType="','"\n                        .contentLanguage="','"\n                        ?disableTranslation="','"\n                        textOnly\n                        .content="','"\n                        .contentId="','"\n                      >\n                      </yp-magic-text>\n                      <yp-magic-text\n                        id="description"\n                        class="description collectionDescription"\n                        .textType="','"\n                        ?largeFont="','"\n                        .contentLanguage="','"\n                        truncate="150"\n                        .content="','"\n                        .contentId="','"\n                      >\n                      </yp-magic-text>\n                    </div>\n                  </div>\n\n                  ',"\n                  ","\n                </div>\n              </div>\n            </div>\n          "])),O(this.collectionVideoURL),this.renderFirstBoxContent(),this.largeFont,this.collection.name,De.nameTextType(this.collectionType),this.collection.language,null===(t=this.collection.configuration)||void 0===t?void 0:t.disableNameAutoTranslation,this.collection.name,this.collection.id,De.descriptionTextType(this.collectionType),this.largeFont,this.collection.language,this.collection.description||this.collection.objectives,this.collection.id,this.hasCollectionAccess?this.renderMenu():S,this.renderFooter()):C(Tt||(Tt=c([""]))))}},{key:"connectedCallback",value:function(){s(o(l.prototype),"connectedCallback",this).call(this),this.addGlobalListener("yp-got-admin-rights",this.requestUpdate.bind(this)),this.addGlobalListener("yp-pause-media-playback",this._pauseMediaPlayback.bind(this))}},{key:"disconnectedCallback",value:function(){s(o(l.prototype),"disconnectedCallback",this).call(this),this.removeGlobalListener("yp-got-admin-rights",this.requestUpdate),this.removeGlobalListener("yp-pause-media-playback",this._pauseMediaPlayback),Z.detachMediaListeners(this)}},{key:"firstUpdated",value:function(t){s(o(l.prototype),"firstUpdated",this).call(this,t),Z.attachMediaListeners(this)}},{key:"updated",value:function(t){s(o(l.prototype),"updated",this).call(this,t),t.has("collection")&&Z.detachMediaListeners(this),this.collection&&Z.attachMediaListeners(this)}},{key:"_pauseMediaPlayback",value:function(){Z.pauseMediaPlayback(this)}},{key:"_menuSelection",value:function(t){this.collection&&("editMenuItem"===t.detail.item.id?window.location.href="/admin/".concat(this.collectionType,"/").concat(this.collection.id):"openAnalyticsApp"===t.detail.item.id&&(window.location.href="/analytics/".concat(this.collectionType,"/").concat(this.collection.id)),this.$$("#adminMenu").select(-1))}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),G,k(It||(It=c(["\n        .stats {\n          position: absolute;\n          bottom: 0;\n          right: 8px;\n        }\n\n        .collection-name {\n          font-size: var(--mdc-typography-headline1-font-size);\n          font-weight: var(--mdc-typography-headline1-font-weight);\n          background-color: var(--mdc-theme-primary);\n          color: var(--mdc-theme-on-primary);\n          padding: 16px;\n        }\n\n        .collection-name[widetext] {\n          font-size: var(--mdc-typography-headline1-widetext-font-size, 20px);\n        }\n\n        .collection-name[largeFont] {\n          font-size: var(--mdc-typography-headline1-widetext-font-size, 20px);\n        }\n\n        .large-card {\n          color: var(--mdc-theme-on-surface);\n          background-color: var(--mdc-theme-surface);\n          height: 243px;\n          width: 432px;\n          padding: 0 !important;\n          margin-top: 0 !important;\n        }\n\n        .image,\n        video {\n          width: 432px;\n          height: 243px;\n        }\n\n        #menuButton {\n          color: var(--mdc-theme-on-primary);\n          background-color: var(--mdc-theme-primary);\n          position: absolute;\n          top: 0;\n          right: 0;\n        }\n\n        .textBox {\n          margin-left: 32px;\n          position: relative;\n        }\n\n        .description {\n          padding: 16px;\n          vertical-align: middle;\n          font-size: 15px;\n        }\n\n        .description[widetext] {\n          font-size: 14px;\n        }\n\n        #welcomeHTML {\n          width: 432px;\n          max-width: 432px;\n          overflow: hidden;\n        }\n\n        :host {\n          margin-top: 32px;\n          margin-bottom: 32px;\n        }\n\n        @media (max-width: 960px) {\n          :host {\n            max-width: 423px;\n            padding: 0 !important;\n            padding-top: 8px !important;\n            width: 100%;\n          }\n\n          #welcomeHTML {\n            width: 306px;\n            max-width: 306px;\n          }\n\n          .large-card {\n            width: 100%;\n            height: 100%;\n            margin-left: 8px;\n            margin-right: 8px;\n            margin-top: 8px !important;\n          }\n\n          .top-card {\n            margin-bottom: 16px;\n          }\n\n          yp-image,\n          video,\n          .image {\n            width: 100%;\n            height: 230px;\n          }\n\n          .imageCard {\n            height: 230px;\n          }\n\n          .imageCard[is-video] {\n            background-color: transparent;\n          }\n\n          .collection-name {\n            font-size: 22px;\n            padding-bottom: 9px;\n            min-height: 28px;\n          }\n\n          .description {\n            padding-bottom: 42px;\n          }\n\n          .textBox {\n            margin-left: 8px;\n          }\n        }\n\n        @media (max-width: 375px) {\n          yp-image,\n          video,\n          .image {\n            height: 225px;\n          }\n\n          .imageCard {\n            height: 225px;\n          }\n        }\n\n        @media (max-width: 375px) {\n          yp-image,\n          video,\n          .image {\n            height: 207px;\n          }\n\n          .imageCard {\n            height: 205px;\n          }\n        }\n\n        @media (max-width: 360px) {\n          yp-image,\n          video,\n          .image {\n            height: 200px;\n          }\n\n          .imageCard {\n            height: 200px;\n          }\n        }\n\n        @media (max-width: 320px) {\n          yp-image,\n          video,\n          .image {\n            height: 180px;\n          }\n\n          .imageCard {\n            height: 180px;\n          }\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        a {\n          text-decoration: none;\n          color: inherit;\n        }\n      "])))]}}]),l}(w),f([b({type:Object})],Be.prototype,"collection",void 0),f([b({type:String})],Be.prototype,"collectionType",void 0),f([b({type:Boolean})],Be.prototype,"hideImage",void 0),f([b({type:Number})],Be.prototype,"flaggedContentCount",void 0),f([b({type:Number})],Be.prototype,"collectionVideoId",void 0),f([b({type:String})],Be.prototype,"welcomeHTML",void 0),Be=f([x("yp-collection-header")],Be),Ue=function(){function t(){r(this,t)}return a(t,null,[{key:"attachListeners",value:function(t){t.resetListSize=function(){var n=t.$$("#ironList");if(n){var e=window.innerWidth;n&&(t.wide||(e-=16),t.skipIronListWidth?console.log("Skipping setting iron-list width"):n.style.width=e+"px",n.updateViewportBoundaries(),setTimeout((function(){n.notifyResize()})))}else console.warn("Can't find list to setup for size resize")},window.addEventListener("resize",t.resetListSize),t.resetListSize(new CustomEvent("resize"))}},{key:"detachListeners",value:function(t){t.resetListSize&&window.removeEventListener("resize",t.resetListSize)}}]),t}(),Me=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"archived",get:function(){var t;return"archived"===(null===(t=this.item)||void 0===t?void 0:t.status)}},{key:"featured",get:function(){var t;return"featured"===(null===(t=this.item)||void 0===t?void 0:t.status)}},{key:"connectedCallback",value:function(){if(s(o(l.prototype),"connectedCallback",this).call(this),this.item&&this.item.Community){this.collection=this.item.Community;var t=this.collection;t.CommunityLink?this.itemType="groupCommunityLink":t.configuration.dataForVisualizationJson?this.itemType="groupDataViz":this.itemType="group"}else this.item&&this.item.Domain&&(this.collection=this.item.Domain,this.itemType="community")}},{key:"goToItem",value:function(t){if(t.preventDefault(),t.currentTarget&&t.currentTarget){var n=t.currentTarget.getAttribute("href");n&&R.redirectTo(n)}}},{key:"_setupFontNameFontSize",value:function(){var t=this.$$("#collectionName");if(t&&this.collection){var n="collection-name ";this.wide?this.collection.name.length<=18?n+="collectionNameFontSize4Wide":this.collection.name.length>40?n+="collectionNameFontSize1Wide":this.collection.name.length>30?n+="collectionNameFontSize2Wide":this.collection.name.length>18&&(n+="collectionNameFontSize3Wide"):this.collection.name.length<=18?n+="collectionNameFontSize4Mobile":this.collection.name.length>40?n+="collectionNameFontSize1Mobile":this.collection.name.length>30?n+="collectionNameFontSize2Mobile":this.collection.name.length>18&&(n+="collectionNameFontSize3Mobile"),t.className=n}}},{key:"updated",value:function(t){s(o(l.prototype),"updated",this).call(this,t),t.has("collection")&&this.collection&&this._setupFontNameFontSize()}},{key:"renderLogoImage",value:function(){return C(Pt||(Pt=c(["\n      ","\n    "])),De.logoImagePath(this.itemType,this.item)?C(At||(At=c(['\n            <yp-image\n              sizing="cover"\n              ?archived="','"\n              alt="','"\n              ?featured="','"\n              preload\n              .src="','"\n              class="post-image withPointer"\n            ></yp-image>\n          '])),this.archived,this.collection.name,this.featured,De.logoImagePath(this.itemType,this.item)):C(zt||(zt=c(['\n            <yp-image\n              ?archived="','"\n              sizing="cover"\n              class="main-image withPointer"\n              src="https://i.imgur.com/sdsFAoT.png"\n            ></yp-image>\n          '])),this.archived))}},{key:"renderDataViz",value:function(){return C(Lt||(Lt=c(['\n      <yp-data-visualization\n        small\n        .data="','"\n      ></yp-data-visualization>\n    '])),this.item.configuration.dataForVisualizationJson)}},{key:"renderCardInfo",value:function(){var t;return C(St||(St=c(['\n      <div class="layout horizontal">\n        ','\n      </div>\n      <div class="informationText">\n        <yp-magic-text\n          id="collectionName"\n          class="collection-name"\n          ?archived="','"\n          ?featured="','"\n          ?largefont="','"\n          @click="','"\n          .textType="','"\n          .contentLanguage="','"\n          ?disableTranslation="','"\n          text-only\n          .content="','"\n          .contentId="','"\n        ></yp-magic-text>\n        <yp-magic-text\n          id="description"\n          class="description layout vertical withPointer"\n          ?featured="','"\n          ?largefont="','"\n          textType="collectionContent"\n          .textType="','"\n          .contentLanguage="','"\n          textOnly\n          removeUrls\n          .content="','"\n          .contentId="','"\n          truncate="300"\n        >\n        </yp-magic-text>\n      </div>\n\n      <div class="stats layout horizontal">\n        <yp-collection-stats\n          .collectionType="','"\n          .collection="','"\n        ></yp-collection-stats>\n      </div>\n\n      ',"\n    "])),"groupDataViz"===this.itemType?C(Nt||(Nt=c([" "," "])),this.renderDataViz()):C(Gt||(Gt=c([" "," "])),this.renderLogoImage()),this.archived,this.featured,this.largeFont,this.goToItem,De.nameTextType(this.itemType),this.contentLanguage,null===(t=this.collection.configuration)||void 0===t?void 0:t.disableNameAutoTranslation,this.contentName,this.contentId,this.featured,this.largeFont,De.descriptionTextType(this.itemType),this.contentLanguage,this.contentDescription,this.contentId,this.statsCollectionType,this.statsCollection,this.collection?C(Ot||(Ot=c([""]))):C(Et||(Et=c(['\n            <yp-membership-button\n              .archived="','"\n              .featured="','"\n              .collection="','"\n            ></yp-membership-button>\n          '])),this.archived,this.featured,this.collection))}},{key:"statsCollection",get:function(){return"groupCommunityLink"===this.itemType?this.item.CommunityLink:this.item}},{key:"statsCollectionType",get:function(){return"groupCommunityLink"===this.itemType?"communtiy":"groupDataViz"===this.itemType?"group":this.itemType}},{key:"contentDescription",get:function(){return"groupCommunityLink"===this.itemType?this.item.CommunityLink.description:this.item.description||this.item.objectives}},{key:"contentName",get:function(){return"groupCommunityLink"===this.itemType?this.item.CommunityLink.name:this.item.name}},{key:"contentId",get:function(){return"groupCommunityLink"===this.itemType?this.item.CommunityLink.id:this.item.id}},{key:"contentLanguage",get:function(){return"groupCommunityLink"===this.itemType?this.item.CommunityLink.language:this.item.language}},{key:"contentUrlBase",get:function(){return"groupCommunityLink"===this.itemType?"community":"groupDataViz"===this.itemType?"group_data_viz":this.itemType}},{key:"render",value:function(){return this.item&&this.collection?C(Rt||(Rt=c(['\n          <a\n            href="/',"/",'"\n            @click="','"\n            class="layout vertical center-center"\n          >\n            <div\n              ?featured="','"\n              class="collectionCard shadow-elevation-4dp shadow-transaction layout horizontal"\n            >\n              ',"\n            </div>\n          </a>\n        "])),this.contentUrlBase,this.contentId,this.goToItem,this.featured,this.renderCardInfo()):S}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),G,k(Dt||(Dt=c(["\n        .description {\n          line-height: var(--description-line-height, 1.3);\n          font-size: 15px;\n          padding: 8px;\n          padding: 16px;\n          font-family: var(--app-header-font-family, Roboto);\n        }\n\n        .description[widetext] {\n          font-size: 14px;\n        }\n\n        .description[largefont] {\n          font-size: 16px;\n        }\n\n        .stats {\n          position: absolute;\n          bottom: 0;\n          right: 38px;\n        }\n\n        .post-image {\n          width: 100%;\n        }\n\n        .collectionCard {\n          width: 860px;\n          background-color: var(--mdc-theme-surface);\n          color: var(--mdc-theme-on-surface);\n          margin: 0;\n          position: relative;\n        }\n\n        .collectionCard[featured] {\n        }\n\n        yp-image {\n          width: 320px !important;\n          height: 180px !important;\n        }\n\n        yp-image[featured] {\n        }\n\n        .card-content {\n          padding: 0;\n          padding-bottom: 48px;\n        }\n\n        yp-image {\n          padding: 0;\n          margin: 0;\n        }\n\n        yp-image {\n          padding: 0;\n          margin: 0;\n        }\n\n        .collectionCard {\n          vertical-align: text-top;\n        }\n\n        .informationText {\n          vertical-align: text-top;\n        }\n\n        .collection-name {\n          font-size: var(--mdc-typography-headline2-font-size);\n          font-weight: var(--mdc-typography-headline2-font-weight);\n          cursor: pointer;\n          padding: 16px;\n          padding-bottom: 0;\n          vertical-align: middle;\n          width: auto;\n          font-family: var(--app-header-font-family, Roboto);\n        }\n\n        .collection-name[widetext] {\n          font-size: 18px;\n        }\n\n        .collection-name[largefont] {\n          font-size: 20px;\n        }\n\n        yp-image[archived] {\n        }\n\n        yp-membership-button {\n          position: absolute;\n          top: 159px;\n          right: 24px;\n          width: 30px;\n          height: 30px;\n          color: var(--icon-general-color, #fff);\n        }\n\n        .edit {\n          color: #888;\n          position: absolute;\n          bottom: 0;\n          right: 0;\n          padding-right: 0;\n          margin-right: 0;\n          text-align: right;\n        }\n\n        .collection-name[featured] {\n          background-color: var(--accent-color);\n        }\n\n        .collection-name[archived] {\n          background-color: #aaa;\n        }\n\n        .collection-name[has-data-viz] {\n          padding-top: 26px;\n        }\n\n        yp-membership-button[archived] {\n          display: none;\n        }\n\n        .collectionNameFontSize4Wide {\n          font-size: 30px;\n        }\n\n        .collectionNameFontSize3Wide {\n          font-size: 26px;\n        }\n\n        .collectionNameFontSize2Wide {\n          font-size: 24px;\n        }\n\n        .collectionNameFontSize1Wide {\n          font-size: 22px;\n        }\n\n        .collectionNameFontSize4Mobile {\n          font-size: 28px;\n        }\n\n        .collectionNameFontSize3Mobile {\n          font-size: 24px;\n        }\n\n        .collectionNameFontSize2Mobile {\n          font-size: 22px;\n        }\n\n        .collectionNameFontSize1Mobile {\n          font-size: 19px;\n        }\n\n        .collectionNameFontSize4Wide[widetext] {\n          font-size: 26px;\n        }\n\n        .collectionNameFontSize3Wide[widetext] {\n          font-size: 22px;\n        }\n\n        .collectionNameFontSize2Wide[widetext] {\n          font-size: 20px;\n        }\n\n        .collectionNameFontSize1Wide[widetext] {\n          font-size: 18px;\n        }\n\n        .collectionNameFontSize4Mobile[widetext] {\n          font-size: 26px;\n        }\n\n        .collectionNameFontSize3Mobile[widetext] {\n          font-size: 22px;\n        }\n\n        .collectionNameFontSize2Mobile[widetext] {\n          font-size: 20px;\n        }\n\n        .collectionNameFontSize1Mobile[widetext] {\n          font-size: 18px;\n        }\n\n        @media (max-width: 960px) {\n          :host {\n            max-width: 423px;\n            width: 100%;\n            padding-top: 0 !important;\n          }\n\n          yp-membership-button {\n            top: 205px;\n          }\n\n          .collectionCard {\n            margin-left: 0;\n            margin-right: 0;\n            padding-left: 0;\n            padding-right: 0;\n            width: 100%;\n            height: 100%;\n            padding-bottom: 8px;\n          }\n\n          yp-image {\n            width: 100%;\n            height: 230px;\n          }\n\n          yp-image[featured] {\n          }\n\n          .description {\n            margin-bottom: 32px;\n          }\n        }\n\n        @media (max-width: 420px) {\n          yp-image {\n            height: 225px;\n          }\n\n          yp-membership-button {\n            top: 205px;\n          }\n        }\n\n        @media (max-width: 375px) {\n          yp-image {\n            height: 207px;\n          }\n\n          yp-membership-button {\n            top: 185px;\n          }\n        }\n\n        @media (max-width: 360px) {\n          yp-image {\n            height: 200px;\n          }\n        }\n\n        @media (max-width: 320px) {\n          yp-image {\n            height: 180px;\n          }\n\n          yp-membership-button {\n            top: 155px;\n          }\n        }\n\n        .withPointer {\n          cursor: pointer;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        a {\n          text-decoration: none;\n        }\n      "])))]}}]),l}(w),f([b({type:Object})],Me.prototype,"item",void 0),f([b({type:String})],Me.prototype,"itemType",void 0),f([b({type:Object})],Me.prototype,"collection",void 0),Me=f([x("yp-collection-item-card")],Me),Ve=function(t){i(u,t);var n,p,h=e(u);function u(){var t;return r(this,u),(t=h.apply(this,arguments)).grid=!1,t.skipIronListWidth=!1,t}return a(u,[{key:"render",value:function(){return this.sortedCollectionItems?C(Ft||(Ft=c(['\n          <lit-virtualizer\n            id="list"\n            role="main"\n            .layout="','"\n            aria-label="','"\n            .items="','"\n            .scrollTarget="','"\n            .keyFunction="','"\n            .renderItem="','"></lit-virtualizer>\n        '])),this.grid?Y:X,this.t(this.pluralItemType),this.sortedCollectionItems,window,(function(t){return t.id}),this.renderItem.bind(this)):S}},{key:"renderItem",value:function(t,n){return C(Bt||(Bt=c([' <yp-collection-item-card\n      class="card"\n      aria-label="','"\n      ariarole="listitem"\n      .item="','"\n      @keypress="','"\n      @click="','"></yp-collection-item-card>'])),t.name,t,this._keypress.bind(this),this._selectedItemChanged.bind(this))}},{key:"pluralItemType",get:function(){return"community"==this.collectionItemType?"communities":"group"==this.collectionItemType?"groups":"post"==this.collectionItemType?"posts":"unknownItemType"}},{key:"_keypress",value:function(t){13==t.keyCode&&this._selectedItemChanged(t)}},{key:"refresh",value:(p=l(d.mark((function t(){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return p.apply(this,arguments)})},{key:"firstUpdated",value:function(t){s(o(u.prototype),"firstUpdated",this).call(this,t),Ue.attachListeners(this)}},{key:"connectedCallback",value:(n=l(d.mark((function t(){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s(o(u.prototype),"connectedCallback",this).call(this),this.collection&&this.collectionItems&&(n=De.splitByStatus(this.collectionItems,this.collection.configuration),this.sortedCollectionItems=n.featured.concat(n.active.concat(n.archived)));case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"disconnectedCallback",value:function(){s(o(u.prototype),"disconnectedCallback",this).call(this),Ue.detachListeners(this)}},{key:"_selectedItemChanged",value:function(t){var n=t.target.item;if(this.collectionItemType&&n)if(window.appGlobals.activity("open",this.collectionItemType,"/".concat(this.collectionItemType,"/").concat(n.id),{id:n.id}),"community"===this.collectionItemType){var e=n;null!=e&&(window.appGlobals.cache.backToDomainCommunityItems[e.domain_id]=e)}else if("group"===this.collectionItemType&&n){var i=n;window.appGlobals.cache.backToCommunityGroupItems[i.community_id]=i,window.appGlobals.cache.groupItemsCache[i.id]=i}}},{key:"scrollToItem",value:function(t){if(t&&this.sortedCollectionItems){for(var n=0;n<this.sortedCollectionItems.length;n++)if(this.sortedCollectionItems[n]==t){this.$$("#list").scrollToIndex(n);break}this.fireGlobal("yp-refresh-activities-scroll-threshold")}else console.error("No item to scroll too")}}],[{key:"styles",get:function(){return[s(o(u),"styles",this),G,k(Ut||(Ut=c(["\n        .card {\n          padding: 0;\n          padding-top: 24px;\n          width: 100%;\n        }\n\n        .card[wide-padding] {\n          padding: 16px !important;\n        }\n\n        a {\n          text-decoration: none;\n          width: 100%;\n        }\n      "])))]}}]),u}(w),f([b({type:Object})],Ve.prototype,"collection",void 0),f([b({type:Array})],Ve.prototype,"collectionItems",void 0),f([b({type:String})],Ve.prototype,"collectionItemType",void 0),f([b({type:Array})],Ve.prototype,"sortedCollectionItems",void 0),f([b({type:Boolean,reflect:!0})],Ve.prototype,"grid",void 0),Ve=f([x("yp-collection-items-grid")],Ve),$e=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"render",value:function(){return this.embedData?C(Mt||(Mt=c(['\n          <div>\n            <div class="layout vertical embedContainer">\n              <a href="','" class="container" target="_blank">\n                <div class="layout vertical center-center">\n                  <yp-image\n                    sizing="contain"\n                    src="','"\n                    ?hidden="','"></yp-image>\n                  <div id="embedHtml" ?hidden="','">\n                    <div .inner-h-t-m-l="','"></div>\n                  </div>\n                </div>\n                <div class="layout vertical">\n                  <div class="title">\n                    <h2>','</h2>\n                  </div>\n                  <div class="description">\n                    ',"\n                  </div>\n                </div>\n              </a>\n            </div>\n          </div>\n        "])),this.embedData.url,this.embedData.thumbnail_url,null!=this.embedData.html,!this.embedData.html,this.embedData,this.embedData.title,this.embedData.description):S}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(Vt||(Vt=c(["\n        yp-image {\n          width: 550px;\n          height: 309px;\n        }\n\n        @media (max-width: 600px) {\n          yp-image {\n            width: 90vw !important;\n            height: 51vw !important;\n          }\n        }\n\n        #embedHtml {\n          width: 100%;\n          height: 100%;\n          border: 1px solid;\n          border-color: #999;\n          padding: 16px;\n        }\n\n        a {\n          color: #333;\n          text-decoration: none;\n        }\n\n        .title {\n        }\n\n        .description {\n          padding-bottom: 20px;\n        }\n\n        .container {\n          border-bottom: solid #ddd;\n          border-bottom-width: 1px;\n          margin-top: 8px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      "])))]}}]),l}(w),f([b({type:Object})],$e.prototype,"embedData",void 0),$e=f([x("yp-point-news-story-embed")],$e),He=function(t){i(m,t);var n,h,u=e(m);function m(){var t;return r(this,m),(t=u.apply(this,arguments)).loadingUrlPreview=!0,t.loadingPostStory=!0,t}return a(m,[{key:"render",value:function(){return this.point?C($t||($t=c(['\n          <div class="layout vertical container">\n            <div class="layout horizontal">\n              <yp-user-image\n                class="userImage"\n                .user="','"\n                ?rtl="','"></yp-user-image>\n              <div class="layout vertical">\n                <mwc-textarea\n                  id="pointNewsStory"\n                  minlength="15"\n                  name="pointNewsStory"\n                  .value="','"\n                  .label="','"\n                  charCounter\n                  rows="2"\n                  maxrows="5"\n                  @keydown="','"\n                  maxlength="500">\n                </mwc-textarea>\n                <div class="layout horizontal end-justified">\n                  <mwc-button\n                    id="storySubmitButton"\n                    raised\n                    @click="','"\n                    .label="','"></mwc-button>\n                </div>\n              </div>\n            </div>\n\n            <div class="layout horizontal center-center">\n              ',"\n            </div>\n          </div>\n        "])),this.loggedInUser,this.rtl,this.point.content,this.t("point.addNewsStory"),this._keyDown,this._sendStory,this.t("point.postNewsStory"),this.point.embed_data?C(Ht||(Ht=c(['\n                    <div class="embedData layout vertical center-center">\n                      <yp-point-news-story-embed\n                        .embedData="','"></yp-point-news-story-embed>\n                      <mwc-icon-button\n                        .label="','"\n                        icon="clear"\n                        @click="','"></mwc-icon-button>\n                    </div>\n                  '])),this.point.embed_data,this.t("clearEmbededMedia"),this._clearEmbed):C(jt||(jt=c([""])))):S}},{key:"_clearButtonStat",value:function(){this.$$("#storySubmitButton").disabled=!1}},{key:"connectedCallback",value:function(){s(o(m.prototype),"connectedCallback",this).call(this),this._reset()}},{key:"firstUpdated",value:function(t){s(o(m.prototype),"firstUpdated",this).call(this,t),this.$$("#pointNewsStory").addEventListener("paste",this._checkForUrl.bind(this))}},{key:"newPointContent",get:function(){return this.$$("#pointNewsStory").value}},{key:"disconnectedCallback",value:function(){s(o(m.prototype),"disconnectedCallback",this).call(this),this.$$("#pointNewsStory").removeEventListener("paste",this._checkForUrl.bind(this))}},{key:"_reset",value:function(){this.point={content:""},this.point.embed_data=void 0,this.$$("#pointNewsStory")&&(this.$$("#pointNewsStory").value=""),this._clearButtonState()}},{key:"_sendStory",value:(h=l(d.mark((function t(){var n,e;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$$("#storySubmitButton").disabled=!0,this.point.content=this.newPointContent,n={point:this.point},!(this.point&&this.point.content&&this.point.content.length>2)){t.next=12;break}if(this.postId&&this.postGroupId?(n=p(p({},n),{post_id:this.postId}),e="/api/groups/"+this.postGroupId+"/post/news_story"):this.groupId?(n=p(p({},n),{group_id:this.groupId}),e="/api/groups/"+this.groupId+"/news_story"):this.communityId?(n=p(p({},n),{community_id:this.communityId}),e="/api/communities/"+this.communityId+"/news_story"):this.domainId?(e="/api/domains/"+this.domainId+"/news_story",n=p(p({},n),{domain_id:this.domainId})):console.error("Can't find send ids"),!e){t.next=10;break}return t.next=8,window.serverApi.postNewsStory(e,n);case 8:this.fire("refresh"),this._reset();case 10:t.next=14;break;case 12:this._clearButtonState(),this.fire("yp-error",this.t("point.commentToShort"));case 14:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"_clearButtonState",value:function(){this.$$("#storySubmitButton")&&(this.$$("#storySubmitButton").disabled=!1)}},{key:"_keyDown",value:function(t){"Space"!=t.code&&"enter"!=t.code||this._checkForUrl()}},{key:"_clearEmbed",value:function(){this.point.embed_data=void 0,this.requestUpdate()}},{key:"_checkForUrl",value:(n=l(d.mark((function t(){var n,e;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.point||this.point.embed_data){t.next=8;break}if(!((n=/((?:(http|https|Http|Https|rtsp|Rtsp):\/\/(?:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,64}(?:\:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,25})?\@)?)?((?:(?:[a-zA-Z0-9][a-zA-Z0-9\-]{0,64}\.)+(?:(?:aero|arpa|asia|a[cdefgilmnoqrstuwxz])|(?:biz|b[abdefghijmnorstvwyz])|(?:cat|com|coop|c[acdfghiklmnoruvxyz])|d[ejkmoz]|(?:edu|e[cegrstu])|f[ijkmor]|(?:gov|g[abdefghilmnpqrstuwy])|h[kmnrtu]|(?:info|int|i[delmnoqrst])|(?:jobs|j[emop])|k[eghimnrwyz]|l[abcikrstuvy]|(?:mil|mobi|museum|m[acdghklmnopqrstuvwxyz])|(?:name|net|n[acefgilopruz])|(?:org|om)|(?:pro|p[aefghklmnrstwy])|qa|r[eouw]|s[abcdeghijklmnortuvyz]|(?:tel|travel|t[cdfghjklmnoprtvwz])|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw]))|(?:(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9])))(?:\:\d{1,5})?)(\/(?:(?:[a-zA-Z0-9\;\/\?\:\@\&\=\#\~\-\.\+\!\*\'\(\)\,\_])|(?:\%[a-fA-F0-9]{2}))*)?(?:\b|$)/gi.exec(this.newPointContent))&&n.length>0)){t.next=8;break}return t.next=6,window.serverApi.pointUrlPreview("url=".concat(n[0]));case 6:(e=t.sent)&&e.length>0&&(this.point.embed_data=e[0],this.requestUpdate());case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],[{key:"styles",get:function(){return[s(o(m),"styles",this),k(qt||(qt=c(["\n        :host {\n          padding-top: 16px;\n        }\n\n        mwc-textarea {\n          width: 460px;\n          margin-top: -8px;\n        }\n\n        mwc-button {\n          margin-top: 16px;\n          background-color: var(--accent-color);\n          color: #fff;\n        }\n\n        .embedData {\n          padding-top: 24px;\n        }\n\n        .userImage {\n          padding-bottom: 16px;\n          padding-right: 16px;\n        }\n\n        .userImage[rtl] {\n          padding-left: 16px;\n          padding-right: 4px;\n        }\n\n        mwc-icon-button {\n          margin-top: 16px;\n          padding-bottom: 0;\n        }\n\n        mwc-icon-button::shadow #icon {\n          width: 36px;\n          height: 36px;\n          color: #777;\n        }\n\n        .container {\n          margin-bottom: 32px;\n        }\n\n        @media (max-width: 420px) {\n          mwc-textarea {\n            width: 270px;\n          }\n\n          .embedData {\n            max-width: 270px;\n            margin-left: 24px;\n          }\n\n          :host {\n            margin-top: 16px;\n          }\n        }\n\n        @media (max-width: 320px) {\n          mwc-textarea {\n            width: 220px;\n          }\n\n          .embedData {\n            max-width: 220px;\n          }\n        }\n      "])))]}}]),m}(D),f([b({type:Boolean})],He.prototype,"loadingUrlPreview",void 0),f([b({type:Boolean})],He.prototype,"loadingPostStory",void 0),f([b({type:Object})],He.prototype,"point",void 0),f([b({type:Number})],He.prototype,"postId",void 0),f([b({type:Number})],He.prototype,"postGroupId",void 0),f([b({type:Number})],He.prototype,"groupId",void 0),f([b({type:Number})],He.prototype,"communityId",void 0),f([b({type:Number})],He.prototype,"domainId",void 0),He=f([x("yp-point-news-story-edit")],He),je=function(t,n){for(var e="",i=t.className.split(" "),o=0;o<i.length;o++)i[o]!==n&&(e+=i[o]+" ");t.className=e},qe=function(t){i(h,t);var n,p=e(h);function h(){var t;return r(this,h),(t=p.apply(this,arguments)).hideNotHelpful=!1,t.isUpVoted=!1,t.allDisabled=!1,t.hideSharing=!1,t}return a(h,[{key:"render",value:function(){return this.point?C(Qt||(Qt=c(['\n          <div\n            class="all-actions layout horizontal flex start-justified"\n            ?hidden="','">\n            <div id="actionUp" class="actionUp layout horizontal">\n              <mwc-icon-button\n                .label="','"\n                ?disabled="','"\n                icon="arrow_upward"\n                class="point-up-vote-icon myButton"\n                @click="','"></mwc-icon-button>\n              <div class="action-text action-up layouthorizontal ">\n                ','\n              </div>\n            </div>\n            <div id="actionDown" class="actionDown layout horizontal">\n              <mwc-icon-button\n                .label="','"\n                ?disabled="','"\n                icon="arrow_downward"\n                class="point-down-vote-icon myButton"\n                @click="','"></mwc-icon-button>\n              <div class="action-text">','</div>\n            </div>\n            <mwc-icon-button\n              icon="share"\n              ?hidden="','"\n              class="shareIcon"\n              .label="','"\n              up-voted="','"\n              @click="','"></mwc-icon-button>\n          </div>\n        '])),this.hideNotHelpful,this.t("point.helpful"),this.allDisabled,this.pointHelpful,this.point.counter_quality_up,this.t("point.not_helpful"),this.allDisabled,this.pointNotHelpful,this.point.counter_quality_down,this.masterHideSharing,this.t("sharePoint"),this.isUpVoted,this._shareTap):S}},{key:"connectedCallback",value:function(){s(o(h.prototype),"connectedCallback",this).call(this),this.addGlobalListener("yp-got-endorsements-and-qualities",this._updateQualitiesFromSignal.bind(this))}},{key:"disconnectedCallback",value:function(){s(o(h.prototype),"disconnectedCallback",this).call(this),this.removeGlobalListener("yp-got-endorsements-and-qualities",this._updateQualitiesFromSignal.bind(this))}},{key:"masterHideSharing",get:function(){return this.hideSharing||this.configuration&&this.configuration.hideSharing}},{key:"_sharedContent",value:function(t){var n=t.detail;window.appGlobals.activity("pointShared",n.social,this.point?this.point.id:-1)}},{key:"_shareTap",value:function(t){var n=this,e=t.detail;window.appGlobals.activity("pointShareHeaderOpen",e.brand,this.point?this.point.id:-1),window.appDialogs.getDialogAsync("shareDialog",(function(t){t.open(n.pointUrl||"",n.t("sharePoint"),n._sharedContent)}))}},{key:"_onPointChanged",value:function(){this.point?this._updateQualities():this.isUpVoted=!1}},{key:"_updateQualitiesFromSignal",value:function(){this._updateQualities()}},{key:"_updateQualities",value:function(){if(this.point&&window.appUser&&window.appUser.loggedIn()&&window.appUser.user&&window.appUser.user.PointQualities){var t=window.appUser.pointQualitiesIndex[this.point.id];t?(this._setPointQuality(t.value),t.value>0&&(this.isUpVoted=!0)):(this.isUpVoted=!1,this._setPointQuality(void 0))}else this.isUpVoted=!1,this._setPointQuality(void 0)}},{key:"_qualityChanged",value:function(){}},{key:"_resetClasses",value:function(){this.pointQualityValue&&this.pointQualityValue>0?(this.$$("#actionUp").className+=" up-selected",je(this.$$("#actionDown"),"down-selected")):this.pointQualityValue&&this.pointQualityValue<0?(this.$$("#actionDown").className+=" down-selected",je(this.$$("#actionUp"),"up-selected")):(je(this.$$("#actionUp"),"up-selected"),je(this.$$("#actionDown"),"down-selected"))}},{key:"_setPointQuality",value:function(t){this.pointQualityValue=t,this._resetClasses()}},{key:"generatePointQuality",value:(n=l(d.mark((function t(n){var e,i;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.point||!0!==window.appUser.loggedIn()){t.next=8;break}return e=this.pointQualityValue===n?"DELETE":"POST",t.next=4,window.serverApi.setPointQuality(this.point.id,e,{point_id:this.point.id,value:n});case 4:i=t.sent,this._pointQualityResponse(i),t.next=10;break;case 8:this.allDisabled=!1,window.appUser.loginForPointQuality(this,{value:n});case 10:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"_pointQualityResponse",value:function(t){this.allDisabled=!1;var n=t.pointQuality,e=t.oldPointQualityValue;this._setPointQuality(n.value),window.appUser.updatePointQualityForPost(this.point.id,n),e&&(e>0?this.point.counter_quality_up=this.point.counter_quality_up-1:e<0&&(this.point.counter_quality_down=this.point.counter_quality_down-1)),n.value>0?this.point.counter_quality_up=this.point.counter_quality_up+1:n.value<0&&(this.point.counter_quality_down=this.point.counter_quality_down+1),this.requestUpdate()}},{key:"generatePointQualityFromLogin",value:function(t){this.point&&!window.appUser.pointQualitiesIndex[this.point.id]&&this.generatePointQuality(t)}},{key:"pointHelpful",value:function(){this.allDisabled=!0,this.generatePointQuality(1),this.isUpVoted=!0,this.requestUpdate,window.appGlobals.activity("clicked","pointHelpful",this.point.id)}},{key:"pointNotHelpful",value:function(){this.allDisabled=!0,window.appGlobals.activity("clicked","pointNotHelpful",this.point.id),this.generatePointQuality(-1),this.requestUpdate}}],[{key:"styles",get:function(){return[s(o(h),"styles",this),k(Wt||(Wt=c(["\n        :host {\n          min-width: 125px;\n        }\n\n        .action-text {\n          font-size: 12px;\n          padding-top: 12px;\n        }\n\n        .action-up {\n        }\n\n        .action-down {\n        }\n\n        .up-selected {\n          color: #444;\n        }\n\n        .down-selected {\n          color: #444;\n        }\n\n        .middle {\n        }\n\n        .all-actions {\n          color: #aaa;\n          padding-right: 8px;\n        }\n\n        yp-ajax {\n          min-width: 32px;\n        }\n\n        .myButton {\n          --mwc-icon-button {\n            width: 10px;\n            height: 10px;\n          }\n        }\n\n        .shareIcon {\n          text-align: right;\n        }\n\n        .shareIcon[up-voted] {\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      "])))]}}]),h}(w),f([b({type:Object})],qe.prototype,"point",void 0),f([b({type:Boolean})],qe.prototype,"hideNotHelpful",void 0),f([b({type:Boolean})],qe.prototype,"isUpVoted",void 0),f([b({type:Boolean})],qe.prototype,"allDisabled",void 0),f([b({type:Boolean})],qe.prototype,"hideSharing",void 0),f([b({type:Object})],qe.prototype,"configuration",void 0),f([b({type:Number})],qe.prototype,"pointQualityValue",void 0),f([b({type:String})],qe.prototype,"pointUrl",void 0),qe=f([x("yp-point-actions")],qe),Qe=function(t){i(y,t);var n,p,h,u,m=e(y);function y(){var t;return r(this,y),(t=m.apply(this,arguments)).linkPoint=!1,t.openTranscript=!0,t.hideUser=!1,t.hideActions=!1,t.isEditing=!1,t.isAdminCommentEditing=!1,t.hasAdminComments=!1,t.maxNumberOfPointsBeforeEditFrozen=5,t.videoActive=!1,t.audioActive=!1,t.checkingTranscript=!1,t.portraitVideo=!1,t.checkTranscriptError=!1,t}return a(y,[{key:"connectedCallback",value:function(){s(o(y.prototype),"connectedCallback",this).call(this),this.addGlobalListener("yp-got-admin-rights",this.requestUpdate.bind(this)),this.addGlobalListener("yp-logged-in",this.requestUpdate.bind(this)),this.addGlobalListener("yp-pause-media-playback",this._pauseMediaPlayback.bind(this))}},{key:"disconnectedCallback",value:function(){s(o(y.prototype),"disconnectedCallback",this).call(this),this.removeGlobalListener("yp-got-admin-rights",this.requestUpdate.bind(this)),this.removeGlobalListener("yp-logged-in",this.requestUpdate.bind(this)),this.removeGlobalListener("yp-pause-media-playback",this._pauseMediaPlayback),Z.detachMediaListeners(this)}},{key:"updated",value:function(t){s(o(y.prototype),"updated",this).call(this,t),t.has("point")&&this._pointChanged(),t.has("isAdminCommentEditing")&&this._isAdminCommentEditingChanged(),t.has("isEditing")&&this._isEditingChanged()}},{key:"renderAdminComments",value:function(){var t,n,e,i;C(Jt||(Jt=c(['\n      <div class="commentFromAdmin" ?hidden="','">\n        ',"\n        ",'\n      </div>\n      <div\n        id="pointAdminCommentContent"\n        ?link-point="','"\n        ?hidden="','"\n        @click="','"\n      >\n        <yp-magic-text\n          simple-format\n          textType="pointAdminCommentContent"\n          truncate="1500"\n          .contentLanguage="','"\n          .content="','"\n          .contentId="','"\n        >\n        </yp-magic-text>\n      </div>\n    '])),this.isEditingSomething,this.post.Group.configuration.customAdminCommentsTitle?C(Zt||(Zt=c(['\n              <yp-magic-text\n                textType="customAdminCommentsTitle"\n                .contentLanguage="','"\n                .content="','"\n                .contentId="','"\n              >\n              </yp-magic-text>\n            '])),this.post.Group.language,this.post.Group.configuration.customAdminCommentsTitle,this.post.Group.id):"",this.post.Group.configuration.customAdminCommentsTitle?"":C(Kt||(Kt=c([" "," "])),this.t("commentFromAdmin")),this.linkPoint,this.isEditingSomething,this._linkIfNeeded,null===(n=null===(t=this.point.public_data)||void 0===t?void 0:t.admin_comment)||void 0===n?void 0:n.language,null===(i=null===(e=this.point.public_data)||void 0===e?void 0:e.admin_comment)||void 0===i?void 0:i.text,this.point.id)}},{key:"renderUserHeader",value:function(){return this.user?C(Yt||(Yt=c([' <div\n          class="userInfoContainer layout horizontal"\n          ?up-vote="','"\n          ?down-vote="','"\n          ?hidden="','"\n        >\n          <mwc-icon\n            class="thumbsIcon thumbsIconUp"\n            ?hidden="','"\n            >thumb_up</mwc-icon\n          >\n          <mwc-icon class="thumbsIcon thumbsIconDown" ?hidden="','"\n            >thumb_down</mwc-icon\n          >\n          <div\n            class="layout horizontal"\n            ?hidden="','"\n          >\n            <yp-user-with-organization\n              .titleDate="','"\n              inverted\n              .user="','"\n            ></yp-user-with-organization>\n          </div>\n        </div>'])),this.isUpVote,this.isDownVote,this.hideUser,!this.isDownVote,this.isUpVote,this.post.Group.configuration.hidePointAuthor,this.point.created_at,this.user):S}},{key:"renderTextPoint",value:function(){return C(Xt||(Xt=c(['\n      <div class="point-content layout vertical ">\n        <span ?hidden="','">\n          <span>','</span>.\n        </span>\n        <div\n          id="pointContent"\n          .linkPoint="','"\n          ?hidden="','"\n          @click="','"\n        >\n          <yp-magic-text\n            simpleFormat\n            textType="pointContent"\n            .contentLanguage="','"\n            .content="','"\n            .contentId="','"\n          >\n          </yp-magic-text>\n        </div>\n      </div>\n    '])),!this.point.name,this.point.name,this.linkPoint,this.isEditingSomething,this._linkIfNeeded,this.point.language,this.point.latestContent,this.point.id)}},{key:"renderVideoOrAudio",value:function(){return C(tn||(tn=c(["\n      ","\n      ","\n      ",'\n\n      <div\n        class="transcriptError layout horizontal center-center"\n        ?hidden="','"\n      >\n        ',"\n      </div>\n\n      ","\n    "])),this.videoActive&&this.pointVideoPath?C(nn||(nn=c(['\n            <div class="topContainer" ?portrait="','">\n              <div class="layout horizontal center-center">\n                <video\n                  id="videoPlayer"\n                  portrait="','"\n                  .data-id="','"\n                  controls\n                  preload="none"\n                  class="video"\n                  .src="','"\n                  playsinline\n                  .poster="','"\n                ></video>\n              </div>\n            </div>\n          '])),this.portraitVideo,this.portraitVideo,this.pointVideoId,this.pointVideoPath,this.pointImageVideoPath?this.pointImageVideoPath:""):S,this.audioActive&&this.pointAudioPath?C(en||(en=c(['\n            <div class="layout vertical center-center">\n              <audio\n                id="audioPlayer"\n                .data-id="','"\n                controls\n                preload="metadata"\n                class="audio"\n                .src="','"\n                playsinline\n              ></audio>\n            </div>\n          '])),this.pointAudioId,this.pointAudioPath):S,this.checkingTranscript?C(on||(on=c(['\n            <div class="layout vertical center-center checkTranscript">\n              <div>',"</div>\n              <mwc-circular-progress-four-color\n                indeterminate\n              ></mwc-circular-progress-four-color>\n            </div>\n          "])),this.t("checkingForTranscript")):S,!this.checkTranscriptError,this.t("checkTranscriptError"),this.point.latestContent?C(sn||(sn=c(['\n            <div class="transcriptText layout vertical center-center">\n              <div class="layout horizontal">\n                <div class="transcriptHeader">\n                  ','\n                </div>\n                <div\n                  ?hidden="','"\n                >\n                  <mwc-icon-button\n                    .label="','"\n                    class="openCloseButton"\n                    icon="keyboard_arrow_right"\n                    @click="','"\n                    hidden$="','"\n                  ></mwc-icon-button>\n                  <mwc-icon-button\n                    .label="','"\n                    class="openCloseButton"\n                    icon="keyboard_arrow_down"\n                    @click="','"\n                    hidden$="','"\n                  ></mwc-icon-button>\n                </div>\n              </div>\n              <div\n                id="pointContentTranscript"\n                .linkPoint="','"\n                ?hidden="','"\n                @click="','"\n              >\n                <yp-magic-text\n                  ?hidden="','"\n                  simpleFormat\n                  textType="pointContent"\n                  .contentLanguage="','"\n                  .content="','"\n                  .contentId="','"\n                >\n                </yp-magic-text>\n              </div>\n            </div>\n          '])),this.t("automaticTranscript"),!this.post.Group.configuration.collapsableTranscripts,this.t("openComments"),this._setOpen,this.openTranscript,this.t("closeComments"),this._setClosed,!this.openTranscript,this.linkPoint,this.isEditing,this._linkIfNeeded,!this.openTranscript,this.point.language,this.point.latestContent,this.point.id):S)}},{key:"renderEditPoint",value:function(){return C(an||(an=c(['\n      <div class="layout vertical">\n        <mwc-textarea\n          id="pointContentEditor"\n          charCounter\n          maxlength="1500"\n          .value="','"\n        ></mwc-textarea>\n        <div class="horizontal end-justified layout">\n          <yp-emoji-selector id="pointEmojiSelector"></yp-emoji-selector>\n        </div>\n        <div class="layout horizontal self-end">\n          <mwc-button\n            @click="','"\n            .label="','"\n          ></mwc-button>\n          <mwc-button\n            @click="','"\n            .label="','"\n          ></mwc-button>\n        </div>\n      </div>\n    '])),this.editText?this.editText:"",this._cancelEdit,this.t("cancel"),this._saveEdit,this.t("update"))}},{key:"renderEditMenu",value:function(){return C(rn||(rn=c(['\n      <div class="layout horizontal self-end" hidden>\n        <mwc-icon-button\n          .label="','"\n          ?hidden="','"\n          icon="comment"\n          @click="','"\n        ></mwc-icon-button>\n        <mwc-icon-button\n          .label="','"\n          ?hidden="','"\n          icon="create"\n          @click="','"\n        ></mwc-icon-button>\n        <mwc-icon-button\n          .label="','"\n          icon="clear"\n          @click="','"\n        ></mwc-icon-button>\n      </div>\n    '])),this.t("editAdminComment"),!this.hasAdminCommentAccess,this._editAdminComment,this.t("edit"),!this.canEditPoint,this._editPoint,this.t("delete"),this._deletePoint)}},{key:"render",value:function(){var t,n;return C(cn||(cn=c(['\n      <div class="layout vertical">\n        ','\n\n        <div class="layout vertical">\n          ',"\n          ","\n          ",'\n\n          <div\n            class="layout horizontal actionContainer"\n            ?hidden="','"\n          >\n            <yp-point-actions\n              .point="','"\n              .pointUrl="','"\n              .configuration="','"\n            ></yp-point-actions>\n            <mwc-icon-button\n              .label="','"\n              id="reportPointIconButton"\n              icon="warning"\n              @click="','"\n            ></mwc-icon-button>\n            <div class="flex"></div>\n\n            ',"\n          </div>\n        </div>\n      </div>\n    "])),this.renderUserHeader(),this.videoOrAudioActive?this.renderVideoOrAudio():this.renderTextPoint(),this.showAdminComments?this.renderAdminComments():S,this.isEditing?this.renderEditPoint():S,this.hideActions,this.point,this.pointUrl,null===(n=null===(t=this.post)||void 0===t?void 0:t.Group)||void 0===n?void 0:n.configuration,this.t("point.report"),this._reportPoint,this.hasPointAccess?this.renderEditMenu():S)}},{key:"_setOpen",value:function(){var t=this;this.openTranscript=!0,setTimeout((function(){t.fire("yp-list-resize"),t.requestUpdate()}),20)}},{key:"_setClosed",value:function(){var t=this;this.openTranscript=!1,setTimeout((function(){t.fire("yp-list-resize"),t.requestUpdate()}),20)}},{key:"isEditingSomething",get:function(){return this.isEditing||this.isAdminCommentEditing}},{key:"showAdminComments",get:function(){return!!(this.post&&this.post.Group&&this.point.public_data&&this.point.public_data.admin_comment&&this.point.public_data.admin_comment.text&&this.post.Group.configuration&&this.post.Group.configuration.allowAdminAnswersToPoints)}},{key:"hasAdminCommentAccess",get:function(){return!!(this.post&&this.post.Group&&N.checkPostAdminOnlyAccess(this.post)&&this.post.Group.configuration&&this.post.Group.configuration.allowAdminAnswersToPoints)}},{key:"videoOrAudioActive",get:function(){return this.videoActive||this.audioActive}},{key:"_isEditingChanged",value:function(){this._updateEmojiBindings()}},{key:"_isAdminCommentEditingChanged",value:function(){this._updateEmojiBindings()}},{key:"_shareTap",value:function(t){window.appGlobals.activity("pointShareOpen",t.detail.brand,this.point.id)}},{key:"pointUrl",get:function(){if(this.point&&this.post)return window.location.protocol+"//"+window.location.hostname+"/post/"+this.post.id+"/"+this.point.id}},{key:"_linkIfNeeded",value:function(){this.linkPoint&&this.post&&R.goToPost(this.post.id,this.point.id)}},{key:"_updateEmojiBindings",value:function(){var t=this;this.isEditing?setTimeout((function(){var n=t.$$("#pointContentEditor"),e=t.$$("#pointEmojiSelector");n&&e?e.inputTarget=n:console.error("Wide: Can't bind point edit emojis :(")}),500):this.isAdminCommentEditing&&setTimeout((function(){var n=t.$$("#pointAdminCommentEditor"),e=t.$$("#pointAdminCommentEmojiSelector");n&&e?e.inputTarget=n:console.error("Wide: Can't bind point edit emojis :(")}),500)}},{key:"_cancelEdit",value:function(){this.isEditing=!1}},{key:"_saveEdit",value:(u=l(d.mark((function t(){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.serverApi.updatePoint(this.point.id,{content:this.editText});case 2:(n=t.sent)&&(n.latestContent=n.PointRevisions[n.PointRevisions.length-1].content,this.point=n),this.isEditing=!1;case 5:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"_cancelAdminCommentEdit",value:function(){this.isAdminCommentEditing=!1}},{key:"_saveAdminCommentEdit",value:(h=l(d.mark((function t(){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.serverApi.updatePointAdminComment(this.post.Group.id,this.point.id,{content:this.editAdminCommentText});case 2:(n=t.sent)&&(this.point.public_data||(this.point.public_data={}),this.point.public_data.admin_comment={text:n.content},this.point=JSON.parse(JSON.stringify(this.point)),this.isAdminCommentEditing=!1,this.hasAdminComments=!0),this.isAdminCommentEditing=!1;case 5:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"_deletePoint",value:function(){var t=this;window.appDialogs.getDialogAsync("confirmationDialog",(function(n){n.open(t.t("point.confirmDelete"),t._reallyDeletePoint.bind(t))}))}},{key:"_reallyDeletePoint",value:(p=l(d.mark((function t(){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.serverApi.deletePoint(this.point.id);case 2:this.fire("yp-point-deleted",{pointId:this.point.id});case 3:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"_reportPoint",value:function(){var t=this;window.appGlobals.activity("open","point.report"),window.appDialogs.getDialogAsync("apiActionDialog",(function(n){n.setup("/api/points/"+t.point.id+"/report",t.t("reportConfirmation"),t._onReport.bind(t),t.t("point.report"),"PUT"),n.open()}))}},{key:"_onReport",value:function(){window.appGlobals.notifyUserViaToast(this.t("point.report")+": "+this.point.content)}},{key:"_editPoint",value:function(){this.hasPointAccess&&this.point.PointRevisions&&(this.editText=this.point.PointRevisions[this.point.PointRevisions.length-1].content,this.isEditing=!0)}},{key:"_editAdminComment",value:function(){this.post&&N.checkPostAdminOnlyAccess(this.post)&&(this.editAdminCommentText=this.point.public_data&&this.point.public_data.admin_comment?this.point.public_data.admin_comment.text:"",this.isAdminCommentEditing=!0)}},{key:"hasPointAccess",get:function(){return N.checkPointAccess(this.point)}},{key:"canEditPoint",get:function(){return this.point&&(this.point.PointVideos&&this.point.PointVideos.length>0||this.point.PointAudios&&this.point.PointAudios.length>0)?N.checkPointAccess(this.point):this.point&&this.point.counter_quality_up+this.point.counter_quality_down<=this.maxNumberOfPointsBeforeEditFrozen&&window.appUser&&window.appUser.user&&this.point&&window.appUser.user.id==this.point.user_id}},{key:"firstUpdated",value:function(t){s(o(y.prototype),"firstUpdated",this).call(this,t),Z.attachMediaListeners(this)}},{key:"_pauseMediaPlayback",value:function(){Z.pauseMediaPlayback(this)}},{key:"_pointChanged",value:function(){if(this._resetMedia(),this.point){this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.collapsableTranscripts&&(this.openTranscript=!1);var t=!1;this.post&&this.post.Group&&this.post.Group.configuration&&this.post.Group.configuration.disableMachineTranscripts&&(t=!0),this.user=this.point.User;var n=Z.getVideoURL(this.point.PointVideos),e=Z.getVideoPosterURL(this.point.PointVideos,void 0);if(this.portraitVideo=Z.isPortraitVideo(this.point.PointVideos),n&&e)this.videoActive=!0,this.pointVideoPath=n,this.pointImageVideoPath=e,this.pointVideoId=this.point.PointVideos[0].id,this.checkTranscriptError=!1,t||"video"!==this.point.checkTranscriptFor||!0!==window.appGlobals.hasTranscriptSupport||(this._checkTranscriptStatus(),this.checkingTranscript=!0,this.point.checkTranscriptFor=void 0);else{var i=Z.getAudioURL(this.point.PointAudios);i&&(this.audioActive=!0,this.pointAudioPath=i,this.pointAudioId=this.point.PointAudios[0].id,this.checkTranscriptError=!1,t||"audio"!==this.point.checkTranscriptFor||!0!==window.appGlobals.hasTranscriptSupport||(this._checkTranscriptStatus(),this.checkingTranscript=!0,this.point.checkTranscriptFor=void 0))}}else this.user=void 0,this.checkTranscriptError=!1}},{key:"_checkTranscriptStatus",value:(n=l(d.mark((function t(){var n,e,i,o=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.videoActive?"videoTranscriptStatus":"audioTranscriptStatus",t.next=3,window.serverApi.checkPointTranscriptStatus(n,this.point.id);case 3:(e=t.sent).point?(i=e.point,this.checkingTranscript=!1,i.latestContent=i.PointRevisions[i.PointRevisions.length-1].content,this.point=i,this.fire("yp-update-point-in-list",i),this.hasPointAccess&&(this.editText=i.latestContent,this.isEditing=!0),this.requestUpdate()):e&&e.inProgress?setTimeout((function(){o._checkTranscriptStatus()}),2e3):e&&e.error?(this.checkingTranscript=!1,this.checkTranscriptError=!0):this.checkingTranscript=!1;case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_resetMedia",value:function(){this.videoActive=!1,this.pointVideoPath=void 0,this.pointImageVideoPath=void 0,this.pointVideoId=void 0,this.audioActive=!1,this.pointAudioPath=void 0,this.pointAudioId=void 0}},{key:"loginName",value:function(){if(this.point.User)return this.point.User.name}},{key:"isUpVote",get:function(){return this.point?0==this.point.value||this.point.value>0:(console.warn("Can't find point for isUpVote"),!1)}},{key:"isDownVote",get:function(){return this.point?0==this.point.value||this.point.value<0:(console.warn("Can't find point for isDownVote"),!1)}}],[{key:"styles",get:function(){return[s(o(y),"styles",this),k(ln||(ln=c(["\n        :host {\n          display: block;\n        }\n\n        .point-content {\n          padding-right: 16px;\n          padding-left: 16px;\n          margin-top: 16px;\n        }\n\n        #pointContentTranscript,\n        #pointContent {\n          cursor: default;\n        }\n\n        #pointContentTranscript,\n        #pointContent[link-point] {\n          cursor: pointer;\n        }\n\n        @media (max-width: 320px) {\n          .user-image {\n            display: none;\n          }\n        }\n\n        .userInfoContainer {\n          border-bottom: solid 4px;\n          width: 100%;\n          padding-bottom: 16px;\n        }\n\n        .userInfoContainer[up-vote] {\n          border-bottom-color: var(--master-point-up-color);\n        }\n\n        .userInfoContainer[down-vote] {\n          border-bottom-color: var(--master-point-down-color);\n        }\n\n        mwc-icon-button {\n          color: #ccc;\n        }\n\n        #reportPointIconButton {\n          color: #ddd;\n          width: 36px;\n          height: 36px;\n        }\n\n        .thumbsIcon {\n          padding-left: 16px;\n          padding-right: 16px;\n        }\n\n        @media (min-width: 985px) {\n          .thumbsIcon {\n            display: none;\n          }\n        }\n\n        mwc-icon.thumbsIconUp {\n          color: var(--master-point-up-color);\n        }\n\n        mwc-icon.thumbsIconDown {\n          color: var(--master-point-down-color);\n        }\n\n        yp-user-with-organization {\n          padding-left: 16px;\n        }\n\n        .actionContainer {\n          margin-top: 8px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        .pointer {\n          cursor: pointer;\n        }\n\n        yp-image,\n        video {\n          width: 398px;\n          height: 224px;\n          margin: 0;\n          padding: 0;\n        }\n\n        @media (max-width: 600px) {\n          yp-image,\n          video {\n            width: 100%;\n            margin: 0 !important;\n            padding: 0;\n            height: initial;\n            vertical-align: top;\n          }\n\n          .actionContainer {\n            margin-left: 12px;\n          }\n\n          #videoPlayer[portrait] {\n            width: 50% !important;\n          }\n        }\n\n        .topContainer[portrait] {\n          background-color: #777;\n        }\n\n        #pointContentEditor,\n        #pointAdminCommentEditor {\n          padding-left: 8px;\n          padding-right: 8px;\n        }\n\n        #pointAdminCommentContent {\n          padding-left: 16px;\n          padding-right: 16px;\n        }\n\n        .commentFromAdmin {\n          padding-left: 16px;\n          padding-right: 16px;\n          padding-top: 16px;\n          font-size: 16px;\n          padding-bottom: 2px;\n          font-weight: bold;\n          color: var(--accent-color, #111);\n        }\n\n        .commentFromAdminInput {\n          padding: 0;\n        }\n\n        .transcriptError {\n          margin-top: 8px;\n          color: #f00;\n        }\n\n        mwc-circular-progress-four-color {\n          margin-top: 4px;\n        }\n\n        .checkTranscript {\n          margin-top: 8px;\n          padding: 8px;\n        }\n\n        .transcriptText {\n          margin-top: 0;\n          padding: 8px;\n          color: #222;\n          padding-bottom: 0;\n          font-style: italic;\n        }\n\n        .transcriptHeader {\n          color: #222;\n          margin-bottom: 2px;\n          font-style: normal;\n        }\n\n        audio {\n          margin-top: 16px;\n          margin-bottom: 16px;\n        }\n\n        video {\n          background-color: #777;\n        }\n\n        #pointContent {\n          color: #111;\n        }\n\n        mwc-icon-button.openCloseButton {\n          width: 54px;\n          height: 54px;\n          margin-top: -16px;\n          padding-left: 0;\n          margin-left: 0;\n          color: #777;\n        }\n      "])))]}}]),y}(w),f([b({type:Object})],Qe.prototype,"point",void 0),f([b({type:Object})],Qe.prototype,"post",void 0),f([b({type:Object})],Qe.prototype,"user",void 0),f([b({type:Boolean})],Qe.prototype,"linkPoint",void 0),f([b({type:Boolean})],Qe.prototype,"openTranscript",void 0),f([b({type:Boolean})],Qe.prototype,"hideUser",void 0),f([b({type:Boolean})],Qe.prototype,"hideActions",void 0),f([b({type:Boolean})],Qe.prototype,"isEditing",void 0),f([b({type:Boolean})],Qe.prototype,"isAdminCommentEditing",void 0),f([b({type:Boolean})],Qe.prototype,"hasAdminComments",void 0),f([b({type:Number})],Qe.prototype,"maxNumberOfPointsBeforeEditFrozen",void 0),f([b({type:String})],Qe.prototype,"editText",void 0),f([b({type:String})],Qe.prototype,"editAdminCommentText",void 0),f([b({type:Boolean})],Qe.prototype,"videoActive",void 0),f([b({type:String})],Qe.prototype,"pointVideoPath",void 0),f([b({type:String})],Qe.prototype,"pointImageVideoPath",void 0),f([b({type:Number})],Qe.prototype,"pointVideoId",void 0),f([b({type:Boolean})],Qe.prototype,"audioActive",void 0),f([b({type:String})],Qe.prototype,"pointAudioPath",void 0),f([b({type:Number})],Qe.prototype,"pointAudioId",void 0),f([b({type:Boolean})],Qe.prototype,"checkingTranscript",void 0),f([b({type:Boolean})],Qe.prototype,"portraitVideo",void 0),f([b({type:Boolean})],Qe.prototype,"checkTranscriptError",void 0),Qe=f([x("yp-point")],Qe),We=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"render",value:function(){return C(dn||(dn=c(['\n      <div class="layout vertical pointContainer">\n        <div\n          class="actionInfo withCursor"\n          ?hidden="','"\n          @click="','">\n          ','...\n        </div>\n        <div\n          class="actionInfo withCursor"\n          ?hidden="','"\n          @click="','">\n          ','...\n        </div>\n        <div class="layout vertical">\n          <yp-magic-text\n            class="post-name withCursor"\n            @click="','"\n            textOnly\n            textType="postName"\n            .contentLanguage="','"\n            .content="','"\n            .contentId="','">\n          </yp-magic-text>\n          <yp-point\n            hideUser\n            .linkPoint="','"\n            class="card"\n            .point="','"></yp-point>\n        </div>\n      </div>\n    '])),!this.isUpVote,this._goToPoint,this.t("point.forAdded"),!this.isDownVote,this._goToPoint,this.t("point.againstAdded"),this._goToPoint,this.activity.Post.language,this.activity.Post.name,this.activity.Post.id,!this.postId,this.activity.Point)}},{key:"_goToPoint",value:function(){!this.postId&&this.activity&&R.goToPost(this.activity.Post.id,this.activity.Point.id,this.activity)}},{key:"isUpVote",get:function(){return this.activity.Point&&this.activity.Point.value>0}},{key:"isDownVote",get:function(){return this.activity.Point&&this.activity.Point.value<0}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(pn||(pn=c(["\n        .pointContainer {\n        }\n        .point {\n          padding: 8px;\n          margin: 8px;\n        }\n\n        .pointText {\n          margin-bottom: 16px;\n          padding: 16px;\n          width: 360px;\n        }\n\n        yp-point {\n          margin-bottom: 36px;\n        }\n\n        @media (max-width: 480px) {\n          yp-point {\n            width: 100%;\n          }\n        }\n\n        .pointLayout {\n          width: 46%;\n        }\n\n        .postName {\n          padding-left: 32px;\n          font-weight: bold;\n          font-size: 24px;\n          padding-bottom: 12px;\n        }\n\n        .actionInfo {\n          font-size: 22px;\n          margin-top: 16px;\n          padding-left: 16px;\n        }\n\n        .post-name {\n          font-size: 26px;\n          padding-bottom: 8px;\n          margin: 0;\n          padding-top: 0;\n          margin-top: 8px;\n          margin-left: 24px;\n        }\n\n        .withCursor {\n          cursor: pointer;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      "])))]}}]),l}(D),f([b({type:Object})],We.prototype,"activity",void 0),f([b({type:Number})],We.prototype,"postId",void 0),We=f([x("ac-activity-point")],We),Je=function(t){i(o,t);var n=e(o);function o(){return r(this,o),n.apply(this,arguments)}return a(o,[{key:"hasGroupHeader",get:function(){return this.activity&&this.activity.Group&&"hidden_public_group_for_domain_level_points"!=this.activity.Group.name&&!this.postId&&!this.groupId}},{key:"groupTitle",get:function(){if(this.activity.Group&&this.postId&&!this.groupId){var t="";return!this.communityId&&this.activity.Community&&this.activity.Community.name!=this.activity.Group.name&&(t+=this.activity.Community.name+" - "),t+=this.activity.Group.name}return""}}]),o}(w),f([b({type:Number})],Je.prototype,"postId",void 0),f([b({type:Number})],Je.prototype,"groupId",void 0),f([b({type:Number})],Je.prototype,"communityId",void 0),f([b({type:Object})],Je.prototype,"activity",void 0),Ze=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"render",value:function(){return C(hn||(hn=c(["\n      ","\n    "])),this.activity&&this.activity.Post?C(un||(un=c(['\n            <div class="layout vertical hasPointer" @click="','">\n              <div class="actionInfo">','</div>\n              <div class="layout horizontal center-center">\n                <yp-post-cover-media\n                  .post="','"\n                ></yp-post-cover-media>\n              </div>\n              <div class="layout vertical center-center">\n                <yp-magic-text\n                  class="post-name mainContainerItem"\n                  is-ie11="','"\n                  textOnly\n                  textType="postName"\n                  .contentLanguage="','"\n                  .content="','"\n                  .contentId="','"\n                >\n                </yp-magic-text>\n              </div>\n              <div class="layout vertical center-center descriptionOuter">\n                <div\n                  id="description"\n                  class="description mainContainerItem"\n                  is-ie11="','"\n                >\n                  <yp-magic-text\n                    id="description"\n                    text-type="postContent"\n                    .contentLanguage="','"\n                    .content="','"\n                    ?noUserInfo="','"\n                    simpleFormat\n                    skipSanitize\n                    .contentId="','"\n                    class="description"\n                    .truncate="','"\n                    .moreText="','"\n                    .closeDialogText="','"\n                  >\n                  </yp-magic-text>\n                </div>\n\n                ',"\n              </div>\n            </div>\n          "])),this._goToPost,this.t("addedAnIdea"),this.activity.Post,this.isIE11,this.activity.Post.language,this.activity.Post.name,this.activity.Post.id,this.isIE11,this.activity.Post.language,this.structuredAnswersFormatted,!this.activity.Post.Group.configuration.showWhoPostedPosts,this.activity.Post.id,this.activity.Post.Group.configuration.descriptionTruncateAmount,this.t("readMore"),this.t("close"),this.hasGroupHeader?C(mn||(mn=c(['\n                      <div class="groupTitle layout horizontal center-center">\n                        ',"\n                      </div>\n                    "])),this.groupTitle):C(yn||(yn=c([""])))):C(gn||(gn=c([""]))))}},{key:"connectedCallback",value:function(){s(o(l.prototype),"connectedCallback",this).call(this),this.post=this.activity.Post}},{key:"_goToPost",value:function(){this.activity.Post&&!this.postId&&R.goToPost(this.activity.Post.id,void 0,this.activity)}},{key:"isIE11",get:function(){return/Trident.*rv[ :]*11\./.test(navigator.userAgent)}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(vn||(vn=c(["\n        .descriptionOuter {\n          color: var(--primary-color-more-darker, #424242);\n          line-height: var(--description-line-height, 1.3);\n          margin: 0;\n          padding-bottom: 8px;\n          padding-top: 8px;\n          margin-bottom: 48px;\n          width: 100% !important;\n        }\n\n        .mainContainerItem[is-ie11] {\n          max-width: 480px !important;\n        }\n\n        @media (max-width: 600px) {\n          .mainContainerItem[is-ie11] {\n            max-width: 290px !important;\n          }\n        }\n\n        .description,\n        .post-name {\n          padding-left: 16px;\n          padding-right: 16px;\n        }\n\n        .post-name {\n          font-size: 24px;\n          padding-bottom: 4px;\n          margin: 0;\n          padding-top: 0;\n          margin-top: 16px;\n        }\n\n        .voting {\n          position: absolute;\n          bottom: 0;\n          right: 16px;\n        }\n\n        .card-actions {\n          position: absolute;\n          bottom: 36px;\n          right: 0;\n        }\n\n        .category-icon {\n          width: 64px;\n          height: 64px;\n        }\n\n        .category-image-container {\n          text-align: right;\n          margin-top: -52px;\n        }\n\n        .postCardCursor {\n          cursor: pointer;\n        }\n\n        yp-post-cover-media {\n          width: 432px;\n          height: 258px;\n          padding-bottom: 4px;\n          margin-top: 8px;\n        }\n\n        .postCard {\n          width: 960px;\n          background-color: #fff;\n        }\n\n        @media (max-width: 960px) {\n          :host {\n            width: 420px;\n          }\n\n          .postCard {\n            height: 100%;\n            width: 420px;\n          }\n\n          yp-post-cover-media {\n            width: 300px;\n            height: 166px;\n          }\n\n          .voting {\n            padding-left: 0;\n            padding-right: 0;\n          }\n\n          .card-actions {\n            width: 320px;\n          }\n\n          .card-content {\n            width: 420px !important;\n            padding-bottom: 74px;\n          }\n\n          .description {\n            width: 300px;\n          }\n        }\n\n        :host {\n          width: 304px;\n        }\n\n        .postCard {\n          height: 100% !important;\n          width: 304px !important;\n        }\n\n        .actionInfo {\n          font-size: 22px;\n          margin-top: 16px;\n          padding-left: 16px;\n          padding-right: 16px;\n          margin-bottom: 16px;\n        }\n\n        @media (max-width: 420px) {\n          .description {\n            width: 290px;\n          }\n\n          yp-post-cover-media {\n            width: 304px !important;\n            height: 168px !important;\n          }\n        }\n\n        .groupTitle {\n          font-size: 15px;\n          padding-top: 8px;\n          color: #777;\n        }\n\n        .hasPointer {\n          cursor: pointer;\n        }\n      "])))]}}]),l}(function(t){var n=function(t){i(p,t);var n,c=e(p);function p(){var t;return r(this,p),(t=c.apply(this,arguments)).autoTranslate=!1,t}return a(p,[{key:"connectedCallback",value:function(){s(o(p.prototype),"connectedCallback",this).call(this),window.autoTranslate&&(this.autoTranslate=!0),this.addGlobalListener("yp-auto-translate",this._autoTranslateEvent.bind(this))}},{key:"disconnectedCallback",value:function(){s(o(p.prototype),"disconnectedCallback",this).call(this),this.removeGlobalListener("yp-auto-translate",this._autoTranslateEvent.bind(this))}},{key:"_autoTranslateEvent",value:function(t){this.autoTranslate=t.detail,this._getSurveyTranslationsIfNeeded()}},{key:"_languageEvent",value:function(t){s(o(p.prototype),"_languageEvent",this).call(this,t),this._getSurveyTranslationsIfNeeded()}},{key:"_getSurveyTranslationsIfNeeded",value:(n=l(d.mark((function t(){var n,e,i,o,s,a,r,c,l,p,h,u,m;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.translatedQuestions=void 0,this.translatedAnswers=void 0,!(this.post&&this.post.public_data&&this.post.public_data.structuredAnswersJson&&this.autoTranslate&&this.language!==this.post.language)){t.next=14;break}if(n=this.getIndexTranslationKey("GroupQuestions"),e=this.getIndexTranslationKey("PostAnswers"),!window.appGlobals.cache.autoTranslateCache[n]||!window.appGlobals.cache.autoTranslateCache[e]){t.next=10;break}this.translatedQuestions=window.appGlobals.cache.autoTranslateCache[n],this.translatedAnswers=window.appGlobals.cache.autoTranslateCache[e],t.next=14;break;case 10:return t.next=12,window.serverApi.getSurveyTranslations(this.post,this.language);case 12:if(i=t.sent,this.post&&this.autoTranslate&&(this.language!==this.post.language||"??"==this.post.language))if(o=i[0],s=i[1],a=JSON.parse(JSON.stringify(this.post.Group.configuration.structuredQuestionsJson)),r=JSON.parse(JSON.stringify(this.post.public_data.structuredAnswersJson)),o.length===F.getQuestionLengthWithSubOptions(a)){for(c=0,l=0;l<a.length;l++)(p=a[l]).text=o[c++],"radios"===p.type&&p.radioButtons&&p.radioButtons.length>0?c+=p.radioButtons.length:"checkboxes"===p.type&&p.checkboxes&&p.checkboxes.length>0?c+=p.checkboxes.length:"dropdown"===p.type&&p.dropdownOptions&&p.dropdownOptions.length>0&&(c+=p.dropdownOptions.length);for(h=0;h<r.length;h++)r[h].value&&(r[h].value=s[h]);this.translatedQuestions=a,this.translatedAnswers=r,u=this.getIndexTranslationKey("GroupQuestions"),m=this.getIndexTranslationKey("PostAnswers"),window.appGlobals.cache.autoTranslateCache[u]=a,window.appGlobals.cache.autoTranslateCache[m]=r}else console.error("Questions and Translated texts length does not match");else this.translatedQuestions=void 0,this.translatedAnswers=void 0;case 14:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getIndexTranslationKey",value:function(t){return"".concat(t,"-").concat(this.post.id,"-").concat(this.language)}},{key:"structuredAnswersFormatted",get:function(){if(this.post&&this.post.public_data&&this.post.public_data.structuredAnswersJson&&this.post.Group.configuration&&this.post.Group.configuration.structuredQuestionsJson){var t={},n={},e={},i="";return this.post.Group.configuration.structuredQuestionsJson.forEach((function(i){i.uniqueId?t[i.uniqueId]=i:(i.showBeforeAnswerId&&(n[i.showBeforeAnswerId]=i),i.showAfterAnswerId&&(e[i.showAfterAnswerId]=i))})),this.post.public_data.structuredAnswersJson.forEach((function(o){if(o&&o.value){var s=t[o.uniqueId];s&&(n[o.uniqueId]&&(i+=n[o.uniqueId].text+"\n\n"),i+="<b>"+s.text+"</b>\n",o.value?i+=o.value+"\n\n":i+="\n\n",e[o.uniqueId]&&(i+=e[o.uniqueId].text+"\n\n"))}})),i}return""}}]),p}(t);return f([b({type:Array})],n.prototype,"translatedQuestions",void 0),f([b({type:Array})],n.prototype,"translatedAnswers",void 0),f([b({type:Boolean})],n.prototype,"autoTranslate",void 0),f([b({type:Object})],n.prototype,"post",void 0),n}(Je)),Ze=f([x("ac-activity-post")],Ze),Ke=function(t){i(h,t);var n,p=e(h);function h(){var t;return r(this,h),(t=p.apply(this,arguments)).hideUser=!1,t}return a(h,[{key:"updated",value:function(t){s(o(h.prototype),"updated",this).call(this,t),t.has("point")&&this._pointChanged()}},{key:"render",value:function(){return this.point?C(fn||(fn=c(['\n      <div class="layout horizontal">\n        <div class="layout horizontal">\n          <yp-user-image .user="','"></yp-user-image>\n        </div>\n        <div class="layout vertical">\n          <div class="comment">\n            ','\n            <div class="layout horizontal">\n              <yp-point-actions\n                .point="','"\n                hideSharing></yp-point-actions>\n              <mwc-icon-button\n                ?hidden=""\n                ?hidden="','"\n                .label="','"\n                id="reportPointIconButton"\n                icon="warning"\n                @click="','"></mwc-icon-button>\n\n              ',"\n            </div>\n          </div>\n        </div>\n      </div>\n    "])),this.user,this.point.content,this.point,!this.loggedInUser,this.t("point.report"),this._reportPoint,this.hasPointAccess?C(bn||(bn=c(['\n                    <div class="layout horizontal self-end">\n                      <mwc-icon-button\n                        id="deleteButton"\n                        .label="','"\n                        icon="clear"\n                        @click="','"></mwc-icon-button>\n                    </div>\n                  '])),this.t("delete"),this._deletePoint):C(xn||(xn=c([""])))):S}},{key:"connectedCallback",value:function(){s(o(h.prototype),"connectedCallback",this).call(this),this.addGlobalListener("yp-logged-in",this.requestUpdate.bind(this)),this.addGlobalListener("yp-got-admin-rights",this.requestUpdate.bind(this))}},{key:"disconnectedCallback",value:function(){s(o(h.prototype),"disconnectedCallback",this).call(this),this.removeGlobalListener("yp-logged-in",this.requestUpdate.bind(this)),this.removeGlobalListener("yp-got-admin-rights",this.requestUpdate.bind(this))}},{key:"_deletePoint",value:function(){var t=this;window.appDialogs.getDialogAsync("confirmationDialog",(function(n){n.open(t.t("point.confirmDelete"),t._reallyDeletePoint.bind(t))}))}},{key:"_reallyDeletePoint",value:(n=l(d.mark((function t(){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.point){t.next=6;break}return t.next=3,window.serverApi.deletePoint(this.point.id);case 3:this.fire("yp-point-deleted",{pointId:this.point.id}),this.fire("iron-resize"),this.point=void 0;case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_reportPoint",value:function(){var t=this;window.appGlobals.activity("open","point.report"),window.appDialogs.getDialogAsync("apiActionDialog",(function(n){n.setup("/api/points/"+t.point.id+"/report",t.t("reportConfirmation"),t._onReport.bind(t),t.t("point.report"),"PUT"),n.open()}))}},{key:"_onReport",value:function(){window.appGlobals.notifyUserViaToast(this.t("point.report")+": "+this.point.content)}},{key:"_pointChanged",value:function(){this.point?this.user=this.point.PointRevisions[0].User:this.user=void 0}},{key:"hasPointAccess",get:function(){return this.point&&N.checkPointAccess(this.point)}},{key:"loginName",value:function(){return this.point&&this.point.PointRevisions[0].User.name}}],[{key:"styles",get:function(){return[k(wn||(wn=c(["\n        .userName {\n          color: #777;\n        }\n\n        yp-user-image {\n          padding-top: 16px;\n          padding-right: 8px;\n        }\n\n        .userName {\n          padding-bottom: 4px;\n        }\n\n        .comment {\n          margin-left: 8px;\n          margin-right: 8px;\n          padding-bottom: 4px;\n          margin-bottom: 8px;\n          padding-top: 16px;\n        }\n\n        .commentDash {\n          border-bottom: dashed #ddd;\n          border-bottom-width: 1px;\n        }\n\n        yp-point-actions {\n          padding-top: 8px;\n        }\n\n        #reportPointIconButton {\n          color: #ddd;\n          width: 36px;\n          height: 36px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        #deleteButton {\n          color: #bbb;\n        }\n      "])))]}}]),h}(D),f([b({type:Object})],Ke.prototype,"point",void 0),f([b({type:Object})],Ke.prototype,"user",void 0),f([b({type:Boolean})],Ke.prototype,"hideUser",void 0),Ke=f([x("yp-point-comment")],Ke),Ye=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"render",value:function(){return C(kn||(kn=c(["\n      ","\n    "])),this.user?C(_n||(_n=c(['\n            <div class="mainContainer">\n              <div class="avatar-container">\n                <yp-user-image\n                  class="hasPointer"\n                  large\n                  .user="','"\n                  @click="','"></yp-user-image>\n              </div>\n              <div class="contact-info">\n                <div class="name">','</div>\n                <div class="email">','</div>\n                <div class="layout vertical center-justified buttons">\n                  <mwc-button\n                    raised\n                    .label="','"\n                    @click="','"></mwc-button>\n                  <mwc-button\n                    raised\n                    .label="','"\n                    @click="','"></mwc-button>\n                  <mwc-button\n                    raised\n                    .label="','"\n                    @click="','"></mwc-button>\n                </div>\n              </div>\n            </div>\n          '])),this.user,this._openEdit,this.user.name,this.user.email,this.t("user.edit"),this._openEdit,this.t("myContent"),this._openAllContentModeration,this.t("user.logout"),this._logout):C(Cn||(Cn=c([""]))))}},{key:"_openAllContentModeration",value:function(){window.appGlobals.activity("open","userAllContentModeration")}},{key:"_openEdit",value:function(){this.fire("open-user-edit")}},{key:"_logout",value:function(){window.appUser.logout()}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(Tn||(Tn=c(["\n        :host {\n          display: block;\n        }\n\n        .avatar-container {\n          position: relative;\n          border: 2px solid #ff9800;\n          border-radius: 50%;\n          height: 90px;\n          padding: 2px;\n          width: 90px;\n          margin: 20px auto;\n        }\n\n        .contact-info {\n          margin: 0 20px;\n          padding-bottom: 4px;\n          text-align: center;\n        }\n\n        .contact-info .name {\n          font-weight: bold;\n        }\n\n        .contact-info .email {\n          color: #999;\n        }\n\n        .buttons {\n          margin-top: 8px;\n        }\n\n        .hasPointer {\n          cursor: pointer;\n        }\n        mwc-button {\n          margin-top: 12px;\n          margin-bottom: 8px;\n        }\n      "])))]}}]),l}(w),f([b({type:Object})],Ye.prototype,"user",void 0),Ye=f([x("yp-user-info")],Ye),Xe=function(t){i(h,t);var n,p=e(h);function h(){return r(this,h),p.apply(this,arguments)}return a(h,[{key:"render",value:function(){return this.comment?C(In||(In=c(['\n          <div\n            class="layout vertical center-center"\n            ?hidden="','">\n            <div class="layout horizontal">\n              <yp-user-image\n                class="userImage"\n                .user="','"></yp-user-image>\n              <div class="layout vertical">\n                <mwc-textfield\n                  id="pointComment"\n                  minlength="15"\n                  name="pointComment"\n                  .value="','"\n                  always-float-label="','"\n                  .label="','"\n                  charCounter\n                  rows="2"\n                  maxrows="2"\n                  @keydown="','"\n                  maxlength="200"\n                  aria-label="','">\n                </mwc-textfield>\n                <div class="layout horizontal">\n                  <mwc-button\n                    id="submitButton"\n                    raised\n                    @click="','"\n                    .label="','"></mwc-button>\n                </div>\n              </div>\n            </div>\n          </div>\n        '])),!this.loggedInUser,this.loggedInUser,this.comment.content,this.comment.content,this.t("point.addComment"),this._keyDown,this.t("point.addComment"),this._sendComment,this.t("point.postComment")):S}},{key:"updated",value:function(t){s(o(h.prototype),"updated",this).call(this,t),t.has("comment")&&this.comment&&this.comment.value&&this.comment.value%7==2&&this.fire("iron-resize")}},{key:"newPointComment",get:function(){return this.$$("#pointComment").value}},{key:"connectedCallback",value:function(){s(o(h.prototype),"connectedCallback",this).call(this),this._reset()}},{key:"_responseError",value:function(){this.$$("#submitButton").disabled=!1}},{key:"_reset",value:function(){this.comment={content:""},this.$$("#submitButton")&&(this.$$("#submitButton").disabled=!1),this.$$("#pointComment")&&(this.$$("#pointComment").value="")}},{key:"_sendComment",value:(n=l(d.mark((function t(){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.comment.content=this.newPointComment,!(this.comment&&this.comment.content&&this.comment.content.length>0)){t.next=17;break}if(!this.point){t.next=8;break}return t.next=5,window.serverApi.postComment("points",this.point.id,{point_id:this.point.id,comment:this.comment});case 5:this.$$("#submitButton").disabled=!1,t.next=15;break;case 8:if(!this.image){t.next=14;break}return t.next=11,window.serverApi.postComment("images",this.image.id,{image_id:this.image.id,comment:this.comment});case 11:this.$$("#submitButton").disabled=!1,t.next=15;break;case 14:console.error("Can't find send ids");case 15:t.next=18;break;case 17:this.fire("yp-error",this.t("point.commentToShort"));case 18:this.fire("refresh"),this._reset();case 20:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_keyDown",value:function(t){"enter"==t.code&&this._sendComment()}}],[{key:"styles",get:function(){return[s(o(h),"styles",this),k(Pn||(Pn=c(["\n        :host {\n          display: block;\n          width: 100%;\n          margin-top: 6px;\n          margin-bottom: 64px;\n        }\n\n        mwc-textfield {\n          width: 370px;\n          max-height: 300px;\n        }\n\n        mwc-button {\n          margin-top: 16px;\n          margin-bottom: 16px;\n          background-color: var(--accent-color);\n          color: #fff;\n        }\n\n        .userImage {\n          padding-left: 16px;\n          padding-right: 16px;\n        }\n\n        @media (max-width: 840px) {\n          :host {\n            width: 100%;\n          }\n\n          mwc-textfield {\n            width: 250px;\n          }\n\n          .userImage {\n            padding-top: 8px;\n            padding-right: 16px;\n            padding-left: 0;\n          }\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      "])))]}}]),h}(D),f([b({type:Object})],Xe.prototype,"comment",void 0),f([b({type:Object})],Xe.prototype,"point",void 0),f([b({type:Object})],Xe.prototype,"image",void 0),Xe=f([x("yp-point-comment-edit")],Xe),ti=function(t){i(u,t);var n,p,h=e(u);function u(){var t;return r(this,u),(t=h.apply(this,arguments)).open=!1,t.loadingList=!1,t.disableOpenClose=!1,t}return a(u,[{key:"updated",value:function(t){s(o(u.prototype),"updated",this).call(this,t),t.has("point")&&this._pointChanged(),t.has("image")&&this._imageChanged(),t.has("open")&&this._openChanged()}},{key:"renderComment",value:function(t,n){return C(An||(An=c([' <yp-point-comment\n      .point="','"\n      .tabindex="','"></yp-point-comment>'])),t,n)}},{key:"render",value:function(){return C(zn||(zn=c(['\n      <div class="container layout vertical">\n        <div\n          class="layout horizontal start-justified"\n          ?hidden="','">\n          <div\n            class="layout horizontal center-center"\n            ?hidden="','">\n            <div class="commentText">','</div>\n            <div id="commentCount">','</div>\n          </div>\n          <div\n            class="layout horizontal center-center"\n            ?hidden="','">\n            <div class="commentText">','</div>\n          </div>\n          <div class="layout horizontal">\n            <mwc-icon-button\n              .label="','"\n              class="openCloseButton"\n              icon="keyboard_arrow_right"\n              @click="','"\n              ?hidden="','"></mwc-icon-button>\n            <mwc-icon-button\n              .label="','"\n              class="openCloseButton"\n              icon="keyboard_arrow_down"\n              @click="','"\n              ?hidden="','"></mwc-icon-button>\n          </div>\n        </div>\n\n        ',"\n        </div>\n      </div>\n    "])),this.disableOpenClose,!this.commentsCount,this.t("point.comments"),this.commentsCount,this.noComments,this.t("noComments"),this.t("openComments"),this.setOpen,this.open,this.t("closeComments"),this.setClosed,!this.open,this.open&&this.comments?C(Ln||(Ln=c(['\n              <div class="layout vertical listContainer">\n                <lit-virtualizer\n                  .items=','\n                  .scrollTarget="','"\n                  .renderItem=',"\n                  @rangeChanged=",'></lit-virtualizer>\n\n                <yp-point-comment-edit\n                  @refresh="','"\n                  .point="','"\n                  .image="','"></yp-point-comment-edit>\n              </div>\n            '])),this.comments,window,this.renderComment,this.scrollEvent,this.refresh,this.point,this.image):C(Sn||(Sn=c([""]))))}},{key:"scrollEvent",value:function(t){this.comments&&-1!=t.last&&t.last<this.comments.length&&(t.last,this.comments.length)}},{key:"connectedCallback",value:function(){s(o(u.prototype),"connectedCallback",this).call(this),this.addListener("yp-point-deleted",this.refresh)}},{key:"disconnectedCallback",value:function(){s(o(u.prototype),"disconnectedCallback",this).call(this),this.removeListener("yp-point-deleted",this.refresh)}},{key:"_openChanged",value:function(){this.open&&(this.point||this.image)&&this.refresh()}},{key:"noComments",get:function(){return!(0==this.commentsCount)}},{key:"setOpen",value:function(){var t=this;this.open=!0,setTimeout((function(){t.fire("iron-resize")}),20)}},{key:"setClosed",value:function(){var t=this;this.open=!1,setTimeout((function(){t.fire("iron-resize")}),20)}},{key:"_pointChanged",value:function(){this.comments=[],this.commentsCount=void 0,this.point&&(this.commentType="points",this.refresh())}},{key:"refresh",value:function(){this._getComments(),this._getCommentsCount()}},{key:"_imageChanged",value:function(){this.image&&(this.commentType="images",this.refresh())}},{key:"hasContent",get:function(){return this.point||this.image}},{key:"_getComments",value:(p=l(d.mark((function t(){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasContent||!this.commentType){t.next=7;break}return t.next=3,window.serverApi.getComments(this.commentType,this.point?this.point.id:this.image.id);case 3:n=t.sent,this.comments=n,n&&n.length,setTimeout((function(){}));case 7:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"_getCommentsCount",value:(n=l(d.mark((function t(){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasContent||!this.commentType){t.next=8;break}return t.next=3,window.serverApi.getCommentsCount(this.commentType,this.point?this.point.id:this.image.id);case 3:n=t.sent,this.commentsCount=n.count,this.fire("yp-set-comments-count",{count:this.commentsCount}),t.next=9;break;case 8:console.error("No point for comment count");case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],[{key:"styles",get:function(){return[s(o(u),"styles",this),k(Nn||(Nn=c(["\n        :host {\n          width: 100%;\n        }\n\n        yp-point-comment-edit {\n        }\n\n        .lit-virtualizer {\n          max-height: 500px;\n          width: 550px;\n          --lit-virtualizer-items-container: {\n          }\n        }\n\n        .listContainer {\n          padding-top: 24px;\n          height: 100%;\n          width: 100%;\n        }\n\n        .container {\n        }\n\n        #commentCount {\n          font-size: 14px;\n        }\n\n        mwc-icon-button.openCloseButton {\n          width: 56px;\n          height: 56px;\n          padding-left: 0;\n          margin-left: 0;\n        }\n\n        .commentText {\n          font-size: 14px;\n          text-transform: lowercase;\n          padding-right: 6px;\n        }\n\n        @media (max-width: 520px) {\n          lit-virtualizer {\n            width: 420px;\n          }\n        }\n\n        @media (max-width: 450px) {\n          lit-virtualizer {\n            width: 318px;\n          }\n        }\n\n        @media (max-width: 359px) {\n          lit-virtualizer {\n            width: 307px;\n          }\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      "])))]}}]),u}(w),f([b({type:Array})],ti.prototype,"comments",void 0),f([b({type:Object})],ti.prototype,"point",void 0),f([b({type:Object})],ti.prototype,"image",void 0),f([b({type:Boolean})],ti.prototype,"open",void 0),f([b({type:Boolean})],ti.prototype,"loadingList",void 0),f([b({type:Boolean})],ti.prototype,"disableOpenClose",void 0),f([b({type:Number})],ti.prototype,"commentsCount",void 0),f([b({type:String})],ti.prototype,"commentType",void 0),ti=f([x("yp-point-comment-list")],ti),ni=function(t){i(l,t);var n=e(l);function l(){var t;return r(this,l),(t=n.apply(this,arguments)).withComments=!1,t.open=!1,t.hideUser=!1,t.commentsCount=0,t}return a(l,[{key:"updated",value:function(t){s(o(l.prototype),"updated",this).call(this,t),t.has("point")&&this._pointChanged(),t.has("open")&&this._openChanged()}},{key:"render",value:function(){return C(Gn||(Gn=c(['\n      <div class="layout vertical newsContainer">\n        <yp-magic-text\n          id="content"\n          class="story"\n          textType="pointContent"\n          simpleFormat\n          truncate="10000"\n          .contentLanguage="','"\n          .content="','"\n          .contentId="','">\n        </yp-magic-text>\n\n        <yp-point-news-story-embed\n          .embedData="','"></yp-point-news-story-embed>\n        <div class="layout horizontal">\n          <yp-point-actions\n            .point="','"\n            hideSharing></yp-point-actions>\n          <div class="layout horizontal start-justified">\n            <div\n              class="layout horizontal center-center withPointer"\n              ?hidden="','"\n              @click="','">\n              <div class="commentText">','</div>\n              <div id="commentCount">','</div>\n            </div>\n            <div\n              class="layout horizontal center-center withPointer"\n              @click="','"\n              ?hidden="','">\n              <div class="commentText">','</div>\n            </div>\n            <div class="layout horizontal">\n              <mwc-icon-button\n                .label="','"\n                class="openCloseButton"\n                icon="keyboard_arrow_right"\n                @click="','"\n                ?hidden="','">\n              </mwc-icon-button>\n              <mwc-icon-button\n                .label="','"\n                class="openCloseButton"\n                icon="keyboard_arrow_down"\n                @click="','"\n                ?hidden="','">\n              </mwc-icon-button>\n            </div>\n          </div>\n        </div>\n        <yp-point-comment-list\n          id="commentsList"\n          @yp-set-comments-count="','"\n          disableOpenClose\n          .point="','"\n          ?hidden="','"></yp-point-comment-list>\n      </div>\n    '])),this.point.language,this.point.latestContent,this.point.id,this.point.embed_data,this.point,!this.commentsCount,this._setOpenToValue,this.t("point.comments"),this.commentsCount,this._setOpenToValue,this.noComments,this.t("noComments"),this.t("toggleOpenClose"),this._setOpen,this.open,this.t("toggleOpenClose"),this._setClosed,!this.open,this._setCommentsCount,this.point,!this.withComments)}},{key:"_setOpenToValue",value:function(){this.open?this._setClosed():this._setOpen()}},{key:"_openChanged",value:function(){this.open&&this.$$("#commentsList").refresh()}},{key:"noComments",get:function(){return!(0==this.commentsCount)}},{key:"_setOpen",value:function(){this.open=!0,this.$$("#commentsList").setOpen()}},{key:"_setClosed",value:function(){this.open=!1,this.$$("#commentsList").setClosed()}},{key:"_setCommentsCount",value:function(t){this.commentsCount=t.detail.count}},{key:"_pointChanged",value:function(){this.point&&this.point.PointRevisions?this.user=this.point.PointRevisions[0].User:this.user=void 0,this.open=!1}},{key:"loginName",value:function(){return this.point.PointRevisions[0].User.name}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(En||(En=c(["\n        :host {\n          width: 100%;\n          margin-top: 8px;\n        }\n\n        .userName {\n          color: #777;\n        }\n\n        .userName {\n          padding-bottom: 4px;\n        }\n\n        .story {\n          padding-bottom: 12px;\n          margin-bottom: 8px;\n          padding-top: 8px;\n          border-bottom: solid #ddd;\n          border-bottom-width: 1px;\n          font-size: 19px;\n        }\n\n        yp-point-actions {\n          padding-top: 8px;\n        }\n\n        .container {\n        }\n\n        #commentCount {\n          font-size: 14px;\n        }\n\n        mwc-icon-button.openCloseButton {\n          width: 56px;\n          height: 56px;\n          padding-left: 0;\n          margin-left: 0;\n        }\n\n        .commentText {\n          font-size: 14px;\n          text-transform: lowercase;\n          padding-right: 6px;\n        }\n\n        .withPointer {\n          cursor: pointer;\n        }\n\n        .newsContainer {\n          width: auto;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      "])))]}}]),l}(w),f([b({type:Object})],ni.prototype,"point",void 0),f([b({type:Object})],ni.prototype,"user",void 0),f([b({type:Boolean})],ni.prototype,"withComments",void 0),f([b({type:Boolean})],ni.prototype,"open",void 0),f([b({type:Boolean})],ni.prototype,"hideUser",void 0),f([b({type:Number})],ni.prototype,"commentsCount",void 0),ni=f([x("yp-point-news-story")],ni),ei=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"render",value:function(){return C(On||(On=c(['\n      <div class="layout vertical mainContainer">\n        ','\n        <div class="layout vertical center-center newsStoryContainer">\n          <yp-point-news-story\n            withComments\n            hideUser\n            class="card"\n            .point="','"></yp-point-news-story>\n        </div>\n\n        ',"\n      </div>\n    "])),this.activity.Post?C(Rn||(Rn=c(['\n              <yp-magic-text\n                @click="','"\n                class="postName"\n                ?hidden="','"\n                textOnly\n                textType="postName"\n                .contentLanguage="','"\n                .content="','"\n                .contentId="','">\n              </yp-magic-text>\n            '])),this._goToPost,!this.activity.Post.name,this.activity.Post.language,this.activity.Post.name,this.activity.Post.id):S,this.activity.Point,this.hasGroupHeader?C(Dn||(Dn=c(['\n              <div class="groupTitle layout horizontal center-center">\n                ',"\n              </div>\n            "])),this.groupTitle):S)}},{key:"_goToPost",value:function(){R.goToPost(this.activity.Post.id,void 0,this.activity)}},{key:"hidePostName",get:function(){return null!=this.postId}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(Fn||(Fn=c(["\n        .newsStoryContainer {\n          padding-left: 8px;\n          padding-right: 8px;\n        }\n\n        .postName {\n          cursor: pointer;\n          margin-top: 16px;\n          padding-left: 8px;\n          padding-right: 8px;\n          color: #555;\n        }\n\n        .groupTitle {\n          font-size: 15px;\n          color: #777;\n          padding-bottom: 16px;\n          margin: 0;\n          padding-top: 0;\n        }\n\n        .hasPointer {\n          cursor: pointer;\n        }\n\n        .mainContainer {\n          width: auto;\n        }\n      "])))]}}]),l}(Je),ei=f([x("ac-activity-point-news-story")],ei),ii=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"render",value:function(){return C(Bn||(Bn=c(['\n      <div class="layout vertical">\n        <div class="groupName">\n          ','\n        </div>\n        <yp-magic-text\n          @click="','"\n          class="postName"\n          textOnly\n          textType="postName"\n          .contentLanguage="','"\n          .content="','"\n          .contentId="','">\n        </yp-magic-text>\n        <yp-magic-text\n          id="statusChange"\n          class="statusChange"\n          .extraId="','"\n          textType="statusChangeContent"\n          .contentLanguage="','"\n          simpleFormat\n          .content="','"\n          .contentId="','">\n        </yp-magic-text>\n      </div>\n    '])),this.activity.Group.name,this._goToPost,this.activity.Post.language,this.activity.Post.name,this.activity.Post.id,this.activity.Post.id,this.activity.PostStatusChange.language,this.statusContent,this.activity.PostStatusChange.id)}},{key:"_goToPost",value:function(){this.activity.Post&&R.goToPost(this.activity.Post.id,void 0,this.activity)}},{key:"statusContent",get:function(){if(this.activity&&this.activity.PostStatusChange&&this.activity.PostStatusChange.content)return this.activity.PostStatusChange.content}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(Un||(Un=c(["\n        .statusChange {\n          padding-left: 32px;\n          padding-right: 32px;\n          margin-bottom: 64px;\n          font-size: 16px;\n          overflow-y: auto;\n          max-height: 360px;\n        }\n\n        .postName {\n          padding-left: 32px;\n          padding-right: 32px;\n          font-weight: bold;\n          font-size: 19px;\n          margin-bottom: 8px;\n          color: #444;\n          cursor: pointer;\n        }\n\n        .groupName {\n          padding-left: 32px;\n          padding: 16px;\n          font-size: 14px;\n          padding-bottom: 8px;\n        }\n      "])))]}}]),l}(w),f([b({type:Object})],ii.prototype,"activity",void 0),ii=f([x("ac-activity-post-status-update")],ii),oi=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"renderActivity",value:function(){switch(this.activity.type){case"activity.post.new":return C(Mn||(Mn=c(['\n          <ac-activity-post\n            .activity="','"\n            .postId="','"\n            .communityId="','"\n            .groupId="','"></ac-activity-post>\n        '])),this.activity,this.postId,this.communityId,this.groupId);case"activity.point.new":return C(Vn||(Vn=c(['\n          <ac-activity-point\n            .postId="','"\n            .activity="','"></ac-activity-point>\n        '])),this.postId,this.activity);case"activity.point.newsStory.new":return C($n||($n=c(['\n          <ac-activity-point-news-story\n            .activity="','"\n            .postId="','"\n            .communityId="','"\n            .groupId="','"></ac-activity-point-news-story>\n        '])),this.activity,this.postId,this.communityId,this.groupId);case"activity.post.status.change":return C(Hn||(Hn=c(['\n          <ac-activity-post-status-update\n            .postId="','"\n            .activity="','"></ac-activity-post-status-update>\n        '])),this.postId,this.activity);default:return S}}},{key:"render",value:function(){return this.activity?C(jn||(jn=c(['\n          <div\n            .loggedInUser="','"\n            class="layout vertical activity"\n            tabindex="','">\n            <mwc-icon-button\n              .label="','"\n              ?hidden="','"\n              icon="delete"\n              data-args="','"\n              class="deleteIcon"\n              @click="','"></mwc-icon-button>\n            <div class="mainActivityContent">\n              <div class="layout horizontal">\n                <yp-user-with-organization\n                  .user="','"\n                  inverted></yp-user-with-organization>\n                <div class="flex"></div>\n                <div\n                  ?hidden="','"\n                  class="createdAt"\n                  .title="','">\n                  ',"\n                </div>\n              </div>\n\n              ","\n            </div>\n          </div>\n        "])),this.isLoggedIn,this.tabIndex,this.t("deleteActivity"),!this.hasActivityAccess,this.activity.id,this._deleteActivity,this.activity.User,!this.wide,this.fromLongTime(this.activity.created_at),this.fromTime(this.activity.created_at),this.renderActivity()):S}},{key:"fromTime",value:function(t){return B(t).fromNow()}},{key:"fromLongTime",value:function(t){return B(t).format()}},{key:"hasActivityAccess",get:function(){return!!this.activity&&(this.domainId&&this.activity.Domain?N.checkDomainAccess(this.activity.Domain):this.communityId&&this.activity.Community?N.checkCommunityAccess(this.activity.Community):this.groupId&&this.activity.Group?N.checkGroupAccess(this.activity.Group):!(!this.postId||!this.activity.Post)&&N.checkPostAccess(this.activity.Post))}},{key:"_deleteActivity",value:function(){this.fire("ak-delete-activity",{id:this.activity.id})}},{key:"_isNotActivityType",value:function(t,n){return t.type!=n}},{key:"_isActivityType",value:function(t,n){return t.type==n}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),G,k(qn||(qn=c(["\n        .activity {\n          margin: 16px;\n          background-color: #fff;\n          height: 100%;\n          padding-left: 16px;\n          padding-right: 16px;\n          margin-bottom: 0;\n        }\n\n        @media (max-width: 600px) {\n          .activity {\n            width: 100%;\n            height: 100%;\n\n            margin: 0;\n            padding-left: 16px;\n            padding-right: 16px;\n            margin-bottom: 8px;\n            margin-top: 8px;\n            width: -webkit-calc(100% - 8px);\n            width: -moz-calc(100% - 8px);\n            width: calc(100% - 8px);\n          }\n\n          .activity[logged-in-user] {\n            margin-left: 0;\n            width: -webkit-calc(100% - 16px);\n            width: -moz-calc(100% - 16px);\n            width: calc(100% - 16px);\n          }\n        }\n\n        .aaaactivity[is-old-safari-or-ie] {\n          height: 550px;\n          overflow: auto;\n        }\n\n        .mainActivityContent {\n          height: 100% !important;\n        }\n\n        ac-activity-header {\n        }\n\n        ac-activity-post {\n          width: 100%;\n        }\n\n        .headerUserImage {\n          padding-top: 16px;\n        }\n\n        h1 {\n          font-size: 24px;\n        }\n\n        mwc-button {\n          color: var(--accent-color);\n        }\n\n        mwc-icon {\n          width: 48px;\n          height: 48px;\n          padding-top: 14px;\n        }\n\n        .createdAt {\n          color: #777;\n          margin-top: 16px;\n          font-size: 14px;\n        }\n\n        yp-ajax {\n          background-color: var(--primary-background-color);\n        }\n\n        .deleteIcon {\n          position: absolute;\n          right: 8px;\n          bottom: 8px;\n          color: #ddd;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      "])))]}}]),l}(D),f([b({type:Object})],oi.prototype,"activity",void 0),f([b({type:Number})],oi.prototype,"domainId",void 0),f([b({type:Number})],oi.prototype,"communityId",void 0),f([b({type:Number})],oi.prototype,"groupId",void 0),f([b({type:Number})],oi.prototype,"postId",void 0),f([b({type:Number})],oi.prototype,"postGroupId",void 0),f([b({type:Number})],oi.prototype,"userId",void 0),oi=f([x("ac-activity")],oi),si=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"render",value:function(){return this.recommendedPosts?C(Qn||(Qn=c(['\n          <div class="headerText layout horizontal center-center">\n            ',"\n          </div>\n\n          ","\n        "])),this.t("recommendedPosts"),this.recommendedPosts.map((function(t){return C(Wn||(Wn=c(['\n              <div class="postContainer">\n                <div class="shadow-elevation-2dp shadow-transition postItem">\n                  <div\n                    class="layout vertical postItem"\n                    @click="','"\n                  >\n                    <div class="layout horizontal">\n                      <yp-post-cover-media\n                        tiny\n                        .post="','"\n                      ></yp-post-cover-media>\n                    </div>\n                    <div class="post-name layout horizontal center-center">\n                      ',"\n                    </div>\n                  </div>\n                </div>\n              </div>\n            "])),(function(){R.goToPost(t.id)}),t,t.name)}))):S}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),G,k(Jn||(Jn=c(["\n        .container {\n          width: 220px;\n          height: 100% !important;\n        }\n\n        .descriptionOuter {\n          color: var(--primary-color-more-darker, #424242);\n          margin: 0;\n          padding-left: 16px;\n          padding-right: 16px;\n        }\n\n        .description,\n        .post-name {\n          padding-left: 16px;\n          padding-right: 16px;\n        }\n\n        .post-name {\n          font-size: 15px;\n          padding: 16px;\n          margin: 0;\n          background-color: #fff;\n          color: #333;\n          text-align: center;\n        }\n\n        .voting {\n          position: absolute;\n          bottom: 0;\n          right: 16px;\n        }\n\n        .card-actions {\n          position: absolute;\n          bottom: 36px;\n          right: 0;\n        }\n\n        .category-icon {\n          width: 64px;\n          height: 64px;\n        }\n\n        .category-image-container {\n          text-align: right;\n          margin-top: -52px;\n        }\n\n        .postCardCursor {\n          cursor: pointer;\n        }\n\n        yp-post-cover-media {\n          width: 220px;\n          height: 124px;\n        }\n\n        .postCard {\n          width: 200px;\n          background-color: #fff;\n        }\n\n        @media (max-width: 960px) {\n          :host {\n            width: 420px;\n          }\n\n          .postCard {\n            height: 100%;\n            width: 420px;\n          }\n\n          yp-post-cover-media {\n            width: 300px;\n            height: 166px;\n          }\n\n          .voting {\n            padding-left: 0;\n            padding-right: 0;\n          }\n\n          .card-actions {\n            width: 320px;\n          }\n\n          .card-content {\n            width: 420px !important;\n            padding-bottom: 74px;\n          }\n\n          .description {\n            width: 300px;\n          }\n        }\n\n        :host {\n          width: 304px;\n        }\n\n        .postCard {\n          height: 100% !important;\n          width: 304px !important;\n        }\n\n        @media (max-width: 420px) {\n          .description {\n            width: 290px;\n          }\n\n          yp-post-cover-media {\n            width: 304px !important;\n            height: 168px !important;\n          }\n        }\n\n        .postContainer {\n          margin-bottom: 16px;\n          margin-left: 16px;\n          margin-right: 16px;\n          max-width: 220px;\n          width: 220px;\n        }\n\n        .postItem {\n          background-color: #fff !important;\n        }\n\n        .headerText {\n          font-size: 20px;\n          margin: 16px;\n          max-width: 220px;\n          padding-top: 8px;\n          padding-bottom: 8px;\n          width: 220px;\n          color: #fff;\n          background-color: var(--primary-color-700);\n        }\n      "])))]}}]),l}(w),f([b({type:Array})],si.prototype,"recommendedPosts",void 0),si=f([x("ac-activity-recommended-posts")],si),ai=function(t,n,e){for(var i=new Map,o=n;o<=e;o++)i.set(t[o],o);return i},ri=U(function(t){i(o,t);var n=e(o);function o(t){var e;if(r(this,o),e=n.call(this,t),t.type!==V.CHILD)throw Error("repeat() can only be used in text expressions");return u(e)}return a(o,[{key:"dt",value:function(t,n,e){var i;void 0===e?e=n:void 0!==n&&(i=n);var o,s=[],a=[],r=0,c=m(t);try{for(c.s();!(o=c.n()).done;){var l=o.value;s[r]=i?i(l,r):r,a[r]=e(l,r),r++}}catch(t){c.e(t)}finally{c.f()}return{values:a,keys:s}}},{key:"render",value:function(t,n,e){return this.dt(t,n,e).values}},{key:"update",value:function(t,n){var e,i=y(n,3),o=i[0],s=i[1],a=i[2],r=$(t),c=this.dt(o,s,a),l=c.values,d=c.keys;if(!Array.isArray(r))return this.ct=d,l;for(var p,h,u=null!==(e=this.ct)&&void 0!==e?e:this.ct=[],m=[],g=0,v=r.length-1,f=0,b=l.length-1;g<=v&&f<=b;)if(null===r[g])g++;else if(null===r[v])v--;else if(u[g]===d[f])m[f]=H(r[g],l[f]),g++,f++;else if(u[v]===d[b])m[b]=H(r[v],l[b]),v--,b--;else if(u[g]===d[b])m[b]=H(r[g],l[b]),j(t,m[b+1],r[g]),g++,b--;else if(u[v]===d[f])m[f]=H(r[v],l[f]),j(t,r[g],r[v]),v--,f++;else if(void 0===p&&(p=ai(d,f,b),h=ai(u,g,v)),p.has(u[g]))if(p.has(u[v])){var x=h.get(d[f]),w=void 0!==x?r[x]:null;if(null===w){var k=j(t,r[g]);H(k,l[f]),m[f]=k}else m[f]=H(w,l[f]),j(t,r[g],w),r[x]=null;f++}else q(r[v]),v--;else q(r[g]),g++;for(;f<=b;){var _=j(t,m[b+1]);H(_,l[f]),m[f++]=_}for(;g<=v;){var C=r[g++];null!==C&&q(C)}return this.ct=d,Q(t,m),W}}]),o}(M)),di=Symbol("virtualizerRef"),pi="virtualizer-sizer",(hi=function(t){i(o,t);var n=e(o);function o(t){var e;return r(this,o),(e=n.call(this,o.eventName,{bubbles:!0})).first=t.first,e.last=t.last,e}return a(o)}(g(Event))).eventName="rangeChanged",(ui=function(t){i(o,t);var n=e(o);function o(t){var e;return r(this,o),(e=n.call(this,o.eventName,{bubbles:!0})).first=t.first,e.last=t.last,e}return a(o)}(g(Event))).eventName="visibilityChanged",mi=function(){function t(n){if(r(this,t),this._benchmarkStart=null,this._layout=null,this._clippingAncestors=[],this._scrollSize=null,this._scrollError=null,this._childrenPos=null,this._childMeasurements=null,this._toBeMeasured=new Map,this._rangeChanged=!0,this._itemsChanged=!0,this._visibilityChanged=!0,this._isScroller=!1,this._sizer=null,this._hostElementRO=null,this._childrenRO=null,this._mutationObserver=null,this._mutationPromise=null,this._mutationPromiseResolver=null,this._mutationsObserved=!1,this._scrollEventListeners=[],this._scrollEventListenerOptions={passive:!0},this._loadListener=this._childLoaded.bind(this),this._scrollToIndex=null,this._items=[],this._first=-1,this._last=-1,this._firstVisible=-1,this._lastVisible=-1,this._scheduled=new WeakSet,this._measureCallback=null,this._measureChildOverride=null,!n)throw new Error("Virtualizer constructor requires a configuration object");if(!n.hostElement)throw new Error('Virtualizer configuration requires the "hostElement" property');this._init(n)}var e,i,o,s,c,p,u;return a(t,[{key:"items",set:function(t){Array.isArray(t)&&t!==this._items&&(this._itemsChanged=!0,this._items=t,this._schedule(this._updateLayout))}},{key:"_init",value:function(t){this._isScroller=!!t.scroller,this._initHostElement(t),this._initLayout(t)}},{key:"_initObservers",value:(u=l(d.mark((function t(){var n,e=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._mutationObserver=new MutationObserver(this._observeMutations.bind(this)),t.next=3,Pi();case 3:n=t.sent,this._hostElementRO=new n((function(){return e._hostElementSizeChanged()})),this._childrenRO=new n(this._childrenSizeChanged.bind(this));case 6:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"_initLayout",value:(p=l(d.mark((function t(e){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.layout){t.next=4;break}this.layout=e.layout,t.next=7;break;case 4:return t.next=6,n.import("./nomodule-34ffe015.js").then((function(t){return t.f}));case 6:this.layout=t.sent.FlowLayout;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"_initHostElement",value:function(t){var n=this._hostElement=t.hostElement;this._applyVirtualizerStyles(),n[di]=this}},{key:"connected",value:(c=l(d.mark((function t(){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._initObservers();case 2:n=this._isScroller,this._clippingAncestors=Ei(this._hostElement,n),this._schedule(this._updateLayout),this._observeAndListen();case 6:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_observeAndListen",value:function(){var t=this;this._mutationObserver.observe(this._hostElement,{childList:!0}),this._mutationPromise=new Promise((function(n){return t._mutationPromiseResolver=n})),this._hostElementRO.observe(this._hostElement),this._scrollEventListeners.push(window),window.addEventListener("scroll",this,this._scrollEventListenerOptions),this._clippingAncestors.forEach((function(n){n.addEventListener("scroll",t,t._scrollEventListenerOptions),t._scrollEventListeners.push(n),t._hostElementRO.observe(n)})),this._children.forEach((function(n){return t._childrenRO.observe(n)})),this._scrollEventListeners.forEach((function(n){return n.addEventListener("scroll",t,t._scrollEventListenerOptions)}))}},{key:"disconnected",value:function(){var t=this;this._scrollEventListeners.forEach((function(n){return n.removeEventListener("scroll",t,t._scrollEventListenerOptions)})),this._scrollEventListeners=[],this._clippingAncestors=[],this._mutationObserver.disconnect(),this._hostElementRO.disconnect(),this._childrenRO.disconnect()}},{key:"_applyVirtualizerStyles",value:function(){var t=this._hostElement.style;t.display=t.display||"block",t.position=t.position||"relative",t.contain=t.contain||"strict",this._isScroller&&(t.overflow=t.overflow||"auto",t.minHeight=t.minHeight||"150px")}},{key:"_getSizer",value:function(){var t=this._hostElement;if(!this._sizer){var n=t.querySelector("[".concat(pi,"]"));n||((n=document.createElement("div")).setAttribute(pi,""),t.appendChild(n)),Object.assign(n.style,{position:"absolute",margin:"-2px 0 0 0",padding:0,visibility:"hidden",fontSize:"2px"}),n.innerHTML="&nbsp;",n.setAttribute(pi,""),this._sizer=n}return this._sizer}},{key:"layout",get:function(){return this._layout},set:function(t){if(this._layout!==t){var n=null,e={};if("object"===h(t)?(void 0!==t.type&&(n=t.type),e=t):n=t,"function"==typeof n){if(this._layout instanceof n)return void(e&&(this._layout.config=e));n=new n(e)}this._layout&&(this._measureCallback=null,this._measureChildOverride=null,this._layout.removeEventListener("scrollsizechange",this),this._layout.removeEventListener("scrollerrorchange",this),this._layout.removeEventListener("itempositionchange",this),this._layout.removeEventListener("rangechange",this),this._sizeHostElement(void 0),this._hostElement.removeEventListener("load",this._loadListener,!0)),this._layout=n,this._layout&&(this._layout.measureChildren&&"function"==typeof this._layout.updateItemSizes&&("function"==typeof this._layout.measureChildren&&(this._measureChildOverride=this._layout.measureChildren),this._measureCallback=this._layout.updateItemSizes.bind(this._layout)),this._layout.addEventListener("scrollsizechange",this),this._layout.addEventListener("scrollerrorchange",this),this._layout.addEventListener("itempositionchange",this),this._layout.addEventListener("rangechange",this),this._layout.listenForChildLoadEvents&&this._hostElement.addEventListener("load",this._loadListener,!0),this._schedule(this._updateLayout))}}},{key:"startBenchmarking",value:function(){null===this._benchmarkStart&&(this._benchmarkStart=window.performance.now())}},{key:"stopBenchmarking",value:function(){var t=this;if(null!==this._benchmarkStart){var n=window.performance.now(),e=n-this._benchmarkStart,i=performance.getEntriesByName("uv-virtualizing","measure").filter((function(e){return e.startTime>=t._benchmarkStart&&e.startTime<n})).reduce((function(t,n){return t+n.duration}),0);return this._benchmarkStart=null,{timeElapsed:e,virtualizationTime:i}}return null}},{key:"_measureChildren",value:function(){for(var t={},n=this._children,e=this._measureChildOverride||this._measureChild,i=0;i<n.length;i++){var o=n[i],s=this._first+i;(this._itemsChanged||this._toBeMeasured.has(o))&&(t[s]=e.call(this,o,this._items[s]))}this._childMeasurements=t,this._schedule(this._updateLayout),this._toBeMeasured.clear()}},{key:"_measureChild",value:function(t){var n,e,i=t.getBoundingClientRect(),o=i.width,s=i.height;return Object.assign({width:o,height:s},(n=t,{marginTop:Si((e=window.getComputedStyle(n)).marginTop),marginRight:Si(e.marginRight),marginBottom:Si(e.marginBottom),marginLeft:Si(e.marginLeft)}))}},{key:"scrollToIndex",set:function(t){this._scrollToIndex=t,this._schedule(this._updateLayout)}},{key:"_schedule",value:(s=l(d.mark((function t(n){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._scheduled.has(n)){t.next=6;break}return this._scheduled.add(n),t.next=4,Promise.resolve();case 4:this._scheduled.delete(n),n.call(this);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"_updateDOM",value:(o=l(d.mark((function t(){var n,e,i=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this._rangeChanged,e=this._itemsChanged,this._visibilityChanged&&(this._notifyVisibility(),this._visibilityChanged=!1),!n&&!e){t.next=6;break}return this._notifyRange(),t.next=6,this._mutationPromise;case 6:this._children.forEach((function(t){return i._childrenRO.observe(t)})),this._positionChildren(this._childrenPos),this._sizeHostElement(this._scrollSize),this._scrollError&&(this._correctScrollError(this._scrollError),this._scrollError=null),this._benchmarkStart&&"mark"in window.performance&&window.performance.mark("uv-end");case 11:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_updateLayout",value:function(){this._layout&&(this._layout.totalItems=this._items.length,null!==this._scrollToIndex&&(this._layout.scrollToIndex(this._scrollToIndex.index,this._scrollToIndex.position),this._scrollToIndex=null),this._updateView(),null!==this._childMeasurements&&(this._measureCallback&&this._measureCallback(this._childMeasurements),this._childMeasurements=null),this._layout.reflowIfNeeded(this._itemsChanged),this._benchmarkStart&&"mark"in window.performance&&window.performance.mark("uv-end"))}},{key:"_handleScrollEvent",value:function(){if(this._benchmarkStart&&"mark"in window.performance){try{window.performance.measure("uv-virtualizing","uv-start","uv-end")}catch(t){console.warn("Error measuring performance data: ",t)}window.performance.mark("uv-start")}this._schedule(this._updateLayout)}},{key:"handleEvent",value:function(t){switch(t.type){case"scroll":(t.currentTarget===window||this._clippingAncestors.includes(t.currentTarget))&&this._handleScrollEvent();break;case"scrollsizechange":this._scrollSize=t.detail,this._schedule(this._updateDOM);break;case"scrollerrorchange":this._scrollError=t.detail,this._schedule(this._updateDOM);break;case"itempositionchange":this._childrenPos=t.detail,this._schedule(this._updateDOM);break;case"rangechange":this._adjustRange(t.detail),this._schedule(this._updateDOM);break;default:console.warn("event not handled",t)}}},{key:"_children",get:function(){for(var t=[],n=this._hostElement.firstElementChild;n;)n.hasAttribute(pi)||t.push(n),n=n.nextElementSibling;return t}},{key:"_updateView",value:function(){var t,n,e,i,o,s,a=this._hostElement,r=this._layout,c=a.getBoundingClientRect();t=0,n=0,e=window.innerHeight,i=window.innerWidth;var l,d=m(this._clippingAncestors);try{for(d.s();!(l=d.n()).done;){var p=l.value.getBoundingClientRect();t=Math.max(t,p.top),n=Math.max(n,p.left),e=Math.min(e,p.bottom),i=Math.min(i,p.right)}}catch(t){d.e(t)}finally{d.f()}o=t-c.top+a.scrollTop,s=n-c.left+a.scrollLeft;var h=Math.max(1,e-t),u=Math.max(1,i-n);r.viewportSize={width:u,height:h},r.viewportScroll={top:o,left:s}}},{key:"_sizeHostElement",value:function(t){var n=82e5,e=t&&t.width?Math.min(n,t.width):0,i=t&&t.height?Math.min(n,t.height):0;if(this._isScroller)this._getSizer().style.transform="translate(".concat(e,"px, ").concat(i,"px)");else{var o=this._hostElement.style;o.minWidth=e?"".concat(e,"px"):"100%",o.minHeight=i?"".concat(i,"px"):"100%"}}},{key:"_positionChildren",value:function(t){var n=this;if(t){var e=this._children;Object.keys(t).forEach((function(i){var o=i-n._first,s=e[o];if(s){var a=t[i],r=a.top,c=a.left,l=a.width,d=a.height,p=a.xOffset,h=a.yOffset;s.style.position="absolute",s.style.boxSizing="border-box",s.style.transform="translate(".concat(c,"px, ").concat(r,"px)"),void 0!==l&&(s.style.width=l+"px"),void 0!==d&&(s.style.height=d+"px"),s.style.left=void 0===p?null:p+"px",s.style.top=void 0===h?null:h+"px"}}))}}},{key:"_adjustRange",value:(i=l(d.mark((function t(n){var e,i,o,s;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this._first,i=this._last,o=this._firstVisible,s=this._lastVisible,this._first=n.first,this._last=n.last,this._firstVisible=n.firstVisible,this._lastVisible=n.lastVisible,this._rangeChanged=this._rangeChanged||this._first!==e||this._last!==i,this._visibilityChanged=this._visibilityChanged||this._firstVisible!==o||this._lastVisible!==s;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"_correctScrollError",value:function(t){var n=this._clippingAncestors[0];n?(n.scrollTop-=t.top,n.scrollLeft-=t.left):window.scroll(window.pageXOffset-t.left,window.pageYOffset-t.top)}},{key:"_notifyRange",value:function(){this._hostElement.dispatchEvent(new hi({first:this._first,last:this._last}))}},{key:"_notifyVisibility",value:function(){this._hostElement.dispatchEvent(new ui({first:this._firstVisible,last:this._lastVisible}))}},{key:"_hostElementSizeChanged",value:function(){this._schedule(this._updateLayout)}},{key:"_observeMutations",value:(e=l(d.mark((function t(){var n=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._mutationsObserved||(this._mutationsObserved=!0,this._mutationPromiseResolver(),this._mutationPromise=new Promise((function(t){return n._mutationPromiseResolver=t})),this._mutationsObserved=!1);case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_childLoaded",value:function(){}},{key:"_childrenSizeChanged",value:function(t){if(this._layout.measureChildren){var n,e=m(t);try{for(e.s();!(n=e.n()).done;){var i=n.value;this._toBeMeasured.set(i.target,i.contentRect)}}catch(t){e.e(t)}finally{e.f()}this._measureChildren()}this._itemsChanged=!1,this._rangeChanged=!1}}]),t}(),yi=function(t){return t},gi=function(t,n){return C(Zn||(Zn=c(["",": ",""])),n,JSON.stringify(t,null,2))},vi=function(t){i(c,t);var n=e(c);function c(){var t;return r(this,c),(t=n.apply(this,arguments))._renderItem=function(n,e){return gi(n,e+t._first)},t._providedRenderItem=gi,t.items=[],t.scroller=!1,t.keyFunction=yi,t._first=0,t._last=-1,t}return a(c,[{key:"renderItem",get:function(){return this._providedRenderItem},set:function(t){var n=this;this._providedRenderItem=t,this._renderItem=function(e,i){return t(e,i+n._first)},this.requestUpdate()}},{key:"layout",get:function(){return this[di].layout},set:function(t){this._layout=t,t&&this._virtualizer&&(this._virtualizer.layout=t)}},{key:"scrollToIndex",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";this._virtualizer.scrollToIndex={index:t,position:n}}},{key:"updated",value:function(){this._virtualizer&&(void 0!==this._layout&&(this._virtualizer.layout=this._layout),this._virtualizer.items=this.items)}},{key:"firstUpdated",value:function(){var t=this,n=this._layout;this._virtualizer=new mi({hostElement:this,layout:n,scroller:this.scroller}),this.addEventListener("rangeChanged",(function(n){n.stopPropagation(),t._first=n.first,t._last=n.last})),this._virtualizer.connected()}},{key:"connectedCallback",value:function(){s(o(c.prototype),"connectedCallback",this).call(this),this._virtualizer&&this._virtualizer.connected()}},{key:"disconnectedCallback",value:function(){this._virtualizer&&this._virtualizer.disconnected(),s(o(c.prototype),"disconnectedCallback",this).call(this)}},{key:"createRenderRoot",value:function(){return this}},{key:"render",value:function(){var t=this.items,n=this._renderItem,e=this.keyFunction,i=[];if(this._first>=0&&this._last>=this._first)for(var o=this._first;o<this._last+1;o++)i.push(t[o]);return ri(i,e||yi,n)}}]),c}(A),Ii([b()],vi.prototype,"renderItem",null),Ii([b({attribute:!1})],vi.prototype,"items",void 0),Ii([b({reflect:!0,type:Boolean})],vi.prototype,"scroller",void 0),Ii([b()],vi.prototype,"keyFunction",void 0),Ii([I()],vi.prototype,"_first",void 0),Ii([I()],vi.prototype,"_last",void 0),Ii([b({attribute:!1})],vi.prototype,"layout",null),vi=Ii([x("lit-virtualizer")],vi),fi=function(t){i(y,t);var n,p,h,u,m=e(y);function y(){var t;return r(this,y),(t=m.apply(this,arguments)).disableNewPosts=!1,t.noRecommendedPosts=!0,t.gotInitialData=!1,t.mode="activities",t.closeNewsfeedSubmissions=!1,t._moreToLoad=!1,t}return a(y,[{key:"updated",value:function(t){s(o(y.prototype),"updated",this).call(this,t),t.has("domainId")&&this._domainIdChanged(),t.has("communityId")&&this._communityIdChanged(),t.has("groupId")&&this._groupIdChanged(),t.has("postId")&&this._postIdChanged(),t.has("userId")&&this._userIdChanged()}},{key:"renderItem",value:function(t,n){return C(Kn||(Kn=c(['\n    <div class="layout vertical center-center" style="width: 100%;">\n    <ac-activity\n        tabindex="','"\n        .hasLoggedInUser="','"\n        class="activityContainer"\n        .activity="','"\n        .postId="','"\n        .groupId="','"\n        .communityId="','"\n        .domainId="','"\n        @ak-delete-activity="','"></ac-activity>\n    </div>\n    '])),n,this.isLoggedIn,t,this.postId,this.groupId,this.communityId,this.domainId,this._deleteActivity)}},{key:"render",value:function(){return C(Yn||(Yn=c(['\n      <div\n        class="layout horizontal topLevelActivitiesContainer center-center"\n        wide="','"\n        ?rtl="','">\n        <div class="layout vertical self-start center-center">\n          ',"\n          ",'\n        </div>\n\n        <div\n          class="layout vertical self-start recommendedPosts"\n          ?notActive="','"\n          small="','"\n          ?hidden="','">\n          <ac-activity-recommended-posts\n            id="recommendedPosts"\n            .recommendedPosts="','"\n            class="layout vertical"></ac-activity-recommended-posts>\n        </div>\n      </div>\n    '])),this.wide,this.rtl,this.loggedInUser?C(Xn||(Xn=c(['\n                <div\n                  .loggedInUser="','"\n                  elevation="1"\n                  ?hidden="','"\n                  class="layout horizontal addNewsBox shadow-elevation-2dp shadow-transition">\n                  <yp-point-news-story-edit\n                    .domainId="','"\n                    .communityId="','"\n                    .groupId="','"\n                    .postGroupId="','"\n                    .postId="','"\n                    @refresh="','">\n                  </yp-point-news-story-edit>\n                </div>\n              '])),this.isLoggedIn,this.closeNewsfeedSubmissions||!this.activities,this.domainId,this.communityId,this.groupId,this.postGroupId,this.postId,this.loadNewData):C(te||(te=c(['\n                <div class="layout vertical center-center">\n                  <mwc-button\n                    raised\n                    class="layout horizontal notLoggedInButton"\n                    .label="','"\n                    @click="','">\n                  </mwc-button>\n                </div>\n              '])),this.t("loginToShareALink"),this._openLogin),this.activities?C(ne||(ne=c(['\n                <lit-virtualizer\n                  id="list"\n                  .items=','\n                  .scrollTarget="','"\n                  .layout="','"\n                  id="activitiesList"\n                  .renderItem=',"\n                  @rangeChanged=","></lit-virtualizer>\n              "])),this.activities,window,X,this.renderItem.bind(this),this.scrollEvent):S,this.noRecommendedPosts,!this.wide,!this.recommendedPosts,this.recommendedPosts)}},{key:"scrollEvent",value:function(t){this.activities&&this._moreToLoad&&-1!=t.last&&t.last<this.activities.length&&t.last+5>=this.activities.length&&(this._moreToLoad=!0,this._loadMoreData())}},{key:"connectedCallback",value:function(){switch(s(o(y.prototype),"connectedCallback",this).call(this),this.addListener("yp-point-deleted",this._pointDeleted),this.addListener("yp-refresh-activities-scroll-threshold",this._clearScrollThreshold),this.collectionType){case"domain":this.domainId=this.collectionId;break;case"community":this.communityId=this.collectionId;break;case"group":this.groupId=this.collectionId;break;case"post":this.postId=this.collectionId;break;case"user":this.userId=this.collectionId}}},{key:"disconnectedCallback",value:function(){s(o(y.prototype),"disconnectedCallback",this).call(this),this.removeListener("yp-point-deleted",this._pointDeleted),this.removeListener("yp-refresh-activities-scroll-threshold",this._clearScrollThreshold)}},{key:"_openLogin",value:function(){this.fire("yp-open-login")}},{key:"_pointDeleted",value:function(t){if(this.activities)for(var n=0;n<this.activities.length;n++)this.activities[n].Point&&this.activities[n].Point.id==t.detail.pointId&&this._removeActivityId(this.activities[n].id)}},{key:"wideListOffset",get:function(){return this.groupId?"800":"415"}},{key:"ironListResizeScrollThreshold",get:function(){return this.wide?800:300}},{key:"ironListPaddingTop",get:function(){var t=this.$$("#activitiesList").offsetTop;return t-=75,this.isLoggedIn||this.groupId||(t-=75),t>0?(console.info("News scroll offset: "+t),t):(t=this.groupId?this.wide?this.isLoggedIn?700:580:this.isLoggedIn?950:690:this.wide?this.isLoggedIn?600:400:this.isLoggedIn?700:610,console.info("News (manual) scroll offset: "+t),t)}},{key:"_activityDeletedResponse",value:function(t){this._removeActivityId(t.detail.response.activityId)}},{key:"_removeActivityId",value:function(t){if(this.activities)for(var n=0;n<this.activities.length;n++)this.activities[n].id==t&&this.activities.splice(n,1)}},{key:"_deleteActivity",value:function(t){var n=this;this.activityIdToDelete=t.detail.id,window.appDialogs.getDialogAsync("confirmationDialog",(function(t){t.open(n.t("activity.confirmDelete"),n._reallyDelete.bind(n))}))}},{key:"_reallyDelete",value:(u=l(d.mark((function t(){var n,e;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.domainId?(n="domains",e=this.domainId):this.communityId?(n="communities",e=this.communityId):this.groupId?(n="groups",e=this.groupId):this.postId?(n="posts",e=this.postId):this.userId&&(n="users",e=this.postId),!(n&&e&&this.activityIdToDelete)){t.next=7;break}return t.next=4,window.serverApi.deleteActivity(n,e,this.activityIdToDelete);case 4:this.activityIdToDelete=void 0,t.next=8;break;case 7:console.error("No activity found to delete");case 8:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"_generateRequest",value:function(t,n){t&&(this.oldestProcessedActivityAt=void 0,this.noRecommendedPosts=!0,this._moreToLoad=!0,window.appUser&&window.appUser.user&&this.postId,this.mode="activities",this.url="/api/"+this.mode+"/"+n+"/"+t,this._loadMoreData(),"posts"!=n&&this._getRecommendations(n,t))}},{key:"_loadMoreData",value:(h=l(d.mark((function t(){var n,e;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.url||!this._moreToLoad){t.next=10;break}return this._moreToLoad=!1,n=this.url,this.oldestProcessedActivityAt&&(n+="?beforeDate="+this.oldestProcessedActivityAt),t.next=6,window.serverApi.getAcActivities(n);case 6:e=t.sent,this._processResponse(e),t.next=11;break;case 10:console.warn("Trying to load more activities without conditions");case 11:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"loadNewData",value:(p=l(d.mark((function t(){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.url||!this.latestProcessedActivityAt){t.next=10;break}return n=this.url,this.oldestProcessedActivityAt&&(n=n+"?afterDate="+this.latestProcessedActivityAt),t.t0=this,t.next=6,window.serverApi.getAcActivities(n);case 6:t.t1=t.sent,t.t0._processResponse.call(t.t0,t.t1),t.next=16;break;case 10:if(!this.url||this.latestProcessedActivityAt){t.next=16;break}return t.t2=this,t.next=14,window.serverApi.getAcActivities(this.url);case 14:t.t3=t.sent,t.t2._processResponse.call(t.t2,t.t3);case 16:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"_domainIdChanged",value:function(){this.domainId&&(this.activities=void 0,this.recommendedPosts=void 0,this._generateRequest(this.domainId,"domains"))}},{key:"_communityIdChanged",value:function(){this.communityId&&(this.activities=void 0,this.recommendedPosts=void 0,this._generateRequest(this.communityId,"communities"))}},{key:"_groupIdChanged",value:function(){this.groupId&&(this.activities=void 0,this.recommendedPosts=void 0,this._generateRequest(this.groupId,"groups"))}},{key:"_postIdChanged",value:function(){this.postId&&(this.activities=void 0,this.recommendedPosts=void 0,this._generateRequest(this.postId,"posts"))}},{key:"_userIdChanged",value:function(){this.userId&&(this.activities=void 0,this.recommendedPosts=void 0,this._generateRequest(this.userId,"users"))}},{key:"_clearScrollThreshold",value:function(){}},{key:"_getRecommendations",value:(n=l(d.mark((function t(n,e){var i;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!0,this.activities&&this.activities.length>0&&(this.activities[0].Group&&this.activities[0].Group.configuration&&this.activities[0].Group.configuration.hideRecommendationOnNewsFeed&&(i=!1),this.activities[0].Community&&this.activities[0].Community.configuration&&this.activities[0].Community.configuration.hideRecommendationOnNewsFeed&&(i=!1)),!i){t.next=9;break}return t.next=5,window.serverApi.getRecommendations(n,e);case 5:this.recommendedPosts=t.sent,this.noRecommendedPosts=!1,t.next=10;break;case 9:this.noRecommendedPosts=!0;case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"_preProcessActivities",value:function(t){for(var n=0;n<t.length;n++)t[n].Point&&(t[n].Point.latestContent=t[n].Point.PointRevisions[t[n].Point.PointRevisions.length-1].content);return t}},{key:"_processResponse",value:function(t){var n=this._preProcessActivities(t.activities);if(this.gotInitialData=!0,t.oldestProcessedActivityAt?this.oldestProcessedActivityAt=t.oldestProcessedActivityAt:console.warn("Have not set oldestProcessedActivityAt"),this.activities)for(var e=0;e<n.length;e++)this.url.indexOf("afterDate")>-1?this.activities.unshift(n[e]):this.activities.push(n[e]);else this.activities=n;n&&n.length>0&&((!this.latestProcessedActivityAt||this.latestProcessedActivityAt<n[0].created_at)&&(this.latestProcessedActivityAt=n[0].created_at),this.latestProcessedActivityAt||console.error("Have not set latest processed activity at"),this._moreToLoad=!0,(this.activities.length<15||n.length<3&&this.activities.length<100)&&this._loadMoreData()),this.fireGlobal("yp-refresh-activities-scroll-threshold",{}),setTimeout((function(){})),this.closeNewsfeedSubmissions=!1,this.activities&&this.activities.length>0&&(this.activities[0].Group&&this.activities[0].Group.configuration&&this.activities[0].Group.configuration.closeNewsfeedSubmissions||this.activities[0].Community&&this.activities[0].Community.configuration&&this.activities[0].Community.configuration.closeNewsfeedSubmissions)&&(this.closeNewsfeedSubmissions=!0)}},{key:"scrollToItem",value:function(t){if(console.log("Activity scrolling to item"),t&&this.activities)for(var n=0;n<this.activities.length;n++)if(this.activities[n]==t){this.$$("#list").scrollToIndex(n);break}}},{key:"fireResize",value:function(){console.log("fireResize")}}],[{key:"styles",get:function(){return[s(o(y),"styles",this),G,k(ee||(ee=c(["\n        :host {\n          height: 100%;\n        }\n\n        lit-virtualizer {\n          height: 100vh;\n          width: 100vw;\n        }\n\n        .addNewsBox {\n          background-color: #fff;\n          width: 550px;\n          height: 100%;\n          padding-left: 16px;\n          padding-right: 16px;\n          margin-top: 16px;\n          margin-left: 16px;\n          margin-right: 16px;\n        }\n\n        @media (max-width: 600px) {\n          .addNewsBox {\n            width: 100%;\n            height: 100%;\n            margin-bottom: 8px;\n            margin-top: 8px;\n            margin-left: 0;\n            margin-right: 0;\n            width: -webkit-calc(100% - 16px);\n            width: -moz-calc(100% - 16px);\n            width: calc(100% - 16px);\n          }\n        }\n\n        @media (max-width: 340px) {\n          .addNewsBox {\n            width: 100%;\n            height: 100%;\n            margin-bottom: 8px;\n            margin-top: 8px;\n            margin-left: 0;\n            margin-right: 0;\n            width: -webkit-calc(100% - 36px);\n            width: -moz-calc(100% - 36px);\n            width: calc(100% - 36px);\n          }\n        }\n\n        .activityContainer {\n          width: 550px;\n          margin: 0;\n          padding: 0;\n        }\n\n        @media (max-width: 600px) {\n          .activityContainer {\n            width: 100%;\n          }\n        }\n\n        .recommendedPosts[not-active] {\n          display: none;\n        }\n\n        .recommendedPosts[small] {\n          display: none;\n        }\n\n        .mainActivityContent {\n          height: 100% !important;\n        }\n\n        .headerUserImage {\n          padding-top: 16px;\n        }\n\n        h1 {\n          font-size: 24px;\n        }\n\n        mwc-button {\n          color: var(--accent-color);\n        }\n\n        mwc-icon {\n          width: 48px;\n          height: 48px;\n          padding-top: 14px;\n        }\n\n        .createdAt {\n          color: #777;\n          margin-top: 16px;\n          font-size: 14px;\n        }\n\n        yp-ajax {\n          background-color: var(--primary-background-color);\n        }\n\n        .deleteIcon {\n          position: absolute;\n          right: 8px;\n          bottom: 8px;\n          color: #ddd;\n        }\n\n        .withCursor {\n          cursor: pointer;\n        }\n\n        @media (max-width: 960px) {\n          .recommendedPosts {\n            display: none !important;\n          }\n        }\n\n        .topLevelActivitiesContainer[wide] {\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        .spinnerContainer {\n          margin-top: 32px;\n        }\n\n        .topSpinnerContainer {\n          margin-top: 16px;\n        }\n\n        :focus {\n          outline: none;\n        }\n\n        .notLoggedInButton {\n          margin-top: 8px;\n          width: 250px;\n          background-color: #fff;\n          margin-bottom: 8px;\n          text-align: center;\n        }\n\n        .topLevelActivitiesContainer[rtl] {\n          direction: rtl;\n        }\n      "])))]}}]),y}(D),f([b({type:Boolean})],fi.prototype,"disableNewPosts",void 0),f([b({type:Boolean})],fi.prototype,"noRecommendedPosts",void 0),f([b({type:Boolean})],fi.prototype,"gotInitialData",void 0),f([b({type:Array})],fi.prototype,"activities",void 0),f([b({type:Number})],fi.prototype,"domainId",void 0),f([b({type:Number})],fi.prototype,"collectionId",void 0),f([b({type:String})],fi.prototype,"collectionType",void 0),f([b({type:Number})],fi.prototype,"communityId",void 0),f([b({type:Number})],fi.prototype,"groupId",void 0),f([b({type:Number})],fi.prototype,"postId",void 0),f([b({type:Number})],fi.prototype,"postGroupId",void 0),f([b({type:Number})],fi.prototype,"userId",void 0),f([b({type:String})],fi.prototype,"mode",void 0),f([b({type:String})],fi.prototype,"url",void 0),f([b({type:Object})],fi.prototype,"latestProcessedActivityAt",void 0),f([b({type:Object})],fi.prototype,"oldestProcessedActivityAt",void 0),f([b({type:Number})],fi.prototype,"activityIdToDelete",void 0),f([b({type:Array})],fi.prototype,"recommendedPosts",void 0),f([I()],fi.prototype,"closeNewsfeedSubmissions",void 0),fi=f([x("ac-activities")],fi),bi=function(t){i(u,t);var n,p,h=e(u);function u(){var t;return r(this,u),(t=h.apply(this,arguments)).noPosts=!1,t.skipFitToMarkersNext=!1,t}return a(u,[{key:"updated",value:function(t){s(o(u.prototype),"updated",this).call(this,t),t.has("groupId")&&this._groupChanged(),t.has("communityId")&&this._communityChanged()}},{key:"renderInfoCard",value:function(t){return t?C(ie||(ie=c([' <yp-post-card mini .post="','"></yp-post-card> '])),t):S}},{key:"render",value:function(){var t=this;return C(oe||(oe=c(['\n      <div class="layout vertical center-center">\n        ',"\n        ",'\n\n        <div class="layout horizontal center-center">\n          <yp-ajax id="ajax" @response="','"></yp-ajax>\n        </div>\n      </div>\n    '])),this.posts?C(se||(se=c(['\n              <div\n                id="mapContainer"\n                class="mapContainer shadow-elevation-2dp shadow-transition">\n                <lit-google-map\n                  additionalMapOptions="{\'keyboardShortcuts\':false,\'fullscreenControl\': false}"\n                  id="map"\n                  version="weekly"\n                  api-key="AIzaSyDkF_kak8BVZA5zfp5R4xRnrX8HP3hjiL0"\n                  fit-to-markers>\n                  ',"\n                </lit-google-map>\n              </div>\n            "])),this.posts.map((function(n){return C(ae||(ae=c(['\n                      <lit-google-map-marker\n                        slot="markers"\n                        .latitude="','"\n                        .longitude="','"\n                        click-events\n                        class="marker"\n                        @selector-item-activate="','">\n\n                      </lit-google-map-marker>\n                    '])),n.location.latitude,n.location.longitude,(function(){t.markerClick(n)}))}))):S,this.noPosts?C(re||(re=c(['\n              <div lass="noMapContainer shadow-elevation-2dp shadow-transition">\n                <div>',"</div>\n              </div>\n            "])),this.t("posts.noMapPosts")):S,this._response)}},{key:"resetMapHeight",value:function(){var t=this,n=this.$$("#mapContainer");if(n){var e,i=window.innerHeight;e=(this.wide,i/1.5),n.style.width=Math.min(window.innerWidth-(this.wide?96:32),1920)+"px",n.style.height=e+"px",n.style.marginBottom="64px",!0===this.skipFitToMarkersNext?this.skipFitToMarkersNext=!1:setTimeout((function(){var n=t.$$("#map");n&&(n.fitToMarkers=!0,setTimeout((function(){n.fitToMarkers=!1}),1e3))}))}}},{key:"connectedCallback",value:function(){switch(s(o(u.prototype),"connectedCallback",this).call(this),this.collectionType){case"community":this.communityId=this.collectionId;break;case"group":this.groupId=this.collectionId}this.addGlobalListener("yp-refresh-group-posts",this._refreshAjax)}},{key:"disconnectedCallback",value:function(){s(o(u.prototype),"disconnectedCallback",this).call(this),this.removeGlobalListener("yp-refresh-group-posts",this._refreshAjax)}},{key:"_groupChanged",value:(p=l(d.mark((function t(){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.groupId){t.next=9;break}return this.posts=void 0,t.t0=this,t.next=5,window.serverApi.getPostLocations("groups",this.groupId);case 5:t.t1=t.sent,t.t0._response.call(t.t0,t.t1),t.next=10;break;case 9:this.posts=void 0;case 10:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"_communityChanged",value:(n=l(d.mark((function t(){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.communityId){t.next=9;break}return this.posts=void 0,t.t0=this,t.next=5,window.serverApi.getPostLocations("communities",this.communityId);case 5:t.t1=t.sent,t.t0._response.call(t.t0,t.t1),t.next=10;break;case 9:this.posts=void 0;case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_refreshAjax",value:function(){this.groupId?this._groupChanged():this.communityId&&this._communityChanged(),this.skipFitToMarkersNext=!0}},{key:"_response",value:function(t){var n=this;t&&t.length>0?(this.noPosts=!1,this.posts=t):this.noPosts=!0,setTimeout((function(){n.resetMapHeight()}))}},{key:"markerClick",value:function(t){window.appGlobals.activity("clicked","marker"),this.selectedPost=t}}],[{key:"styles",get:function(){return[s(o(u),"styles",this),G,k(ce||(ce=c(["\n        :host {\n          display: block;\n          width: 100%;\n          height: 100%;\n        }\n\n        .mapContainer {\n          margin: 0;\n          padding: 0;\n          width: 960px;\n          height: 500px;\n          margin-top: 16px;\n          margin-bottom: 48px;\n        }\n\n        .noMapContainer {\n          padding: 32px;\n          margin: 16px;\n          background-color: #fff;\n          font-size: 22px;\n          color: #222;\n        }\n\n        #map {\n        }\n\n        a {\n          color: var(--primary-color-700);\n        }\n\n        h1 {\n          padding: 24px;\n        }\n\n        @media (max-width: 934px) {\n          .mapContainer {\n            margin: 16px;\n            width: 800px;\n            height: 400px;\n          }\n        }\n\n        @media (max-width: 832px) {\n          .mapContainer {\n            margin: 8px;\n            width: 600px;\n            height: 340px;\n          }\n        }\n\n        @media (max-width: 632px) {\n          .mapContainer {\n            margin: 8px;\n            width: 400px;\n            height: 300px;\n          }\n        }\n\n        @media (max-width: 420px) {\n          .mapContainer {\n            margin: 8px;\n            width: 330px;\n            height: 250px;\n          }\n        }\n\n        @media (max-width: 360px) {\n          .mapContainer {\n            margin: 8px;\n            width: 280px;\n            height: 200px;\n          }\n        }\n\n        #myInfoCard {\n          background-color: #000;\n          padding: 0;\n          margin: 0 !important;\n          --yp-post-map-info-mixin: {\n            padding: 0;\n            margin: 0 !important;\n            max-width: 100%;\n            max-height: 100%;\n          }\n          --yp-post-map-info-beak-mixin: {\n            color: #f57c00;\n          }\n        }\n      "])))]}}]),u}(w),f([b({type:Array})],bi.prototype,"posts",void 0),f([b({type:Number})],bi.prototype,"groupId",void 0),f([b({type:Number})],bi.prototype,"communityId",void 0),f([b({type:Boolean})],bi.prototype,"noPosts",void 0),f([b({type:Object})],bi.prototype,"selectedPost",void 0),f([b({type:Number})],bi.prototype,"collectionId",void 0),f([b({type:String})],bi.prototype,"collectionType",void 0),f([I()],bi.prototype,"skipFitToMarkersNext",void 0),bi=f([x("yp-post-map")],bi),xi={Collection:0,Newsfeed:1,Map:2},wi=function(t){i(u,t);var n,p,h=e(u);function u(t,n,e,i){var o;return r(this,u),(o=h.call(this)).noHeader=!1,o.tabsHidden=!1,o.selectedTab=xi.Collection,o.hideNewsfeed=!1,o.locationHidden=!1,o.hideCollection=!1,o.collectionType=t,o.collectionItemType=n,o.collectionCreateFabIcon=e,o.collectionCreateFabLabel=i,o.addGlobalListener("yp-logged-in",o._getCollection.bind(v(o))),o.addGlobalListener("yp-got-admin-rights",o.refresh.bind(v(o))),o}return a(u,[{key:"connectedCallback",value:function(){s(o(u.prototype),"connectedCallback",this).call(this),this.collection&&this.refresh()}},{key:"refresh",value:function(){var t,n;console.info("REFRESH"),this.collection&&(null!=this.collection.default_locale&&window.appGlobals.changeLocaleIfNeeded(this.collection.default_locale),void 0!==this.collection.theme_id&&window.appGlobals.theme.setTheme(this.collection.theme_id),this.fire("yp-set-home-link",{type:this.collectionType,id:this.collection.id,name:this.collection.name}),this.fire("yp-change-header",{headerTitle:null,documentTitle:this.collection.name,headerDescription:this.collection.description||this.collection.objectives}),(null===(t=this.collection.configuration)||void 0===t?void 0:t.hideAllTabs)||(null===(n=this.collection.configuration)||void 0===n?void 0:n.hideGroupLevelTabs)?this.tabsHidden=!0:this.tabsHidden=!1,this.$$("#collectionItems")&&this.$$("#collectionItems").refresh())}},{key:"_getCollection",value:(p=l(d.mark((function t(){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.collectionId){t.next=9;break}return this.collection=void 0,this.collectionItems=void 0,t.next=5,window.serverApi.getCollection(this.collectionType,this.collectionId);case 5:this.collection=t.sent,this.refresh(),t.next=10;break;case 9:console.error("No collection id for _getCollection");case 10:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"_getHelpPages",value:(n=l(d.mark((function t(){var n,e,i,o=arguments;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>0&&void 0!==o[0]?o[0]:void 0,e=o.length>1&&void 0!==o[1]?o[1]:void 0,!this.collectionId){t.next=9;break}return t.next=5,window.serverApi.getHelpPages(n||this.collectionType,e||this.collectionId);case 5:(i=t.sent)&&this.fire("yp-set-pages",i),t.next=10;break;case 9:console.error("Collection id setup for get help pages");case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"collectionTabLabel",get:function(){var t=this.t(J.transformCollectionTypeToApi(this.collectionItemType));return"".concat(t," (").concat(this.collectionItems?this.collectionItems.length:0,")")}},{key:"renderHeader",value:function(){return this.collection&&!this.noHeader?C(le||(le=c(['\n          <div class="layout vertical center-center header">\n            <yp-collection-header\n              .collection="','"\n              .collectionType="','"\n              aria-label="','"\n              role="banner"\n            ></yp-collection-header>\n          </div>\n        '])),this.collection,this.collectionType,this.collectionType):S}},{key:"renderNewsAndMapTabs",value:function(){return C(de||(de=c(['\n      <mwc-tab\n        ?hidden="','"\n        .label="','"\n        icon="rss_feed"\n      ></mwc-tab>\n      <mwc-tab\n        ?hidden="','"\n        .label="','"\n        icon="location_on"\n      ></mwc-tab>\n    '])),this.hideNewsfeed,this.t("post.tabs.news"),this.locationHidden||"domain"==this.collectionType,this.t("post.tabs.location"))}},{key:"renderTabs",value:function(){return this.collection&&!this.tabsHidden?C(pe||(pe=c(['\n        <div class="layout vertical center-center">\n          <mwc-tab-bar @MDCTabBar:activated="','">\n            <mwc-tab\n              ?hidden="','"\n              .label="','"\n              icon="groups"\n            ></mwc-tab>\n            ',"\n          </mwc-tab-bar>\n        </div>\n      "])),this._selectTab,this.hideCollection,this.collectionTabLabel,this.renderNewsAndMapTabs()):S}},{key:"renderCurrentTabPage",value:function(){var t;switch(this.selectedTab){case xi.Collection:t=this.collectionItems&&this.collectionItemType?C(he||(he=c([' <yp-collection-items-grid\n                id="collectionItems"\n                .collectionItems="','"\n                .collection="','"\n                .collectionType="','"\n                .collectionItemType="','"\n                .collectionId="','"\n              ></yp-collection-items-grid>'])),this.collectionItems,this.collection,this.collectionType,this.collectionItemType,this.collectionId):C(ue||(ue=c([""])));break;case xi.Newsfeed:t=C(me||(me=c(['<ac-activities\n          id="collectionActivities"\n          .selectedTab="','"\n          .collectionType="','"\n          .collectionId="','"\n        ></ac-activities>'])),this.selectedTab,this.collectionType,this.collectionId);break;case xi.Map:t=C(ye||(ye=c(['<yp-post-map\n          id="postsMap"\n          .collectionType="','"\n          .collectionId="','"\n        ></yp-post-map>'])),this.collectionType,this.collectionId)}return t}},{key:"render",value:function(){return C(ge||(ge=c(["\n      "," "," ","\n      ","\n    "])),this.renderHeader(),this.renderTabs(),this.renderCurrentTabPage(),this.createFabIcon&&this.createFabLabel?C(ve||(ve=c(['<mwc-fab\n            ?extended="','"\n            class="createFab"\n            ?is-map="','"\n            .label="','"\n            .icon="','"\n          ></mwc-fab>'])),this.wide,this.selectedTab===xi.Map,this.t(this.createFabLabel),this.createFabIcon):S)}},{key:"collectionIdChanged",value:function(){this._getCollection(),this._getHelpPages()}},{key:"updated",value:function(t){if(s(o(u.prototype),"updated",this).call(this,t),t.has("subRoute")&&this.subRoute){var n=this.subRoute.split("/");this.collectionId=parseInt(n[1]),n.length>2?this._setSelectedTabFromRoute(n[1]):this._setSelectedTabFromRoute("default")}t.has("collectionId")&&this.collectionId&&this.collectionIdChanged()}},{key:"_selectTab",value:function(t){var n;this.selectedTab=null===(n=t.detail)||void 0===n?void 0:n.index}},{key:"_setSelectedTabFromRoute",value:function(t){var n;switch(t){case"collection":n=xi.Collection;break;case"news":n=xi.Newsfeed;break;case"map":n=xi.Map;break;default:n=xi.Collection}n&&(this.selectedTab=n,window.appGlobals.activity("open",this.collectionType+"_tab_"+t))}},{key:"scrollToCachedItem",value:function(){if(this.selectedTab===xi.Newsfeed&&window.appGlobals.cache.cachedActivityItem){var t=this.$$("#collectionActivities");t?(t.scrollToItem(window.appGlobals.cache.cachedActivityItem),window.appGlobals.cache.cachedActivityItem=void 0):console.error("No activities for scroll to item")}else this.selectedTab===xi.Collection&&this.scrollToCollectionItemSubClass()}},{key:"scrollToCollectionItemSubClassDomain",value:function(){this.collection&&window.appGlobals.cache.backToDomainCommunityItems&&window.appGlobals.cache.backToDomainCommunityItems[this.collection.id]&&(this.$$("#collectionItems").scrollToItem(window.appGlobals.cache.backToDomainCommunityItems[this.collection.id]),window.appGlobals.cache.backToDomainCommunityItems[this.collection.id]=void 0)}},{key:"setFabIconIfAccess",value:function(t,n){t||n?(this.createFabIcon=this.collectionCreateFabIcon,this.createFabLabel=this.collectionCreateFabLabel):(this.createFabIcon=void 0,this.createFabLabel=void 0)}},{key:"_useHardBack",value:function(t){if(t&&t.customBackURL){var n=t.customBackURL;return!(n.startsWith("/community/")||n.startsWith("/group/")||n.startsWith("/domain/")||n.startsWith("/post/"))}return!1}}],[{key:"styles",get:function(){return[s(o(u),"styles",this),k(fe||(fe=c(["\n        mwc-fab {\n          position: fixed;\n          bottom: 16px;\n          right: 16px;\n        }\n\n        mwc-tab {\n          font-family: var(--app-header-font-family, Roboto);\n        }\n\n        mwc-tab-bar {\n          width: 960px;\n        }\n\n        .header {\n          background-color: var(--primary-background-color);\n          background-image: var(--top-area-background-image, none);\n          height: 300px;\n        }\n\n        .createFab[is-map] {\n          right: inherit;\n          left: 28px;\n        }\n      "])))]}}]),u}(w),f([b({type:Boolean})],wi.prototype,"noHeader",void 0),f([b({type:Boolean})],wi.prototype,"tabsHidden",void 0),f([b({type:Number})],wi.prototype,"collectionId",void 0),f([b({type:String})],wi.prototype,"collectionName",void 0),f([b({type:Object})],wi.prototype,"collection",void 0),f([b({type:String})],wi.prototype,"subRoute",void 0),f([b({type:Number})],wi.prototype,"selectedTab",void 0),f([b({type:Array})],wi.prototype,"collectionItems",void 0),f([b({type:Boolean})],wi.prototype,"hideNewsfeed",void 0),f([b({type:Boolean})],wi.prototype,"locationHidden",void 0),f([b({type:Boolean})],wi.prototype,"hideCollection",void 0),f([b({type:String})],wi.prototype,"createFabIcon",void 0),f([b({type:String})],wi.prototype,"createFabLabel",void 0),ki=function(t){i(l,t);var n=e(l);function l(){return r(this,l),n.apply(this,arguments)}return a(l,[{key:"renderFooter",value:function(){return this.collection.configuration.urlToReview?C(be||(be=c(['\n        <div class="layout horizontal center-center" style="width: 100%">\n          <div\n            class="urlToReviewButton shadow-elevation-3dp layout vertical center-center"\n            role="button"\n            hidden$="[[!group.configuration.urlToReview]]"\n          >\n            <a\n              href="','"\n              target="_blank"\n            >\n              <yp-magic-text\n                class="urlToReviewActionText"\n                largefont$="','"\n                textType="urlToReviewActionText"\n                .contentLanguage="','"\n                .content="','"\n                .contentId="','"\n              >\n              </yp-magic-text>\n            </a>\n          </div>\n        </div>\n      '])),this.collection.configuration.urlToReview,this.largeFont,this.collection.language,this.collection.configuration.urlToReviewActionText,this.collection.id):s(o(l.prototype),"renderFooter",this).call(this)}}],[{key:"styles",get:function(){return[s(o(l),"styles",this),k(xe||(xe=c(["\n        .urlToReviewButton {\n          color: #fff;\n          background-color: var(--accent-color, #000);\n          padding: 8px;\n          margin-top: 16px;\n        }\n\n        @media (max-width: 960px) {\n          .urlToReviewButton {\n              color: #FFF;\n              background-color: var(--accent-color, #000);\n              padding: 8px;\n              margin-top: 0;\n              margin-bottom: 16px;\n          }\n        }\n\n      "])))]}}]),l}(Be),f([b({type:Object})],ki.prototype,"collection",void 0),ki=f([x("yp-group-header")],ki),_i={Open:0,InProgress:1,Successful:2,Failed:3,Newsfeed:4,Map:5},Ci=function(t){i(u,t);var n,p,h=e(u);function u(){var t;return r(this,u),(t=h.call(this,"group","post","lightbulb_outline","post.create")).hasNonOpenPosts=!1,t.disableNewPosts=!1,t.selectedGroupTab=_i.Open,t.newGroupRefresh=!1,t.tabCounters={},t.configCheckTTL=45e3,t}return a(u,[{key:"connectedCallback",value:function(){s(o(u.prototype),"connectedCallback",this).call(this),this.addListener("yp-post-count",this._updateTabPostCount),this.addListener("yp-refresh-activities-scroll-threshold",this._clearScrollThreshold)}},{key:"disconnectedCallback",value:function(){s(o(u.prototype),"disconnectedCallback",this).call(this),this.removeListener("yp-post-count",this._updateTabPostCount),this.removeListener("yp-refresh-activities-scroll-threshold",this._clearScrollThreshold)}},{key:"_cancelConfigCheckTimer",value:function(){this.configCheckTimer&&(clearTimeout(this.configCheckTimer),this.configCheckTimer=void 0)}},{key:"_startConfigCheckTimer",value:function(){this._cancelConfigCheckTimer(),this.collection&&(this.configCheckTimer=setTimeout(this._getGroupConfig.bind(this),this.configCheckTTL))}},{key:"_getGroupConfig",value:(p=l(d.mark((function t(){var n,e=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.collection){t.next=7;break}return t.next=3,window.serverApi.getGroupConfiguration(this.collection.id);case 3:(n=t.sent)?(this._doesGroupRequireRefresh(this.collection.configuration,n)&&(window.appDialogs.getDialogAsync("masterToast",(function(t){t.textContent=e.t("groupConfigurationHasBeenUpdated"),t.timeoutMs=7500})),this._refreshAjax()),this._startConfigCheckTimer()):this._cancelConfigCheckTimer(),t.next=8;break;case 7:this._cancelConfigCheckTimer();case 8:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"_doesGroupRequireRefresh",value:function(t,n){return!(!t||!n)&&(t.canVote!==n.canVote||t.canAddNewPosts!==n.canAddNewPosts||t.disableDebate!==n.disableDebate||t.hideNewPost!==n.hideNewPost)}},{key:"_updateTabPostCount",value:function(t){var n=this,e=t.detail;this.tabCounters[e.type]=e.count,this._setupOpenTab(),setTimeout((function(){n.requestUpdate()}))}},{key:"_setupOpenTab",value:function(){this.hasNonOpenPosts&&(this.collection.configuration&&this.collection.configuration.makeMapViewDefault?console.log("Not opening tabs with ideas in map mode"):4===Object.keys(this.tabCounters).length&&this.selectedGroupTab===_i.Open&&(this.tabCounters.open&&this.tabCounters.open>0?this.selectedGroupTab=_i.Open:this.tabCounters.inProgress&&this.tabCounters.inProgress>0?this.selectedGroupTab=_i.InProgress:this.tabCounters.successful&&this.tabCounters.successful>0?this.selectedGroupTab=_i.Successful:this.tabCounters.failed&&this.tabCounters.failed>0&&(this.selectedGroupTab=_i.Failed)))}},{key:"tabLabelWithCount",value:function(t){var n=this.t("posts."+t);return"inProgress"===t&&(t="in_progress"),"".concat(n," (").concat(null!=this.tabCounters[t]?this.tabCounters[t]:"...",")")}},{key:"getCurrentTabElement",value:function(){var t;switch(this.selectedGroupTab){case _i.Open:t=this.$$("#openPostList");break;case _i.InProgress:t=this.$$("#in_progressPostList");break;case _i.Successful:t=this.$$("#successfulPostList");break;case _i.Failed:t=this.$$("#failedPostList");break;case _i.Newsfeed:t=this.$$("#newsfeed");break;case _i.Map:t=this.$$("#postMap")}return null===t&&(t=void 0),t}},{key:"_getCollection",value:(n=l(d.mark((function t(){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.appGlobals.retryMethodAfter401Login=this._getCollection.bind(this),this.hasNonOpenPosts=!1,this.tabCounters={},!this.collectionId||!window.appGlobals.cache.groupItemsCache[this.collectionId]){t.next=8;break}this.collection=window.appGlobals.cache.groupItemsCache[this.collectionId],this.refresh(),t.next=15;break;case 8:if(!this.collectionId){t.next=15;break}return this.collection=void 0,this.collectionItems=void 0,t.next=13,window.serverApi.getCollection(this.collectionType,this.collectionId);case 13:(n=t.sent)&&(this.collection=n.group,this.hasNonOpenPosts=n.hasNonOpenPosts,this.refresh());case 15:window.appGlobals.retryMethodAfter401Login=void 0;case 16:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"renderGroupTabs",value:function(){return this.collection&&!this.tabsHidden?C(we||(we=c(['\n        <div class="layout vertical center-center">\n          <mwc-tab-bar @MDCTabBar:activated="','">\n            <mwc-tab\n              .label="','"\n              icon="lightbulb_outline"\n            ></mwc-tab>\n            ',"\n            ","\n          </mwc-tab-bar>\n        </div>\n      "])),this._selectGroupTab,this.tabLabelWithCount("open"),this.hasNonOpenPosts?C(ke||(ke=c(['\n                  <mwc-tab\n                    .label="','"\n                    icon="lightbulb_outline"\n                  ></mwc-tab>\n                  <mwc-tab\n                    .label="','"\n                    icon="lightbulb_outline"\n                  ></mwc-tab>\n                  <mwc-tab\n                    .label="','"\n                    icon="lightbulb_outline"\n                  >\n                  </mwc-tab>\n                '])),this.tabLabelWithCount("inProgress"),this.tabLabelWithCount("successful"),this.tabLabelWithCount("failed")):S,this.renderNewsAndMapTabs()):S}},{key:"renderPostList",value:function(t){return this.collection?C(_e||(_e=c(['<div class="layout vertical center-center">\n          <yp-posts-list\n            id="','PostList"\n            role="main"\n            aria-label="','"\n            .selectedGroupTab="','"\n            .listRoute="','"\n            .statusFilter="','"\n            .searchingFor="','"\n            .group="','"\n          ></yp-posts-list>\n        </div> '])),t,this.t("posts.posts"),this.selectedGroupTab,this.subRoute,t,this.searchingFor,this.collection):C(Ce||(Ce=c([""])))}},{key:"renderCurrentGroupTabPage",value:function(){var t;switch(this.selectedGroupTab){case _i.Open:t=this.renderPostList("open");break;case _i.InProgress:t=this.renderPostList("in_progress");break;case _i.Successful:t=this.renderPostList("successful");break;case _i.Failed:t=this.renderPostList("failed");break;case _i.Newsfeed:t=C(Te||(Te=c([' <ac-activities\n          id="newsfeed"\n          .selectedGroupTab="','"\n          .collectionType="','"\n          .collectionId="','"\n        ></ac-activities>'])),this.selectedGroupTab,this.collectionType,this.collectionId);break;case _i.Map:t=C(Ie||(Ie=c([""])))}return t}},{key:"renderHeader",value:function(){return this.collection&&!this.noHeader?C(Pe||(Pe=c(['\n          <div class="layout vertical center-center header">\n            <yp-group-header\n              .collection="','"\n              .collectionType="','"\n              aria-label="','"\n              role="banner"\n            ></yp-group-header>\n          </div>\n        '])),this.collection,this.collectionType,this.collectionType):S}},{key:"render",value:function(){return C(Ae||(Ae=c(["\n      ","\n      ","\n      "," ","\n      ","\n    "])),this.renderHeader(),this.collection&&!this.collection.configuration.hideNewPost?C(ze||(ze=c([' <div\n            class="layout vertical center-center"\n            ?hidden="','"\n          >\n            <div>\n              <yp-post-card-add\n                role="button"\n                aria-label="','"\n                .group="','"\n                ?disableNewPosts="','"\n                @new-post="','"\n              ></yp-post-card-add>\n            </div>\n          </div>'])),this.collection.configuration.hideNewPost,this.t("post.new"),this.collection,this.disableNewPosts,this._newPost):S,this.renderGroupTabs(),this.renderCurrentGroupTabPage(),this.disableNewPosts||!this.collection||this.collection.configuration.hideNewPost?S:C(Le||(Le=c([' <mwc-fab\n            .label="','"\n            icon="lightbulb"\n            @click="','"\n          ></mwc-fab>'])),this.t("post.new"),this._newPost))}},{key:"_selectGroupTab",value:function(t){this.selectedGroupTab=t.detail.index}},{key:"_openHelpPageIfNeededOnce",value:function(){var t=this;this.collection&&!sessionStorage.getItem("yp-welcome-for-group-"+this.collection.id)&&setTimeout((function(){t.collection&&t.collection.configuration&&t.collection.configuration.welcomePageId&&(t.fire("yp-open-page",{pageId:t.collection.configuration.welcomePageId}),sessionStorage.setItem("yp-welcome-for-group-"+t.collection.id,"true"))}),1200)}},{key:"_refreshAjax",value:function(){var t=this;setTimeout((function(){t._getCollection();var n=t.$$("#newsfeed");n&&n.loadNewData();var e=t.$$("#postsMap");e&&e.requestUpdate}),100)}},{key:"_newPost",value:function(){var t=this;window.appGlobals.activity("open","newPost"),window.appDialogs.getDialogAsync("postEdit",(function(n){n.setup(void 0,!0,void 0,t.collection),n.open(!0,{groupId:t.collectionId,group:t.collection})}))}},{key:"_clearScrollThreshold",value:function(){this.$$("#scrollTheshold").clearTriggers()}},{key:"_setSelectedTabFromRoute",value:function(t){var n;switch(t){case"open":n=_i.Open;break;case"inProgress":n=_i.InProgress;break;case"successfull":n=_i.Successful;break;case"failed":n=_i.Failed;break;case"news":n=_i.Newsfeed;break;case"map":n=_i.Map;break;default:n=_i.Open}n&&(this.selectedGroupTab=n,window.appGlobals.activity("open",this.collectionType+"_tab_"+t))}},{key:"_isCurrentPostsTab",get:function(){return this.selectedGroupTab==_i.Open||this.selectedGroupTab==_i.InProgress||this.selectedGroupTab==_i.Successful||this.selectedGroupTab==_i.Failed}},{key:"_loadMoreData",value:function(){if(this._isCurrentPostsTab){var t=this.getCurrentTabElement();t?t._loadMoreData():console.error("Cant find tab to load data on"+this.selectedGroupTab)}else console.error("Trying to load more data on non posts tab")}},{key:"goToPostOrNewsItem",value:function(){if(this._isCurrentPostsTab);else if(this.selectedGroupTab===_i.Newsfeed&&void 0!==window.appGlobals.cache.cachedActivityItem){var t=this.$$("#newsfeed");t?(t.scrollToItem(window.appGlobals.cache.cachedActivityItem),window.appGlobals.cache.cachedActivityItem=void 0):console.warn("No group activities for scroll to item")}}},{key:"refresh",value:function(){var t,n,e,i=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s(o(u.prototype),"refresh",this).call(this);var r=this.collection;if(r){var c,p;this._openHelpPageIfNeededOnce(),r.configuration=window.appGlobals.overrideGroupConfigIfNeeded(r.id,r.configuration),null!=r.configuration.canAddNewPosts?!0===r.configuration.canAddNewPosts?this.disableNewPosts=!1:this.disableNewPosts=!0:this.disableNewPosts=!1,setTimeout(l(d.mark((function t(){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.serverApi.getHasNonOpenPosts(r.id);case 2:(n=t.sent)&&(i.hasNonOpenPosts=n.hasNonOpenPosts);case 4:case"end":return t.stop()}}),t)})))),window.appGlobals.analytics.setCommunityAnalyticsTracker(null===(t=r.Community)||void 0===t?void 0:t.google_analytics_code),(null===(n=r.Community)||void 0===n?void 0:n.configuration)&&window.appGlobals.analytics.setCommunityPixelTracker(r.Community.configuration.facebookPixelId),null!=r.theme_id||r.configuration&&null!=r.configuration.themeOverrideColorPrimary?window.appGlobals.theme.setTheme(r.theme_id,r.configuration):r.Community&&(null!=r.Community.theme_id||r.Community.configuration&&r.Community.configuration.themeOverrideColorPrimary)?window.appGlobals.theme.setTheme(r.Community.theme_id,r.Community.configuration):r.Community&&r.Community.Domain&&null!=r.Community.Domain.theme_id?window.appGlobals.theme.setTheme(r.Community.Domain.theme_id):window.appGlobals.theme.setTheme(1),r.configuration.locationHidden&&1==r.configuration.locationHidden?this.locationHidden=!0:this.locationHidden=!1,r.configuration.useCommunityTopBanner&&r.Community&&r.Community.CommunityHeaderImages&&r.Community.CommunityHeaderImages.length>0?Z.setupTopHeaderImage(this,r.Community.CommunityHeaderImages):r.GroupHeaderImages&&r.GroupHeaderImages.length>0?Z.setupTopHeaderImage(this,r.GroupHeaderImages):Z.setupTopHeaderImage(this,null);var h=N.checkGroupAccess(this.collection);r.configuration.customBackURL?(c=r.configuration.customBackURL,p=r.configuration.customBackName):r.Community&&r.Community.configuration&&r.Community.configuration.redirectToGroupId&&!h?(c="/domain/"+r.Community.Domain.id,p=r.Community.Domain.name):(c="/community/"+r.community_id,p=r.Community.name),this.fire("yp-change-header",{headerTitle:p,headerDescription:null===(e=r.Community)||void 0===e?void 0:e.description,headerIcon:"social:group",documentTitle:r.name,enableSearch:!0,hideHelpIcon:!!r.configuration.hideHelpIcon||null,useHardBack:this._useHardBack(r.configuration),backPath:c}),window.appGlobals.setAnonymousGroupStatus(r),window.appGlobals.setRegistrationQuestionGroup(r),r.configuration&&!0===r.configuration.disableFacebookLoginForGroup?window.appGlobals.disableFacebookLoginForGroup=!0:window.appGlobals.disableFacebookLoginForGroup=!1,r.configuration&&r.configuration.externalGoalTriggerUrl?window.appGlobals.externalGoalTriggerGroupId=r.id:window.appGlobals.externalGoalTriggerGroupId=void 0,r.Community&&r.Community.configuration&&r.Community.configuration.signupTermsPageId&&-1!=r.Community.configuration.signupTermsPageId?window.appGlobals.signupTermsPageId=r.Community.configuration.signupTermsPageId:window.appGlobals.signupTermsPageId=void 0,this._setupGroupSaml(r),window.appGlobals.currentGroup=r,r.configuration&&r.configuration.forceSecureSamlLogin&&!N.checkGroupAccess(r)||r.Community&&r.Community.configuration&&r.Community.configuration.forceSecureSamlLogin&&!N.checkCommunityAccess(r.Community)?window.appGlobals.currentForceSaml=!0:window.appGlobals.currentForceSaml=!1,r.configuration&&r.configuration.makeMapViewDefault&&(this.selectedGroupTab=_i.Map),r.Community&&r.Community.configuration&&r.Community.configuration.highlightedLanguages?window.appGlobals.setHighlightedLanguages(r.Community.configuration.highlightedLanguages):window.appGlobals.setHighlightedLanguages(void 0),this.hasNonOpenPosts&&this.tabCounters&&this._setupOpenTab(),r.configuration&&r.configuration.maxNumberOfGroupVotes&&window.appUser.calculateVotesLeftForGroup(r),r&&r.configuration&&r.configuration.isDataVisualizationGroup&&r.configuration.dataForVisualizationJson&&window.appDialogs.loadDataViz()}this.hasNonOpenPosts&&this.tabCounters&&(this.newGroupRefresh||!0===a)&&this._setupOpenTab(),this.newGroupRefresh=!1,window.appGlobals.postLoadGroupProcessing(r),this._startConfigCheckTimer()}},{key:"_setupGroupSaml",value:function(t){t.Community&&t.Community.configuration&&t.Community.configuration.customSamlDeniedMessage?window.appGlobals.currentSamlDeniedMessage=t.Community.configuration.customSamlDeniedMessage:window.appGlobals.currentSamlDeniedMessage=void 0,t.Community&&t.Community.configuration&&t.Community.configuration.customSamlLoginMessage?window.appGlobals.currentSamlLoginMessage=t.Community.configuration.customSamlLoginMessage:window.appGlobals.currentSamlLoginMessage=void 0}},{key:"scrollToCollectionItemSubClass",value:function(){this.collection&&window.appGlobals.cache.backToCommunityGroupItems&&window.appGlobals.cache.backToCommunityGroupItems[this.collection.id]&&(this.$$("#collectionItems").scrollToItem(window.appGlobals.cache.backToCommunityGroupItems[this.collection.id]),window.appGlobals.cache.backToCommunityGroupItems[this.collection.id]=void 0)}}]),u}(wi),f([b({type:Object})],Ci.prototype,"collection",void 0),f([b({type:String})],Ci.prototype,"searchingFor",void 0),f([b({type:Boolean})],Ci.prototype,"hasNonOpenPosts",void 0),f([b({type:Boolean})],Ci.prototype,"disableNewPosts",void 0),f([b({type:Number})],Ci.prototype,"selectedGroupTab",void 0),f([b({type:Object})],Ci.prototype,"configCheckTimer",void 0),f([I()],Ci.prototype,"newGroupRefresh",void 0),Ci=f([x("yp-group")],Ci),Ti=function(t){i(o,t);var n=e(o);function o(){return r(this,o),n.apply(this,arguments)}return a(o,[{key:"render",value:function(){return C(Se||(Se=c(["\n      ","\n      ","\n    "])),this.renderHeader(),this.collection?C(Ne||(Ne=c(['\n            <yp-data-visualization\n              .group="','"\n            ></yp-data-visualization>\n          '])),this.collection):S)}}]),o}(Ci),Ti=f([x("yp-group-data-viz")],Ti)}}}));
