System.register(["./nomodule-0e20d20b.js","./nomodule-1e78b9dc.js","./nomodule-8ceccb0a.js","./nomodule-a47fc2cb.js","./nomodule-353504fe.js"],(function(t,e){var n,i,o,a,r,s,u,d,c,l,p,h,m,f,g,v,y,b,k,w,x,I,T,C,_,S,L,A,M,P,N,O,$,R,Q,H,E,D,j,z,U,q,F,B,V,J,Y,G,W,Z,K,X,tt,et,nt,it,ot,at,rt,st,ut,dt,ct,lt,pt,ht,mt,ft,gt,vt,yt,bt,kt,wt,xt,It,Tt,Ct;function _t(){var t=d(["\n        .access {\n        }\n\n        mwc-button {\n          background-color: var(--accent-color);\n          color: #fff;\n        }\n\n        yp-file-upload {\n          margin-top: 16px;\n        }\n\n        .accessHeader {\n          color: var(--primary-color, #777);\n          font-weight: normal;\n          margin-bottom: 0;\n        }\n\n        mwc-radio {\n          display: block;\n        }\n\n        .container {\n          width: 100%;\n          width: 100%;\n        }\n\n        yp-post-location {\n          min-height: 320px;\n        }\n\n        @media (max-width: 600px) {\n          .container {\n            padding-right: 16px;\n          }\n\n          .subContainer {\n          }\n\n          mwc-tab {\n            font-size: 12px;\n          }\n        }\n\n        yp-post-location {\n        }\n\n        section {\n          margin-top: 32px;\n        }\n\n        .imageSizeInfo {\n          font-size: 12px;\n          padding-bottom: 16px;\n          color: #444;\n        }\n\n        mwc-select {\n          max-width: 250px;\n        }\n\n        .optional {\n          font-size: 12px;\n        }\n\n        .icon {\n          padding-right: 8px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        mwc-checkbox {\n          margin-left: 8px;\n          margin-top: 4px;\n        }\n\n        section {\n          width: 100%;\n        }\n\n        .contactInfo {\n          margin-top: 16px;\n        }\n\n        #description {\n          --mwc-textfield-container-input: {\n            max-height: 125px;\n          }\n        }\n\n        .postEmoji {\n          margin-left: 16px;\n          direction: ltr !important;\n        }\n\n        .pointEmoji {\n          direction: ltr !important;\n        }\n\n        .uploadSection {\n          max-width: 220px;\n          vertical-align: top;\n          margin-left: 8px;\n          margin-right: 8px;\n        }\n\n        @media (max-width: 600px) {\n          .uploadSection {\n            max-width: 100%;\n          }\n\n          .videoCam {\n          }\n\n          yp-structured-question-edit {\n            max-width: calc(100vw - 64px);\n          }\n        }\n\n        .postCoverVideoInfo {\n          margin-top: 8px;\n        }\n\n        .videoUploadDisclamer {\n          margin-top: 6px;\n          font-size: 12px;\n          padding: 0;\n          max-width: 200px;\n        }\n\n        .categoryDropDown {\n          margin-bottom: 8px;\n        }\n\n        .topNewPostContainer[no-title] {\n          margin-top: -42px;\n        }\n\n        mwc-tab-bar[title-disabled] {\n          margin-bottom: 24px;\n        }\n\n        .videoCamIcon {\n          margin-left: 6px;\n          margin-bottom: 2px;\n        }\n\n        .mediaTab {\n          vertical-align: center;\n        }\n\n        #pointFor {\n          width: 100%;\n        }\n\n        .attachmentInfo {\n          margin-top: -8px;\n          margin-left: 8px;\n        }\n      "]);return _t=function(){return t},t}function St(){var t=d(['\n            <yp-magic-text\n              id="customTitleQuestionTextId"\n              hidden\n              .contentId="','"\n              text-only\n              .content="','"\n              .contentLanguage="','"\n              @new-translation="','"\n              text-type="customTitleQuestionText"></yp-magic-text>\n          ']);return St=function(){return t},t}function Lt(){var t=d(['\n            <yp-magic-text\n              id="customThankYouTextNewPostsId"\n              hidden\n              .contentId="','"\n              text-only\n              .content="','"\n              .contentLanguage="','"\n              text-type="customThankYouTextNewPosts"></yp-magic-text>\n          ']);return Lt=function(){return t},t}function At(){var t=d(['\n            <yp-magic-text\n              id="alternativeTextForNewIdeaButtonHeaderId"\n              hidden\n              .contentId="','"\n              textOnly\n              .content="','"\n              .contentLanguage="','"\n              @new-translation="','"\n              text-type="alternativeTextForNewIdeaButtonHeader"></yp-magic-text>\n          ']);return At=function(){return t},t}function Mt(){var t=d(['\n              <div\n                class="layout vertical wrap topNewPostContainer"\n                ?no-title="','">\n                '," ","\n              </div>\n              ","\n            "]);return Mt=function(){return t},t}function Pt(){var t=d(['\n      <yp-edit-dialog\n        name="postEdit"\n        doubleWidth\n        id="editDialog"\n        icon="lightbulb_outline"\n        .action="','"\n        .useNextTabAction="','"\n        @next-tab-action="','"\n        .method="','"\n        .heading="','"\n        .saveText="','"\n        class="container"\n        customSubmit\n        .nextActionText="','"\n        .snackbarText="','"\n        .params="','">\n        ',"\n      </yp-edit-dialog>\n\n      ","\n      ","\n      ","\n    "]);return Pt=function(){return t},t}function Nt(){var t=d([' <input\n        type="hidden"\n        name="location"\n        .value="','" />\n      <input\n        type="hidden"\n        name="coverMediaType"\n        .value="','" />\n      <input\n        type="hidden"\n        name="uploadedHeaderImageId"\n        .value="','" />\n      <input\n        type="hidden"\n        name="uploadedDocumentUrl"\n        .value="','" />\n      <input\n        type="hidden"\n        name="uploadedDocumentFilename"\n        .value="','" />\n      <input\n        type="hidden"\n        name="structuredAnswers"\n        .value="','" />\n      <input\n        type="hidden"\n        name="structuredAnswersJson"\n        .value="','" />']);return Nt=function(){return t},t}function Ot(){var t=d(['\n      <div ?hidden="','">\n        ','\n      </div>\n      <div ?hidden="','">\n        ','\n      </div>\n      <div ?hidden="','">\n        ','\n      </div>\n      <div ?hidden="','">\n        ',"\n      </div>\n    "]);return Ot=function(){return t},t}function $t(){var t=d(['\n                  <div\n                    class="layout vertical center-center self-start uploadSection">\n                    <yp-file-upload\n                      id="audioFileUpload"\n                      containerType="posts"\n                      .group="','"\n                      raised\n                      .uploadLimitSeconds="','"\n                      .multi="false"\n                      audioUpload\n                      method="POST"\n                      buttonIcon="keyboard_voice"\n                      .buttonText="','"\n                      @success="','">\n                    </yp-file-upload>\n                  </div>\n                ']);return $t=function(){return t},t}function Rt(){var t=d(['\n                  <div\n                    class="layout vertical center-center self-start uploadSection">\n                    <yp-file-upload\n                      id="videoFileUpload"\n                      container-type="posts"\n                      .group="','"\n                      raised\n                      .uploadLimitSeconds="','"\n                      videoUpload\n                      buttonIcon="videocam"\n                      .buttonText="','"\n                      method="POST"\n                      @success="','">\n                    </yp-file-upload>\n                    <div\n                      class="videoUploadDisclamer"\n                      ?hidden="','">\n                      ',"\n                    </div>\n                  </div>\n                "]);return Rt=function(){return t},t}function Qt(){var t=d(['\n      <section>\n        <div class="layout vertical center-center">\n          <div class="layout horizontal center-center wrap">\n            <div\n              class="layout vertical center-center self-start uploadSection"\n              ?hidden="','">\n              <yp-file-upload\n                id="imageFileUpload"\n                raised\n                target="/api/images?itemType=post-header"\n                method="POST"\n                buttonIcon="photo_camera"\n                .buttonText="','"\n                @success="','">\n              </yp-file-upload>\n              <div class="imageSizeInfo layout horizontal">\n                <div>864 x 486 (16/9 widescreen)</div>\n              </div>\n              <div>',"</div>\n            </div>\n\n            ","\n            ","\n          </div>\n          <br />\n          ","\n        </div>\n      </section>\n    "]);return Qt=function(){return t},t}function Ht(){var t=d(['\n              <mwc-formfield label="','">\n                <mwc-radio\n                  value="map"\n                  ?checked="','"\n                  id="mediaMap"\n                  @change="','"\n                  name="radioButtonsMedia">\n                </mwc-radio>\n              </mwc-formfield>\n\n              <mwc-formfield label="','">\n                <mwc-radio\n                  value="streetView"\n                  id="mediaStreetview"\n                  ?checked="','"\n                  @change="','"\n                  name="radioButtonsMedia">\n                </mwc-radio>\n              </mwc-formfield>\n            ']);return Ht=function(){return t},t}function Et(){var t=d(['\n      <h3 class="accessHeader">','</h3>\n      <div\n        id="coverMediaType"\n        name="coverMediaType"\n        class="coverMediaType layout horizontal wrap"\n        .selected="','">\n        <mwc-formfield label="','">\n          <mwc-radio\n            value="none"\n            id="mediaNone"\n            ?checked="','"\n            @change="','"\n            name="radioButtonsMedia">\n          </mwc-radio>\n        </mwc-formfield>\n\n        <mwc-formfield\n          label="','"\n          ?hidden="','">\n          <mwc-radio\n            value="image"\n            id="mediaImage"\n            ?checked="','"\n            @change="','"\n            name="radioButtonsMedia">\n          </mwc-radio>\n        </mwc-formfield>\n\n        <mwc-formfield\n          label="','"\n          ?hidden="','">\n          <mwc-radio\n            value="video"\n            id="mediaVideo"\n            ?checked="','"\n            @change="','"\n            name="radioButtonsMedia">\n          </mwc-radio>\n        </mwc-formfield>\n\n        <mwc-formfield\n          label="','"\n          ?hidden="','">\n          <mwc-radio\n            value="audio"\n            id="mediaAudio"\n            ?checked="','"\n            @change="','"\n            name="radioButtonsMedia">\n          </mwc-radio>\n        </mwc-formfield>\n\n        ',"\n      </div>\n    "]);return Et=function(){return t},t}function Dt(){var t=d(['\n                  <yp-post-location\n                    .encodedLocation="','"\n                    .location="','"\n                    .group="','"\n                    .post="','"></yp-post-location>\n                ']);return Dt=function(){return t},t}function jt(){var t=d(["\n          <section>\n            ","\n          </section>\n        "]);return jt=function(){return t},t}function zt(){var t=d(['\n          <section class="subContainer">\n            <mwc-textarea\n              id="pointFor"\n              ?required="','"\n              minlength="1"\n              name="pointFor"\n              .value="','"\n              .label="','"\n              charCounter\n              rows="2"\n              max-rows="5"\n              .maxlength="','">\n            </mwc-textarea>\n            <div\n              class="horizontal end-justified layout pointEmoji"\n              ?hidden="','">\n              <emoji-selector id="emojiSelectorPointFor"></emoji-selector>\n            </div>\n          </section>\n        ']);return zt=function(){return t},t}function Ut(){var t=d(['\n                          <mwc-checkbox name="deleteAttachment"\n                            >',":\n                            ","</mwc-checkbox\n                          >\n                        "]);return Ut=function(){return t},t}function qt(){var t=d(['\n                    <yp-file-upload\n                      id="attachmentFileUpload"\n                      raised\n                      attachmentUpload\n                      buttonIcon="attach_file"\n                      .group="','"\n                      .buttonText="','"\n                      accept="application/msword,application/vnd.ms-excel,application/vnd.ms-powerpoint,text/plain,application/pdf,image/*"\n                      .target="/api/groups/','/upload_document"\n                      method="POST"\n                      @success="','">\n                    </yp-file-upload>\n                    <small class="attachmentInfo">',"</small>\n\n                    ","\n                  "]);return qt=function(){return t},t}function Ft(){var t=d(['\n                        <yp-structured-question-edit\n                          .index="','"\n                          is-from-new-post\n                          use-small-font\n                          id="structuredQuestionContainer_','"\n                          ?dontFocusFirstQuestion="','"\n                          @resize-scroller="','"\n                          .structuredAnswers="','"\n                          ?isLastRating="','"\n                          ?isFirstRating="','"\n                          ?hideQuestionIndex="','"\n                          .question="','">\n                        </yp-structured-question-edit>\n                      ']);return Ft=function(){return t},t}function Bt(){var t=d(["\n                    ","\n                  "]);return Bt=function(){return t},t}function Vt(){var t=d(['\n                    <mwc-textarea\n                      id="description"\n                      ?hidden="','"\n                      ?required="','"\n                      minlength="1"\n                      name="description"\n                      .value="','"\n                      .label="','"\n                      @change="','"\n                      char-counter\n                      rows="2"\n                      max-rows="5"\n                      maxrows="5"\n                      maxlength="','">\n                    </mwc-textarea>\n\n                    <div\n                      class="horizontal end-justified layout postEmoji"\n                      ?hidden="','">\n                      <emoji-selector\n                        id="emojiSelectorDescription"\n                        ?hidden="','"></emoji-selector>\n                    </div>\n                  ']);return Vt=function(){return t},t}function Jt(){var t=d(['\n                          <mwc-list-item .data-category-id="','"\n                            >',"</mwc-list-item\n                          >\n                        "]);return Jt=function(){return t},t}function Yt(){var t=d(['\n                    <mwc-select\n                      class="categoryDropDown"\n                      .label="','"\n                      @selected="','"\n                      ?required="','">\n                      ','\n                    </mwc-select>\n                    <input\n                      type="hidden"\n                      name="categoryId"\n                      .value="','" />\n                  ']);return Yt=function(){return t},t}function Gt(){var t=d(['\n                    <mwc-textfield\n                      id="name"\n                      required\n                      minlength="1"\n                      name="name"\n                      type="text"\n                      .label="','"\n                      .value="','"\n                      maxlength="60"\n                      charCounter>\n                    </mwc-textfield>\n                  ']);return Gt=function(){return t},t}function Wt(){var t=d(['\n                    <input\n                      type="hidden"\n                      name="name"\n                      .value="','" />\n                  ']);return Wt=function(){return t},t}function Zt(){var t=d(['\n          <section>\n            <div class="layout vertical flex">\n              ',"\n              ","\n              ","\n              ","\n              ","\n              ","\n            </div>\n          </section>\n        "]);return Zt=function(){return t},t}function Kt(){var t=d(['\n      <h2 class="contactInfo">\n        ','\n      </h2>\n      <mwc-textfield\n        id="contactName"\n        name="contactName"\n        type="text"\n        .label="','"\n        charCounter>\n      </mwc-textfield>\n      <mwc-textfield\n        id="contactEmail"\n        name="contactEmail"\n        type="text"\n        .label="','"\n        charCounter>\n      </mwc-textfield>\n      <mwc-textfield\n        id="contactTelephone"\n        name="contacTelephone"\n        type="text"\n        .label="','"\n        maxlength="20"\n        charCounter>\n      </mwc-textfield>\n      <mwc-textfield\n        id="contactAddress"\n        name="contactAddress"\n        type="text"\n        ?hidden="','"\n        .label="','"\n        maxlength="300"\n        charCounter>\n      </mwc-textfield>\n    ']);return Kt=function(){return t},t}function Xt(){var t=d(['\n              <mwc-tab stacked icon="videocam" .label=" ','">\n              </mwc-tab>\n            ']);return Xt=function(){return t},t}function te(){var t=d(['\n              <mwc-tab\n                stacked\n                icon="location_on"\n                .label="','"></mwc-tab>\n            ']);return te=function(){return t},t}function ee(){var t=d(['\n              <mwc-tab\n                stacked\n                icon="comment"\n                .label="','">\n              </mwc-tab>\n            ']);return ee=function(){return t},t}function ne(){var t=d(['\n      <mwc-tab-bar\n        ?title-disabled="','"\n        .activeIndex="','"\n        @MDCTabBar:activated="','"\n        id="paperTabs"\n        focused\n        ?hidden="','">\n        <mwc-tab\n          stacked\n          .label="','"\n          icon="lightbulb_outline"></mwc-tab>\n\n        ',"\n        ","\n        ","\n      </mwc-tab-bar>\n    "]);return ne=function(){return t},t}function ie(){var t=d(["\n        :host {\n          display: block;\n          width: 100%;\n          height: 100%;\n        }\n\n        .location-button {\n        }\n\n        #map {\n          width: 100%;\n          height: 100%;\n        }\n\n        @media screen and (-ms-high-contrast: active),\n          (-ms-high-contrast: none) {\n          #map {\n            min-height: 220px;\n          }\n        }\n\n        .mapSearchInput {\n          width: 100%;\n          margin-top: 8px;\n        }\n\n        mwc-input {\n          width: 250px;\n        }\n\n        .searchResultText {\n          width: 100%;\n          text-align: right;\n          padding-top: 8px;\n        }\n\n        mwc-button {\n          font-size: 16px;\n          padding-top: 32px;\n        }\n\n        @media (max-width: 390px) {\n          #map {\n            max-height: 180px;\n          }\n        }\n\n        @media (max-width: 320px) {\n          #map {\n            max-height: 160px;\n          }\n        }\n\n        .mapContainer {\n          width: 450px;\n          height: 250px;\n        }\n      "]);return ie=function(){return t},t}function oe(){var t=d(['<div class="mapContainer">\n            <lit-google-map\n              id="map"\n              @map-zoom-changed="','"\n              api-key="AIzaSyDkF_kak8BVZA5zfp5R4xRnrX8HP3hjiL0"\n              version="weekly"\n              @map-type-changed="','"\n              class="map"\n              @zoom-changed="','"\n              fit-to-markers>\n              <lit-google-map-marker\n                slot="markers"\n                .latitude="','"\n                .longitude="','"\n                id="marker"></lit-google-map-marker>\n            </lit-google-map>\n          </div>\n          <div class="mapSearchInput layout vertical center-center">\n            <div class="layout horizontal center-center wrap">\n              <mwc-textfield\n                maxlength="60"\n                id="mapSearchInput"\n                .label="','"\n                .value="','"\n                @keydown="','"></mwc-textfield>\n              <mwc-button\n                @click="','"\n                .label="','"></mwc-button>\n            </div>\n            <div class="searchResultText layout horizontal center-center">\n              ','\n            </div>\n            <mwc-circular-progress-four-color\n              hidden\n              id="spinner"></mwc-circular-progress-four-color>\n          </div> ']);return oe=function(){return t},t}function ae(){var t=d(["#map{width:100%;height:100%}"]);return ae=function(){return t},t}function re(){var t=d([' <lit-google-maps-api id="api" api-key="','" version="','" @api-load="','"></lit-google-maps-api> <lit-selector id="markers-selector" selected-attribute="open" activate-event="google-map-marker-open" @google-map-marker-close="','"> <slot id="markers" name="markers"></slot> </lit-selector> <div id="map"> </div> ']);return re=function(){return t},t}return{setters:[function(t){n=t.createClass,i=t.classCallCheck,o=t.typeof,a=t.createSuper,r=t.inherits,s=t.getPrototypeOf,u=t.get,d=t.taggedTemplateLiteral,c=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){},function(t){p=t.p,h=t.c,m=t.L,f=t.a,g=t.h,v=t._,y=t.e,b=t.n,k=t.Y,w=t.i,x=t.T,I=t.A,T=t.b},function(t){C=t.Y},function(t){_=t.m}],execute:function(){(function(t){return t}),A=function(){function t(){i(this,t),this.apiMap={}}return n(t,[{key:"require",value:function(t,e,n){var i=this.nameFromUrl(t);this.apiMap[i]||(this.apiMap[i]=new M(i,t,n)),this.apiMap[i].requestNotify(e)}},{key:"nameFromUrl",value:function(t){return t.replace(/[\:\/\%\?\&\.\=\-\,]/g,"_")+"_api"}}],[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),t}(),M=function(){function t(e,n,o){if(i(this,t),this.callbackMacro="%%callback%%",this.loaded=!1,this.script=null,this.notifiers=[],!o){if(!(n.indexOf(this.callbackMacro)>=0))return void console.error("ScriptLoader class: a %%callback%% parameter is required in libraryUrl");o=e+"_loaded",n=n.replace(this.callbackMacro,o)}this.callbackName=o,window[this.callbackName]=this.success.bind(this),this.addScript(n)}return n(t,[{key:"addScript",value:function(t){var e=document.createElement("script");e.src=t,e.onerror=this.handleError.bind(this);var n=document.querySelector("script")||document.body;n.parentNode.insertBefore(e,n),this.script=e}},{key:"removeScript",value:function(){this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.script=null}},{key:"handleError",value:function(t){this.error=new Error("Library failed to load"),this.notifyAll(),this.cleanup()}},{key:"success",value:function(){this.loaded=!0,this.result=Array.prototype.slice.call(arguments),this.notifyAll(),this.cleanup()}},{key:"cleanup",value:function(){delete window[this.callbackName]}},{key:"notifyAll",value:function(){this.notifiers.forEach(function(t){t(this.error,this.result)}.bind(this)),this.notifiers=[]}},{key:"requestNotify",value:function(t){this.loaded||this.error?t(this.error,this.result):this.notifiers.push(t)}}]),t}(),P=function(t,e,n,i){var a,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var u=t.length-1;u>=0;u--)(a=t[u])&&(s=(r<3?a(s):r>3?a(e,n,s):a(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},N=function(t,e){if("object"==("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},O=function(t){r(o,t);var e=a(o);function o(){var t;return i(this,o),(t=e.apply(this,arguments)).apiKey="",t.clientId="",t.mapsUrl="https://maps.googleapis.com/maps/api/js?callback=%%callback%%",t.version="3.39",t.language="",t}return n(o,[{key:"computeUrl",value:function(t,e,n,i,o){var a=t+"&v="+e;return a+="&libraries=drawing,geometry,places,visualization",n&&!i&&(a+="&key="+n),i&&(a+="&client="+i),n||i||console.warn("No Google Maps API Key or Client ID specified. See https://developers.google.com/maps/documentation/javascript/get-api-key for instructions to get started with a key or client id."),o&&(a+="&language="+o),a}},{key:"libraryUrl",get:function(){return this.computeUrl(this.mapsUrl,this.version,this.apiKey,this.clientId,this.language)}},{key:"notifyEvent",get:function(){return"api-load"}}]),o}(function(t){r(o,t);var e=a(o);function o(){var t;return i(this,o),(t=e.apply(this,arguments)).libraryLoaded=!1,t.libraryErrorMessage=null,t.isReady=!1,t}return n(o,[{key:"libraryUrlChanged",value:function(){this.isReady&&null!=this.libraryUrl&&this.loadLibrary()}},{key:"libraryLoadCallback",value:function(t,e){t?(console.warn("Library load failed:",t.message),this.libraryErrorMessage=t.message):(this.libraryErrorMessage=null,this.libraryLoaded=!0,null!=this.notifyEvent&&this.dispatchEvent(new CustomEvent(this.notifyEvent,{detail:e,composed:!0})))}},{key:"loadLibrary",value:function(){A.getInstance().require(this.libraryUrl,this.libraryLoadCallback.bind(this),this.callbackName)}},{key:"connectedCallback",value:function(){u(s(o.prototype),"connectedCallback",this).call(this),this.isReady=!0,null!=this.libraryUrl&&this.loadLibrary()}},{key:"callbackName",get:function(){return null}}]),o}(m)),P([p({type:String,attribute:"api-key"}),N("design:type",Object)],O.prototype,"apiKey",void 0),P([p({type:String,attribute:"client-id"}),N("design:type",Object)],O.prototype,"clientId",void 0),P([p({type:String,attribute:"maps-url"}),N("design:type",Object)],O.prototype,"mapsUrl",void 0),P([p({type:String}),N("design:type",Object)],O.prototype,"version",void 0),P([p({type:String}),N("design:type",Object)],O.prototype,"language",void 0),O=P([h("lit-google-maps-api")],O),$=function(t,e,n,i){var a,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var u=t.length-1;u>=0;u--)(a=t[u])&&(s=(r<3?a(s):r>3?a(e,n,s):a(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},R=function(t,e){if("object"==("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Q=function(t){r(o,t);var e=a(o);function o(){var t;return i(this,o),(t=e.apply(this,arguments)).latitude=0,t.longitude=0,t.label=null,t.zIndex=0,t.open=!1,t.map=null,t.marker=null,t}return n(o,[{key:"attributeChangedCallback",value:function(t,e,n){var i,a;switch(u(s(o.prototype),"attributeChangedCallback",this).call(this,t,e,n),t){case"open":this.openChanged();break;case"latitude":case"longitude":this.updatePosition();break;case"label":null===(i=this.marker)||void 0===i||i.setLabel(n);break;case"z-index":null===(a=this.marker)||void 0===a||a.setZIndex(n)}}},{key:"openChanged",value:function(){this.info&&(this.open?(this.info.open(this.map,this.marker),this.dispatchEvent(new CustomEvent("google-map-marker-open",{bubbles:!0}))):(this.info.close(),this.dispatchEvent(new CustomEvent("google-map-marker-close",{bubbles:!0}))))}},{key:"updatePosition",value:function(){var t;null===(t=this.marker)||void 0===t||t.setPosition(new google.maps.LatLng(this.latitude,this.longitude))}},{key:"changeMap",value:function(t){this.map=t,this.mapChanged()}},{key:"mapChanged",value:function(){this.marker&&(this.marker.setMap(null),google.maps.event.clearInstanceListeners(this.marker)),this.map&&this.map instanceof google.maps.Map&&this.mapReady()}},{key:"mapReady",value:function(){this.marker=new google.maps.Marker({map:this.map,position:{lat:this.latitude,lng:this.longitude},label:this.label,zIndex:this.zIndex}),this.contentChanged()}},{key:"contentChanged",value:function(){this.contentObserver&&this.contentObserver.disconnect(),this.contentObserver=new MutationObserver(this.contentChanged.bind(this)),this.contentObserver.observe(this,{childList:!0,subtree:!0});var t=this.innerHTML.trim();t?(this.info||(this.info=new google.maps.InfoWindow,this.openInfoHandler=google.maps.event.addListener(this.marker,"click",function(){this.open=!0}.bind(this)),this.closeInfoHandler=google.maps.event.addListener(this.info,"closeclick",function(){this.open=!1}.bind(this))),this.info.setContent(t)):this.info&&(google.maps.event.removeListener(this.openInfoHandler),google.maps.event.removeListener(this.closeInfoHandler),this.info=null)}}]),o}(m),$([p({type:Number,reflect:!0}),R("design:type",Number)],Q.prototype,"latitude",void 0),$([p({type:Number,reflect:!0}),R("design:type",Number)],Q.prototype,"longitude",void 0),$([p({type:String,reflect:!0}),R("design:type",String)],Q.prototype,"label",void 0),$([p({type:Number,reflect:!0,attribute:"z-index"}),R("design:type",Number)],Q.prototype,"zIndex",void 0),$([p({type:Boolean,reflect:!0}),R("design:type",Boolean)],Q.prototype,"open",void 0),Q=$([h("lit-google-map-marker")],Q),H=function(t,e,n,i){var a,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var u=t.length-1;u>=0;u--)(a=t[u])&&(s=(r<3?a(s):r>3?a(e,n,s):a(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},E=function(t,e){if("object"==("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},D=function(t){r(o,t);var e=a(o);function o(){var t;return i(this,o),(t=e.apply(this,arguments)).apiKey="",t.version="3.39",t.styles={},t.zoom=8,t.fitToMarkers=!1,t.mapType="roadmap",t.centerLatitude=-34.397,t.centerLongitude=150.644,t.map=null,t}return n(o,[{key:"initGMap",value:function(){if(null==this.map){var t=this.shadowRoot.getElementById("api");null!=t&&1==t.libraryLoaded&&(this.map=new google.maps.Map(this.shadowRoot.getElementById("map"),this.getMapOptions()),this.updateMarkers())}}},{key:"getMapOptions",value:function(){return{zoom:this.zoom,center:{lat:this.centerLatitude,lng:this.centerLongitude},mapTypeId:this.mapType,styles:this.styles}}},{key:"mapApiLoaded",value:function(){this.initGMap()}},{key:"connectedCallback",value:function(){u(s(o.prototype),"connectedCallback",this).call(this),this.initGMap()}},{key:"attachChildrenToMap",value:function(t){if(this.map)for(var e,n=0;e=t[n];++n)e.changeMap(this.map)}},{key:"observeMarkers",value:function(){var t=this;this.marketObserverSet||(this.addEventListener("items-changed",(function(e){t.updateMarkers()})),this.marketObserverSet=!0)}},{key:"updateMarkers",value:function(){var t=this;this.observeMarkers();var e=this.shadowRoot.getElementById("markers-selector");if(e){var n=e.items;if(this.markers&&n.length===this.markers.length&&0==n.filter((function(e){return t.markers&&-1===t.markers.indexOf(e)})).length)return;this.markers=n,this.attachChildrenToMap(this.markers),this.fitToMarkers&&this.fitToMarkersChanged()}}},{key:"fitToMarkersChanged",value:function(){if(this.map&&this.fitToMarkers&&this.markers.length>0){for(var t,e=new google.maps.LatLngBounds,n=0;t=this.markers[n];++n)e.extend(new google.maps.LatLng(t.latitude,t.longitude));this.markers.length>1&&this.map.fitBounds(e),this.map.setCenter(e.getCenter())}}},{key:"deselectMarker",value:function(t){}},{key:"render",value:function(){var t=this;return g(L||(L=re()),this.apiKey,this.version,(function(){return t.mapApiLoaded()}),(function(e){return t.deselectMarker(e)}))}}],[{key:"styles",get:function(){return f(S||(S=ae()))}}]),o}(m),H([p({type:String,attribute:"api-key"}),E("design:type",String)],D.prototype,"apiKey",void 0),H([p({type:String}),E("design:type",String)],D.prototype,"version",void 0),H([p({type:Object}),E("design:type",Object)],D.prototype,"styles",void 0),H([p({type:Number}),E("design:type",Number)],D.prototype,"zoom",void 0),H([p({type:Boolean,attribute:"fit-to-markers"}),E("design:type",Boolean)],D.prototype,"fitToMarkers",void 0),H([p({type:String,attribute:"map-type"}),E("design:type",String)],D.prototype,"mapType",void 0),H([p({type:Number,attribute:"center-latitude"}),E("design:type",Number)],D.prototype,"centerLatitude",void 0),H([p({type:Number,attribute:"center-longitude"}),E("design:type",Number)],D.prototype,"centerLongitude",void 0),D=H([h("lit-google-map")],D),j=function(){function t(e){i(this,t),this.multi=!1,this.selection=[],this.selectCallback=e}return n(t,[{key:"get",value:function(){return this.multi?this.selection.slice():this.selection[0]}},{key:"clear",value:function(t){var e=this;this.selection.slice().forEach((function(n){(!t||t.indexOf(n)<0)&&e.setItemSelected(n,!1)}))}},{key:"isSelected",value:function(t){return this.selection.indexOf(t)>=0}},{key:"setItemSelected",value:function(t,e){if(null!=t&&e!=this.isSelected(t)){if(e)this.selection.push(t);else{var n=this.selection.indexOf(t);n>=0&&this.selection.splice(n,1)}this.selectCallback&&this.selectCallback(t,e)}}},{key:"select",value:function(t){this.multi?this.toggle(t):this.get()!==t&&(this.setItemSelected(this.get(),!1),this.setItemSelected(t,!0))}},{key:"toggle",value:function(t){this.setItemSelected(t,!this.isSelected(t))}}]),t}(),z=function(t,e,n,i){var a,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var u=t.length-1;u>=0;u--)(a=t[u])&&(s=(r<3?a(s):r>3?a(e,n,s):a(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},U=function(t,e){if("object"==("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},q=function(t){r(o,t);var e=a(o);function o(){var t;return i(this,o),(t=e.apply(this,arguments)).activateEvent="tap",t.selectedAttribute=null,t.selected=null,t._selection=new j((function(e,n){return t.applySelection(e,n)})),t._items=[],t}return n(o,[{key:"connectedCallback",value:function(){var t=this;u(s(o.prototype),"connectedCallback",this).call(this),this.addEventListener("slotchange",(function(e){e.stopPropagation(),t.updateItems(),t.dispatchEvent(new CustomEvent("selector-items-changed",{detail:{},composed:!0}))})),this.addListener(this.activateEvent)}},{key:"disconnectedCallback",value:function(){u(s(o.prototype),"disconnectedCallback",this).call(this),this.removeListener(this.activateEvent)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(u(s(o.prototype),"attributeChangedCallback",this).call(this,t,e,n),t){case"selected":this.updateSelected()}}},{key:"applySelection",value:function(t,e){this.selectedAttribute&&t instanceof Element&&e!=t.hasAttribute(this.selectedAttribute)&&t.toggleAttribute(this.selectedAttribute)}},{key:"updateItems",value:function(){var t,e,n=this.querySelector("slot");this._items=null!=(e=null===(t=n)||void 0===t?void 0:t.assignedNodes())?e:[]}},{key:"addListener",value:function(t){var e=this;this.addEventListener(t,(function(t){return e.activateHandler(t)}))}},{key:"removeListener",value:function(t){var e=this;this.removeEventListener(t,(function(t){return e.activateHandler(t)}))}},{key:"activateHandler",value:function(t){for(var e=t.target,n=this.items;e&&e!=this;){var i=n.indexOf(e);if(i>=0){var o=this.indexToValue(i);return void this.itemActivate(o,e)}e=e.parentNode}}},{key:"itemActivate",value:function(t,e){this.dispatchEvent(new CustomEvent("selector-item-activate",{detail:{selected:t,item:e},composed:!0,cancelable:!0}))&&this.select(t)}},{key:"select",value:function(t){this.selected=t}},{key:"updateSelected",value:function(){this.selectSelected(this.selected)}},{key:"selectSelected",value:function(t){if(this._items){var e=this.valueToItem(this.selected);e?this._selection.select(e):this._selection.clear()}}},{key:"valueToItem",value:function(t){return null==t?null:this._items[this.valueToIndex(t)]}},{key:"valueToIndex",value:function(t){return Number(t)}},{key:"indexToValue",value:function(t){return t}},{key:"indexOf",value:function(t){return this._items?this._items.indexOf(t):-1}},{key:"items",get:function(){return this._items}}]),o}(m),z([p({type:String,attribute:"activate-event"}),U("design:type",String)],q.prototype,"activateEvent",void 0),z([p({type:String,attribute:"selected-attribute"}),U("design:type",String)],q.prototype,"selectedAttribute",void 0),z([p({type:Number,reflect:!0}),U("design:type",Object)],q.prototype,"selected",void 0),q=z([h("lit-selector")],q),function(t){return t},V=function(t){r(o,t);var e=a(o);function o(){var t;return i(this,o),(t=e.apply(this,arguments)).defaultLatitude=64.13897027178841,t.defaultLongitude=-21.876912117004395,t.mapSearchString="",t.mapSearchResultAddress="",t.active=!1,t.narrowPad=!1,t}return n(o,[{key:"updated",value:function(t){u(s(o.prototype),"updated",this).call(this,t),t.has("group")&&this._groupChanged(),t.has("location")&&this._locationChanged(),t.has("post")&&this._postChanged()}},{key:"render",value:function(){return this.group?x(B||(B=oe()),this._mapZoomChanged,this._mapTypeChanged,this._zoomChanged,this.location?this.location.latitude:this.defaultLatitude,this.location?this.location.longitude:this.defaultLongitude,this.t("maps.searchInput"),this.mapSearchString,this._submitOnEnter,this._searchMap,this.t("maps.search"),this.mapSearchResultAddress):I}},{key:"_mapZoomChanged",value:function(t){this.location&&(this.location.map_zoom=t.detail)}},{key:"_submitOnEnter",value:function(t){13===t.keyCode&&this._searchMap()}},{key:"_searchMap",value:function(){var t=this,e=this.$$("#map"),n=new google.maps.places.PlacesService(e);this.$$("#spinner").hidden=!1;var i={query:this.$$("#mapSearchInput").value,fields:["name","geometry"]};n.findPlaceFromQuery(i,(function(e,n){n===google.maps.places.PlacesServiceStatus.OK&&(t.$$("#spinner").hidden=!0,e&&e.length>0&&(t.mapSearchResultAddress=e[0].formatted_address,t.$$("#map").zoom=15,t.location={latitude:e[0].geometry.location.lat(),longitude:e[0].geometry.location.lng(),map_zoom:15},t.$$("#map").updateMarkers()))})),this.mapSearchResultAddress=""}},{key:"connectedCallback",value:function(){var t=this;u(s(o.prototype),"connectedCallback",this).call(this),this.location||setTimeout((function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){t.location||(t.location={latitude:e.coords.latitude,longitude:e.coords.longitude,map_zoom:13})}))}),50)}},{key:"_zoomChanged",value:function(t){this.location&&t.detail&&t.detail.value&&(this.location.map_zoom=t.detail.value),this.encodedLocation=JSON.stringify(this.location)}},{key:"_mapTypeChanged",value:function(t){this.location&&t.detail&&t.detail.value&&(this.location.mapType=t.detail.value),this.encodedLocation=JSON.stringify(this.location)}},{key:"_locationChanged",value:function(){if(this.location){var t=this.$$("#map");this.location.map_zoom&&(t.zoom=this.location.map_zoom),this.location.mapType&&(t.mapType=this.location.mapType),t.requestUpdate(),this.encodedLocation=JSON.stringify(this.location)}}},{key:"_setLocation",value:function(t){this.location={latitude:t.detail.latLng.lat(),longitude:t.detail.latLng.lng(),mapType:this.$$("#map").mapType,map_zoom:this.$$("#map").zoom}}},{key:"_groupChanged",value:function(){var t,e=this.group;e&&(e.configuration&&e.configuration.defaultLocationLongLat&&""!=e.configuration.defaultLocationLongLat&&e.configuration.defaultLocationLongLat.split(",").length>1?(t=e.configuration.defaultLocationLongLat.trim().split(","),this.defaultLongitude=parseFloat(t[0]),this.defaultLatitude=parseFloat(t[1])):e.Community&&e.Community.configuration&&e.Community.configuration.defaultLocationLongLat&&""!=e.Community.configuration.defaultLocationLongLat&&e.Community.configuration.defaultLocationLongLat.split(",").length>1&&(t=e.Community.configuration.defaultLocationLongLat.trim().split(","),this.defaultLongitude=parseFloat(t[0]),this.defaultLatitude=parseFloat(t[1])))}},{key:"_postChanged",value:function(){this.post||(this.location=void 0)}},{key:"mapZoom",get:function(){return this.location&&this.location.map_zoom?this.location.map_zoom:15}}],[{key:"styles",get:function(){return[u(s(o),"styles",this),w(F||(F=ie()))]}}]),o}(k),v([y({type:Object})],V.prototype,"map",void 0),v([y({type:Object})],V.prototype,"group",void 0),v([y({type:Object})],V.prototype,"post",void 0),v([y({type:Number})],V.prototype,"defaultLatitude",void 0),v([y({type:Number})],V.prototype,"defaultLongitude",void 0),v([y({type:String})],V.prototype,"mapSearchString",void 0),v([y({type:String})],V.prototype,"mapSearchResultAddress",void 0),v([y({type:Object})],V.prototype,"location",void 0),v([y({type:String})],V.prototype,"encodedLocation",void 0),v([y({type:Object})],V.prototype,"marker",void 0),v([y({type:Boolean})],V.prototype,"active",void 0),v([y({type:Boolean})],V.prototype,"narrowPad",void 0),V=v([b("yp-post-location")],V),function(t){return t},Tt={Description:0,Point:1,Location:2,Media:3},Ct=function(t){r(p,t);var e,o,d=a(p);function p(){var t;return i(this,p),(t=d.apply(this,arguments)).action="/posts",t.newPost=!1,t.locationHidden=!1,t.selected=0,t.mapActive=!1,t.hasOnlyOneTab=!1,t.structuredAnswersJson="",t.structuredAnswersString="",t.selectedCoverMediaType="none",t.emailValidationPattern="^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$",t.liveQuestionIds=[],t.uniqueIdsToElementIndexes={},t.liveUniqueIds=[],t}return n(p,[{key:"updated",value:function(t){u(s(p.prototype),"updated",this).call(this,t),t.has("post")&&this._postChanged(),t.has("locationHidden")&&this._locationHiddenChanged(),t.has("location")&&this._locationChanged(),t.has("selectedCategoryArrayId")&&this._selectedCategoryChanged(),t.has("selectedCoverMediaType")&&this._uploadedHeaderImageIdChanged(),t.has("selected")&&(this._selectedChanged(),this.selected),this._setupStructuredQuestions()}},{key:"_setSelectedTab",value:function(t){this.selected=t.detail.index}},{key:"renderTabs",value:function(){return x(Y||(Y=ne()),this.group.configuration.hideNameInputAndReplaceWith,this.selected,this._setSelectedTab,this.hasOnlyOneTab,this.t("post.yourPost"),this.newPointShown?x(G||(G=ee()),this.t("post.yourPoint")):I,this.locationHidden?I:x(W||(W=te()),this.t("post.location")),this.mediaHidden?I:x(Z||(Z=Xt()),this.t("media")))}},{key:"renderMoreContactInfo",value:function(){return x(K||(K=Kt()),this.t("contactInformation"),this.t("user.name"),this.t("user.email"),this.t("contactTelephone"),!this.group.configuration.moreContactInformationAddress,this.t("contactAddress"))}},{key:"renderDescriptionTab",value:function(){var t,e,n=this;return this.group?x(X||(X=Zt()),this.group.configuration.hideNameInputAndReplaceWith?x(tt||(tt=Wt()),this.replacedName||""):this.post?x(et||(et=Gt()),this.titleQuestionText,this.post.name):I,this.showCategories&&this.group.Categories?x(nt||(nt=Yt()),this.t("category.select"),this._selectedCategory,this.group.configuration.makeCategoryRequiredOnNewPost,this.group.Categories.map((function(t){return x(it||(it=Jt()),t.id,t.name)})),this.selectedCategoryId?this.selectedCategoryId.toString():""):I,this.postDescriptionLimit?x(ot||(ot=Vt()),null!=this.structuredQuestions,null==this.structuredQuestions,this.post.description,this.t("post.description"),this._resizeScrollerIfNeeded,this.postDescriptionLimit,this.group.configuration.hideEmoji,null!=this.structuredQuestions):I,null!=this.structuredQuestions?x(at||(at=Bt()),this.structuredQuestions.map((function(t,e){return x(rt||(rt=Ft()),e,e,!n.group.configuration.hideNameInputAndReplaceWith,n._resizeScrollerIfNeeded,n.initialStructuredAnswersJson,n._isLastRating(e),n._isFirstRating(e),n.group.configuration.hideQuestionIndexOnNewPost,t)}))):I,this.group.configuration.attachmentsEnabled?x(st||(st=qt()),this.group,this.t("uploadAttachment"),this.group.id,this._documentUploaded,this.t("documentOnlyVisibleToAdmins"),(null===(e=null===(t=this.post.data)||void 0===t?void 0:t.attachment)||void 0===e?void 0:e.url)?x(ut||(ut=Ut()),this.t("deleteAttachment"),this.post.data.attachment.filename):I):I,this.group.configuration.moreContactInformation?this.renderMoreContactInfo():I):I}},{key:"renderPointTab",value:function(){return this.newPointShown?x(dt||(dt=zt()),!this.group.configuration.newPointOptional,this.post.pointFor||"",this.t("point.for"),this.pointMaxLength,this.group.configuration.hideEmoji):I}},{key:"renderLocationTab",value:function(){return this.locationHidden?I:x(ct||(ct=jt()),this.mapActive&&this.group?x(lt||(lt=Dt()),this.encodedLocation,this.location,this.group,this.post):I)}},{key:"renderCoverMediaSelection",value:function(){return x(pt||(pt=Et()),this.t("post.cover.media"),this.selectedCoverMediaType,this.t("post.cover.none"),"none"===this.selectedCoverMediaType,this._setSelectedCoverMediaType,this.t("post.cover.image"),!this.uploadedHeaderImageId,"image"===this.selectedCoverMediaType,this._setSelectedCoverMediaType,this.t("postCoverVideo"),!this.showVideoCover,"video"===this.selectedCoverMediaType,this._setSelectedCoverMediaType,this.t("postCoverAudio"),!this.showAudioCover,"audio"===this.selectedCoverMediaType,this._setSelectedCoverMediaType,this.location?x(ht||(ht=Ht()),this.t("post.cover.map"),"map"===this.selectedCoverMediaType,this._setSelectedCoverMediaType,this.t("post.cover.streetview"),"streetView"===this.selectedCoverMediaType,this._setSelectedCoverMediaType):I)}},{key:"renderMediaTab",value:function(){return x(mt||(mt=Qt()),this.group.configuration.hidePostImageUploads,this.t("image.upload"),this._imageUploaded,this.t("post.cover.imageInfo"),this.group.configuration.allowPostVideoUploads?x(ft||(ft=Rt()),this.group,this.group.configuration.videoPostUploadLimitSec,this.t("uploadVideo"),this._videoUploaded,!this.group.configuration.showVideoUploadDisclaimer||!this.uploadedVideoId,this.t("videoUploadDisclaimer")):I,this.group.configuration.allowPostAudioUploads?x(gt||(gt=$t()),this.group,this.group.configuration.audioPostUploadLimitSec,this.t("uploadAudio"),this._audioUploaded):I,this.renderCoverMediaSelection())}},{key:"_setSelectedCoverMediaType",value:function(t){this.selectedCoverMediaType=t.target.value}},{key:"renderCurrentTabPage",value:function(){return x(vt||(vt=Ot()),this.selected!==Tt.Description,this.renderDescriptionTab(),this._pointPageHidden,this.renderPointTab(),!1,this.renderLocationTab(),this._mediaPageHidden,this.renderMediaTab())}},{key:"renderHiddenInputs",value:function(){return x(yt||(yt=Nt()),this.encodedLocation||"",this.selectedCoverMediaType,this.uploadedHeaderImageId?this.uploadedHeaderImageId.toString():"",this.uploadedDocumentUrl||"",this.uploadedDocumentFilename||"",this.structuredAnswersString,this.structuredAnswersJson)}},{key:"render",value:function(){return x(bt||(bt=Pt()),this.action,this.newPost,this._nextTab,this.method,this.editHeaderText?this.editHeaderText:"",this.saveText,this.t("next"),this.snackbarText,this.params,this.group&&this.post?x(kt||(kt=Mt()),this.group.configuration.hideNameInputAndReplaceWith,this.renderTabs(),this.renderCurrentTabPage(),this.renderHiddenInputs()):I,this.group&&this.group.configuration.alternativeTextForNewIdeaButtonHeader?x(wt||(wt=At()),this.group.id,this.group.configuration.alternativeTextForNewIdeaButtonHeader,this.group.language,this._alternativeTextForNewIdeaButtonHeaderTranslation):I,this.group&&this.group.configuration.customThankYouTextNewPosts?x(xt||(xt=Lt()),this.group.id,this.group.configuration.customThankYouTextNewPosts,this.group.language):I,this.group&&this.group.configuration.customTitleQuestionText?x(It||(It=St()),this.group.id,this.group.configuration.customTitleQuestionText,this.group.language,this._updatePostTitle):I)}},{key:"_updatePostTitle",value:function(){var t=this;setTimeout((function(){var e=t.$$("#customTitleQuestionTextId");e&&e.finalContent&&(t.customTitleQuestionText=e.finalContent)}))}},{key:"connectedCallback",value:function(){u(s(p.prototype),"connectedCallback",this).call(this),this.addListener("yp-form-invalid",this._formInvalid),this.addListener("yp-custom-form-submit",this._customSubmit),this.addListener("yp-skip-to-unique-id",this._skipToId),this.addListener("yp-open-to-unique-id",this._openToId),this.addListener("yp-goto-next-index",this._goToNextIndex)}},{key:"disconnectedCallback",value:function(){u(s(p.prototype),"disconnectedCallback",this).call(this),this.removeListener("yp-form-invalid",this._formInvalid),this.removeListener("yp-custom-form-submit",this._customSubmit),this.removeListener("yp-skip-to-unique-id",this._skipToId),this.removeListener("yp-open-to-unique-id",this._openToId),this.removeListener("yp-goto-next-index",this._goToNextIndex)}},{key:"_isLastRating",value:function(t){return this.structuredQuestions&&"rating"===this.structuredQuestions[t].subType&&t+2<this.structuredQuestions.length&&"rating"!==this.structuredQuestions[t+1].subType}},{key:"_isFirstRating",value:function(t){return this.structuredQuestions&&"rating"===this.structuredQuestions[t].subType&&this.structuredQuestions[t-1]&&"rating"!==this.structuredQuestions[t-1].subType}},{key:"_openToId",value:function(t){this._skipToId(t,!0)}},{key:"_goToNextIndex",value:function(t){var e=this.liveQuestionIds.indexOf(t.detail.currentIndex);if(e<this.liveQuestionIds.length-1){var n=this.$$("#structuredQuestionContainer_"+this.liveQuestionIds[e+1]);n.scrollIntoView({block:"center",inline:"center",behavior:"smooth"}),n.focus()}}},{key:"_skipToId",value:function(t,e){var n=!1;if(this.$$("#surveyContainer"))for(var i=this.$$("#surveyContainer").children,o=0;o<i.length;o++){var a=t.detail.toId.replace(/]/g,""),r=t.detail.fromId.replace(/]/g,"");if(i[o+1]&&i[o+1].question&&i[o+1].question.uniqueId&&"a"===i[o+1].question.uniqueId.substring(i[o+1].question.uniqueId.length-1)&&(i[o].question.uniqueId=i[o+1].question.uniqueId.substring(0,i[o+1].question.uniqueId.length-1)),i[o].question&&t.detail.fromId&&i[o].question.uniqueId===r)n=!0;else{if(i[o].question&&t.detail.toId&&(i[o].question.uniqueId===a||i[o].question.uniqueId===a+"a"))break;n&&(i[o].hidden=!e)}}else console.error("No survey container found")}},{key:"_floatIfValueOrIE",value:function(t){return/Trident.*rv[ :]*11\./.test(navigator.userAgent)||t}},{key:"_submitWithStructuredQuestionsJson",value:function(){var t=this,e=[];this.liveQuestionIds.forEach((function(n){var i=t.$$("#structuredQuestionContainer_"+n);if(i){var o=i.getAnswer();o?e.push(o):console.error("Can't find answer to question")}})),this.structuredAnswersJson=JSON.stringify(e),this.$$("#editDialog")._reallySubmit()}},{key:"_submitWithStructuredQuestionsString",value:function(){for(var t="",e="",n=0;n<this.structuredQuestions.length;n+=1)t+=this.structuredQuestions[n].text,this.structuredQuestions[n].text&&"?"!==this.structuredQuestions[n].text[this.structuredQuestions[n].text.length-1]&&(t+=":"),t+="\n",t+=this.structuredQuestions[n].value,e+=this.structuredQuestions[n].value,n!==this.structuredQuestions.length-1&&(e+="%!#x",t+="\n\n");this.post&&(this.post.description=t),this.structuredAnswersString=e,this.$$("#editDialog")._reallySubmit()}},{key:"_customSubmit",value:function(){this.group&&this.group.configuration&&this.group.configuration.structuredQuestionsJson?this._submitWithStructuredQuestionsJson():this.structuredQuestions&&this.structuredQuestions.length>0?this._submitWithStructuredQuestionsString():this.$$("#editDialog")._reallySubmit()}},{key:"_resizeScrollerIfNeeded",value:function(){this.$$("#editDialog").scrollResize()}},{key:"_getStructuredQuestionsString",value:function(){for(var t=[],e=this.group.configuration.structuredQuestions.split(","),n=0;n<e.length;n+=2){var i=e[n],o=e[n+1];t.push({text:i,maxLength:parseInt(o),value:""})}if(!this.newPost&&this.post&&this.post.public_data&&this.post.public_data.structuredAnswers&&""!==this.post.public_data.structuredAnswers)for(var a=this.post.public_data.structuredAnswers.split("%!#x"),r=0;r<a.length;r+=1)t[r]&&(t[r].value=a[r]);return t}},{key:"_setupStructuredQuestions",value:function(){var t=this.post,e=this.group;if(t&&e&&e.configuration.structuredQuestionsJson)this.structuredQuestions=e.configuration.structuredQuestionsJson;else{if(!(t&&e&&e.configuration.structuredQuestions&&""!==e.configuration.structuredQuestions))return;this.structuredQuestions=this._getStructuredQuestionsString()}}},{key:"_videoUploaded",value:function(t){var e=this;this.uploadedVideoId=t.detail.videoId,this.$$("#mediaVideo").checked=!0,setTimeout((function(){e.fire("iron-resize")}),50)}},{key:"_audioUploaded",value:function(t){var e=this;this.uploadedAudioId=t.detail.audioId,this.selectedCoverMediaType="audio",setTimeout((function(){e.fire("iron-resize")}))}},{key:"_documentUploaded",value:function(t){var e=t.detail.xhr.responseURL.split("?")[0];this.uploadedDocumentUrl=e,this.uploadedDocumentFilename=t.detail.filename}},{key:"customFormResponse",value:function(){window.appGlobals.groupLoadNewPost=!0}},{key:"_updateEmojiBindings",value:function(){var t=this;setTimeout((function(){var e=t.$$("#description"),n=t.$$("#emojiSelectorDescription");e&&n?n.inputTarget=e:console.warn("Post edit: Can't bind emojis :(");var i=t.$$("#emojiSelectorPointFor"),o=t.$$("#pointFor");i&&o&&(i.inputTarget=o)}),500)}},{key:"_locationHiddenChanged",value:function(){}},{key:"_formInvalid",value:function(){this.newPointShown&&!this.$$("#pointFor").checkValidity()?this.selected=1:this.selected=0,this.$$("#name")&&(this.$$("#name").autoValidate=!0),this.$$("#description")&&(this.$$("#description").autoValidate=!0),this.newPointShown&&(this.$$("#pointFor").autoValidate=!0)}},{key:"_locationChanged",value:function(){!this.location||this.selectedCoverMediaType&&""!=this.selectedCoverMediaType&&"none"!=this.selectedCoverMediaType||(this.selectedCoverMediaType="map")}},{key:"_uploadedHeaderImageIdChanged",value:function(){this.uploadedHeaderImageId&&(this.selectedCoverMediaType="image")}},{key:"_getTabLength",value:function(){var t=4;return this.newPointShown||(t-=1),this.locationHidden&&(t-=1),this.mediaHidden&&(t-=1),t}},{key:"_nextTab",value:function(){var t=this._getTabLength();this.selected<t&&(this.selected=this.selected+1)}},{key:"_selectedChanged",value:function(){var t=this,e=this.selected;setTimeout((function(){t.locationHidden||e!=(t.newPointShown?2:1)?t.mapActive=!1:t.mapActive=!0;var n=t._getTabLength()-1;if(0===n&&(t.hasOnlyOneTab=!0),t.$$("#editDialog").useNextTabAction=e!=n,0==e){var i=t.$$("#name");i&&i.focus()}if(1==e&&t.newPointShown){var o=t.$$("#pointFor");o&&o.focus()}setTimeout((function(){t._resizeScrollerIfNeeded()}),50)}))}},{key:"_selectedCategory",value:function(t){this.selectedCategoryArrayId=t.detail.index}},{key:"_selectedCategoryChanged",value:function(){this.selectedCategoryArrayId&&this.group&&this.group.Categories&&(this.selectedCategoryId=this.group.Categories[this.selectedCategoryArrayId].id)}},{key:"getPositionInArrayFromId",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n].id==e)return n}},{key:"_postChanged",value:function(){this.newPost&&this.post&&(this.post.location&&(this.location=this.post.location,this.encodedLocation=JSON.stringify(this.location)),this.post.cover_media_type&&(this.selectedCoverMediaType=this.post.cover_media_type)),this._updateEmojiBindings()}},{key:"_updateInitialCategory",value:function(t){t&&this.post&&this.post.category_id&&t.Categories&&(this.selectedCategoryId=this.post.category_id,this.selectedCategoryArrayId=this.getPositionInArrayFromId(t.Categories,this.post.category_id))}},{key:"_imageUploaded",value:function(t){var e=JSON.parse(t.detail.xhr.response);this.uploadedHeaderImageId=e.id}},{key:"_redirectAfterVideo",value:(o=c(l.mark((function t(e){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.post=e,t.next=3,window.serverApi.completeMediaPost("videos","PUT",this.post.id,{videoId:this.uploadedVideoId,appLanguage:this.language});case 3:this._finishRedirect(e),setTimeout((function(){window.appGlobals.showSpeechToTextInfoIfNeeded()}),20);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_redirectAfterAudio",value:(e=c(l.mark((function t(e){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.post=e,t.next=3,window.serverApi.completeMediaPost("audios","PUT",this.post.id,{audioId:this.uploadedAudioId,appLanguage:this.language});case 3:this._finishRedirect(e),setTimeout((function(){window.appGlobals.showSpeechToTextInfoIfNeeded()}),20);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"customRedirect",value:function(t){t?(t.newEndorsement&&window.appUser&&window.appUser.endorsementPostsIndex&&(window.appUser.endorsementPostsIndex[t.id]=t.newEndorsement),this.uploadedVideoId?this._redirectAfterVideo(t):this.uploadedAudioId&&this.newPost?this._redirectAfterAudio(t):this._finishRedirect(t)):console.warn("No post found on custom redirect")}},{key:"_finishRedirect",value:function(t){var e;this.fire("yp-reset-keep-open-for-page"),window.appGlobals.activity("completed","newPost");var n=this.t("thankYouForYourSubmission"),i=this.$$("#customThankYouTextNewPostsId");this.group&&this.group.configuration&&this.group.configuration.customThankYouTextNewPosts&&i&&i.content&&(n=i.finalContent?i.finalContent:i.content),window.appDialogs.getDialogAsync("mastersnackbar",(function(t){t.textContent=n,t.timeoutMs=5e3,t.open=!0})),this.group&&this.group.configuration&&this.group.configuration.allPostsBlockedByDefault||T.redirectTo("/post/"+(t?t.id:null===(e=this.post)||void 0===e?void 0:e.id))}},{key:"clear",value:function(){this.newPost&&(this.post={name:"",description:"",pointFor:"",categoryId:void 0},this.location=void 0,this.selectedCategoryArrayId=void 0,this.selectedCategoryId=void 0,this.selected=0,this.uploadedHeaderImageId=void 0,this.uploadedVideoId=void 0,this.uploadedAudioId=void 0,this.currentVideoId=void 0,this.currentAudioId=void 0,this.selectedCoverMediaType="none",this.requestUpdate(),this.$$("#imageFileUpload")&&this.$$("#imageFileUpload").clear())}},{key:"setup",value:function(t,e,n,i){this._setupGroup(i),t?(this.post=t,t.PostVideos&&t.PostVideos.length>0&&(this.currentVideoId=t.PostVideos[0].id),t.PostAudios&&t.PostAudios.length>0&&(this.currentAudioId=t.PostAudios[0].id)):this.post=void 0,this._updateInitialCategory(i),this.newPost=e,this.refreshFunction=n,this.setupTranslation(),this.clear()}},{key:"_setupGroup",value:function(t){var e=this;t&&(this.group=t,t.configuration?(t.configuration.locationHidden&&1==t.configuration.locationHidden?this.locationHidden=!0:this.locationHidden=!1,t.configuration.postDescriptionLimit?this.postDescriptionLimit=t.configuration.postDescriptionLimit:this.postDescriptionLimit=500,t.configuration.structuredQuestionsJson&&setTimeout((function(){e.liveQuestionIds=[],e.uniqueIdsToElementIndexes={},e.liveUniqueIds=[],t.configuration.structuredQuestionsJson.forEach((function(t,n){"textfield"!==t.type.toLowerCase()&&"textfieldlong"!==t.type.toLowerCase()&&"textarea"!==t.type.toLowerCase()&&"textarealong"!==t.type.toLowerCase()&&"numberfield"!==t.type.toLowerCase()&&"checkboxes"!==t.type.toLowerCase()&&"radios"!==t.type.toLowerCase()&&"dropdown"!==t.type.toLowerCase()||(e.liveQuestionIds.push(n),e.uniqueIdsToElementIndexes[t.uniqueId]=n,e.liveUniqueIds.push(t.uniqueId))}))}))):this.postDescriptionLimit=500,setTimeout((function(){e.structuredQuestions&&(e.postDescriptionLimit=9999)}),50))}},{key:"setupAfterOpen",value:function(t){var e=this;this._setupGroup(t.group),setTimeout((function(){var t=e.$$("#name");t&&t.focus()}),250),this.post&&!this.newPost&&this.post.public_data&&this.post.public_data.structuredAnswersJson&&(this.initialStructuredAnswersJson=this.post.public_data.structuredAnswersJson)}},{key:"_alternativeTextForNewIdeaButtonHeaderTranslation",value:function(){var t=this;setTimeout((function(){var e=t.$$("#alternativeTextForNewIdeaButtonHeaderId");e&&e.finalContent&&(t.editHeaderText=e.finalContent)}))}},{key:"setupTranslation",value:function(){var t=this;setTimeout((function(){if(t.t)if(t.newPost){if(t.group&&t.group.configuration&&t.group.configuration.alternativeTextForNewIdeaButtonHeader){var e=t.$$("#alternativeTextForNewIdeaButtonHeaderId");t.editHeaderText=e&&e.finalContent?e.finalContent:t.group.configuration.alternativeTextForNewIdeaButtonHeader}else t.editHeaderText=t.t("post.new");t.snackbarText=t.t("postCreated"),t.saveText=t.t("create")}else t.saveText=t.t("save"),t.editHeaderText=t.t("post.edit"),t.snackbarText=t.t("postUpdated")}),20)}},{key:"titleQuestionText",get:function(){return this.post&&this.group&&this.customTitleQuestionText?this.customTitleQuestionText:this.post&&this.group&&this.group.configuration&&this.group.configuration.customTitleQuestionText?this.group.configuration.customTitleQuestionText:this.t("title")}},{key:"_pointPageHidden",get:function(){return!this.newPointShown||this.selected!==Tt.Point}},{key:"_mediaPageHidden",get:function(){return!!this.mediaHidden||(!(!this.newPointShown||this.locationHidden||this.selected===Tt.Media)||(!(!this.newPointShown||!this.locationHidden||this.selected===Tt.Media-1)||(!(this.newPointShown||!this.locationHidden||this.selected===Tt.Media-2)||!this.newPointShown&&!this.locationHidden&&this.selected!==Tt.Media-1)))}},{key:"replacedName",get:function(){var t=this.post,e=this.group;if(t&&e&&e.configuration.hideNameInputAndReplaceWith){var n=e.configuration.hideNameInputAndReplaceWith;return n=(n=(n=n.replace("<DATESECONDS>",_(new Date).format("DD/MM/YYYY hh:mm:ss"))).replace("<DATEMINUTES>",_(new Date).format("DD/MM/YYYY hh:mm"))).replace("<DATE>",_(new Date).format("DD/MM/YYYY"))}return null}},{key:"pointMaxLength",get:function(){var t=this.group;return t&&t.configuration&&t.configuration.pointCharLimit?t.configuration.pointCharLimit:500}},{key:"newPointShown",get:function(){var t=!1;return this.group&&this.group.configuration&&!0===this.group.configuration.hideNewPointOnNewIdea&&(t=!0),this.newPost&&!t}},{key:"showVideoCover",get:function(){return this.uploadedVideoId||this.currentVideoId}},{key:"showAudioCover",get:function(){return this.uploadedAudioId||this.currentAudioId}},{key:"showCategories",get:function(){return!(!this.group||!this.group.Categories)&&this.group.Categories.length>0}},{key:"mediaHidden",get:function(){return!(!this.group||!this.group.configuration||!0!==this.group.configuration.hideMediaInput)}}],[{key:"styles",get:function(){return[u(s(p),"styles",this),w(J||(J=_t()))]}}]),p}(C),v([y({type:String})],Ct.prototype,"action",void 0),v([y({type:Boolean})],Ct.prototype,"newPost",void 0),v([y({type:Number})],Ct.prototype,"selectedCategoryArrayId",void 0),v([y({type:Array})],Ct.prototype,"initialStructuredAnswersJson",void 0),v([y({type:Array})],Ct.prototype,"structuredQuestions",void 0),v([y({type:Object})],Ct.prototype,"post",void 0),v([y({type:Object})],Ct.prototype,"group",void 0),v([y({type:Boolean})],Ct.prototype,"locationHidden",void 0),v([y({type:Object})],Ct.prototype,"location",void 0),v([y({type:String})],Ct.prototype,"encodedLocation",void 0),v([y({type:Number})],Ct.prototype,"selectedCategoryId",void 0),v([y({type:Number})],Ct.prototype,"uploadedVideoId",void 0),v([y({type:Number})],Ct.prototype,"uploadedAudioId",void 0),v([y({type:Number})],Ct.prototype,"currentVideoId",void 0),v([y({type:Number})],Ct.prototype,"currentAudioId",void 0),v([y({type:Number})],Ct.prototype,"selected",void 0),v([y({type:Boolean})],Ct.prototype,"mapActive",void 0),v([y({type:Boolean})],Ct.prototype,"hasOnlyOneTab",void 0),v([y({type:Number})],Ct.prototype,"postDescriptionLimit",void 0),v([y({type:String})],Ct.prototype,"sructuredAnswersString",void 0),v([y({type:String})],Ct.prototype,"structuredAnswersJson",void 0),v([y({type:String})],Ct.prototype,"structuredAnswersString",void 0),v([y({type:String})],Ct.prototype,"uploadedDocumentUrl",void 0),v([y({type:String})],Ct.prototype,"uploadedDocumentFilename",void 0),v([y({type:String})],Ct.prototype,"selectedCoverMediaType",void 0),v([y({type:Number})],Ct.prototype,"uploadedHeaderImageId",void 0),v([y({type:String})],Ct.prototype,"customTitleQuestionText",void 0),Ct=v([b("yp-post-edit")],Ct)}}}));
