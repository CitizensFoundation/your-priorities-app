# Model: PointQuality

Represents the quality assessment of a point in the system. Each record tracks a user's evaluation of a point, including metadata such as IP address, user agent, and additional data. Soft deletion is implemented via the `deleted` flag.

## Properties

| Name         | Type      | Description                                                                 |
|--------------|-----------|-----------------------------------------------------------------------------|
| id           | integer   | Primary key (auto-generated by Sequelize).                                  |
| value        | integer   | The quality value assigned to the point. Required.                          |
| status       | string    | Status of the quality assessment (e.g., 'approved', 'pending'). Required.   |
| ip_address   | string    | IP address of the user who submitted the quality assessment. Required.      |
| user_agent   | text      | User agent string of the client. Required.                                  |
| deleted      | boolean   | Soft delete flag. If true, the record is considered deleted. Default: false.|
| data         | JSONB     | Optional additional data in JSON format.                                    |
| created_at   | Date      | Timestamp when the record was created.                                      |
| updated_at   | Date      | Timestamp when the record was last updated.                                 |
| point_id     | integer   | Foreign key referencing the associated Point.                               |
| user_id      | integer   | Foreign key referencing the User who made the assessment.                   |

## Table Configuration

- **Table Name:** `point_qualities`
- **Timestamps:** Enabled (`created_at`, `updated_at`)
- **Underscored:** Field names use snake_case in the database.
- **Default Scope:** Only records where `deleted` is `false` are returned by default.
- **Indexes:**
  - On `user_id` and `deleted`
  - On `id` and `deleted`
  - On `deleted` (named `point_qualities_idx_deleted`)

## Associations

| Association Type | Target Model | Foreign Key | Description                                      |
|------------------|--------------|-------------|--------------------------------------------------|
| belongsTo        | Point        | point_id    | Each PointQuality is associated with a Point.    |
| belongsTo        | User         | user_id     | Each PointQuality is associated with a User.     |

## Example

```javascript
const PointQuality = sequelize.define("PointQuality", {
  value: { type: DataTypes.INTEGER, allowNull: false },
  status: { type: DataTypes.STRING, allowNull: false },
  ip_address: { type: DataTypes.STRING, allowNull: false },
  user_agent: { type: DataTypes.TEXT, allowNull: false },
  deleted: { type: DataTypes.BOOLEAN, allowNull: false, defaultValue: false },
  data: { type: DataTypes.JSONB, allowNull: true },
}, {
  underscored: true,
  tableName: 'point_qualities',
  timestamps: true,
  createdAt: 'created_at',
  updatedAt: 'updated_at',
  defaultScope: {
    where: { deleted: false }
  },
  indexes: [
    { fields: ['user_id', 'deleted'] },
    { fields: ['id', 'deleted'] },
    { name: 'point_qualities_idx_deleted', fields: ['deleted'] }
  ]
});
```

## Notes

- The model uses soft deletion via the `deleted` boolean flag. Queries by default exclude deleted records.
- The `data` field allows for flexible, schema-less storage of additional information.
- The model is intended to be used with Sequelize ORM.

## Related Models

- [Point](./Point.md)
- [User](./User.md)

## Export

This model is exported as a function that takes a Sequelize instance and DataTypes, returning the defined model. It is intended for use in Sequelize's model loading system.