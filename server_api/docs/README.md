# Your Priorities Server â€” Backend Developer Documentation

Your Priorities is an open-source digital democracy platform that empowers citizens, communities and governments to crowd-source ideas, deliberate on proposals and make evidence-based policy decisions. The server application you are browsing is a TypeScript &amp; Express.js backend that powers the REST and WebSocket API consumed by the web client, mobile apps and third-party integrations.

Key responsibilities of the server include:

- Authentication, authorization and security
- Business logic for domains, communities, groups, posts, points, users,AI models and AI assistants
- Content moderation and fraud detection
- Analytics aggregation and reporting
- Notification delivery via e-mail, push and in-app channels
- Background workers for long-running and scheduled jobs

## API Documentation

- agents
  - assistants
    - [agentAssistant](agents/assistants/agentAssistant.md)
    - [baseAssistant](agents/assistants/baseAssistant.md)
    - [baseAssistantWithVoice](agents/assistants/baseAssistantWithVoice.md)
    - modes
      - [agentDirectConnection](agents/assistants/modes/agentDirectConnection.md)
      - [agentSelectionMode](agents/assistants/modes/agentSelectionMode.md)
      - [baseAssistantMode](agents/assistants/modes/baseAssistantMode.md)
      - tools
        - [agentTools](agents/assistants/modes/tools/agentTools.md)
        - [baseTools](agents/assistants/modes/tools/baseTools.md)
        - [loginTools](agents/assistants/modes/tools/loginTools.md)
        - models
          - [agents](agents/assistants/modes/tools/models/agents.md)
          - [subscriptions](agents/assistants/modes/tools/models/subscriptions.md)
          - [users](agents/assistants/modes/tools/models/users.md)
        - [navigationTools](agents/assistants/modes/tools/navigationTools.md)
        - [subscriptionTools](agents/assistants/modes/tools/subscriptionTools.md)
        - [workflowConverstationTools](agents/assistants/modes/tools/workflowConverstationTools.md)
    - [voiceAssistant](agents/assistants/voiceAssistant.md)
  - controllers
    - [agentProductController](agents/controllers/agentProductController.md)
    - [agentSubscriptionController](agents/controllers/agentSubscriptionController.md)
    - [assistantsController](agents/controllers/assistantsController.md)
    - [policySynthAgents](agents/controllers/policySynthAgents.md)
  - managers
    - [agentProductManager](agents/managers/agentProductManager.md)
    - [emailInvitesManager](agents/managers/emailInvitesManager.md)
    - [emailTemplateRenderer](agents/managers/emailTemplateRenderer.md)
    - [newAiModelSetup](agents/managers/newAiModelSetup.md)
    - [notificationAgentQueueManager](agents/managers/notificationAgentQueueManager.md)
    - [subscriptionManager](agents/managers/subscriptionManager.md)
    - [workflowConversationManager](agents/managers/workflowConversationManager.md)
  - models
    - [agentProduct](agents/models/agentProduct.md)
    - [agentProductBoosterPurchase](agents/models/agentProductBoosterPurchase.md)
    - [agentProductBundle](agents/models/agentProductBundle.md)
    - [agentProductRun](agents/models/agentProductRun.md)
    - [discount](agents/models/discount.md)
    - [subscription](agents/models/subscription.md)
    - [subscriptionPlan](agents/models/subscriptionPlan.md)
    - [subscriptionUser](agents/models/subscriptionUser.md)
    - testData
      - [createEvolyAgentProduct](agents/models/testData/createEvolyAgentProduct.md)
      - old
        - [updateAgentWorkflowConfiguration](agents/models/testData/old/updateAgentWorkflowConfiguration.md)
      - [setupEvolyAgentProductConfig](agents/models/testData/setupEvolyAgentProductConfig.md)
      - [updateAgentWorkflowConfiguration](agents/models/testData/updateAgentWorkflowConfiguration.md)
    - [workflowConversation](agents/models/workflowConversation.md)
  - tools
    - [setTemplateWorkflowCommunityId](agents/tools/setTemplateWorkflowCommunityId.md)
- [app](app.md)
- [authorization](authorization.md)
- controllers
  - [allOurIdeas](controllers/allOurIdeas.md)
  - [audios](controllers/audios.md)
  - [bulkStatusUpdates](controllers/bulkStatusUpdates.md)
  - [categories](controllers/categories.md)
  - [communities](controllers/communities.md)
  - [domains](controllers/domains.md)
  - [externalIds](controllers/externalIds.md)
  - [groups](controllers/groups.md)
  - [images](controllers/images.md)
  - [index](controllers/index.md)
  - [legacyPages](controllers/legacyPages.md)
  - [legacyPosts](controllers/legacyPosts.md)
  - [legacyUsers](controllers/legacyUsers.md)
  - [nonSpa](controllers/nonSpa.md)
  - [organizations](controllers/organizations.md)
  - [points](controllers/points.md)
  - [posts](controllers/posts.md)
  - [ratings](controllers/ratings.md)
  - [users](controllers/users.md)
  - [videos](controllers/videos.md)
- [deleteUnwantedDeclerations](deleteUnwantedDeclerations.md)
- models
  - [audio](models/audio.md)
  - [bulk_status_update](models/bulk_status_update.md)
  - [campaign](models/campaign.md)
  - [category](models/category.md)
  - [community](models/community.md)
  - [domain](models/domain.md)
  - [endorsement](models/endorsement.md)
  - [general_data_store](models/general_data_store.md)
  - [group](models/group.md)
  - [image](models/image.md)
  - [index](models/index.md)
  - [invite](models/invite.md)
  - [iso_country](models/iso_country.md)
  - [organization](models/organization.md)
  - [page](models/page.md)
  - [point](models/point.md)
  - [point_quality](models/point_quality.md)
  - [point_revision](models/point_revision.md)
  - [post](models/post.md)
  - [post_revision](models/post_revision.md)
  - [post_status_change](models/post_status_change.md)
  - [promotion](models/promotion.md)
  - [rating](models/rating.md)
  - [relationship](models/relationship.md)
  - [request_to_join](models/request_to_join.md)
  - [user](models/user.md)
  - [user_legacy_password](models/user_legacy_password.md)
  - [video](models/video.md)
- scripts
  - bulkStatusUpdates
    - [performUpdateForGroup](scripts/bulkStatusUpdates/performUpdateForGroup.md)
  - change
    - [setUseNewVersion](scripts/change/setUseNewVersion.md)
  - cleanups
    - [deleteAnonNotifications](scripts/cleanups/deleteAnonNotifications.md)
    - [deleteYearOldNotifications](scripts/cleanups/deleteYearOldNotifications.md)
  - keys
    - [addOidcToDomain](scripts/keys/addOidcToDomain.md)
  - [setAdminOnAll](scripts/setAdminOnAll.md)
  - [setDomainAdmin](scripts/setDomainAdmin.md)
  - [setEarlQuestionIdOnGroup](scripts/setEarlQuestionIdOnGroup.md)
  - [userScripts](scripts/userScripts.md)
- [server](server.md)
- services
  - controllers
    - [activities](services/controllers/activities.md)
    - [news_feeds](services/controllers/news_feeds.md)
    - [notifications](services/controllers/notifications.md)
    - [recommendations](services/controllers/recommendations.md)
  - engine
    - allOurIdeas
      - [aiHelper](services/engine/allOurIdeas/aiHelper.md)
      - [explainAnswersAssistant](services/engine/allOurIdeas/explainAnswersAssistant.md)
      - [iconGenerator](services/engine/allOurIdeas/iconGenerator.md)
    - analytics
      - [manager](services/engine/analytics/manager.md)
      - plausible
        - [manager](services/engine/analytics/plausible/manager.md)
      - [statsCalc](services/engine/analytics/statsCalc.md)
      - [utils](services/engine/analytics/utils.md)
    - marketing
      - [campaign](services/engine/marketing/campaign.md)
    - moderation
      - fraud
        - [CreateFraudAuditReport](services/engine/moderation/fraud/CreateFraudAuditReport.md)
        - [FraudBase](services/engine/moderation/fraud/FraudBase.md)
        - [FraudDeleteBase](services/engine/moderation/fraud/FraudDeleteBase.md)
        - [FraudDeleteEndorsements](services/engine/moderation/fraud/FraudDeleteEndorsements.md)
        - [FraudDeletePointQualities](services/engine/moderation/fraud/FraudDeletePointQualities.md)
        - [FraudDeletePoints](services/engine/moderation/fraud/FraudDeletePoints.md)
        - [FraudDeletePosts](services/engine/moderation/fraud/FraudDeletePosts.md)
        - [FraudDeleteRatings](services/engine/moderation/fraud/FraudDeleteRatings.md)
        - [FraudGetBase](services/engine/moderation/fraud/FraudGetBase.md)
        - [FraudGetEndorsements](services/engine/moderation/fraud/FraudGetEndorsements.md)
        - [FraudGetPointQualities](services/engine/moderation/fraud/FraudGetPointQualities.md)
        - [FraudGetPoints](services/engine/moderation/fraud/FraudGetPoints.md)
        - [FraudGetPosts](services/engine/moderation/fraud/FraudGetPosts.md)
        - [FraudGetRatings](services/engine/moderation/fraud/FraudGetRatings.md)
        - [FraudScannerNotifier](services/engine/moderation/fraud/FraudScannerNotifier.md)
      - [get_moderation_items](services/engine/moderation/get_moderation_items.md)
      - image_labeling
        - [CommunityLabeling](services/engine/moderation/image_labeling/CommunityLabeling.md)
        - [GroupLabeling](services/engine/moderation/image_labeling/GroupLabeling.md)
        - [ImageLabelingBase](services/engine/moderation/image_labeling/ImageLabelingBase.md)
        - [PointLabeling](services/engine/moderation/image_labeling/PointLabeling.md)
        - [PostLabeling](services/engine/moderation/image_labeling/PostLabeling.md)
      - [perspective_api_client](services/engine/moderation/perspective_api_client.md)
      - [process_moderation_items](services/engine/moderation/process_moderation_items.md)
      - [toxicity_analysis](services/engine/moderation/toxicity_analysis.md)
    - news_feeds
      - [activity_and_item_index_definitions](services/engine/news_feeds/activity_and_item_index_definitions.md)
      - [generate_dynamically](services/engine/news_feeds/generate_dynamically.md)
      - [generate_from_notifications](services/engine/news_feeds/generate_from_notifications.md)
      - [news_feeds_utils](services/engine/news_feeds/news_feeds_utils.md)
    - notifications
      - [emails_utils](services/engine/notifications/emails_utils.md)
      - [generate_point_notifications](services/engine/notifications/generate_point_notifications.md)
      - [generate_post_notifications](services/engine/notifications/generate_post_notifications.md)
      - [generate_post_status_change_notifications](services/engine/notifications/generate_post_status_change_notifications.md)
      - [notifications_utils](services/engine/notifications/notifications_utils.md)
      - [point_delivery](services/engine/notifications/point_delivery.md)
      - [post_delivery](services/engine/notifications/post_delivery.md)
      - [process_delayed_notifications](services/engine/notifications/process_delayed_notifications.md)
      - [process_general_notifications](services/engine/notifications/process_general_notifications.md)
    - recommendations
      - [events_importer](services/engine/recommendations/events_importer.md)
      - [events_manager](services/engine/recommendations/events_manager.md)
    - reports
      - [add_points_to_sheet](services/engine/reports/add_points_to_sheet.md)
      - [commonUtils](services/engine/reports/commonUtils.md)
      - [common_utils](services/engine/reports/common_utils.md)
      - [docx_group_report](services/engine/reports/docx_group_report.md)
      - [xlsAllOurIdeasExport](services/engine/reports/xlsAllOurIdeasExport.md)
      - [xls_community_users_report](services/engine/reports/xls_community_users_report.md)
      - [xls_group_report](services/engine/reports/xls_group_report.md)
  - llms
    - [baseChatBot](services/llms/baseChatBot.md)
    - imageGeneration
      - [chatGptImageGenerator](services/llms/imageGeneration/chatGptImageGenerator.md)
      - [collectionImageGenerator](services/llms/imageGeneration/collectionImageGenerator.md)
      - [dalleImageGenerator](services/llms/imageGeneration/dalleImageGenerator.md)
      - [fluxImageGenerator](services/llms/imageGeneration/fluxImageGenerator.md)
      - [iImageGenerator](services/llms/imageGeneration/iImageGenerator.md)
      - [imageProcessorService](services/llms/imageGeneration/imageProcessorService.md)
      - [imagenImageGenerator](services/llms/imageGeneration/imagenImageGenerator.md)
      - [s3Service](services/llms/imageGeneration/s3Service.md)
    - [llmTranslation](services/llms/llmTranslation.md)
  - models
    - [ac_activity](services/models/ac_activity.md)
    - [ac_background_job](services/models/ac_background_job.md)
    - [ac_campaign](services/models/ac_campaign.md)
    - [ac_client_activity](services/models/ac_client_activity.md)
    - [ac_delayed_notification](services/models/ac_delayed_notification.md)
    - [ac_following](services/models/ac_following.md)
    - [ac_list](services/models/ac_list.md)
    - [ac_list_users](services/models/ac_list_users.md)
    - [ac_mute](services/models/ac_mute.md)
    - [ac_news_feed_item](services/models/ac_news_feed_item.md)
    - [ac_news_feed_processed_range](services/models/ac_news_feed_processed_range.md)
    - [ac_notification](services/models/ac_notification.md)
    - [ac_translation_cache](services/models/ac_translation_cache.md)
    - [ac_watching](services/models/ac_watching.md)
  - scripts
    - analytics
      - [setup_all_plausible_goals](services/scripts/analytics/setup_all_plausible_goals.md)
  - utils
    - [airbrake](services/utils/airbrake.md)
    - [get_anonymous_system_user](services/utils/get_anonymous_system_user.md)
    - [i18n](services/utils/i18n.md)
    - [logger](services/utils/logger.md)
    - [redisConnection](services/utils/redisConnection.md)
    - [to_json](services/utils/to_json.md)
    - [translation_cloning](services/utils/translation_cloning.md)
    - [translation_helpers](services/utils/translation_helpers.md)
    - [truncate_text](services/utils/truncate_text.md)
    - [updateAllLocalesFromEn](services/utils/updateAllLocalesFromEn.md)
    - [updateLocaleFolders](services/utils/updateLocaleFolders.md)
  - workers
    - [activity](services/workers/activity.md)
    - [anonymizations](services/workers/anonymizations.md)
    - [bulk_status_update](services/workers/bulk_status_update.md)
    - [delayed_jobs](services/workers/delayed_jobs.md)
    - [deletions](services/workers/deletions.md)
    - [email](services/workers/email.md)
    - [fraud_management](services/workers/fraud_management.md)
    - [generativeAi](services/workers/generativeAi.md)
    - [main](services/workers/main.md)
    - [marketing](services/workers/marketing.md)
    - [moderation](services/workers/moderation.md)
    - [notification_delivery](services/workers/notification_delivery.md)
    - [notification_news_feed](services/workers/notification_news_feed.md)
    - [queue](services/workers/queue.md)
    - [recount](services/workers/recount.md)
    - [reports](services/workers/reports.md)
    - [similarities](services/workers/similarities.md)
    - [speech_to_text](services/workers/speech_to_text.md)
- utils
  - [airbrake](utils/airbrake.md)
  - [cjsCodeReview](utils/cjsCodeReview.md)
  - [community_mapping_tools](utils/community_mapping_tools.md)
  - [copy_utils](utils/copy_utils.md)
  - [docx_utils](utils/docx_utils.md)
  - [export_utils](utils/export_utils.md)
  - [generateDocumentation](utils/generateDocumentation.md)
  - [i18n](utils/i18n.md)
  - [is_valid_db_id](utils/is_valid_db_id.md)
  - [logger](utils/logger.md)
  - [loggerTs](utils/loggerTs.md)
  - [manifest_generator](utils/manifest_generator.md)
  - [parse_domain](utils/parse_domain.md)
  - [recount_utils](utils/recount_utils.md)
  - [seedModels](utils/seedModels.md)
  - [sharing_parameters](utils/sharing_parameters.md)
  - [sitemap_generator](utils/sitemap_generator.md)
  - [to_json](utils/to_json.md)
  - [ypLanguages](utils/ypLanguages.md)
- [webSockets](webSockets.md)
