# Model: AcNewsFeedProcessedRange

Represents a processed range of activities in the news feed, tracking the oldest and latest activity timestamps for a given domain, community, group, post, or user. This model is used to manage and query which ranges of the news feed have been processed, supporting efficient incremental processing and avoiding duplication.

## Properties

| Name                | Type      | Description                                                                 |
|---------------------|-----------|-----------------------------------------------------------------------------|
| id                  | number    | Primary key (auto-generated by Sequelize).                                  |
| latest_activity_at  | Date      | The timestamp of the latest activity in the processed range.                |
| oldest_activity_at  | Date      | The timestamp of the oldest activity in the processed range.                |
| status              | string    | Status of the range (default: `'active'`).                                 |
| deleted             | boolean   | Soft-delete flag (default: `false`).                                        |
| created_at          | Date      | Timestamp when the record was created.                                      |
| updated_at          | Date      | Timestamp when the record was last updated.                                 |
| domain_id           | number    | Foreign key referencing the associated Domain.                              |
| community_id        | number    | Foreign key referencing the associated Community.                           |
| group_id            | number    | Foreign key referencing the associated Group.                               |
| post_id             | number    | Foreign key referencing the associated Post.                                |
| user_id             | number    | Foreign key referencing the associated User.                                |

## Configuration

- **Table Name:** `ac_news_feed_processed_ranges`
- **Timestamps:** Enabled (`created_at`, `updated_at`)
- **Underscored:** `true` (column names use snake_case)
- **Default Scope:** Only includes records where `status = 'active'` and `deleted = false`.

## Indexes

| Name                    | Fields                                 | Condition                                 |
|-------------------------|----------------------------------------|-------------------------------------------|
| (unnamed, on id)        | `id`                                   | `deleted = false`                         |
| latest_at_oldest_at     | `latest_activity_at`, `oldest_activity_at` | `status = 'active'` and `deleted = false` |
| (unnamed, on latest)    | `latest_activity_at`                   | `status = 'active'` and `deleted = false` |
| (unnamed, on oldest)    | `oldest_activity_at`                   | `status = 'active'` and `deleted = false` |

## Associations

| Association Type | Target Model | Foreign Key   | Description                                      |
|------------------|--------------|--------------|--------------------------------------------------|
| belongsTo        | Domain       | domain_id    | The domain this processed range belongs to.       |
| belongsTo        | Community    | community_id | The community this processed range belongs to.    |
| belongsTo        | Group        | group_id     | The group this processed range belongs to.        |
| belongsTo        | Post         | post_id      | The post this processed range belongs to.         |
| belongsTo        | User         | user_id      | The user this processed range belongs to.         |

> **Note:** The associated models (`Domain`, `Community`, `Group`, `Post`, `User`) must be defined in your Sequelize models directory.

## Example

```javascript
// Creating a new processed range
const range = await AcNewsFeedProcessedRange.create({
  latest_activity_at: new Date(),
  oldest_activity_at: new Date(Date.now() - 1000 * 60 * 60),
  domain_id: 1,
  community_id: 2,
  group_id: 3,
  post_id: 4,
  user_id: 5
});
```

## Usage Notes

- The model is designed for soft-deletion (`deleted` flag) and status management.
- Default queries will only return active, non-deleted records due to the default scope.
- Indexes are optimized for querying by activity timestamps and status.

---

**See also:**  
- [Domain](./Domain.md)  
- [Community](./Community.md)  
- [Group](./Group.md)  
- [Post](./Post.md)  
- [User](./User.md)  
