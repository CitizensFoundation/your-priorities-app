<div hidden=""by-polymer-bundler=""><dom-module id="yp-users-grid"assetpath="../yp-user/"><template><style include="iron-flex iron-flex-alignment">#dialog{width:90%;max-width:1024px;background-color:#FFF;}iron-list{color:#000;height:500px;width:100%;}.userItem{padding-right:16px;}.id{width:40px;}.name{width:200px;}.email{width:190px;overflow-wrap:break-word;}.organization{width:150px;}.addRemoveButtons{width:150px;}#selectOrganizationDialog{background-color:#FFF;}[hidden]{display:none !important;}paper-listbox{margin-right:8px !important;}.headerBox{background-color:var(--accent-color);color:#FFF;margin:0;padding:0 0;padding-top:12px;padding-bottom:10px;}paper-button{margin-left:24px;}.inputBox{margin-left:16px;padding-left:8px;padding-right:8px;padding-bottom:4px;margin-bottom:4px;align-self:flex-start;background-color:#FFF;color:#000;margin-top:2px;margin-right:12px;}#grid{margin-top:0;margin-bottom:0;}.headerText{padding:0 0 !important;}.collectionName{font-size:22px;margin-bottom:1px;margin-top:4px;}.innerHeader{font-size:17px;color:#F5F5F5;}.closeButton{width:50px;height:50px;margin-left:4px;margin-right:4px;}@media (max-width: 600px){.closeButton{width:45px;height:45px;}.inputBox{margin-top:6px;}paper-listbox{margin-right:8px;}#dialog{width:100%;height:100%;margin:0;}.headerText{font-size:20px;line-height:1.2em;text-align:center;}}paper-spinner{margin-left:16px;margin-top:8px;--paper-spinner-layer-1-color:#FFF;--paper-spinner-layer-2-color:#FFF;--paper-spinner-layer-3-color:#FFF;--paper-spinner-layer-4-color:#FFF;}.inviteButton{margin-top:24px;height:48px;margin-right:8px;}@media (max-width: 600px){.inviteButton{margin-top:4px;margin-bottom:12px;height:48px;margin-right:8px;}}.typeOfInvite{margin-left:4px;margin-top:6px;margin-bottom:6px;}.emailClass{margin-left:6px;margin-right:6px;}</style><lite-signal on-lite-signal-yp-language="_languageEvent"></lite-signal><paper-dialog id="selectOrganizationDialog"modal=""><h2>[[t('users.selectOrganization')]]</h2><paper-dialog-scrollable><paper-listbox><template is="dom-repeat"items="[[availableOrganizations]]"><paper-item on-tap="_selectOrganization"id="[[item.id]]">[[item.name]]</paper-item></template></paper-listbox></paper-dialog-scrollable><div class="buttons"><paper-button dialog-dismiss="">[[t('Close')]]</paper-button></div></paper-dialog><paper-dialog id="dialog"modal=""><div class="layout horizontal headerBox wrap"><div><paper-icon-button aria-label$="[[t('close')]]"id="dismissBtn"icon="close"class="closeButton"dialog-dismiss=""></paper-icon-button></div><div class="headerText layout vertical"><div class="layout horizontal"><div class="collectionName">[[collectionName]]</div></div><div class="innerHeader">[[headerText]] <span hidden$="[[!totalUserCount]]">([[totalUserCount]])</span></div></div><div hidden$="[[!spinnerActive]]"><paper-spinner active=""></paper-spinner></div><div class="flex"></div><div hidden$="[[!showReload]]"><paper-icon-button aria-label$="[[t('reload')]]"icon="autorenew"class="closeButton"on-tap="_reload"></paper-icon-button></div><div hidden$="[[domainId]]"><paper-material hidden$="[[!isRegularUsers]]"class="layout horizontal wrap inputBox"><paper-input label="[[t('email')]]"class="emailClass"value="{{inviteUserEmail}}"></paper-input><paper-radio-group id="typeOfInvite"name="typeOfInvite"class="typeOfInvite layout vertical"selected="{{inviteType}}"><paper-radio-button name="sendInviteByEmail">[[t('sendInviteByEmail')]]</paper-radio-button><paper-radio-button name="addUserDirectly">[[t('addUserDirectlyIfExist')]]</paper-radio-button></paper-radio-group><paper-button class="inviteButton"raised=""on-tap="_inviteUser">[[t('users.inviteUser')]]</paper-button></paper-material></div><paper-material hidden$="[[!adminUsers]]"class="layout horizontal wrap inputBox"><paper-input label="[[t('email')]]"class="emailClass"value="{{addAdminEmail}}"></paper-input><paper-button class="inviteButton"on-tap="_addAdmin">[[t('users.addAdmin')]]</paper-button></paper-material><paper-material hidden$="[[!promotionUsers]]"class="layout horizontal wrap inputBox"><paper-input label="[[t('email')]]"class="emailClass"value="{{addPromotionEmail}}"></paper-input><paper-button class="inviteButton"on-tap="_addPromotionUser">[[t('addPromotionUser')]]</paper-button></paper-material></div><vaadin-grid id="grid"aria-label$="[[headerText]]"items="[[users]]"selected-items="{{selectedUsers}}"><vaadin-grid-selection-column auto-select=""></vaadin-grid-selection-column><vaadin-grid-column width="60px"flex-grow="0"><template class="header">#</template><template>[[item.id]]</template></vaadin-grid-column><vaadin-grid-filter-column flex-grow="2"width="140px"path="name"header="[[t('name')]]"><template>[[item.name]]</template></vaadin-grid-filter-column><vaadin-grid-filter-column path="email"flex-grow="1"width="150px"header="[[t('email')]]"><template>[[item.email]]</template></vaadin-grid-filter-column><vaadin-grid-column flex-grow="1"width="150px"><template class="header">[[t('organization')]]</template><template><div class="organization"hidden$="[[!_userOrganizationName(item)]]"><div class="organizationName">[[_userOrganizationName(item)]]</div></div></template></vaadin-grid-column><vaadin-grid-column width="70px"flex-grow="0"><template class="header"><paper-menu-button horizontal-align="right"class="helpButton"disabled$="[[selectedUsersEmpty]]"><paper-icon-button aria-label$="[[t('openSelectedItemsMenu')]]"icon="more-vert"slot="dropdown-trigger"></paper-icon-button><paper-listbox slot="dropdown-content"on-iron-select="_menuSelection"><template is="dom-if"if="[[!selectedUsersEmpty]]"restamp=""><paper-item data-args$="[[item.id]]"hidden$="[[!isRegularUsers]]"on-tap="_removeAndDeleteContentSelectedUsers">[[t('removeSelectedAndDeleteContent')]] [[selectedUsersCount]]</paper-item><paper-item data-args$="[[item.id]]"hidden$="[[!isRegularUsers]]"on-tap="_removeSelectedUsersFromCollection"><div hidden$="[[!groupId]]">[[t('removeSelectedFromGroup')]] [[selectedUsersCount]]</div><div hidden$="[[!communityId]]">[[t('removeSelectedFromCommunity')]] [[selectedUsersCount]]</div><div hidden$="[[!domainId]]">[[t('removeSelectedFromDomain')]] [[selectedUsersCount]]</div></paper-item><paper-item data-args$="[[item.id]]"hidden$="[[!adminUsers]]"on-tap="_removeSelectedAdmins">[[t('removeSelectedAdmins')]] [[selectedUsersCount]]</paper-item><paper-item data-args$="[[item.id]]"hidden$="[[!promotionUsers]]"on-tap="_removeSelectedPromotionUsers">[[t('removeSelectedPromotionUsers')]] [[selectedUsersCount]]</paper-item></template></paper-listbox></paper-menu-button></template><template><paper-menu-button horizontal-align="right"class="helpButton"><paper-icon-button aria-label$="[[t('openOneItemMenu')]]"icon="more-vert"data-args$="[[item.id]]"on-tap="_setSelected"slot="dropdown-trigger"></paper-icon-button><paper-listbox slot="dropdown-content"on-iron-select="_menuSelection"><paper-item data-args$="[[item.id]]"hidden$="[[adminUsers]]"on-tap="_removeUserFromCollection"><div hidden$="[[!groupId]]">[[t('removeFromGroup')]]</div><div hidden$="[[!communityId]]">[[t('removeFromCommunity')]]</div><div hidden$="[[!domainId]]">[[t('removeFromDomain')]]</div></paper-item><paper-item data-args$="[[item.id]]"hidden$="[[adminUsers]]"on-tap="_removeAndDeleteUserContent"><div hidden$="[[!groupId]]">[[t('removeFromGroupDeleteContent')]]</div><div hidden$="[[!communityId]]">[[t('removeFromCommunityDeleteContent')]]</div><div hidden$="[[!domainId]]">[[t('removeFromDomainDeleteContent')]]</div></paper-item><paper-item data-args$="[[item.id]]"hidden$="[[!adminUsers]]"on-tap="_removeAdmin">[[t('users.removeAdmin')]]</paper-item><paper-item data-args$="[[item.id]]"hidden$="[[!promotionUsers]]"on-tap="_removePromotionUser">[[t('removePromotionUser')]]</paper-item><paper-item data-args$="[[item.id]]"hidden$="[[_userOrganizationName(item)]]"on-tap="_addToOrganization">[[t('users.addToOrganization')]]</paper-item><paper-item data-args$="[[item.id]]"hidden$="[[!_userOrganizationName(item)]]"data-args-org$="[[_userOrganizationId(item)]]"on-tap="_removeFromOrganization">[[t('users.removeFromOrganization')]]</paper-item></paper-listbox></paper-menu-button></template></vaadin-grid-column></vaadin-grid></paper-dialog><div class="layout horizontal center-center"><yp-ajax id="ajax"on-response="_usersResponse"></yp-ajax><yp-ajax method="DELETE"on-error="_ajaxError"id="removeAdminAjax"on-response="_removeAdminResponse"></yp-ajax><yp-ajax method="DELETE"on-error="_ajaxError"id="removeManyAdminAjax"on-response="_removeManyAdminResponse"></yp-ajax><yp-ajax method="DELETE"on-error="_ajaxError"id="removeUserAjax"on-response="_removeUserResponse"></yp-ajax><yp-ajax method="DELETE"on-error="_ajaxError"id="removeManyUsersAjax"on-response="_removeManyUsersResponse"></yp-ajax><yp-ajax method="DELETE"on-error="_ajaxError"id="removeOrganizationAjax"on-response="_removeOrganizationResponse"></yp-ajax><yp-ajax method="DELETE"on-error="_ajaxError"id="removeAndDeleteAjax"on-response="_removeAndDeleteCompleted"></yp-ajax><yp-ajax method="DELETE"on-error="_ajaxError"id="removeAndDeleteManyAjax"on-response="_removeAndDeleteManyCompleted"></yp-ajax><yp-ajax method="POST"on-error="_ajaxError"id="inviteUserAjax"on-response="_inviteUserResponse"></yp-ajax><yp-ajax method="POST"on-error="_ajaxError"id="addAdminAjax"on-response="_addAdminResponse"></yp-ajax><yp-ajax method="POST"on-error="_ajaxError"id="addOrganizationAjax"on-response="_addOrganizationResponse"></yp-ajax></div></template><script>Polymer({is:"yp-users-grid",behaviors:[Polymer.ypLanguageBehavior,Polymer.ypNumberFormatBehavior],properties:{addAdminEmail:{type:String},inviteUserEmail:{type:String},users:{type:Array,notify:!0,value:null},headerText:{type:String},groupId:{type:Number,observer:"_groupIdChanged"},domainId:{type:Number,observer:"_domainIdChanged"},communityId:{type:Number,observer:"_communityIdChanged"},adminUsers:{type:Boolean,value:!1},promotionUsers:{type:Boolean,value:!1},selected:{type:Object},modelType:{type:String},opened:{type:Boolean,value:!1},availableOrganizations:{type:Array},userIdForSelectingOrganization:Number,selectedUsers:{type:Array,notify:!0},selectedUsersCount:{type:Number,value:0},selectedUsersEmpty:{type:Boolean,value:!0},selectedUserIds:{type:Array},selectedUserId:{type:String},totalUserCount:{type:String,computed:"_totalUserCount(users)"},collectionName:String,usersCountText:String,showReload:{type:Boolean,value:!1},forceSpinner:{type:Boolean,value:!1},spinnerActive:{type:Boolean,computed:"_spinnerActive(totalUserCount, forceSpinner)"},inviteType:{type:String,value:"sendInviteByEmail"},isRegularUsers:{type:Boolean,computed:"_isRegularUsers(adminUsers, promotionUsers)"}},observers:["_selectedUsersChanged(selectedUsers.splices)"],_isRegularUsers:function(e,t){return!e&&!t},_spinnerActive:function(e,t){return!e||t},_ajaxError:function(){this.set("forceSpinner",!1)},ready:function(){this._setGridSize(),window.addEventListener("resize",this._resizeThrottler.bind(this),!1)},_reload:function(){this.$.ajax.generateRequest(),this.set("forceSpinner",!0)},_resizeThrottler:function(){this.resizeTimeout||(this.resizeTimeout=setTimeout(function(){this.resizeTimeout=null,this._setGridSize()}.bind(this),66))},_setGridSize:function(){window.innerWidth<=600?this.$.grid.style.height=window.innerHeight.toFixed()+"px":this.$.grid.style.height=(.8*window.innerHeight).toFixed()+"px"},_menuSelection:function(){this.$.grid.querySelectorAll("paper-listbox").forEach(function(e){e.select(null)})},_totalUserCount:function(e){return e?this.formatNumber(e.length):null},_selectedUsersChanged:function(){this.selectedUsers&&0<this.selectedUsers.length?(this.set("selectedUsersEmpty",!1),this.set("selectedUsersCount",this.selectedUsers.length)):(this.set("selectedUsersEmpty",!0),this.set("selectedUsersCount",0)),this.selectedUserIds=this.selectedUsers.map(function(e){return e.id})},_userOrganizationId:function(e){return e&&e.OrganizationUsers&&0<e.OrganizationUsers.length?e.OrganizationUsers[0].id:null},_userOrganizationName:function(e){return e&&e.OrganizationUsers&&0<e.OrganizationUsers.length?e.OrganizationUsers[0].name:null},_availableOrganizations:function(){return window.appUser.adminRights&&window.appUser.adminRights.OrganizationAdmins?window.appUser.adminRights.OrganizationAdmins:[]},_addToOrganization:function(e){this.set("userIdForSelectingOrganization",e.target.getAttribute("data-args")),this.set("availableOrganizations",this._availableOrganizations()),this.$.selectOrganizationDialog.open()},_removeFromOrganization:function(e){var t=e.target.getAttribute("data-args"),i=e.target.getAttribute("data-args-org");this.$.removeOrganizationAjax.body={},this.$.removeOrganizationAjax.url="/api/organizations/"+i+"/"+t+"/remove_user",this.$.removeOrganizationAjax.generateRequest()},_selectOrganization:function(e){this.$.addOrganizationAjax.body={},this.$.addOrganizationAjax.url="/api/organizations/"+e.target.id+"/"+this.userIdForSelectingOrganization+"/add_user",this.$.addOrganizationAjax.generateRequest(),this.$.selectOrganizationDialog.close()},_removeAdmin:function(e){var t=e.target.getAttribute("data-args");this.$.removeAdminAjax.body={},"groups"==this.modelType&&this.groupId?(this.$.removeAdminAjax.url="/api/"+this.modelType+"/"+this.groupId+"/"+t+"/remove_admin",this.$.removeAdminAjax.generateRequest()):"communities"==this.modelType&&this.communityId?(this.$.removeAdminAjax.url="/api/"+this.modelType+"/"+this.communityId+"/"+t+"/remove_admin",this.$.removeAdminAjax.generateRequest()):"domains"==this.modelType&&this.domainId?(this.$.removeAdminAjax.url="/api/"+this.modelType+"/"+this.domainId+"/"+t+"/remove_admin",this.$.removeAdminAjax.generateRequest()):console.warn("Can't find model type or ids")},_removePromotionUser:function(e){var t=e.target.getAttribute("data-args");this.$.removeAdminAjax.body={},"groups"==this.modelType&&this.groupId?(this.$.removeAdminAjax.url="/api/"+this.modelType+"/"+this.groupId+"/"+t+"/remove_promotion_user",this.$.removeAdminAjax.generateRequest()):"communities"==this.modelType&&this.communityId?(this.$.removeAdminAjax.url="/api/"+this.modelType+"/"+this.communityId+"/"+t+"/remove_promotion_user",this.$.removeAdminAjax.generateRequest()):"domains"==this.modelType&&this.domainId?(this.$.removeAdminAjax.url="/api/"+this.modelType+"/"+this.domainId+"/"+t+"/remove_promotion_user",this.$.removeAdminAjax.generateRequest()):console.warn("Can't find model type or ids")},_removeSelectedAdmins:function(e){this._setupUserIdFromEvent(e),Polymer.dom(document).querySelector("yp-app").getDialogAsync("confirmationDialog",function(e){e.open(this.t("areYouSureYouWantToRemoveAdmins"),this._reallyRemoveSelectedAdmins.bind(this),!0,!1)}.bind(this))},_removeAndDeleteContentSelectedUsers:function(e){this._setupUserIdFromEvent(e),Polymer.dom(document).querySelector("yp-app").getDialogAsync("confirmationDialog",function(e){e.open(this.t("areYouSureRemoveAndDeleteSelectedUserContent"),this._reallyRemoveAndDeleteContentSelectedUsers.bind(this),!0,!0)}.bind(this))},_removeSelectedUsersFromCollection:function(e){this._setupUserIdFromEvent(e),Polymer.dom(document).querySelector("yp-app").getDialogAsync("confirmationDialog",function(e){e.open(this.t("areYouSureRemoveSelectedUsers"),this._reallyRemoveSelectedUsersFromCollection.bind(this),!0,!0)}.bind(this))},_removeUserFromCollection:function(e){this._setupUserIdFromEvent(e),Polymer.dom(document).querySelector("yp-app").getDialogAsync("confirmationDialog",function(e){e.open(this.t("areYouSureRemoveUser"),this._reallyRemoveUserFromCollection.bind(this),!0,!1)}.bind(this))},_removeAndDeleteUserContent:function(e){this._setupUserIdFromEvent(e),Polymer.dom(document).querySelector("yp-app").getDialogAsync("confirmationDialog",function(e){e.open(this.t("areYouSureRemoveAndDeleteUser"),this._reallyRemoveAndDeleteUserContent.bind(this),!0,!0)}.bind(this))},_reallyRemoveSelectedAdmins:function(){this._removeMaster(this.$.removeManyAdminAjax,"remove_many_admins",this.selectedUserIds)},_reallyRemoveAndDeleteContentSelectedUsers:function(){this._removeMaster(this.$.removeAndDeleteManyAjax,"remove_many_users_and_delete_content",this.selectedUserIds)},_reallyRemoveSelectedUsersFromCollection:function(){this._removeMaster(this.$.removeManyUsersAjax,"remove_many_users",this.selectedUserIds)},_reallyRemoveUserFromCollection:function(){this._removeMaster(this.$.removeUserAjax,"remove_user")},_reallyRemoveAndDeleteUserContent:function(){this._removeMaster(this.$.removeAndDeleteAjax,"remove_and_delete_user_content")},_setupUserIdFromEvent:function(e){var t=e.target.parentElement.getAttribute("data-args");t=t||e.target.getAttribute("data-args"),this.set("selectedUserId",t)},_removeMaster:function(e,t,i){var s,n;if("groups"===this.modelType&&this.groupId)n=this.groupId;else if("communities"===this.modelType&&this.communityId)n=this.communityId;else{if("domains"!==this.modelType||!this.domainId)return void console.error("Can't find model type or ids");n=this.domainId}if(i&&0<i.length)s="/api/"+this.modelType+"/"+n+"/"+t,e.body={userIds:i};else{if(!this.selectedUserId)return void console.error("No user ids to remove");s="/api/"+this.modelType+"/"+n+"/"+this.selectedUserId+"/"+t,e.body={}}if("groups"===this.modelType&&this.groupId?(e.url=s,e.generateRequest(),this.set("forceSpinner",!0)):"communities"===this.modelType&&this.communityId?(e.url=s,e.generateRequest(),this.set("forceSpinner",!0)):"domains"===this.modelType&&this.domainId?(e.url=s,e.generateRequest(),this.set("forceSpinner",!0)):console.warn("Can't find model type or ids"),this.selectedUserId){var o=this._findUserFromId(this.selectedUserId);o&&this.$.grid.deselectItem(o)}},_setSelected:function(e){var t=this._findUserFromId(e.target.getAttribute("data-args"));t&&this.$.grid.selectItem(t)},_findUserFromId:function(t){var i;return this.users.forEach(function(e){e.id==t&&(i=e)}.bind(this)),i},_addAdmin:function(){this.$.addAdminAjax.body={},"groups"===this.modelType&&this.groupId?(this.$.addAdminAjax.url="/api/"+this.modelType+"/"+this.groupId+"/"+this.addAdminEmail+"/add_admin",this.$.addAdminAjax.generateRequest()):"communities"===this.modelType&&this.communityId?(this.$.addAdminAjax.url="/api/"+this.modelType+"/"+this.communityId+"/"+this.addAdminEmail+"/add_admin",this.$.addAdminAjax.generateRequest()):"domains"===this.modelType&&this.domainId?(this.$.addAdminAjax.url="/api/"+this.modelType+"/"+this.domainId+"/"+this.addAdminEmail+"/add_admin",this.$.addAdminAjax.generateRequest()):console.warn("Can't find model type or ids")},_inviteUser:function(){this.$.inviteUserAjax.body={},"groups"===this.modelType&&this.groupId?(this.$.inviteUserAjax.url="/api/"+this.modelType+"/"+this.groupId+"/"+this.inviteUserEmail+"/invite_user"+("addUserDirectly"===this.inviteType?"?addToGroupDirectly=1":""),this.$.inviteUserAjax.generateRequest()):"communities"===this.modelType&&this.communityId?(this.$.inviteUserAjax.url="/api/"+this.modelType+"/"+this.communityId+"/"+this.inviteUserEmail+"/invite_user"+("addUserDirectly"===this.inviteType?"?addToCommunityDirectly=1":""),this.$.inviteUserAjax.generateRequest()):console.warn("Can't find model type or ids")},_manyItemsResponse:function(e){this.set("forceSpinner",!1),this.set("showReload",!0),e&&window.appGlobals.notifyUserViaToast(this.t("operationInProgressTryReloading"))},_removeAdminResponse:function(){window.appGlobals.notifyUserViaToast(this.t("adminRemoved")),this._reload()},_removeManyAdminResponse:function(){Polymer.dom(document).querySelector("yp-app").getDialogAsync("confirmationDialog",function(e){e.open(this.t("removalsInProgress"),null,!0,!1,!0)}.bind(this)),this._manyItemsResponse()},_removeManyUsersResponse:function(){Polymer.dom(document).querySelector("yp-app").getDialogAsync("confirmationDialog",function(e){e.open(this.t("removalsInProgress"),null,!0,!1,!0)}.bind(this)),this._manyItemsResponse()},_removeAndDeleteCompleted:function(){Polymer.dom(document).querySelector("yp-app").getDialogAsync("confirmationDialog",function(e){e.open(this.t("removalAndDeletionInProgress"),null,!0,!1,!0)}.bind(this)),this._manyItemsResponse()},_removeAndDeleteManyCompleted:function(){Polymer.dom(document).querySelector("yp-app").getDialogAsync("confirmationDialog",function(e){e.open(this.t("removalsAndDeletionsInProgress"),null,!0,!1,!0)}.bind(this)),this._manyItemsResponse()},_removeUserResponse:function(){window.appGlobals.notifyUserViaToast(this.t("userRemoved")),this._reload()},_addAdminResponse:function(){window.appGlobals.notifyUserViaToast(this.t("adminAdded")+" "+this.addAdminEmail),this.set("addAdminEmail",null),this._reload()},_addOrganizationResponse:function(e,t){window.appGlobals.notifyUserViaToast(this.t("organizationUserAdded")+" "+t.response.email),this._reload()},_removeOrganizationResponse:function(e,t){window.appGlobals.notifyUserViaToast(this.t("organizationUserRemoved")+" "+t.response.email),this._reload()},_inviteUserResponse:function(){window.appGlobals.notifyUserViaToast(this.t("users.userInvited")+" "+this.inviteUserEmail),this.set("inviteUserEmail",null),this._reload()},_domainIdChanged:function(e){e&&(this._reset(),this.set("modelType","domains"),this._generateRequest(e))},_groupIdChanged:function(e){e&&(this._reset(),this.set("modelType","groups"),this._generateRequest(e))},_communityIdChanged:function(e){e&&(this._reset(),this.set("modelType","communities"),this._generateRequest(e))},_generateRequest:function(e){var t;t=this.adminUsers?"admin_users":this.promotionUsers?"promotion_users":"users",this.$.ajax.url="/api/"+this.modelType+"/"+e+"/"+t,this.$.ajax.generateRequest()},_usersResponse:function(e,t){this.set("forceSpinner",!1),this.set("users",t.response),this._resetSelectedAndClearCache()},setup:function(e,t,i,s,n){this.set("groupId",null),this.set("communityId",null),this.set("domainId",null),this.set("users",null),this.set("adminUsers",s),this.set("promotionUsers",n),e&&this.set("groupId",e),t&&this.set("communityId",t),i&&this.set("domainId",i),this._setupHeaderText()},open:function(e){this.set("opened",!0),this.set("collectionName",e),this.$.dialog.open()},_reset:function(){this.set("users",null),this._resetSelectedAndClearCache()},_resetSelectedAndClearCache:function(){this.set("selectedUsers",[]),this.set("selectedUsersCount",0),this.set("selectedUsersEmpty",!0),this.$.grid.clearCache()},_setupHeaderText:function(){this.adminUsers?this.set("usersCountText",this.t("adminsCount")):this.set("usersCountText",this.t("usersCount")),this.groupId?this.adminUsers?this.set("headerText",this.t("group.admins")):this.set("headerText",this.t("group.users")):this.communityId?this.adminUsers?this.set("headerText",this.t("community.admins")):this.set("headerText",this.t("community.users")):this.domainId&&(this.adminUsers?this.set("headerText",this.t("domainAdmins")):this.set("headerText",this.t("domainUsers")))}})</script></dom-module></div>